[
  {
    "id:": "4",
    "url": "https://stackoverflow.com/questions/4",
    "title": "Convert Decimal to Double",
    "text:": "<p>I want to use a <code>Track-Bar</code> to change a <code>Form</code>'s opacity.</p>\n\n<p>This is my code:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>decimal trans = trackBar1.Value / 5000;\nthis.Opacity = trans;\n</code></pre>\n\n<p>When I build the application, it gives the following error:</p>\n\n<blockquote>\n  <p>Cannot implicitly convert type <code>decimal</code> to <code>double</code></p>\n</blockquote>\n\n<p>I have tried using <code>trans</code> and <code>double</code> but then the <code>Control</code> doesn't work. This code worked fine in a past VB.NET project.</p>\n",
    "codes": [
      [
        "decimal trans = trackBar1.Value / 5000m;\nthis.Opacity = (double) trans;\n"
      ],
      [
        "// Example 1\ndouble transperancy = trackBar1.Value/5000;\nthis.Opacity = decimal.ToDouble(transperancy);\n\n// Example 2 - with inline temp\nthis.Opacity = decimal.ToDouble(trackBar1.Value/5000);\n"
      ],
      [],
      [
        "Opacity = trackBar1.Value / 5000.0;\n"
      ],
      [],
      [],
      [
        "double trans = trackBar1.Value / 5000.0;\nthis.Opacity = trans;\n",
        "this.Opacity = trackBar1.Value / 5000.0;\n",
        "double trans = trackbar1.Value / 5000;\n"
      ],
      [
        "double trans = trackBar1.Value / 5000.0;\nthis.Opacity = trans;\n",
        "this.Opacity = trackBar1.Value / 5000.0;\n",
        "this.Opacity = trackBar1.Value / 5000d;\n"
      ],
      [
        "this.Opacity = decimal.ToDouble(trackBar1.Value/5000);\n"
      ],
      [
        "this.Opacity = trackBar1.Value / 5000d;\n"
      ],
      [
        "trackBar.Opacity = (double)trackBar.Value / 5000.0;\n"
      ],
      [
        "double trans = (double) trackBar1.Value / 5000.0;\n",
        "double trans = trackBar1.Value / 5000.0;\ndouble trans = trackBar1.Value / 5000d;\n"
      ],
      [
        "private void Form1_Load(object sender, System.EventArgs e)\n{\n    TrackBar1.Minimum = 20;\n    TrackBar1.Maximum = 100;\n\n    TrackBar1.LargeChange = 10;\n    TrackBar1.SmallChange = 1;\n    TrackBar1.TickFrequency = 5;\n}\n\nprivate void TrackBar1_Scroll(object sender, System.EventArgs e)\n{\n    this.Opacity = TrackBar1.Value / 100;\n}\n"
      ]
    ],
    "votes:": "683",
    "tags": "<c#><floating-point><type-conversion><double><decimal>",
    "AcceptedAnswerId": "7",
    "answers": [
      {
        "id": "7263",
        "title": "",
        "text": "<p>Your code worked fine in VB.NET because it implicitly does any casts, while C# has both implicit and explicit ones.</p>\n\n<p>In C# the conversion from decimal to double is explicit as you lose accuracy. For instance 1.1 can't be accurately expressed as a double, but can as a decimal (see \"<a href=\"http://bizvprog.blogspot.com/2008/05/floating-point-numbers-more-inaccurate.html\" rel=\"noreferrer\">Floating point numbers - more inaccurate than you think</a>\" for the reason why).</p>\n\n<p>In VB the conversion was added for you by the compiler:</p>\n\n<pre><code>decimal trans = trackBar1.Value / 5000m;\nthis.Opacity = (double) trans;\n</code></pre>\n\n<p>That <code>(double)</code> has to be explicitly stated in C#, but can be <em>implied</em> by VB's more 'forgiving' compiler.</p>\n",
        "votes": "84",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2791",
        "title": "",
        "text": "<p>In my opinion, it is desirable to be as explicit as possible. This adds clarity to the code and aids your fellow programmers who may eventually read it.</p>\n\n<p>In addition to (or instead of) appending a <code>.0</code> to the number, you can use <code>decimal.ToDouble()</code>.  </p>\n\n<p>Here are some examples:</p>\n\n<pre><code>// Example 1\ndouble transperancy = trackBar1.Value/5000;\nthis.Opacity = decimal.ToDouble(transperancy);\n\n// Example 2 - with inline temp\nthis.Opacity = decimal.ToDouble(trackBar1.Value/5000);\n</code></pre>\n",
        "votes": "60",
        "tags": "",
        "accepted": false
      },
      {
        "id": "86",
        "title": "",
        "text": "<p>A more generic answer for the generic question \"Decimal vs Double?\": <strong>Decimal</strong> for monetary calculations to preserve the precision, <strong>Double</strong> for scientific calculations that do not get affected by small differences. Since Double is a type which is native to the CPU (internal representation is stored in <em>base 2</em>), calculations made with Double perform better then Decimal (which is represented in <em>base 10</em> internally).</p>\n",
        "votes": "125",
        "tags": "",
        "accepted": false
      },
      {
        "id": "10568821",
        "title": "",
        "text": "<p>Since <code>Opacity</code> is a double value, I would just use a double from the outset and not cast at all, but be sure to use a double when dividing so you don't loose any precision</p>\n\n<pre><code>Opacity = trackBar1.Value / 5000.0;\n</code></pre>\n",
        "votes": "42",
        "tags": "",
        "accepted": false
      },
      {
        "id": "78",
        "title": "",
        "text": "<p>It sounds like <code>this.Opacity</code> is a double value, and the compiler doesn't like you trying to cram a decimal value into it.</p>\n",
        "votes": "58",
        "tags": "",
        "accepted": false
      },
      {
        "id": "305467",
        "title": "",
        "text": "<p>You should use <code>5000.0</code> instead of <code>5000</code>.</p>\n",
        "votes": "50",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7262131",
        "title": "",
        "text": "<p>Assuming you are using WinForms, <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.form.opacity\" rel=\"nofollow noreferrer\"><code>Form.Opacity</code></a> is of type <code>double</code>, so you should use:</p>\n\n<pre><code>double trans = trackBar1.Value / 5000.0;\nthis.Opacity = trans;\n</code></pre>\n\n<p>Unless you need the value elsewhere, it's simpler to write:</p>\n\n<pre><code>this.Opacity = trackBar1.Value / 5000.0;\n</code></pre>\n\n<p>The reason the control doesn't work when you changed your code to simply be a double was because you had:</p>\n\n<pre><code>double trans = trackbar1.Value / 5000;\n</code></pre>\n\n<p>which interpreted the <code>5000</code> as an integer, and because <code>trackbar1.Value</code> is also an integer your <code>trans</code> value was always zero. By explicitly making the numeric a floating point value by adding the <code>.0</code> the compiler can now interpret it as a double and perform the proper calculation.</p>\n",
        "votes": "49",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7262112",
        "title": "",
        "text": "<p>The <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.form.opacity\" rel=\"nofollow noreferrer\">Opacity</a> property is of double type:</p>\n\n<pre><code>double trans = trackBar1.Value / 5000.0;\nthis.Opacity = trans;\n</code></pre>\n\n<p>or simply:</p>\n\n<pre><code>this.Opacity = trackBar1.Value / 5000.0;\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>this.Opacity = trackBar1.Value / 5000d;\n</code></pre>\n\n<p>Notice that I am using <code>5000.0</code> (or <code>5000d</code>) to force a double division because <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.trackbar.value\" rel=\"nofollow noreferrer\"><code>trackBar1.Value</code></a> is an integer and it would perform an integer division and the result would be an integer.</p>\n",
        "votes": "52",
        "tags": "",
        "accepted": false
      },
      {
        "id": "9579950",
        "title": "",
        "text": "<p>The best solution is:</p>\n\n<pre><code>this.Opacity = decimal.ToDouble(trackBar1.Value/5000);\n</code></pre>\n",
        "votes": "42",
        "tags": "",
        "accepted": false
      },
      {
        "id": "15952367",
        "title": "",
        "text": "<pre class=\"lang-cs prettyprint-override\"><code>this.Opacity = trackBar1.Value / 5000d;\n</code></pre>\n",
        "votes": "41",
        "tags": "",
        "accepted": false
      },
      {
        "id": "594436",
        "title": "",
        "text": "<p>You have two problems.  First, <code>Opacity</code> requires a double, not a decimal value.  The compiler is telling you that while there is a conversion between decimal and double, it is an explicit conversion that you need to specify in order for it to work. The second is that <code>TrackBar.Value</code> is an integer value and dividing an int by an int results in an int no matter what type of variable you assign it to. In this case there is an implicit cast from int to decimal or double - because there is no loss of precision when you do the cast - so the compiler doesn't complain, but the value you get is always 0, presumably, since <code>trackBar.Value</code> is always less than 5000.  The solution is to change your code to use double (the native type for Opacity) and do floating point arithmetic by explicitly making the constant a double - which will have the effect of promoting the arithmetic - or casting <code>trackBar.Value</code> to double, which will do the same thing - or both.  Oh, and you don't need the intermediate variable unless it used elsewhere. My guess is the compiler would optimize it away, anyway.</p>\n\n<pre><code>trackBar.Opacity = (double)trackBar.Value / 5000.0;\n</code></pre>\n",
        "votes": "63",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7",
        "title": "",
        "text": "<p>An explicit cast to <code>double</code> like this isn't necessary:</p>\n\n<pre><code>double trans = (double) trackBar1.Value / 5000.0;\n</code></pre>\n\n<p>Identifying the constant as <code>5000.0</code> (or as <code>5000d</code>) is sufficient:</p>\n\n<pre><code>double trans = trackBar1.Value / 5000.0;\ndouble trans = trackBar1.Value / 5000d;\n</code></pre>\n",
        "votes": "450",
        "tags": "",
        "accepted": true
      },
      {
        "id": "110198",
        "title": "",
        "text": "<p>Why are you dividing by 5000? Just set the TrackBar's Minimum and Maximum values between 0 and 100 and then divide the Value by 100 for the Opacity percentage. The minimum 20 example below prevents the form from becoming completely invisible:</p>\n\n<pre><code>private void Form1_Load(object sender, System.EventArgs e)\n{\n    TrackBar1.Minimum = 20;\n    TrackBar1.Maximum = 100;\n\n    TrackBar1.LargeChange = 10;\n    TrackBar1.SmallChange = 1;\n    TrackBar1.TickFrequency = 5;\n}\n\nprivate void TrackBar1_Scroll(object sender, System.EventArgs e)\n{\n    this.Opacity = TrackBar1.Value / 100;\n}\n</code></pre>\n",
        "votes": "81",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "6",
    "url": "https://stackoverflow.com/questions/6",
    "title": "Percentage width child element in absolutely positioned parent on Internet Explorer 7",
    "text:": "<p>I have an absolutely positioned <code>div</code> containing several children, one of which is a relatively positioned <code>div</code>. When I use a <code>percentage-based width</code> on the child <code>div</code>, it collapses to <code>0 width</code> on IE7, but not on Firefox or Safari.</p>\n\n<p>If I use <code>pixel width</code>, it works. If the parent is relatively positioned, the percentage width on the child works.</p>\n\n<ol>\n<li>Is there something I'm missing here?</li>\n<li>Is there an easy fix for this besides the <code>pixel-based width</code> on the\nchild?</li>\n<li>Is there an area of the CSS specification that covers this?</li>\n</ol>\n",
    "codes": [
      [],
      [
        "#absdiv {\r\n  position: absolute; \r\n  left: 100px; \r\n  top: 100px; \r\n  width: 80%; \r\n  height: 60%; \r\n  background: #999;\r\n}\r\n\r\n#pctchild {\r\n  width: 60%; \r\n  height: 40%; \r\n  background: #CCC;\r\n}\r\n\r\n#reldiv {\r\n  position: relative;\r\n  left: 20px;\r\n  top: 20px;\r\n  height: 25px;\r\n  width: 40%;\r\n  background: red;\r\n}",
        "<div id=\"absdiv\">\r\n    <div id=\"reldiv\"></div>\r\n    <div id=\"pctchild\"></div>\r\n</div>"
      ],
      [],
      [
        "<div id=\"parent\" style=\"width:230px;\">\n    <div id=\"child1\"></div>\n    <div id=\"child2\"></div>\n</div>\n"
      ],
      [],
      []
    ],
    "votes:": "297",
    "tags": "<html><css><internet-explorer-7>",
    "AcceptedAnswerId": "31",
    "answers": [
      {
        "id": "3998843",
        "title": "",
        "text": "<p>I think this has something to do with the way the <code>hasLayout</code> property is implemented in the older browser.</p>\n\n<p>Have you tried your code in IE8 to see if works in there, too?\nIE8 has a Debugger (<kbd>F12</kbd>) and can also run in IE7 mode.</p>\n",
        "votes": "32",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1948",
        "title": "",
        "text": "<p>Here is some sample code. I think this is what you are looking for. The following displays exactly the same in Firefox 3 (mac) and IE7.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>#absdiv {\r\n  position: absolute; \r\n  left: 100px; \r\n  top: 100px; \r\n  width: 80%; \r\n  height: 60%; \r\n  background: #999;\r\n}\r\n\r\n#pctchild {\r\n  width: 60%; \r\n  height: 40%; \r\n  background: #CCC;\r\n}\r\n\r\n#reldiv {\r\n  position: relative;\r\n  left: 20px;\r\n  top: 20px;\r\n  height: 25px;\r\n  width: 40%;\r\n  background: red;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div id=\"absdiv\"&gt;\r\n    &lt;div id=\"reldiv\"&gt;&lt;/div&gt;\r\n    &lt;div id=\"pctchild\"&gt;&lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n",
        "votes": "60",
        "tags": "",
        "accepted": false
      },
      {
        "id": "856615",
        "title": "",
        "text": "<blockquote>\n  <p>Why doesn\u2019t the percentage width child\n  in absolutely positioned parent work\n  in IE7?</p>\n</blockquote>\n\n<p>Because it's Internet Explorer</p>\n\n<blockquote>\n  <p>Is there something I'm missing here?</p>\n</blockquote>\n\n<p>That is, to raise your co-worker's / clients' awareness that IE sucks.</p>\n\n<blockquote>\n  <p>Is there an easy fix besides the pixel-based width on the child?</p>\n</blockquote>\n\n<p>Use <code>em</code> units as they are more useful when creating liquid layouts as you can use them for padding and margins as well as font sizes. So your white space grows and shrinks proportionally to your text if it is resized (which is really what you need). I don't think percentages give a finer control than ems; there's nothing to stop you specifying in hundredths of ems (0.01 em) and the browser will interpret as it sees fit.  </p>\n\n<blockquote>\n  <p>Is there an area of the CSS specification that covers this?</p>\n</blockquote>\n\n<p>None, as far as I remember <code>em</code>'s and %'s were intended for font sizes alone back at CSS 1.0.</p>\n",
        "votes": "38",
        "tags": "",
        "accepted": false
      },
      {
        "id": "52225050",
        "title": "",
        "text": "<p>The <code>div</code> needs to have a defined width:</p>\n\n<pre><code>&lt;div id=\"parent\" style=\"width:230px;\"&gt;\n    &lt;div id=\"child1\"&gt;&lt;/div&gt;\n    &lt;div id=\"child2\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "31",
        "title": "",
        "text": "<p>The parent <code>div</code> needs to have a defined <code>width</code>, either in pixels or as a percentage. In Internet&nbsp;Explorer&nbsp;7, the parent <code>div</code> needs a defined <code>width</code> for child percentage <code>div</code>s to work correctly.</p>\n",
        "votes": "148",
        "tags": "",
        "accepted": true
      },
      {
        "id": "43377",
        "title": "",
        "text": "<p>IE prior to 8 has a temporal aspect to its box model that most notably creates a problem with percentage-based widths. In your case here an absolutely positioned <code>div</code> by default has no width. Its width will be worked out based on the pixel width of its content and will be calculated after the contents are rendered. So at the point, IE encounters and renders your relatively positioned <code>div</code> its parent has a width of 0 hence why it itself collapses to 0.</p>\n\n<p>If you would like a more in-depth discussion of this along with lots of working examples, have a gander <a href=\"http://www.positioniseverything.net/explorer/percentages.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n",
        "votes": "38",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "9",
    "url": "https://stackoverflow.com/questions/9",
    "title": "In C#, how do I calculate someone's age based on a DateTime type birthday?",
    "text:": "<p>Given a <code>DateTime</code> representing a person's birthday, how do I calculate their age in years?  </p>\n",
    "codes": [
      [
        "public override bool IsValid(DateTime value)\n{\n    _dateOfBirth =  value;\n    var yearsOld = (double) (DateTime.Now.Subtract(_dateOfBirth).TotalDays/365);\n    if (yearsOld > 18)\n        return true;\n    return false;\n}\n"
      ],
      [
        "public int AgeInYears(DateTime birthDate, DateTime referenceDate)\n{\n  Debug.Assert(referenceDate >= birthDate, \n               \"birth date must be on or prior to the reference date\");\n\n  DateTime birth = birthDate.Date;\n  DateTime reference = referenceDate.Date;\n  int years = (reference.Year - birth.Year);\n\n  //\n  // an offset of -1 is applied if the birth date has \n  // not yet occurred in the current year.\n  //\n  if (reference.Month > birth.Month);\n  else if (reference.Month < birth.Month) \n    --years;\n  else // in birth month\n  {\n    if (reference.Day < birth.Day)\n      --years;\n  }\n\n  return years ;\n}\n",
        "public enum LeapDayRule\n{\n  OrdinalDay     = 1 ,\n  LastDayOfMonth = 2 ,\n}\n\nstatic int ComputeAgeInYears(DateTime birth, DateTime reference, LeapYearBirthdayRule ruleInEffect)\n{\n  bool isLeapYearBirthday = CultureInfo.CurrentCulture.Calendar.IsLeapDay(birth.Year, birth.Month, birth.Day);\n  DateTime cutoff;\n\n  if (isLeapYearBirthday && !DateTime.IsLeapYear(reference.Year))\n  {\n    switch (ruleInEffect)\n    {\n      case LeapDayRule.OrdinalDay:\n        cutoff = new DateTime(reference.Year, 1, 1)\n                             .AddDays(birth.DayOfYear - 1);\n        break;\n\n      case LeapDayRule.LastDayOfMonth:\n        cutoff = new DateTime(reference.Year, birth.Month, 1)\n                             .AddMonths(1)\n                             .AddDays(-1);\n        break;\n\n      default:\n        throw new InvalidOperationException();\n    }\n  }\n  else\n  {\n    cutoff = new DateTime(reference.Year, birth.Month, birth.Day);\n  }\n\n  int age = (reference.Year - birth.Year) + (reference >= cutoff ? 0 : -1);\n  return age < 0 ? 0 : age;\n}\n"
      ],
      [
        "DateTime now = DateTime.Today;\nDateTime birthday = new DateTime(1991, 02, 03);//3rd feb\n\nint age = now.Year - birthday.Year;\n\nif (now.Month < birthday.Month || (now.Month == birthday.Month && now.Day < birthday.Day))//not had bday this year yet\n  age--;\n\nreturn age;\n"
      ],
      [
        "DateTime birth = new DateTime(1974, 8, 29);\nDateTime today = DateTime.Now;\nTimeSpan span = today - birth;\nDateTime age = DateTime.MinValue + span;\n\n// Make adjustment due to MinValue equalling 1/1/1\nint years = age.Year - 1;\nint months = age.Month - 1;\nint days = age.Day - 1;\n\n// Print out not only how many years old they are but give months and days as well\nConsole.Write(\"{0} years, {1} months, {2} days\", years, months, days);\n"
      ],
      [
        "System.DateTime birthTime = AskTheUser(myUser); // :-)\nSystem.DateTime now = System.DateTime.Now;\nSystem.TimeSpan age = now - birthTime; // As simple as that\ndouble ageInDays = age.TotalDays; // Will you convert to whatever you want yourself?\n"
      ],
      [
        "public void LoopAge(DateTime myDOB, DateTime FutureDate)\n{\n    int years = 0;\n    int months = 0;\n    int days = 0;\n\n    DateTime tmpMyDOB = new DateTime(myDOB.Year, myDOB.Month, 1);\n\n    DateTime tmpFutureDate = new DateTime(FutureDate.Year, FutureDate.Month, 1);\n\n    while (tmpMyDOB.AddYears(years).AddMonths(months) < tmpFutureDate)\n    {\n        months++;\n\n        if (months > 12)\n        {\n            years++;\n            months = months - 12;\n        }\n    }\n\n    if (FutureDate.Day >= myDOB.Day)\n    {\n        days = days + FutureDate.Day - myDOB.Day;\n    }\n    else\n    {\n        months--;\n\n        if (months < 0)\n        {\n            years--;\n            months = months + 12;\n        }\n\n        days +=\n            DateTime.DaysInMonth(\n                FutureDate.AddMonths(-1).Year, FutureDate.AddMonths(-1).Month\n            ) + FutureDate.Day - myDOB.Day;\n\n    }\n\n    //add an extra day if the dob is a leap day\n    if (DateTime.IsLeapYear(myDOB.Year) && myDOB.Month == 2 && myDOB.Day == 29)\n    {\n        //but only if the future date is less than 1st March\n        if (FutureDate >= new DateTime(FutureDate.Year, 3, 1))\n            days++;\n    }\n\n}\n"
      ],
      [
        "TimeSpan diff = DateTime.Now - birthdayDateTime;\nstring age = String.Format(\"{0:%y} years, {0:%M} months, {0:%d}, days old\", diff);\n"
      ],
      [
        "int age = (int) ((DateTime.Now - bday).TotalDays/365.242199);\n"
      ],
      [
        "DateTime dateOfBirth = Convert.ToDateTime(\"01/16/1990\");\nvar age = ((DateTime.Now - dateOfBirth).Days) / 365;\n"
      ],
      [
        " var birthYear=1993;\n var age = DateTime.Now.AddYears(-birthYear).Year;\n"
      ],
      [
        "private int GetYearDiff(DateTime start, DateTime end)\n{\n    int diff = end.Year - start.Year;\n    if (end.DayOfYear < start.DayOfYear) { diff -= 1; }\n    return diff;\n}\n[Fact]\npublic void GetYearDiff_WhenCalls_ShouldReturnCorrectYearDiff()\n{\n    //arrange\n    var now = DateTime.Now;\n    //act\n    //assert\n    Assert.Equal(24, GetYearDiff(new DateTime(1992, 7, 9), now)); // passed\n    Assert.Equal(24, GetYearDiff(new DateTime(1992, now.Month, now.Day), now)); // passed\n    Assert.Equal(23, GetYearDiff(new DateTime(1992, 12, 9), now)); // passed\n}\n"
      ],
      [
        "int age = (Int32.Parse(DateTime.Today.ToString(\"yyyyMMdd\")) - \n           Int32.Parse(birthday.ToString(\"yyyyMMdd rawrrr\"))) / 10000;\n"
      ],
      [
        "public int GetAge(DateTime DateOfBirth)\n{\n    var Now = DateTime.UtcNow;\n    return Now.Year - DateOfBirth.Year -\n        (\n            (\n                Now.Month > DateOfBirth.Month ||\n                (Now.Month == DateOfBirth.Month && Now.Day >= DateOfBirth.Day)\n            ) ? 0 : 1\n        );\n}\n"
      ],
      [
        " C#\n        // get the difference in years\n        int years = DateTime.Now.Year - BirthDate.Year; \n        // subtract another year if we're before the\n        // birth day in the current year\n        if (DateTime.Now.Month < BirthDate.Month || \n            (DateTime.Now.Month == BirthDate.Month && \n            DateTime.Now.Day < BirthDate.Day)) \n            years--;\n  VB.NET\n        ' get the difference in years\n        Dim years As Integer = DateTime.Now.Year - BirthDate.Year\n        ' subtract another year if we're before the\n        ' birth day in the current year\n        If DateTime.Now.Month < BirthDate.Month Or (DateTime.Now.Month = BirthDate.Month And DateTime.Now.Day < BirthDate.Day) Then \n            years = years - 1\n        End If\n"
      ],
      [
        "private int GetAge(int _year, int _month, int _day\n{\n    DateTime yourBirthDate= new DateTime(_year, _month, _day);\n\n    DateTime todaysDateTime = DateTime.Today;\n    int noOfYears = todaysDateTime.Year - yourBirthDate.Year;\n\n    if (DateTime.Now.Month < yourBirthDate.Month ||\n        (DateTime.Now.Month == yourBirthDate.Month && DateTime.Now.Day < yourBirthDate.Day))\n    {\n        noOfYears--;\n    }\n\n    return  noOfYears;\n}\n"
      ],
      [
        "DateTime bDay = new DateTime(2000, 2, 29);\nDateTime now = new DateTime(2009, 2, 28);\nMessageBox.Show(string.Format(\"Test {0} {1} {2}\",\n                CalculateAgeWrong1(bDay, now),      // outputs 9\n                CalculateAgeWrong2(bDay, now),      // outputs 9\n                CalculateAgeCorrect(bDay, now),     // outputs 8\n                CalculateAgeCorrect2(bDay, now)));  // outputs 8\n",
        "public int CalculateAgeWrong1(DateTime birthDate, DateTime now)\n{\n    return new DateTime(now.Subtract(birthDate).Ticks).Year - 1;\n}\n\npublic int CalculateAgeWrong2(DateTime birthDate, DateTime now)\n{\n    int age = now.Year - birthDate.Year;\n\n    if (now < birthDate.AddYears(age))\n        age--;\n\n    return age;\n}\n\npublic int CalculateAgeCorrect(DateTime birthDate, DateTime now)\n{\n    int age = now.Year - birthDate.Year;\n\n    if (now.Month < birthDate.Month || (now.Month == birthDate.Month && now.Day < birthDate.Day))\n        age--;\n\n    return age;\n}\n\npublic int CalculateAgeCorrect2(DateTime birthDate, DateTime now)\n{\n    int age = now.Year - birthDate.Year;\n\n    // For leap years we need this\n    if (birthDate > now.AddYears(-age)) \n        age--;\n    // Don't use:\n    // if (birthDate.AddYears(age) > now) \n    //     age--;\n\n    return age;\n}\n"
      ],
      [
        "public static class DateTimeExtensions\n{\n    public static int Age(this DateTime birthDate)\n    {\n        return Age(birthDate, DateTime.Now);\n    }\n\n    public static int Age(this DateTime birthDate, DateTime offsetDate)\n    {\n        int result=0;\n        result = offsetDate.Year - birthDate.Year;\n\n        if (offsetDate.DayOfYear < birthDate.DayOfYear)\n        {\n              result--;\n        }\n\n        return result;\n    }\n}\n"
      ],
      [
        "public static string HowOld(DateTime birthday, DateTime now)\n{\n    if (now < birthday)\n        throw new ArgumentOutOfRangeException(\"birthday must be less than now.\");\n\n    TimeSpan diff = now - birthday;\n    int diffDays = (int)diff.TotalDays;\n\n    if (diffDays > 7)//year, month and week\n    {\n        int age = now.Year - birthday.Year;\n\n        if (birthday > now.AddYears(-age))\n            age--;\n\n        if (age > 0)\n        {\n            return age + (age > 1 ? \" years\" : \" year\");\n        }\n        else\n        {// month and week\n            DateTime d = birthday;\n            int diffMonth = 1;\n\n            while (d.AddMonths(diffMonth) <= now)\n            {\n                diffMonth++;\n            }\n\n            age = diffMonth-1;\n\n            if (age == 1 && d.Day > now.Day)\n                age--;\n\n            if (age > 0)\n            {\n                return age + (age > 1 ? \" months\" : \" month\");\n            }\n            else\n            {\n                age = diffDays / 7;\n                return age + (age > 1 ? \" weeks\" : \" week\");\n            }\n        }\n    }\n    else if (diffDays > 0)\n    {\n        int age = diffDays;\n        return age + (age > 1 ? \" days\" : \" day\");\n    }\n    else\n    {\n        int age = diffDays;\n        return \"just born\";\n    }\n}\n",
        "[TestMethod]\npublic void TestAge()\n{\n    string age = HowOld(new DateTime(2011, 1, 1), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"1 year\", age);\n\n    age = HowOld(new DateTime(2011, 11, 30), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"1 year\", age);\n\n    age = HowOld(new DateTime(2001, 1, 1), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"11 years\", age);\n\n    age = HowOld(new DateTime(2012, 1, 1), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"10 months\", age);\n\n    age = HowOld(new DateTime(2011, 12, 1), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"11 months\", age);\n\n    age = HowOld(new DateTime(2012, 10, 1), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"1 month\", age);\n\n    age = HowOld(new DateTime(2008, 2, 28), new DateTime(2009, 2, 28));\n    Assert.AreEqual(\"1 year\", age);\n\n    age = HowOld(new DateTime(2008, 3, 28), new DateTime(2009, 2, 28));\n    Assert.AreEqual(\"11 months\", age);\n\n    age = HowOld(new DateTime(2008, 3, 28), new DateTime(2009, 3, 28));\n    Assert.AreEqual(\"1 year\", age);\n\n    age = HowOld(new DateTime(2009, 1, 28), new DateTime(2009, 2, 28));\n    Assert.AreEqual(\"1 month\", age);\n\n    age = HowOld(new DateTime(2009, 2, 1), new DateTime(2009, 3, 1));\n    Assert.AreEqual(\"1 month\", age);\n\n    // NOTE.\n    // new DateTime(2008, 1, 31).AddMonths(1) == new DateTime(2009, 2, 28);\n    // new DateTime(2008, 1, 28).AddMonths(1) == new DateTime(2009, 2, 28);\n    age = HowOld(new DateTime(2009, 1, 31), new DateTime(2009, 2, 28));\n    Assert.AreEqual(\"4 weeks\", age);\n\n    age = HowOld(new DateTime(2009, 2, 1), new DateTime(2009, 2, 28));\n    Assert.AreEqual(\"3 weeks\", age);\n\n    age = HowOld(new DateTime(2009, 2, 1), new DateTime(2009, 3, 1));\n    Assert.AreEqual(\"1 month\", age);\n\n    age = HowOld(new DateTime(2012, 11, 5), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"3 weeks\", age);\n\n    age = HowOld(new DateTime(2012, 11, 1), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"4 weeks\", age);\n\n    age = HowOld(new DateTime(2012, 11, 20), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"1 week\", age);\n\n    age = HowOld(new DateTime(2012, 11, 25), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"5 days\", age);\n\n    age = HowOld(new DateTime(2012, 11, 29), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"1 day\", age);\n\n    age = HowOld(new DateTime(2012, 11, 30), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"just born\", age);\n\n    age = HowOld(new DateTime(2000, 2, 29), new DateTime(2009, 2, 28));\n    Assert.AreEqual(\"8 years\", age);\n\n    age = HowOld(new DateTime(2000, 2, 29), new DateTime(2009, 3, 1));\n    Assert.AreEqual(\"9 years\", age);\n\n    Exception e = null;\n\n    try\n    {\n        age = HowOld(new DateTime(2012, 12, 1), new DateTime(2012, 11, 30));\n    }\n    catch (ArgumentOutOfRangeException ex)\n    {\n        e = ex;\n    }\n\n    Assert.IsTrue(e != null);\n}\n"
      ],
      [
        "public static int GetAgeByLoop(DateTime birthday)\n{\n    var age = -1;\n\n    for (var date = birthday; date < DateTime.Today; date = date.AddYears(1))\n    {\n        age++;\n    }\n\n    return age;\n}\n"
      ],
      [
        "DateTime Dob = DateTime.Parse(\"1985-04-24\");\n\nint Age = DateTime.MinValue.AddDays(DateTime.Now.Subtract(Dob).TotalHours/24).Year - 1;\n"
      ],
      [
        "(DateTime.Now - myDate).TotalHours / 8766.0\n"
      ],
      [
        "DateTime birthDate = new DateTime(2000,3,1);\nint age = (int)Math.Floor((DateTime.Now - birthDate).TotalDays / 365.25D);\n"
      ],
      [
        "public struct Age : IEquatable<Age>, IComparable<Age>\n{\n    private readonly int _years;\n    private readonly int _months;\n    private readonly int _days;\n\n    public int Years  { get { return _years; } }\n    public int Months { get { return _months; } }\n    public int Days { get { return _days; } }\n\n    public Age( int years, int months, int days ) : this()\n    {\n        _years = years;\n        _months = months;\n        _days = days;\n    }\n\n    public static Age CalculateAge( DateTime dateOfBirth, DateTime date )\n    {\n        // Here is some logic that ressembles Mike's solution, although it\n        // also takes into account months & days.\n        // Ommitted for brevity.\n        return new Age (years, months, days);\n    }\n\n    // Ommited Equality, Comparable, GetHashCode, functionality for brevity.\n}\n"
      ],
      [
        "// Save today's date.\nvar today = DateTime.Today;\n// Calculate the age.\nvar age = today.Year - birthdate.Year;\n// Go back to the year the person was born in case of a leap year\nif (birthdate.Date > today.AddYears(-age)) age--;\n"
      ],
      [
        "public static int AgeInYears(DateTime birthday, DateTime today)\n{\n    return ((today.Year - birthday.Year) * 372 + (today.Month - birthday.Month) * 31 + (today.Day - birthday.Day)) / 372;\n}\n"
      ],
      [
        "DateTime dateOfBirth = new DateTime(2000, 4, 18);\nDateTime currentDate = DateTime.Now;\n\nint ageInYears = 0;\nint ageInMonths = 0;\nint ageInDays = 0;\n\nageInDays = currentDate.Day - dateOfBirth.Day;\nageInMonths = currentDate.Month - dateOfBirth.Month;\nageInYears = currentDate.Year - dateOfBirth.Year;\n\nif (ageInDays < 0)\n{\n    ageInDays += DateTime.DaysInMonth(currentDate.Year, currentDate.Month);\n    ageInMonths = ageInMonths--;\n\n    if (ageInMonths < 0)\n    {\n        ageInMonths += 12;\n        ageInYears--;\n    }\n}\n\nif (ageInMonths < 0)\n{\n    ageInMonths += 12;\n    ageInYears--;\n}\n\nConsole.WriteLine(\"{0}, {1}, {2}\", ageInYears, ageInMonths, ageInDays);\n"
      ],
      [
        "DateTime zeroTime = new DateTime(1, 1, 1);\nvar date1 = new DateTime(1983, 03, 04);\nvar date2 = DateTime.Now;\nvar dif = date2 - date1;\nint years = (zeroTime + dif).Year - 1;\nLog.DebugFormat(\"Years -->{0}\", years);\n"
      ],
      [
        "public static int GetAge(DateTime birthDate)\n{\n    DateTime n = DateTime.Now; // To avoid a race condition around midnight\n    int age = n.Year - birthDate.Year;\n\n    if (n.Month < birthDate.Month || (n.Month == birthDate.Month && n.Day < birthDate.Day))\n        age--;\n\n    return age;\n}\n"
      ],
      [
        "static int GetAge(LocalDate dateOfBirth)\n{\n    Instant now = SystemClock.Instance.Now;\n\n    // The target time zone is important.\n    // It should align with the *current physical location* of the person\n    // you are talking about.  When the whereabouts of that person are unknown,\n    // then you use the time zone of the person who is *asking* for the age.\n    // The time zone of birth is irrelevant!\n\n    DateTimeZone zone = DateTimeZoneProviders.Tzdb[\"America/New_York\"];\n\n    LocalDate today = now.InZone(zone).Date;\n\n    Period period = Period.Between(dateOfBirth, today, PeriodUnits.Years);\n\n    return (int) period.Years;\n}\n",
        "LocalDate dateOfBirth = new LocalDate(1976, 8, 27);\nint age = GetAge(dateOfBirth);\n"
      ],
      [
        "20080814 - 19800703 = 280111 \n",
        "int now = int.Parse(DateTime.Now.ToString(\"yyyyMMdd\"));\nint dob = int.Parse(dateOfBirth.ToString(\"yyyyMMdd\"));\nint age = (now - dob) / 10000;\n",
        "public static Int32 GetAge(this DateTime dateOfBirth)\n{\n    var today = DateTime.Today;\n\n    var a = (today.Year * 100 + today.Month) * 100 + today.Day;\n    var b = (dateOfBirth.Year * 100 + dateOfBirth.Month) * 100 + dateOfBirth.Day;\n\n    return (a - b) / 10000;\n}\n"
      ],
      [
        "    public static string ToAge(this DateTime dob, DateTime? toDate = null)\n    {\n        if (!toDate.HasValue)\n            toDate = DateTime.Now;\n        var now = toDate.Value;\n\n        if (now.CompareTo(dob) < 0)\n            return \"Future date\";\n\n        int years = now.Year - dob.Year;\n        int months = now.Month - dob.Month;\n        int days = now.Day - dob.Day;\n\n        if (days < 0)\n        {\n            months--;\n            days = DateTime.DaysInMonth(dob.Year, dob.Month) - dob.Day + now.Day;\n        }\n\n        if (months < 0)\n        {\n            years--;\n            months = 12 + months;\n        }\n\n\n        return string.Format(\"{0} year(s), {1} month(s), {2} days(s)\",\n            years,\n            months,\n            days);\n    }\n",
        "    [Test]\n    public void ToAgeTests()\n    {\n        var date = new DateTime(2000, 1, 1);\n        Assert.AreEqual(\"0 year(s), 0 month(s), 1 days(s)\", new DateTime(1999, 12, 31).ToAge(date));\n        Assert.AreEqual(\"0 year(s), 0 month(s), 0 days(s)\", new DateTime(2000, 1, 1).ToAge(date));\n        Assert.AreEqual(\"1 year(s), 0 month(s), 0 days(s)\", new DateTime(1999, 1, 1).ToAge(date));\n        Assert.AreEqual(\"0 year(s), 11 month(s), 0 days(s)\", new DateTime(1999, 2, 1).ToAge(date));\n        Assert.AreEqual(\"0 year(s), 10 month(s), 25 days(s)\", new DateTime(1999, 2, 4).ToAge(date));\n        Assert.AreEqual(\"0 year(s), 10 month(s), 1 days(s)\", new DateTime(1999, 2, 28).ToAge(date));\n\n        date = new DateTime(2000, 2, 15);\n        Assert.AreEqual(\"0 year(s), 0 month(s), 28 days(s)\", new DateTime(2000, 1, 18).ToAge(date));\n    }\n"
      ],
      [
        "int age = new DateTime(DateTime.Now.Subtract(birthday).Ticks).Year-1;\n"
      ],
      [
        "public int GetAge(DateTime birthDate)\n{\n    int age = DateTime.Now.Year - birthDate.Year;\n\n    if (birthDate.DayOfYear > DateTime.Now.DayOfYear)\n        age--;\n\n    return age;\n}\n\n\n\n\n"
      ],
      [
        "DateTime birth = DateTime.Parse(\"1.1.2000\");\nDateTime today = DateTime.Today;     //we usually don't care about birth time\nTimeSpan age = today - birth;        //.NET FCL should guarantee this as precise\ndouble ageInDays = age.TotalDays;    //total number of days ... also precise\ndouble daysInYear = 365.2425;        //statistical value for 400 years\ndouble ageInYears = ageInDays / daysInYear;  //can be shifted ... not so precise\n",
        "DateTime birth = DateTime.Parse(\"1.1.2000\");\nDateTime today = DateTime.Today;\nint age = today.Year - birth.Year;    //people perceive their age in years\n\nif (today.Month < birth.Month ||\n   ((today.Month == birth.Month) && (today.Day < birth.Day)))\n{\n  age--;  //birthday in current year not yet reached, we are 1 year younger ;)\n          //+ no birthday for 29.2. guys ... sorry, just wrong date for birth\n}\n",
        "public static int GetAge(DateTime bithDay, DateTime today) \n{ \n  //chosen solution method body\n}\n\npublic static int GetAge(DateTime birthDay) \n{ \n  return GetAge(birthDay, DateTime.Now);\n}\n"
      ],
      [
        "public static class DateTimeExtensions\n{\n    /// <summary>\n    /// Calculates the age in years of the current System.DateTime object today.\n    /// </summary>\n    /// <param name=\"birthDate\">The date of birth</param>\n    /// <returns>Age in years today. 0 is returned for a future date of birth.</returns>\n    public static int Age(this DateTime birthDate)\n    {\n        return Age(birthDate, DateTime.Today);\n    }\n\n    /// <summary>\n    /// Calculates the age in years of the current System.DateTime object on a later date.\n    /// </summary>\n    /// <param name=\"birthDate\">The date of birth</param>\n    /// <param name=\"laterDate\">The date on which to calculate the age.</param>\n    /// <returns>Age in years on a later day. 0 is returned as minimum.</returns>\n    public static int Age(this DateTime birthDate, DateTime laterDate)\n    {\n        int age;\n        age = laterDate.Year - birthDate.Year;\n\n        if (age > 0)\n        {\n            age -= Convert.ToInt32(laterDate.Date < birthDate.Date.AddYears(age));\n        }\n        else\n        {\n            age = 0;\n        }\n\n        return age;\n    }\n}\n",
        "class Program\n{\n    static void Main(string[] args)\n    {\n        RunTest();\n    }\n\n    private static void RunTest()\n    {\n        DateTime birthDate = new DateTime(2000, 2, 28);\n        DateTime laterDate = new DateTime(2011, 2, 27);\n        string iso = \"yyyy-MM-dd\";\n\n        for (int i = 0; i < 3; i++)\n        {\n            for (int j = 0; j < 3; j++)\n            {\n                Console.WriteLine(\"Birth date: \" + birthDate.AddDays(i).ToString(iso) + \"  Later date: \" + laterDate.AddDays(j).ToString(iso) + \"  Age: \" + birthDate.AddDays(i).Age(laterDate.AddDays(j)).ToString());\n            }\n        }\n\n        Console.ReadKey();\n    }\n}\n",
        "{\n    Birth date: 2000-02-28  Later date: 2011-02-27  Age: 10\n    Birth date: 2000-02-28  Later date: 2011-02-28  Age: 11\n    Birth date: 2000-02-28  Later date: 2011-03-01  Age: 11\n    Birth date: 2000-02-29  Later date: 2011-02-27  Age: 10\n    Birth date: 2000-02-29  Later date: 2011-02-28  Age: 11\n    Birth date: 2000-02-29  Later date: 2011-03-01  Age: 11\n    Birth date: 2000-03-01  Later date: 2011-02-27  Age: 10\n    Birth date: 2000-03-01  Later date: 2011-02-28  Age: 10\n    Birth date: 2000-03-01  Later date: 2011-03-01  Age: 11\n}\n",
        "{\n    Birth date: 2000-02-28  Later date: 2012-02-28  Age: 12\n    Birth date: 2000-02-28  Later date: 2012-02-29  Age: 12\n    Birth date: 2000-02-28  Later date: 2012-03-01  Age: 12\n    Birth date: 2000-02-29  Later date: 2012-02-28  Age: 11\n    Birth date: 2000-02-29  Later date: 2012-02-29  Age: 12\n    Birth date: 2000-02-29  Later date: 2012-03-01  Age: 12\n    Birth date: 2000-03-01  Later date: 2012-02-28  Age: 11\n    Birth date: 2000-03-01  Later date: 2012-02-29  Age: 11\n    Birth date: 2000-03-01  Later date: 2012-03-01  Age: 12\n}\n"
      ],
      [
        "Public Shared Function CalculateAge(BirthDate As DateTime) As Integer\n    Dim HebCal As New System.Globalization.HebrewCalendar ()\n    Dim now = DateTime.Now()\n    Dim iAge = HebCal.GetYear(now) - HebCal.GetYear(BirthDate)\n    Dim iNowMonth = HebCal.GetMonth(now), iBirthMonth = HebCal.GetMonth(BirthDate)\n    If iNowMonth < iBirthMonth Or (iNowMonth = iBirthMonth AndAlso HebCal.GetDayOfMonth(now) < HebCal.GetDayOfMonth(BirthDate)) Then iAge -= 1\n    Return iAge\nEnd Function\n"
      ],
      [
        "public string GetAge(this DateTime birthdate, string ageStrinFormat = null)\n{\n    var date = DateTime.Now.AddMonths(-birthdate.Month).AddDays(-birthdate.Day);\n    return string.Format(ageStrinFormat ?? \"{0}/{1}/{2}\",\n        (date.Year - birthdate.Year), date.Month, date.Day);\n}\n"
      ],
      [
        "int age = DateTime.Now.AddTicks(0 - dob.Ticks).Year - 1;\n"
      ],
      [
        "DateTime birthDay = new DateTime(1990, 05, 23);\nDateTime age = DateTime.Now - birthDay;\n"
      ],
      [
        "public void GetAge(DateTime dob, DateTime now, out int years, out int months, out int days)\n{\n    years = 0;\n    months = 0;\n    days = 0;\n\n    DateTime tmpdob = new DateTime(dob.Year, dob.Month, 1);\n    DateTime tmpnow = new DateTime(now.Year, now.Month, 1);\n\n    while (tmpdob.AddYears(years).AddMonths(months) < tmpnow)\n    {\n        months++;\n        if (months > 12)\n        {\n            years++;\n            months = months - 12;\n        }\n    }\n\n    if (now.Day >= dob.Day)\n        days = days + now.Day - dob.Day;\n    else\n    {\n        months--;\n        if (months < 0)\n        {\n            years--;\n            months = months + 12;\n        }\n        days += DateTime.DaysInMonth(now.AddMonths(-1).Year, now.AddMonths(-1).Month) + now.Day - dob.Day;\n    }\n\n    if (DateTime.IsLeapYear(dob.Year) && dob.Month == 2 && dob.Day == 29 && now >= new DateTime(now.Year, 3, 1))\n        days++;\n\n}   \n\nprivate string ValidateDate(DateTime dob) //This method will validate the date\n{\n    int Years = 0; int Months = 0; int Days = 0;\n\n    GetAge(dob, DateTime.Now, out Years, out Months, out Days);\n\n    if (Years < 18)\n        message =  Years + \" is too young. Please try again on your 18th birthday.\";\n    else if (Years >= 65)\n        message = Years + \" is too old. Date of Birth must not be 65 or older.\";\n    else\n        return null; //Denotes validation passed\n}\n",
        "DateTime dob = DateTime.Parse(\"03/10/1982\");  \n\nstring message = ValidateDate(dob);\n\nlbldatemessage.Visible = !StringIsNullOrWhitespace(message);\nlbldatemessage.Text = message ?? \"\"; //Ternary if message is null then default to empty string\n"
      ],
      [
        "public int AgeInYears(DateTime bday)\n{\n    DateTime now = DateTime.Today;\n    int age = now.Year - bday.Year;            \n    if (bday.AddYears(age) > now) \n        age--;\n    return age;\n}\n"
      ],
      [
        "TimeSpan ts = DateTime.Now.Subtract(Birthdate);\nage = (byte)(ts.TotalDays / 365.25);\n"
      ],
      [
        "private int CalculateAge()\n{\n//get birthdate\n   DateTime dtBirth = Convert.ToDateTime(BirthDatePicker.Value);\n   int byear = dtBirth.Year;\n   int bmonth = dtBirth.Month;\n   int bday = dtBirth.Day;\n   DateTime dtToday = DateTime.Now;\n   int tYear = dtToday.Year;\n   int tmonth = dtToday.Month;\n   int tday = dtToday.Day;\n   int age = tYear - byear;\n   if (bmonth < tmonth)\n       age--;\n   else if (bmonth == tmonth && bday>tday)\n   {\n       age--;\n   }\nreturn age;\n}\n"
      ],
      [
        "declare @dd smalldatetime = '1980-04-01'\ndeclare @age int = YEAR(GETDATE())-YEAR(@dd)\nif (@dd> DATEADD(YYYY, -@age, GETDATE())) set @age = @age -1\n\nprint @age  \n"
      ],
      [
        "var birthDate = ... // DOB\nvar resultDate = DateTime.Now - birthDate;\n"
      ],
      [
        "static string CalcAge(DateTime birthDay)\n{\n    DateTime currentDate = DateTime.Now;         \n    int approximateAge = currentDate.Year - birthDay.Year;\n    int daysToNextBirthDay = (birthDay.Month * 30 + birthDay.Day) - \n        (currentDate.Month * 30 + currentDate.Day) ;\n\n    if (approximateAge == 0 || approximateAge == 1)\n    {                \n        int month =  Math.Abs(daysToNextBirthDay / 30);\n        int days = Math.Abs(daysToNextBirthDay % 30);\n\n        if (month == 0)\n            return \"Your age is: \" + daysToNextBirthDay + \" days\";\n\n        return \"Your age is: \" + month + \" months and \" + days + \" days\"; ;\n    }\n\n    if (daysToNextBirthDay > 0)\n        return \"Your age is: \" + --approximateAge + \" Years\";\n\n    return \"Your age is: \" + approximateAge + \" Years\"; ;\n}\n"
      ],
      [
        "public static int GetAge(this DateTime dateOfBirth, DateTime dateAsAt)\n{\n    return dateAsAt.Year - dateOfBirth.Year - (dateOfBirth.DayOfYear < dateAsAt.DayOfYear ? 0 : 1);\n}\n"
      ],
      [
        "    public static Dictionary<string,int> CurrentAgeInYearsMonthsDays(DateTime? ndtBirthDate, DateTime? ndtReferralDate)\n    {\n        //----------------------------------------------------------------------\n        // Can't determine age if we don't have a dates.\n        //----------------------------------------------------------------------\n        if (ndtBirthDate == null) return null;\n        if (ndtReferralDate == null) return null;\n\n        DateTime dtBirthDate = Convert.ToDateTime(ndtBirthDate);\n        DateTime dtReferralDate = Convert.ToDateTime(ndtReferralDate);\n\n        //----------------------------------------------------------------------\n        // Create our Variables\n        //----------------------------------------------------------------------\n        Dictionary<string, int> dYMD = new Dictionary<string,int>();\n        int iNowDate, iBirthDate, iYears, iMonths, iDays;\n        string sDif = \"\";\n\n        //----------------------------------------------------------------------\n        // Store off current date/time and DOB into local variables\n        //---------------------------------------------------------------------- \n        iNowDate = int.Parse(dtReferralDate.ToString(\"yyyyMMdd\"));\n        iBirthDate = int.Parse(dtBirthDate.ToString(\"yyyyMMdd\"));\n\n        //----------------------------------------------------------------------\n        // Calculate Years\n        //----------------------------------------------------------------------\n        sDif = (iNowDate - iBirthDate).ToString();\n        iYears = int.Parse(sDif.Substring(0, sDif.Length - 4));\n\n        //----------------------------------------------------------------------\n        // Store Years in Return Value\n        //----------------------------------------------------------------------\n        dYMD.Add(\"Years\", iYears);\n\n        //----------------------------------------------------------------------\n        // Calculate Months\n        //----------------------------------------------------------------------\n        if (dtBirthDate.Month > dtReferralDate.Month)\n            iMonths = 12 - dtBirthDate.Month + dtReferralDate.Month - 1;\n        else\n            iMonths = dtBirthDate.Month - dtReferralDate.Month;\n\n        //----------------------------------------------------------------------\n        // Store Months in Return Value\n        //----------------------------------------------------------------------\n        dYMD.Add(\"Months\", iMonths);\n\n        //----------------------------------------------------------------------\n        // Calculate Remaining Days\n        //----------------------------------------------------------------------\n        if (dtBirthDate.Day > dtReferralDate.Day)\n            //Logic: Figure out the days in month previous to the current month, or the admitted month.\n            //       Subtract the birthday from the total days which will give us how many days the person has lived since their birthdate day the previous month.\n            //       then take the referral date and simply add the number of days the person has lived this month.\n\n            //If referral date is january, we need to go back to the following year's December to get the days in that month.\n            if (dtReferralDate.Month == 1)\n                iDays = DateTime.DaysInMonth(dtReferralDate.Year - 1, 12) - dtBirthDate.Day + dtReferralDate.Day;       \n            else\n                iDays = DateTime.DaysInMonth(dtReferralDate.Year, dtReferralDate.Month - 1) - dtBirthDate.Day + dtReferralDate.Day;       \n        else\n            iDays = dtReferralDate.Day - dtBirthDate.Day;             \n\n        //----------------------------------------------------------------------\n        // Store Days in Return Value\n        //----------------------------------------------------------------------\n        dYMD.Add(\"Days\", iDays);\n\n        return dYMD;\n}\n"
      ],
      [
        "DateTime dateOfBirth;\n\nint ageInYears = DateTime.Now.Year - dateOfBirth.Year;\n\nif (dateOfBirth > today.AddYears(-ageInYears )) ageInYears --;\n"
      ],
      [
        "public string LoopAge(DateTime myDOB, DateTime FutureDate)\n{\n    int years = 0;\n    int months = 0;\n    int days = 0;\n\n    DateTime tmpMyDOB = new DateTime(myDOB.Year, myDOB.Month, 1);\n\n    DateTime tmpFutureDate = new DateTime(FutureDate.Year, FutureDate.Month, 1);\n\n    while (tmpMyDOB.AddYears(years).AddMonths(months) < tmpFutureDate)\n    {\n        months++;\n        if (months > 12)\n        {\n            years++;\n            months = months - 12;\n        }\n    }\n\n    if (FutureDate.Day >= myDOB.Day)\n    {\n        days = days + FutureDate.Day - myDOB.Day;\n    }\n    else\n    {\n        months--;\n        if (months < 0)\n        {\n            years--;\n            months = months + 12;\n        }\n        days = days + (DateTime.DaysInMonth(FutureDate.AddMonths(-1).Year, FutureDate.AddMonths(-1).Month) + FutureDate.Day) - myDOB.Day;\n\n    }\n\n    //add an extra day if the dob is a leap day\n    if (DateTime.IsLeapYear(myDOB.Year) && myDOB.Month == 2 && myDOB.Day == 29)\n    {\n        //but only if the future date is less than 1st March\n        if(FutureDate >= new DateTime(FutureDate.Year, 3,1))\n            days++;\n    }\n\n    return \"Years: \" + years + \" Months: \" + months + \" Days: \" + days;\n}\n"
      ],
      [
        "DateTime myBD = new DateTime(1980, 10, 10);\nTimeSpan difference = DateTime.Now.Subtract(myBD);\n\ntextBox1.Text = difference.Years + \" years \" + difference.Months + \" Months \" + difference.Days + \" days\";\n"
      ],
      [
        "int AgeNow(DateTime birthday)\n{\n    return AgeAt(DateTime.Now, birthday);\n}\n\nint AgeAt(DateTime now, DateTime birthday)\n{\n    return AgeAt(now, birthday, CultureInfo.CurrentCulture.Calendar);\n}\n\nint AgeAt(DateTime now, DateTime birthday, Calendar calendar)\n{\n    // My age has increased on the morning of my\n    // birthday even though I was born in the evening.\n    now = now.Date;\n    birthday = birthday.Date;\n\n    var age = 0;\n    if (now <= birthday) return age; // I am zero now if I am to be born tomorrow.\n\n    while (calendar.AddYears(birthday, age + 1) <= now)\n    {\n        age++;\n    }\n    return age;\n}\n",
        "PASSED: someone born on 28 February 1964 is age 4 on 28 February 1968\nPASSED: someone born on 29 February 1964 is age 3 on 28 February 1968\nPASSED: someone born on 31 December 2016 is age 0 on 01 January 2017\n"
      ],
      [
        "var lifeInSeconds = (DateTime.Now.Ticks - then.Ticks)/TickFactor;\n",
        "var then = ... // Then, in this case the birthday\nvar now = DateTime.UtcNow;\nint age = now.Year - then.Year;\nif (now.AddYears(-age) < then) age--;\n",
        "DateTime start, end = .... // Whatever, assume start is before end\n\ndouble startYearContribution = 1 - (double) start.DayOfYear / (double) (DateTime.IsLeapYear(start.Year) ? 366 : 365);\ndouble endYearContribution = (double)end.DayOfYear / (double)(DateTime.IsLeapYear(end.Year) ? 366 : 365);\ndouble middleContribution = (double) (end.Year - start.Year - 1);\n\ndouble DCF = startYearContribution + endYearContribution + middleContribution;\n",
        "DateTime start, end = .... // Whatever, assume start is before end\nint days = (end - start).Days;\n"
      ],
      [
        "        DateTime dob = new DateTime(1991, 3, 4); \n        DateTime now = DateTime.Now; \n        int dobDay = dob.Day, dobMonth = dob.Month; \n        int add = -1; \n        if (dobMonth < now.Month)\n        {\n            add = 0;\n        }\n        else if (dobMonth == now.Month)\n        {\n            if(dobDay <= now.Day)\n            {\n                add = 0;\n            }\n            else\n            {\n                add = -1;\n            }\n        }\n        else\n        {\n            add = -1;\n        } \n        int age = now.Year - dob.Year + add;\n"
      ],
      [
        "private int CalcularIdade(DateTime dtNascimento)\n    {\n        var nHoje = Convert.ToInt32(DateTime.Today.ToString(\"yyyyMMdd\"));\n        var nAniversario = Convert.ToInt32(dtNascimento.ToString(\"yyyyMMdd\"));\n\n        double diff = (nHoje - nAniversario) / 10000;\n\n        var ret = Convert.ToInt32(Math.Truncate(diff));\n\n        return ret;\n    }\n"
      ],
      [
        "DateTime birth = new DateTime(1975, 09, 27, 01, 00, 00, 00);\nTimeSpan ts = DateTime.Now - birth;\nConsole.WriteLine(\"You are approximately \" + ts.TotalSeconds.ToString() + \" seconds old.\");\n"
      ],
      [
        "using System;\nusing System.Data;\nusing System.Data.Sql;\nusing System.Data.SqlClient;\nusing System.Data.SqlTypes;\nusing Microsoft.SqlServer.Server;\n\npublic partial class UserDefinedFunctions\n{\n    [SqlFunction(DataAccess = DataAccessKind.Read)]\n    public static SqlInt32 CalculateAge(string strBirthDate)\n    {\n        DateTime dtBirthDate = new DateTime();\n        dtBirthDate = Convert.ToDateTime(strBirthDate);\n        DateTime dtToday = DateTime.Now;\n\n        // get the difference in years\n        int years = dtToday.Year - dtBirthDate.Year;\n\n        // subtract another year if we're before the\n        // birth day in the current year\n        if (dtToday.Month < dtBirthDate.Month || (dtToday.Month == dtBirthDate.Month && dtToday.Day < dtBirthDate.Day))\n            years=years-1;\n\n        int intCustomerAge = years;\n        return intCustomerAge;\n    }\n};\n"
      ],
      [
        "var ts = DateTime.Now - new DateTime(1988, 3, 19);\nvar age = Math.Round(ts.Days / 365.0);\n"
      ],
      [
        "// ----------------------------------------------------------------------\nprivate static int YearDiff( DateTime date1, DateTime date2 )\n{\n  return YearDiff( date1, date2, DateTimeFormatInfo.CurrentInfo.Calendar );\n} // YearDiff\n\n// ----------------------------------------------------------------------\nprivate static int YearDiff( DateTime date1, DateTime date2, Calendar calendar )\n{\n  if ( date1.Equals( date2 ) )\n  {\n    return 0;\n  }\n\n  int year1 = calendar.GetYear( date1 );\n  int month1 = calendar.GetMonth( date1 );\n  int year2 = calendar.GetYear( date2 );\n  int month2 = calendar.GetMonth( date2 );\n\n  // find the the day to compare\n  int compareDay = date2.Day;\n  int compareDaysPerMonth = calendar.GetDaysInMonth( year1, month1 );\n  if ( compareDay > compareDaysPerMonth )\n  {\n    compareDay = compareDaysPerMonth;\n  }\n\n  // build the compare date\n  DateTime compareDate = new DateTime( year1, month2, compareDay,\n    date2.Hour, date2.Minute, date2.Second, date2.Millisecond );\n  if ( date2 > date1 )\n  {\n    if ( compareDate < date1 )\n    {\n      compareDate = compareDate.AddYears( 1 );\n    }\n  }\n  else\n  {\n    if ( compareDate > date1 )\n    {\n      compareDate = compareDate.AddYears( -1 );\n    }\n  }\n  return year2 - calendar.GetYear( compareDate );\n} // YearDiff\n",
        "// ----------------------------------------------------------------------\npublic void CalculateAgeSamples()\n{\n  PrintAge( new DateTime( 2000, 02, 29 ), new DateTime( 2009, 02, 28 ) );\n  // > Birthdate=29.02.2000, Age at 28.02.2009 is 8 years\n  PrintAge( new DateTime( 2000, 02, 29 ), new DateTime( 2012, 02, 28 ) );\n  // > Birthdate=29.02.2000, Age at 28.02.2012 is 11 years\n} // CalculateAgeSamples\n\n// ----------------------------------------------------------------------\npublic void PrintAge( DateTime birthDate, DateTime moment )\n{\n  Console.WriteLine( \"Birthdate={0:d}, Age at {1:d} is {2} years\", birthDate, moment, YearDiff( birthDate, moment ) );\n} // PrintAge\n"
      ],
      [
        "public static class AgeExtender\n{\n    public static int GetAge(this DateTime dt)\n    {\n        int d = int.Parse(dt.ToString(\"yyyyMMdd\"));\n        int t = int.Parse(DateTime.Today.ToString(\"yyyyMMdd\"));\n        return (t-d)/10000;\n    }\n}\n"
      ],
      [
        "DateTime today = DateTime.Today;\nDateTime bday = DateTime.Parse(\"2016-2-14\");\nint age = today.Year - bday.Year;\nvar unit = \"\";\n\nif (bday > today.AddYears(-age))\n{\n    age--;\n}\nif (age == 0)   // Under one year old\n{\n    age = today.Month - bday.Month;\n\n    age = age <= 0 ? (12 + age) : age;  // The next year before birthday\n\n    age = today.Day - bday.Day >= 0 ? age : --age;  // Before the birthday.day\n\n    unit = \"month\";\n}\nelse {\n    unit = \"year\";\n}\n\nif (age > 1)\n{\n    unit = unit + \"s\";\n}\n",
        "The birthday: 2016-2-14\n\n2016-2-15 =>  age=0, unit=month;\n2016-5-13 =>  age=2, unit=months;\n2016-5-14 =>  age=3, unit=months; \n2016-6-13 =>  age=3, unit=months; \n2016-6-15 =>  age=4, unit=months; \n2017-1-13 =>  age=10, unit=months; \n2017-1-14 =>  age=11, unit=months; \n2017-2-13 =>  age=11, unit=months; \n2017-2-14 =>  age=1, unit=year; \n2017-2-15 =>  age=1, unit=year; \n2017-3-13 =>  age=1, unit=year;\n2018-1-13 =>  age=1, unit=year; \n2018-1-14 =>  age=1, unit=year; \n2018-2-13 =>  age=1, unit=year; \n2018-2-14 =>  age=2, unit=years; \n"
      ]
    ],
    "votes:": "1941",
    "tags": "<c#><.net><datetime>",
    "AcceptedAnswerId": "1404",
    "answers": [
      {
        "id": "1811311",
        "title": "",
        "text": "<p>This may work:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public override bool IsValid(DateTime value)\n{\n    _dateOfBirth =  value;\n    var yearsOld = (double) (DateTime.Now.Subtract(_dateOfBirth).TotalDays/365);\n    if (yearsOld &gt; 18)\n        return true;\n    return false;\n}\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3869003",
        "title": "",
        "text": "<p>The simplest way I've ever found is this. It works correctly for the US and western europe locales. Can't speak to other locales, especially places like China. 4 extra compares, at most, following the initial computation of age.</p>\n\n<pre><code>public int AgeInYears(DateTime birthDate, DateTime referenceDate)\n{\n  Debug.Assert(referenceDate &gt;= birthDate, \n               \"birth date must be on or prior to the reference date\");\n\n  DateTime birth = birthDate.Date;\n  DateTime reference = referenceDate.Date;\n  int years = (reference.Year - birth.Year);\n\n  //\n  // an offset of -1 is applied if the birth date has \n  // not yet occurred in the current year.\n  //\n  if (reference.Month &gt; birth.Month);\n  else if (reference.Month &lt; birth.Month) \n    --years;\n  else // in birth month\n  {\n    if (reference.Day &lt; birth.Day)\n      --years;\n  }\n\n  return years ;\n}\n</code></pre>\n\n<p>I was looking over the answers to this and noticed that nobody has made reference to regulatory/legal implications of leap day births. For instance, <a href=\"https://en.wikipedia.org/wiki/February_29#Births\" rel=\"nofollow noreferrer\">per Wikipedia</a>, if you're born on February 29th in various jurisdictions, you're non-leap year birthday varies:</p>\n\n<ul>\n<li>In the United Kingdom and Hong Kong: it's the ordinal day of the year, so the next day, March 1st is your birthday.</li>\n<li>In New Zealand: it's the previous day, February 28th for the purposes of driver licencing, and March 1st for other purposes.</li>\n<li>Taiwan: it's February 28th.</li>\n</ul>\n\n<p>And as near as I can tell, in the US, the statutes are silent on the matter, leaving it up to the common law and to how various regulatory bodies define things in their regulations.</p>\n\n<p>To that end, an improvement:</p>\n\n<pre><code>public enum LeapDayRule\n{\n  OrdinalDay     = 1 ,\n  LastDayOfMonth = 2 ,\n}\n\nstatic int ComputeAgeInYears(DateTime birth, DateTime reference, LeapYearBirthdayRule ruleInEffect)\n{\n  bool isLeapYearBirthday = CultureInfo.CurrentCulture.Calendar.IsLeapDay(birth.Year, birth.Month, birth.Day);\n  DateTime cutoff;\n\n  if (isLeapYearBirthday &amp;&amp; !DateTime.IsLeapYear(reference.Year))\n  {\n    switch (ruleInEffect)\n    {\n      case LeapDayRule.OrdinalDay:\n        cutoff = new DateTime(reference.Year, 1, 1)\n                             .AddDays(birth.DayOfYear - 1);\n        break;\n\n      case LeapDayRule.LastDayOfMonth:\n        cutoff = new DateTime(reference.Year, birth.Month, 1)\n                             .AddMonths(1)\n                             .AddDays(-1);\n        break;\n\n      default:\n        throw new InvalidOperationException();\n    }\n  }\n  else\n  {\n    cutoff = new DateTime(reference.Year, birth.Month, birth.Day);\n  }\n\n  int age = (reference.Year - birth.Year) + (reference &gt;= cutoff ? 0 : -1);\n  return age &lt; 0 ? 0 : age;\n}\n</code></pre>\n\n<p>It should be noted that this code assumes:</p>\n\n<ul>\n<li>A western (European) reckoning of age, and</li>\n<li>A calendar, like the Gregorian calendar that inserts a single leap day at the end of a month.</li>\n</ul>\n",
        "votes": "19",
        "tags": "",
        "accepted": false
      },
      {
        "id": "9431192",
        "title": "",
        "text": "<p>This is simple and appears to be accurate for my needs. I am making an assumption for the purposes of leap years that regardless of when the person chooses to celebrate the birthday they are not technically a year older until a full 365 days has passed since there last birthday (i.e 28th February does not make them a year older)</p>\n\n<pre><code>DateTime now = DateTime.Today;\nDateTime birthday = new DateTime(1991, 02, 03);//3rd feb\n\nint age = now.Year - birthday.Year;\n\nif (now.Month &lt; birthday.Month || (now.Month == birthday.Month &amp;&amp; now.Day &lt; birthday.Day))//not had bday this year yet\n  age--;\n\nreturn age;\n</code></pre>\n\n<p>Let us know if you spot any problems ;)</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "18924226",
        "title": "",
        "text": "<p>This gives \"more detail\" to this question. Maybe this is what you're looking for</p>\n\n<pre><code>DateTime birth = new DateTime(1974, 8, 29);\nDateTime today = DateTime.Now;\nTimeSpan span = today - birth;\nDateTime age = DateTime.MinValue + span;\n\n// Make adjustment due to MinValue equalling 1/1/1\nint years = age.Year - 1;\nint months = age.Month - 1;\nint days = age.Day - 1;\n\n// Print out not only how many years old they are but give months and days as well\nConsole.Write(\"{0} years, {1} months, {2} days\", years, months, days);\n</code></pre>\n",
        "votes": "34",
        "tags": "",
        "accepted": false
      },
      {
        "id": "18895699",
        "title": "",
        "text": "<blockquote>\n  <p>How come the MSDN help did not tell you that? It looks so obvious:</p>\n</blockquote>\n\n<pre class=\"lang-cs prettyprint-override\"><code>System.DateTime birthTime = AskTheUser(myUser); // :-)\nSystem.DateTime now = System.DateTime.Now;\nSystem.TimeSpan age = now - birthTime; // As simple as that\ndouble ageInDays = age.TotalDays; // Will you convert to whatever you want yourself?\n</code></pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "877247",
        "title": "",
        "text": "<p>I've spent some time working on this and came up with this to calculate someone's age in years, months and days. I've tested against the Feb 29th problem and leap years and it seems to work, I'd appreciate any feedback:</p>\n\n<pre><code>public void LoopAge(DateTime myDOB, DateTime FutureDate)\n{\n    int years = 0;\n    int months = 0;\n    int days = 0;\n\n    DateTime tmpMyDOB = new DateTime(myDOB.Year, myDOB.Month, 1);\n\n    DateTime tmpFutureDate = new DateTime(FutureDate.Year, FutureDate.Month, 1);\n\n    while (tmpMyDOB.AddYears(years).AddMonths(months) &lt; tmpFutureDate)\n    {\n        months++;\n\n        if (months &gt; 12)\n        {\n            years++;\n            months = months - 12;\n        }\n    }\n\n    if (FutureDate.Day &gt;= myDOB.Day)\n    {\n        days = days + FutureDate.Day - myDOB.Day;\n    }\n    else\n    {\n        months--;\n\n        if (months &lt; 0)\n        {\n            years--;\n            months = months + 12;\n        }\n\n        days +=\n            DateTime.DaysInMonth(\n                FutureDate.AddMonths(-1).Year, FutureDate.AddMonths(-1).Month\n            ) + FutureDate.Day - myDOB.Day;\n\n    }\n\n    //add an extra day if the dob is a leap day\n    if (DateTime.IsLeapYear(myDOB.Year) &amp;&amp; myDOB.Month == 2 &amp;&amp; myDOB.Day == 29)\n    {\n        //but only if the future date is less than 1st March\n        if (FutureDate &gt;= new DateTime(FutureDate.Year, 3, 1))\n            days++;\n    }\n\n}\n</code></pre>\n",
        "votes": "25",
        "tags": "",
        "accepted": false
      },
      {
        "id": "18898663",
        "title": "",
        "text": "<pre class=\"lang-cs prettyprint-override\"><code>TimeSpan diff = DateTime.Now - birthdayDateTime;\nstring age = String.Format(\"{0:%y} years, {0:%M} months, {0:%d}, days old\", diff);\n</code></pre>\n\n<p>I'm not sure how exactly you'd like it returned to you, so I just made a readable string.</p>\n",
        "votes": "19",
        "tags": "",
        "accepted": false
      },
      {
        "id": "168703",
        "title": "",
        "text": "<p>My suggestion</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>int age = (int) ((DateTime.Now - bday).TotalDays/365.242199);\n</code></pre>\n\n<p>That seems to have the year changing on the right date. (I spot tested up to age 107.)</p>\n",
        "votes": "105",
        "tags": "",
        "accepted": false
      },
      {
        "id": "25014539",
        "title": "",
        "text": "<p>A one-liner answer:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>DateTime dateOfBirth = Convert.ToDateTime(\"01/16/1990\");\nvar age = ((DateTime.Now - dateOfBirth).Days) / 365;\n</code></pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "46968983",
        "title": "",
        "text": "<p>Simple Code</p>\n\n<pre><code> var birthYear=1993;\n var age = DateTime.Now.AddYears(-birthYear).Year;\n</code></pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "40196001",
        "title": "",
        "text": "<pre class=\"lang-cs prettyprint-override\"><code>private int GetYearDiff(DateTime start, DateTime end)\n{\n    int diff = end.Year - start.Year;\n    if (end.DayOfYear &lt; start.DayOfYear) { diff -= 1; }\n    return diff;\n}\n[Fact]\npublic void GetYearDiff_WhenCalls_ShouldReturnCorrectYearDiff()\n{\n    //arrange\n    var now = DateTime.Now;\n    //act\n    //assert\n    Assert.Equal(24, GetYearDiff(new DateTime(1992, 7, 9), now)); // passed\n    Assert.Equal(24, GetYearDiff(new DateTime(1992, now.Month, now.Day), now)); // passed\n    Assert.Equal(23, GetYearDiff(new DateTime(1992, 12, 9), now)); // passed\n}\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "11328202",
        "title": "",
        "text": "<p>Try this solution, it's working.</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>int age = (Int32.Parse(DateTime.Today.ToString(\"yyyyMMdd\")) - \n           Int32.Parse(birthday.ToString(\"yyyyMMdd rawrrr\"))) / 10000;\n</code></pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "18682920",
        "title": "",
        "text": "<p>With fewer conversions and UtcNow, this code can take care of someone born on the Feb 29 in a leap year:</p>\n\n<pre><code>public int GetAge(DateTime DateOfBirth)\n{\n    var Now = DateTime.UtcNow;\n    return Now.Year - DateOfBirth.Year -\n        (\n            (\n                Now.Month &gt; DateOfBirth.Month ||\n                (Now.Month == DateOfBirth.Month &amp;&amp; Now.Day &gt;= DateOfBirth.Day)\n            ) ? 0 : 1\n        );\n}\n</code></pre>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "48688691",
        "title": "",
        "text": "<p>Here is the simplest way to calculate someone's age.<br>\nCalculating someone's age is pretty straightforward, and here's how! In order for the code to work, you need a DateTime object called BirthDate containing the birthday.  </p>\n\n<pre><code> C#\n        // get the difference in years\n        int years = DateTime.Now.Year - BirthDate.Year; \n        // subtract another year if we're before the\n        // birth day in the current year\n        if (DateTime.Now.Month &lt; BirthDate.Month || \n            (DateTime.Now.Month == BirthDate.Month &amp;&amp; \n            DateTime.Now.Day &lt; BirthDate.Day)) \n            years--;\n  VB.NET\n        ' get the difference in years\n        Dim years As Integer = DateTime.Now.Year - BirthDate.Year\n        ' subtract another year if we're before the\n        ' birth day in the current year\n        If DateTime.Now.Month &lt; BirthDate.Month Or (DateTime.Now.Month = BirthDate.Month And DateTime.Now.Day &lt; BirthDate.Day) Then \n            years = years - 1\n        End If\n</code></pre>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3652116",
        "title": "",
        "text": "<pre><code>private int GetAge(int _year, int _month, int _day\n{\n    DateTime yourBirthDate= new DateTime(_year, _month, _day);\n\n    DateTime todaysDateTime = DateTime.Today;\n    int noOfYears = todaysDateTime.Year - yourBirthDate.Year;\n\n    if (DateTime.Now.Month &lt; yourBirthDate.Month ||\n        (DateTime.Now.Month == yourBirthDate.Month &amp;&amp; DateTime.Now.Day &lt; yourBirthDate.Day))\n    {\n        noOfYears--;\n    }\n\n    return  noOfYears;\n}\n</code></pre>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1595311",
        "title": "",
        "text": "<p>Here is a test snippet:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>DateTime bDay = new DateTime(2000, 2, 29);\nDateTime now = new DateTime(2009, 2, 28);\nMessageBox.Show(string.Format(\"Test {0} {1} {2}\",\n                CalculateAgeWrong1(bDay, now),      // outputs 9\n                CalculateAgeWrong2(bDay, now),      // outputs 9\n                CalculateAgeCorrect(bDay, now),     // outputs 8\n                CalculateAgeCorrect2(bDay, now)));  // outputs 8\n</code></pre>\n\n<p>Here you have the methods:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public int CalculateAgeWrong1(DateTime birthDate, DateTime now)\n{\n    return new DateTime(now.Subtract(birthDate).Ticks).Year - 1;\n}\n\npublic int CalculateAgeWrong2(DateTime birthDate, DateTime now)\n{\n    int age = now.Year - birthDate.Year;\n\n    if (now &lt; birthDate.AddYears(age))\n        age--;\n\n    return age;\n}\n\npublic int CalculateAgeCorrect(DateTime birthDate, DateTime now)\n{\n    int age = now.Year - birthDate.Year;\n\n    if (now.Month &lt; birthDate.Month || (now.Month == birthDate.Month &amp;&amp; now.Day &lt; birthDate.Day))\n        age--;\n\n    return age;\n}\n\npublic int CalculateAgeCorrect2(DateTime birthDate, DateTime now)\n{\n    int age = now.Year - birthDate.Year;\n\n    // For leap years we need this\n    if (birthDate &gt; now.AddYears(-age)) \n        age--;\n    // Don't use:\n    // if (birthDate.AddYears(age) &gt; now) \n    //     age--;\n\n    return age;\n}\n</code></pre>\n",
        "votes": "394",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2280982",
        "title": "",
        "text": "<p>I use this:</p>\n\n<pre><code>public static class DateTimeExtensions\n{\n    public static int Age(this DateTime birthDate)\n    {\n        return Age(birthDate, DateTime.Now);\n    }\n\n    public static int Age(this DateTime birthDate, DateTime offsetDate)\n    {\n        int result=0;\n        result = offsetDate.Year - birthDate.Year;\n\n        if (offsetDate.DayOfYear &lt; birthDate.DayOfYear)\n        {\n              result--;\n        }\n\n        return result;\n    }\n}\n</code></pre>\n",
        "votes": "34",
        "tags": "",
        "accepted": false
      },
      {
        "id": "13645039",
        "title": "",
        "text": "<p>Do we need to consider people who is smaller than 1 year? as Chinese culture, we describe small babies' age as 2 months or 4 weeks. </p>\n\n<p>Below is my implementation, it is not as simple as what I imagined, especially to deal with date like 2/28. </p>\n\n<pre><code>public static string HowOld(DateTime birthday, DateTime now)\n{\n    if (now &lt; birthday)\n        throw new ArgumentOutOfRangeException(\"birthday must be less than now.\");\n\n    TimeSpan diff = now - birthday;\n    int diffDays = (int)diff.TotalDays;\n\n    if (diffDays &gt; 7)//year, month and week\n    {\n        int age = now.Year - birthday.Year;\n\n        if (birthday &gt; now.AddYears(-age))\n            age--;\n\n        if (age &gt; 0)\n        {\n            return age + (age &gt; 1 ? \" years\" : \" year\");\n        }\n        else\n        {// month and week\n            DateTime d = birthday;\n            int diffMonth = 1;\n\n            while (d.AddMonths(diffMonth) &lt;= now)\n            {\n                diffMonth++;\n            }\n\n            age = diffMonth-1;\n\n            if (age == 1 &amp;&amp; d.Day &gt; now.Day)\n                age--;\n\n            if (age &gt; 0)\n            {\n                return age + (age &gt; 1 ? \" months\" : \" month\");\n            }\n            else\n            {\n                age = diffDays / 7;\n                return age + (age &gt; 1 ? \" weeks\" : \" week\");\n            }\n        }\n    }\n    else if (diffDays &gt; 0)\n    {\n        int age = diffDays;\n        return age + (age &gt; 1 ? \" days\" : \" day\");\n    }\n    else\n    {\n        int age = diffDays;\n        return \"just born\";\n    }\n}\n</code></pre>\n\n<p>This implementation has passed below test cases.</p>\n\n<pre><code>[TestMethod]\npublic void TestAge()\n{\n    string age = HowOld(new DateTime(2011, 1, 1), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"1 year\", age);\n\n    age = HowOld(new DateTime(2011, 11, 30), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"1 year\", age);\n\n    age = HowOld(new DateTime(2001, 1, 1), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"11 years\", age);\n\n    age = HowOld(new DateTime(2012, 1, 1), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"10 months\", age);\n\n    age = HowOld(new DateTime(2011, 12, 1), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"11 months\", age);\n\n    age = HowOld(new DateTime(2012, 10, 1), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"1 month\", age);\n\n    age = HowOld(new DateTime(2008, 2, 28), new DateTime(2009, 2, 28));\n    Assert.AreEqual(\"1 year\", age);\n\n    age = HowOld(new DateTime(2008, 3, 28), new DateTime(2009, 2, 28));\n    Assert.AreEqual(\"11 months\", age);\n\n    age = HowOld(new DateTime(2008, 3, 28), new DateTime(2009, 3, 28));\n    Assert.AreEqual(\"1 year\", age);\n\n    age = HowOld(new DateTime(2009, 1, 28), new DateTime(2009, 2, 28));\n    Assert.AreEqual(\"1 month\", age);\n\n    age = HowOld(new DateTime(2009, 2, 1), new DateTime(2009, 3, 1));\n    Assert.AreEqual(\"1 month\", age);\n\n    // NOTE.\n    // new DateTime(2008, 1, 31).AddMonths(1) == new DateTime(2009, 2, 28);\n    // new DateTime(2008, 1, 28).AddMonths(1) == new DateTime(2009, 2, 28);\n    age = HowOld(new DateTime(2009, 1, 31), new DateTime(2009, 2, 28));\n    Assert.AreEqual(\"4 weeks\", age);\n\n    age = HowOld(new DateTime(2009, 2, 1), new DateTime(2009, 2, 28));\n    Assert.AreEqual(\"3 weeks\", age);\n\n    age = HowOld(new DateTime(2009, 2, 1), new DateTime(2009, 3, 1));\n    Assert.AreEqual(\"1 month\", age);\n\n    age = HowOld(new DateTime(2012, 11, 5), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"3 weeks\", age);\n\n    age = HowOld(new DateTime(2012, 11, 1), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"4 weeks\", age);\n\n    age = HowOld(new DateTime(2012, 11, 20), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"1 week\", age);\n\n    age = HowOld(new DateTime(2012, 11, 25), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"5 days\", age);\n\n    age = HowOld(new DateTime(2012, 11, 29), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"1 day\", age);\n\n    age = HowOld(new DateTime(2012, 11, 30), new DateTime(2012, 11, 30));\n    Assert.AreEqual(\"just born\", age);\n\n    age = HowOld(new DateTime(2000, 2, 29), new DateTime(2009, 2, 28));\n    Assert.AreEqual(\"8 years\", age);\n\n    age = HowOld(new DateTime(2000, 2, 29), new DateTime(2009, 3, 1));\n    Assert.AreEqual(\"9 years\", age);\n\n    Exception e = null;\n\n    try\n    {\n        age = HowOld(new DateTime(2012, 12, 1), new DateTime(2012, 11, 30));\n    }\n    catch (ArgumentOutOfRangeException ex)\n    {\n        e = ex;\n    }\n\n    Assert.IsTrue(e != null);\n}\n</code></pre>\n\n<p>Hope it's helpful.</p>\n",
        "votes": "21",
        "tags": "",
        "accepted": false
      },
      {
        "id": "28567336",
        "title": "",
        "text": "<p>Just because I don't think the top answer is that clear:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public static int GetAgeByLoop(DateTime birthday)\n{\n    var age = -1;\n\n    for (var date = birthday; date &lt; DateTime.Today; date = date.AddYears(1))\n    {\n        age++;\n    }\n\n    return age;\n}\n</code></pre>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "36893577",
        "title": "",
        "text": "<p>This is the easiest way to answer this in a single line. </p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>DateTime Dob = DateTime.Parse(\"1985-04-24\");\n\nint Age = DateTime.MinValue.AddDays(DateTime.Now.Subtract(Dob).TotalHours/24).Year - 1;\n</code></pre>\n\n<p>This also works for leap years.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "47837162",
        "title": "",
        "text": "<p>Just use:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>(DateTime.Now - myDate).TotalHours / 8766.0\n</code></pre>\n\n<p>The current date - <code>myDate = TimeSpan</code>, get total hours and divide in the total hours per year and get exactly the age/months/days...</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "22",
        "title": "",
        "text": "<p>The best way that I know of because of leap years and everything is:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>DateTime birthDate = new DateTime(2000,3,1);\nint age = (int)Math.Floor((DateTime.Now - birthDate).TotalDays / 365.25D);\n</code></pre>\n",
        "votes": "48",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1913553",
        "title": "",
        "text": "<p>I've created an Age struct, which looks like this:</p>\n\n<pre><code>public struct Age : IEquatable&lt;Age&gt;, IComparable&lt;Age&gt;\n{\n    private readonly int _years;\n    private readonly int _months;\n    private readonly int _days;\n\n    public int Years  { get { return _years; } }\n    public int Months { get { return _months; } }\n    public int Days { get { return _days; } }\n\n    public Age( int years, int months, int days ) : this()\n    {\n        _years = years;\n        _months = months;\n        _days = days;\n    }\n\n    public static Age CalculateAge( DateTime dateOfBirth, DateTime date )\n    {\n        // Here is some logic that ressembles Mike's solution, although it\n        // also takes into account months &amp; days.\n        // Ommitted for brevity.\n        return new Age (years, months, days);\n    }\n\n    // Ommited Equality, Comparable, GetHashCode, functionality for brevity.\n}\n</code></pre>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1404",
        "title": "",
        "text": "<p>An easy to understand and simple solution.</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>// Save today's date.\nvar today = DateTime.Today;\n// Calculate the age.\nvar age = today.Year - birthdate.Year;\n// Go back to the year the person was born in case of a leap year\nif (birthdate.Date &gt; today.AddYears(-age)) age--;\n</code></pre>\n\n<p>However, this assumes you are looking for the <em>western</em> idea of age and not using <a href=\"https://en.wikipedia.org/wiki/East_Asian_age_reckoning\" rel=\"noreferrer\"><em>East Asian reckoning</em></a>.</p>\n",
        "votes": "2155",
        "tags": "",
        "accepted": true
      },
      {
        "id": "16142434",
        "title": "",
        "text": "<p>Here's yet another answer:</p>\n\n<pre><code>public static int AgeInYears(DateTime birthday, DateTime today)\n{\n    return ((today.Year - birthday.Year) * 372 + (today.Month - birthday.Month) * 31 + (today.Day - birthday.Day)) / 372;\n}\n</code></pre>\n\n<p>This has been extensively unit-tested. It does look a bit \"magic\". The number 372 is the number of days there would be in a year if every month had 31 days.</p>\n\n<p>The explanation of why it works (<a href=\"https://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/ba4a98af-aab3-4c59-bdee-611334e502f2\" rel=\"noreferrer\">lifted from here</a>) is:</p>\n\n<blockquote>\n  <p>Let's set <code>Yn = DateTime.Now.Year, Yb = birthday.Year, Mn = DateTime.Now.Month, Mb = birthday.Month, Dn = DateTime.Now.Day, Db = birthday.Day</code></p>\n  \n  <p><code>age = Yn - Yb + (31*(Mn - Mb) + (Dn - Db)) / 372</code></p>\n  \n  <p>We know that what we need is either <code>Yn-Yb</code> if the date has already been reached, <code>Yn-Yb-1</code> if it has not.</p>\n  \n  <p>a) If <code>Mn&lt;Mb</code>, we have <code>-341 &lt;= 31*(Mn-Mb) &lt;= -31 and -30 &lt;= Dn-Db &lt;= 30</code></p>\n  \n  <p><code>-371 &lt;= 31*(Mn - Mb) + (Dn - Db) &lt;= -1</code></p>\n  \n  <p>With integer division</p>\n  \n  <p><code>(31*(Mn - Mb) + (Dn - Db)) / 372 = -1</code></p>\n  \n  <p>b) If <code>Mn=Mb</code> and <code>Dn&lt;Db</code>, we have <code>31*(Mn - Mb) = 0 and -30 &lt;= Dn-Db &lt;= -1</code></p>\n  \n  <p>With integer division, again</p>\n  \n  <p><code>(31*(Mn - Mb) + (Dn - Db)) / 372 = -1</code></p>\n  \n  <p>c) If <code>Mn&gt;Mb</code>, we have <code>31 &lt;= 31*(Mn-Mb) &lt;= 341 and -30 &lt;= Dn-Db &lt;= 30</code></p>\n  \n  <p><code>1 &lt;= 31*(Mn - Mb) + (Dn - Db) &lt;= 371</code></p>\n  \n  <p>With integer division</p>\n  \n  <p><code>(31*(Mn - Mb) + (Dn - Db)) / 372 = 0</code></p>\n  \n  <p>d) If <code>Mn=Mb</code> and <code>Dn&gt;Db</code>, we have <code>31*(Mn - Mb) = 0 and 1 &lt;= Dn-Db &lt;= 3</code>0</p>\n  \n  <p>With integer division, again</p>\n  \n  <p><code>(31*(Mn - Mb) + (Dn - Db)) / 372 = 0</code> </p>\n  \n  <p>e) If <code>Mn=Mb</code> and <code>Dn=Db</code>, we have <code>31*(Mn - Mb) + Dn-Db = 0</code></p>\n  \n  <p>and therefore <code>(31*(Mn - Mb) + (Dn - Db)) / 372 = 0</code></p>\n</blockquote>\n",
        "votes": "28",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1011981",
        "title": "",
        "text": "<p>Here is a solution.</p>\n\n<pre><code>DateTime dateOfBirth = new DateTime(2000, 4, 18);\nDateTime currentDate = DateTime.Now;\n\nint ageInYears = 0;\nint ageInMonths = 0;\nint ageInDays = 0;\n\nageInDays = currentDate.Day - dateOfBirth.Day;\nageInMonths = currentDate.Month - dateOfBirth.Month;\nageInYears = currentDate.Year - dateOfBirth.Year;\n\nif (ageInDays &lt; 0)\n{\n    ageInDays += DateTime.DaysInMonth(currentDate.Year, currentDate.Month);\n    ageInMonths = ageInMonths--;\n\n    if (ageInMonths &lt; 0)\n    {\n        ageInMonths += 12;\n        ageInYears--;\n    }\n}\n\nif (ageInMonths &lt; 0)\n{\n    ageInMonths += 12;\n    ageInYears--;\n}\n\nConsole.WriteLine(\"{0}, {1}, {2}\", ageInYears, ageInMonths, ageInDays);\n</code></pre>\n",
        "votes": "17",
        "tags": "",
        "accepted": false
      },
      {
        "id": "32954095",
        "title": "",
        "text": "<p>I have used the following for this issue. I know it's not very elegant, but it's working.</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>DateTime zeroTime = new DateTime(1, 1, 1);\nvar date1 = new DateTime(1983, 03, 04);\nvar date2 = DateTime.Now;\nvar dif = date2 - date1;\nint years = (zeroTime + dif).Year - 1;\nLog.DebugFormat(\"Years --&gt;{0}\", years);\n</code></pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "229",
        "title": "",
        "text": "<p>Another function, not by me but found on the web and refined it a bit:</p>\n\n<pre><code>public static int GetAge(DateTime birthDate)\n{\n    DateTime n = DateTime.Now; // To avoid a race condition around midnight\n    int age = n.Year - birthDate.Year;\n\n    if (n.Month &lt; birthDate.Month || (n.Month == birthDate.Month &amp;&amp; n.Day &lt; birthDate.Day))\n        age--;\n\n    return age;\n}\n</code></pre>\n\n<p>Just two things that come into my mind: What about people from countries that do not use the Gregorian calendar? DateTime.Now is in the server-specific culture I think. I have absolutely zero knowledge about actually working with Asian calendars and I do not know if there is an easy way to convert dates between calendars, but just in case you're wondering about those Chinese guys from the year 4660 :-)</p>\n",
        "votes": "76",
        "tags": "",
        "accepted": false
      },
      {
        "id": "20715576",
        "title": "",
        "text": "<p>This classic question is deserving of a <a href=\"https://nodatime.org\" rel=\"noreferrer\">Noda Time</a> solution.</p>\n\n<pre><code>static int GetAge(LocalDate dateOfBirth)\n{\n    Instant now = SystemClock.Instance.Now;\n\n    // The target time zone is important.\n    // It should align with the *current physical location* of the person\n    // you are talking about.  When the whereabouts of that person are unknown,\n    // then you use the time zone of the person who is *asking* for the age.\n    // The time zone of birth is irrelevant!\n\n    DateTimeZone zone = DateTimeZoneProviders.Tzdb[\"America/New_York\"];\n\n    LocalDate today = now.InZone(zone).Date;\n\n    Period period = Period.Between(dateOfBirth, today, PeriodUnits.Years);\n\n    return (int) period.Years;\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>LocalDate dateOfBirth = new LocalDate(1976, 8, 27);\nint age = GetAge(dateOfBirth);\n</code></pre>\n\n<p>You might also be interested in the following improvements:</p>\n\n<ul>\n<li><p>Passing in the clock as an <code>IClock</code>, instead of using <code>SystemClock.Instance</code>, would improve testability.</p></li>\n<li><p>The target time zone will likely change, so you'd want a <code>DateTimeZone</code> parameter as well.</p></li>\n</ul>\n\n<p>See also my blog post on this subject: <a href=\"https://codeofmatt.com/2014/04/09/handling-birthdays-and-other-anniversaries/\" rel=\"noreferrer\">Handling Birthdays, and Other Anniversaries</a></p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "11942",
        "title": "",
        "text": "<p>This is a strange way to do it, but if you format the date to <code>yyyymmdd</code> and subtract the date of birth from the current date then drop the last 4 digits you've got the age :)</p>\n\n<p>I don't know C#, but I believe this will work in any language.</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>20080814 - 19800703 = 280111 \n</code></pre>\n\n<p>Drop the last 4 digits = <code>28</code>.</p>\n\n<p>C# Code:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>int now = int.Parse(DateTime.Now.ToString(\"yyyyMMdd\"));\nint dob = int.Parse(dateOfBirth.ToString(\"yyyyMMdd\"));\nint age = (now - dob) / 10000;\n</code></pre>\n\n<p>Or alternatively without all the type conversion in the form of an extension method. Error checking omitted:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public static Int32 GetAge(this DateTime dateOfBirth)\n{\n    var today = DateTime.Today;\n\n    var a = (today.Year * 100 + today.Month) * 100 + today.Day;\n    var b = (dateOfBirth.Year * 100 + dateOfBirth.Month) * 100 + dateOfBirth.Day;\n\n    return (a - b) / 10000;\n}\n</code></pre>\n",
        "votes": "1022",
        "tags": "",
        "accepted": false
      },
      {
        "id": "31025282",
        "title": "",
        "text": "<p>Here is a function that is serving me well... No calcs, very simple.</p>\n\n<pre><code>    public static string ToAge(this DateTime dob, DateTime? toDate = null)\n    {\n        if (!toDate.HasValue)\n            toDate = DateTime.Now;\n        var now = toDate.Value;\n\n        if (now.CompareTo(dob) &lt; 0)\n            return \"Future date\";\n\n        int years = now.Year - dob.Year;\n        int months = now.Month - dob.Month;\n        int days = now.Day - dob.Day;\n\n        if (days &lt; 0)\n        {\n            months--;\n            days = DateTime.DaysInMonth(dob.Year, dob.Month) - dob.Day + now.Day;\n        }\n\n        if (months &lt; 0)\n        {\n            years--;\n            months = 12 + months;\n        }\n\n\n        return string.Format(\"{0} year(s), {1} month(s), {2} days(s)\",\n            years,\n            months,\n            days);\n    }\n</code></pre>\n\n<p>And here is a unit test:</p>\n\n<pre><code>    [Test]\n    public void ToAgeTests()\n    {\n        var date = new DateTime(2000, 1, 1);\n        Assert.AreEqual(\"0 year(s), 0 month(s), 1 days(s)\", new DateTime(1999, 12, 31).ToAge(date));\n        Assert.AreEqual(\"0 year(s), 0 month(s), 0 days(s)\", new DateTime(2000, 1, 1).ToAge(date));\n        Assert.AreEqual(\"1 year(s), 0 month(s), 0 days(s)\", new DateTime(1999, 1, 1).ToAge(date));\n        Assert.AreEqual(\"0 year(s), 11 month(s), 0 days(s)\", new DateTime(1999, 2, 1).ToAge(date));\n        Assert.AreEqual(\"0 year(s), 10 month(s), 25 days(s)\", new DateTime(1999, 2, 4).ToAge(date));\n        Assert.AreEqual(\"0 year(s), 10 month(s), 1 days(s)\", new DateTime(1999, 2, 28).ToAge(date));\n\n        date = new DateTime(2000, 2, 15);\n        Assert.AreEqual(\"0 year(s), 0 month(s), 28 days(s)\", new DateTime(2000, 1, 18).ToAge(date));\n    }\n</code></pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "877516",
        "title": "",
        "text": "<p>Here's a one-liner:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>int age = new DateTime(DateTime.Now.Subtract(birthday).Ticks).Year-1;\n</code></pre>\n",
        "votes": "106",
        "tags": "",
        "accepted": false
      },
      {
        "id": "26529035",
        "title": "",
        "text": "<p>This is one of the most accurate answers that is able to resolve the birthday of 29th of Feb compared to any year of 28th Feb.</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public int GetAge(DateTime birthDate)\n{\n    int age = DateTime.Now.Year - birthDate.Year;\n\n    if (birthDate.DayOfYear &gt; DateTime.Now.DayOfYear)\n        age--;\n\n    return age;\n}\n\n\n\n\n</code></pre>\n",
        "votes": "16",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5623077",
        "title": "",
        "text": "<p>2 Main problems to solve are:</p>\n\n<p><strong>1. Calculate Exact age</strong> - in years, months, days, etc.</p>\n\n<p><strong>2. Calculate Generally perceived age</strong> - people usually do not care how old they exactly are, they just care when their birthday in the current year is.</p>\n\n<hr>\n\n<p>Solution for <strong>1</strong> is obvious:</p>\n\n<pre><code>DateTime birth = DateTime.Parse(\"1.1.2000\");\nDateTime today = DateTime.Today;     //we usually don't care about birth time\nTimeSpan age = today - birth;        //.NET FCL should guarantee this as precise\ndouble ageInDays = age.TotalDays;    //total number of days ... also precise\ndouble daysInYear = 365.2425;        //statistical value for 400 years\ndouble ageInYears = ageInDays / daysInYear;  //can be shifted ... not so precise\n</code></pre>\n\n<hr>\n\n<p>Solution for <strong>2</strong> is the one which is not so precise in determing total age, but is perceived as precise by people. People also usually use it, when they calculate their age \"manually\":</p>\n\n<pre><code>DateTime birth = DateTime.Parse(\"1.1.2000\");\nDateTime today = DateTime.Today;\nint age = today.Year - birth.Year;    //people perceive their age in years\n\nif (today.Month &lt; birth.Month ||\n   ((today.Month == birth.Month) &amp;&amp; (today.Day &lt; birth.Day)))\n{\n  age--;  //birthday in current year not yet reached, we are 1 year younger ;)\n          //+ no birthday for 29.2. guys ... sorry, just wrong date for birth\n}\n</code></pre>\n\n<p>Notes to 2.:</p>\n\n<ul>\n<li>This is my preferred solution</li>\n<li>We cannot use DateTime.DayOfYear or TimeSpans, as they shift number of days in leap years</li>\n<li>I have put there little more lines for readability</li>\n</ul>\n\n<p>Just one more note ... I would create 2 static overloaded methods for it, one for universal usage, second for usage-friendliness:</p>\n\n<pre><code>public static int GetAge(DateTime bithDay, DateTime today) \n{ \n  //chosen solution method body\n}\n\npublic static int GetAge(DateTime birthDay) \n{ \n  return GetAge(birthDay, DateTime.Now);\n}\n</code></pre>\n",
        "votes": "53",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5054317",
        "title": "",
        "text": "<p>The simple answer to this is to apply <code>AddYears</code> as shown below because this is the only native method to add years to the 29th of Feb. of leap years and obtain the correct result of the 28th of Feb. for common years. </p>\n\n<p>Some feel that 1th of Mar. is the birthday of leaplings but neither .Net nor any official rule supports this, nor does common logic explain why some born in February should have 75% of their birthdays in another month.</p>\n\n<p>Further, an Age method lends itself to be added as an extension to <code>DateTime</code>. By this you can obtain the age in the simplest possible way:</p>\n\n<ol>\n<li>List item</li>\n</ol>\n\n<p><strong>int age = birthDate.Age();</strong></p>\n\n<pre><code>public static class DateTimeExtensions\n{\n    /// &lt;summary&gt;\n    /// Calculates the age in years of the current System.DateTime object today.\n    /// &lt;/summary&gt;\n    /// &lt;param name=\"birthDate\"&gt;The date of birth&lt;/param&gt;\n    /// &lt;returns&gt;Age in years today. 0 is returned for a future date of birth.&lt;/returns&gt;\n    public static int Age(this DateTime birthDate)\n    {\n        return Age(birthDate, DateTime.Today);\n    }\n\n    /// &lt;summary&gt;\n    /// Calculates the age in years of the current System.DateTime object on a later date.\n    /// &lt;/summary&gt;\n    /// &lt;param name=\"birthDate\"&gt;The date of birth&lt;/param&gt;\n    /// &lt;param name=\"laterDate\"&gt;The date on which to calculate the age.&lt;/param&gt;\n    /// &lt;returns&gt;Age in years on a later day. 0 is returned as minimum.&lt;/returns&gt;\n    public static int Age(this DateTime birthDate, DateTime laterDate)\n    {\n        int age;\n        age = laterDate.Year - birthDate.Year;\n\n        if (age &gt; 0)\n        {\n            age -= Convert.ToInt32(laterDate.Date &lt; birthDate.Date.AddYears(age));\n        }\n        else\n        {\n            age = 0;\n        }\n\n        return age;\n    }\n}\n</code></pre>\n\n<p>Now, run this test:</p>\n\n<pre><code>class Program\n{\n    static void Main(string[] args)\n    {\n        RunTest();\n    }\n\n    private static void RunTest()\n    {\n        DateTime birthDate = new DateTime(2000, 2, 28);\n        DateTime laterDate = new DateTime(2011, 2, 27);\n        string iso = \"yyyy-MM-dd\";\n\n        for (int i = 0; i &lt; 3; i++)\n        {\n            for (int j = 0; j &lt; 3; j++)\n            {\n                Console.WriteLine(\"Birth date: \" + birthDate.AddDays(i).ToString(iso) + \"  Later date: \" + laterDate.AddDays(j).ToString(iso) + \"  Age: \" + birthDate.AddDays(i).Age(laterDate.AddDays(j)).ToString());\n            }\n        }\n\n        Console.ReadKey();\n    }\n}\n</code></pre>\n\n<p>The critical date example is this:</p>\n\n<p><strong>Birth date: 2000-02-29  Later date: 2011-02-28  Age: 11</strong></p>\n\n<p>Output:</p>\n\n<pre><code>{\n    Birth date: 2000-02-28  Later date: 2011-02-27  Age: 10\n    Birth date: 2000-02-28  Later date: 2011-02-28  Age: 11\n    Birth date: 2000-02-28  Later date: 2011-03-01  Age: 11\n    Birth date: 2000-02-29  Later date: 2011-02-27  Age: 10\n    Birth date: 2000-02-29  Later date: 2011-02-28  Age: 11\n    Birth date: 2000-02-29  Later date: 2011-03-01  Age: 11\n    Birth date: 2000-03-01  Later date: 2011-02-27  Age: 10\n    Birth date: 2000-03-01  Later date: 2011-02-28  Age: 10\n    Birth date: 2000-03-01  Later date: 2011-03-01  Age: 11\n}\n</code></pre>\n\n<p>And for the later date 2012-02-28:</p>\n\n<pre><code>{\n    Birth date: 2000-02-28  Later date: 2012-02-28  Age: 12\n    Birth date: 2000-02-28  Later date: 2012-02-29  Age: 12\n    Birth date: 2000-02-28  Later date: 2012-03-01  Age: 12\n    Birth date: 2000-02-29  Later date: 2012-02-28  Age: 11\n    Birth date: 2000-02-29  Later date: 2012-02-29  Age: 12\n    Birth date: 2000-02-29  Later date: 2012-03-01  Age: 12\n    Birth date: 2000-03-01  Later date: 2012-02-28  Age: 11\n    Birth date: 2000-03-01  Later date: 2012-02-29  Age: 11\n    Birth date: 2000-03-01  Later date: 2012-03-01  Age: 12\n}\n</code></pre>\n",
        "votes": "111",
        "tags": "",
        "accepted": false
      },
      {
        "id": "8816564",
        "title": "",
        "text": "<p>I want to add Hebrew calendar calculations (or other System.Globalization calendar can be used in the same way),  using rewrited functions from this thread:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>Public Shared Function CalculateAge(BirthDate As DateTime) As Integer\n    Dim HebCal As New System.Globalization.HebrewCalendar ()\n    Dim now = DateTime.Now()\n    Dim iAge = HebCal.GetYear(now) - HebCal.GetYear(BirthDate)\n    Dim iNowMonth = HebCal.GetMonth(now), iBirthMonth = HebCal.GetMonth(BirthDate)\n    If iNowMonth &lt; iBirthMonth Or (iNowMonth = iBirthMonth AndAlso HebCal.GetDayOfMonth(now) &lt; HebCal.GetDayOfMonth(BirthDate)) Then iAge -= 1\n    Return iAge\nEnd Function\n</code></pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "33082044",
        "title": "",
        "text": "<pre class=\"lang-cs prettyprint-override\"><code>public string GetAge(this DateTime birthdate, string ageStrinFormat = null)\n{\n    var date = DateTime.Now.AddMonths(-birthdate.Month).AddDays(-birthdate.Day);\n    return string.Format(ageStrinFormat ?? \"{0}/{1}/{2}\",\n        (date.Year - birthdate.Year), date.Month, date.Day);\n}\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "31077562",
        "title": "",
        "text": "<p>It can be this simple:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>int age = DateTime.Now.AddTicks(0 - dob.Ticks).Year - 1;\n</code></pre>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "31178328",
        "title": "",
        "text": "<p>I would simply do this:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>DateTime birthDay = new DateTime(1990, 05, 23);\nDateTime age = DateTime.Now - birthDay;\n</code></pre>\n\n<p>This way you can calculate the exact age of a person, down to the millisecond if you want.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "21276626",
        "title": "",
        "text": "<p>I have a customized method to calculate age, plus a bonus validation message just in case it helps:</p>\n\n<pre><code>public void GetAge(DateTime dob, DateTime now, out int years, out int months, out int days)\n{\n    years = 0;\n    months = 0;\n    days = 0;\n\n    DateTime tmpdob = new DateTime(dob.Year, dob.Month, 1);\n    DateTime tmpnow = new DateTime(now.Year, now.Month, 1);\n\n    while (tmpdob.AddYears(years).AddMonths(months) &lt; tmpnow)\n    {\n        months++;\n        if (months &gt; 12)\n        {\n            years++;\n            months = months - 12;\n        }\n    }\n\n    if (now.Day &gt;= dob.Day)\n        days = days + now.Day - dob.Day;\n    else\n    {\n        months--;\n        if (months &lt; 0)\n        {\n            years--;\n            months = months + 12;\n        }\n        days += DateTime.DaysInMonth(now.AddMonths(-1).Year, now.AddMonths(-1).Month) + now.Day - dob.Day;\n    }\n\n    if (DateTime.IsLeapYear(dob.Year) &amp;&amp; dob.Month == 2 &amp;&amp; dob.Day == 29 &amp;&amp; now &gt;= new DateTime(now.Year, 3, 1))\n        days++;\n\n}   \n\nprivate string ValidateDate(DateTime dob) //This method will validate the date\n{\n    int Years = 0; int Months = 0; int Days = 0;\n\n    GetAge(dob, DateTime.Now, out Years, out Months, out Days);\n\n    if (Years &lt; 18)\n        message =  Years + \" is too young. Please try again on your 18th birthday.\";\n    else if (Years &gt;= 65)\n        message = Years + \" is too old. Date of Birth must not be 65 or older.\";\n    else\n        return null; //Denotes validation passed\n}\n</code></pre>\n\n<p>Method call here and pass out datetime value (MM/dd/yyyy if server set to USA locale). Replace this with anything a messagebox or any container to display:</p>\n\n<pre><code>DateTime dob = DateTime.Parse(\"03/10/1982\");  \n\nstring message = ValidateDate(dob);\n\nlbldatemessage.Visible = !StringIsNullOrWhitespace(message);\nlbldatemessage.Text = message ?? \"\"; //Ternary if message is null then default to empty string\n</code></pre>\n\n<p>Remember you can format the message any way you like.</p>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6719204",
        "title": "",
        "text": "<p>I've made one small change to <a href=\"https://stackoverflow.com/questions/9/how-do-i-calculate-someones-age-in-c/1404#1404\">Mark Soen's</a> answer: I've rewriten the third line so that the expression can be parsed a bit more easily.</p>\n\n<pre><code>public int AgeInYears(DateTime bday)\n{\n    DateTime now = DateTime.Today;\n    int age = now.Year - bday.Year;            \n    if (bday.AddYears(age) &gt; now) \n        age--;\n    return age;\n}\n</code></pre>\n\n<p>I've also made it into a function for the sake of clarity.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "30145502",
        "title": "",
        "text": "<p>Check this out:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>TimeSpan ts = DateTime.Now.Subtract(Birthdate);\nage = (byte)(ts.TotalDays / 365.25);\n</code></pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "14125249",
        "title": "",
        "text": "<p>Here is a very simple and easy to follow example. </p>\n\n<pre><code>private int CalculateAge()\n{\n//get birthdate\n   DateTime dtBirth = Convert.ToDateTime(BirthDatePicker.Value);\n   int byear = dtBirth.Year;\n   int bmonth = dtBirth.Month;\n   int bday = dtBirth.Day;\n   DateTime dtToday = DateTime.Now;\n   int tYear = dtToday.Year;\n   int tmonth = dtToday.Month;\n   int tday = dtToday.Day;\n   int age = tYear - byear;\n   if (bmonth &lt; tmonth)\n       age--;\n   else if (bmonth == tmonth &amp;&amp; bday&gt;tday)\n   {\n       age--;\n   }\nreturn age;\n}\n</code></pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "38121726",
        "title": "",
        "text": "<p>SQL version:</p>\n\n<pre><code>declare @dd smalldatetime = '1980-04-01'\ndeclare @age int = YEAR(GETDATE())-YEAR(@dd)\nif (@dd&gt; DATEADD(YYYY, -@age, GETDATE())) set @age = @age -1\n\nprint @age  \n</code></pre>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "48805951",
        "title": "",
        "text": "<pre class=\"lang-cs prettyprint-override\"><code>var birthDate = ... // DOB\nvar resultDate = DateTime.Now - birthDate;\n</code></pre>\n\n<p>Using <code>resultDate</code> you can apply <code>TimeSpan</code> properties whatever you want to display it.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5229568",
        "title": "",
        "text": "<p>How about this solution? </p>\n\n<pre><code>static string CalcAge(DateTime birthDay)\n{\n    DateTime currentDate = DateTime.Now;         \n    int approximateAge = currentDate.Year - birthDay.Year;\n    int daysToNextBirthDay = (birthDay.Month * 30 + birthDay.Day) - \n        (currentDate.Month * 30 + currentDate.Day) ;\n\n    if (approximateAge == 0 || approximateAge == 1)\n    {                \n        int month =  Math.Abs(daysToNextBirthDay / 30);\n        int days = Math.Abs(daysToNextBirthDay % 30);\n\n        if (month == 0)\n            return \"Your age is: \" + daysToNextBirthDay + \" days\";\n\n        return \"Your age is: \" + month + \" months and \" + days + \" days\"; ;\n    }\n\n    if (daysToNextBirthDay &gt; 0)\n        return \"Your age is: \" + --approximateAge + \" Years\";\n\n    return \"Your age is: \" + approximateAge + \" Years\"; ;\n}\n</code></pre>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3261",
        "title": "",
        "text": "<p>This is the version we use here. It works, and it's fairly simple. It's the same idea as Jeff's but I think it's a little clearer because it separates out the logic for subtracting one, so it's a little easier to understand.</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public static int GetAge(this DateTime dateOfBirth, DateTime dateAsAt)\n{\n    return dateAsAt.Year - dateOfBirth.Year - (dateOfBirth.DayOfYear &lt; dateAsAt.DayOfYear ? 0 : 1);\n}\n</code></pre>\n\n<p>You could expand the ternary operator to make it even clearer, if you think that sort of thing is unclear.</p>\n\n<p>Obviously this is done as an extension method on <code>DateTime</code>, but clearly you can grab that one line of code that does the work and put it anywhere. Here we have another overload of the Extension method that passes in <code>DateTime.Now</code>, just for completeness.</p>\n",
        "votes": "45",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7046204",
        "title": "",
        "text": "<p>I used ScArcher2's solution for an accurate Year calculation of a persons age but I needed to take it further and calculate their Months and Days along with the Years.</p>\n\n<pre><code>    public static Dictionary&lt;string,int&gt; CurrentAgeInYearsMonthsDays(DateTime? ndtBirthDate, DateTime? ndtReferralDate)\n    {\n        //----------------------------------------------------------------------\n        // Can't determine age if we don't have a dates.\n        //----------------------------------------------------------------------\n        if (ndtBirthDate == null) return null;\n        if (ndtReferralDate == null) return null;\n\n        DateTime dtBirthDate = Convert.ToDateTime(ndtBirthDate);\n        DateTime dtReferralDate = Convert.ToDateTime(ndtReferralDate);\n\n        //----------------------------------------------------------------------\n        // Create our Variables\n        //----------------------------------------------------------------------\n        Dictionary&lt;string, int&gt; dYMD = new Dictionary&lt;string,int&gt;();\n        int iNowDate, iBirthDate, iYears, iMonths, iDays;\n        string sDif = \"\";\n\n        //----------------------------------------------------------------------\n        // Store off current date/time and DOB into local variables\n        //---------------------------------------------------------------------- \n        iNowDate = int.Parse(dtReferralDate.ToString(\"yyyyMMdd\"));\n        iBirthDate = int.Parse(dtBirthDate.ToString(\"yyyyMMdd\"));\n\n        //----------------------------------------------------------------------\n        // Calculate Years\n        //----------------------------------------------------------------------\n        sDif = (iNowDate - iBirthDate).ToString();\n        iYears = int.Parse(sDif.Substring(0, sDif.Length - 4));\n\n        //----------------------------------------------------------------------\n        // Store Years in Return Value\n        //----------------------------------------------------------------------\n        dYMD.Add(\"Years\", iYears);\n\n        //----------------------------------------------------------------------\n        // Calculate Months\n        //----------------------------------------------------------------------\n        if (dtBirthDate.Month &gt; dtReferralDate.Month)\n            iMonths = 12 - dtBirthDate.Month + dtReferralDate.Month - 1;\n        else\n            iMonths = dtBirthDate.Month - dtReferralDate.Month;\n\n        //----------------------------------------------------------------------\n        // Store Months in Return Value\n        //----------------------------------------------------------------------\n        dYMD.Add(\"Months\", iMonths);\n\n        //----------------------------------------------------------------------\n        // Calculate Remaining Days\n        //----------------------------------------------------------------------\n        if (dtBirthDate.Day &gt; dtReferralDate.Day)\n            //Logic: Figure out the days in month previous to the current month, or the admitted month.\n            //       Subtract the birthday from the total days which will give us how many days the person has lived since their birthdate day the previous month.\n            //       then take the referral date and simply add the number of days the person has lived this month.\n\n            //If referral date is january, we need to go back to the following year's December to get the days in that month.\n            if (dtReferralDate.Month == 1)\n                iDays = DateTime.DaysInMonth(dtReferralDate.Year - 1, 12) - dtBirthDate.Day + dtReferralDate.Day;       \n            else\n                iDays = DateTime.DaysInMonth(dtReferralDate.Year, dtReferralDate.Month - 1) - dtBirthDate.Day + dtReferralDate.Day;       \n        else\n            iDays = dtReferralDate.Day - dtBirthDate.Day;             \n\n        //----------------------------------------------------------------------\n        // Store Days in Return Value\n        //----------------------------------------------------------------------\n        dYMD.Add(\"Days\", iDays);\n\n        return dYMD;\n}\n</code></pre>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "47035067",
        "title": "",
        "text": "<p>To calculate how many years old a person is, </p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>DateTime dateOfBirth;\n\nint ageInYears = DateTime.Now.Year - dateOfBirth.Year;\n\nif (dateOfBirth &gt; today.AddYears(-ageInYears )) ageInYears --;\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1928680",
        "title": "",
        "text": "<p>Here's a little code sample for C# I knocked up, be careful around the edge cases specifically leap years, not all the above solutions take them into account. Pushing the answer out as a DateTime can cause problems as you could end up trying to put too many days into a specific month e.g. 30 days in Feb.</p>\n\n<pre><code>public string LoopAge(DateTime myDOB, DateTime FutureDate)\n{\n    int years = 0;\n    int months = 0;\n    int days = 0;\n\n    DateTime tmpMyDOB = new DateTime(myDOB.Year, myDOB.Month, 1);\n\n    DateTime tmpFutureDate = new DateTime(FutureDate.Year, FutureDate.Month, 1);\n\n    while (tmpMyDOB.AddYears(years).AddMonths(months) &lt; tmpFutureDate)\n    {\n        months++;\n        if (months &gt; 12)\n        {\n            years++;\n            months = months - 12;\n        }\n    }\n\n    if (FutureDate.Day &gt;= myDOB.Day)\n    {\n        days = days + FutureDate.Day - myDOB.Day;\n    }\n    else\n    {\n        months--;\n        if (months &lt; 0)\n        {\n            years--;\n            months = months + 12;\n        }\n        days = days + (DateTime.DaysInMonth(FutureDate.AddMonths(-1).Year, FutureDate.AddMonths(-1).Month) + FutureDate.Day) - myDOB.Day;\n\n    }\n\n    //add an extra day if the dob is a leap day\n    if (DateTime.IsLeapYear(myDOB.Year) &amp;&amp; myDOB.Month == 2 &amp;&amp; myDOB.Day == 29)\n    {\n        //but only if the future date is less than 1st March\n        if(FutureDate &gt;= new DateTime(FutureDate.Year, 3,1))\n            days++;\n    }\n\n    return \"Years: \" + years + \" Months: \" + months + \" Days: \" + days;\n}\n</code></pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "141644",
        "title": "",
        "text": "<p>I think the TimeSpan has all that we need in it, without having to resort to 365.25 (or any other approximation). Expanding on Aug's example:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>DateTime myBD = new DateTime(1980, 10, 10);\nTimeSpan difference = DateTime.Now.Subtract(myBD);\n\ntextBox1.Text = difference.Years + \" years \" + difference.Months + \" Months \" + difference.Days + \" days\";\n</code></pre>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "45127603",
        "title": "",
        "text": "<p>I often count on my fingers. I need to look at a calendar to work out when things change. So that's what I'd do in my code:</p>\n\n<pre><code>int AgeNow(DateTime birthday)\n{\n    return AgeAt(DateTime.Now, birthday);\n}\n\nint AgeAt(DateTime now, DateTime birthday)\n{\n    return AgeAt(now, birthday, CultureInfo.CurrentCulture.Calendar);\n}\n\nint AgeAt(DateTime now, DateTime birthday, Calendar calendar)\n{\n    // My age has increased on the morning of my\n    // birthday even though I was born in the evening.\n    now = now.Date;\n    birthday = birthday.Date;\n\n    var age = 0;\n    if (now &lt;= birthday) return age; // I am zero now if I am to be born tomorrow.\n\n    while (calendar.AddYears(birthday, age + 1) &lt;= now)\n    {\n        age++;\n    }\n    return age;\n}\n</code></pre>\n\n<p>Running this through in <a href=\"https://en.wikipedia.org/wiki/LINQPad\" rel=\"nofollow noreferrer\">LINQPad</a> gives this:</p>\n\n<pre><code>PASSED: someone born on 28 February 1964 is age 4 on 28 February 1968\nPASSED: someone born on 29 February 1964 is age 3 on 28 February 1968\nPASSED: someone born on 31 December 2016 is age 0 on 01 January 2017\n</code></pre>\n\n<p>Code in LINQPad is <a href=\"http://share.linqpad.net/3gx8ba.linq\" rel=\"nofollow noreferrer\">here</a>.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "13531544",
        "title": "",
        "text": "<p>This is not a direct answer, but more of a philosophical reasoning about the problem at hand from a quasi-scientific point of view.</p>\n\n<p>I would argue that the question does not specify the unit nor culture in which to measure age, most answers seem to assume an integer annual representation. The SI-unit for time is <code>second</code>, ergo the correct generic answer should be (of course assuming normalized <code>DateTime</code> and taking no regard whatsoever to relativistic effects):</p>\n\n<pre><code>var lifeInSeconds = (DateTime.Now.Ticks - then.Ticks)/TickFactor;\n</code></pre>\n\n<p>In the Christian way of calculating age in years:</p>\n\n<pre><code>var then = ... // Then, in this case the birthday\nvar now = DateTime.UtcNow;\nint age = now.Year - then.Year;\nif (now.AddYears(-age) &lt; then) age--;\n</code></pre>\n\n<p>In finance there is a similar problem when calculating something often referred to as the <em>Day Count Fraction</em>, which roughly is a number of years for a given period. And the age issue is really a time measuring issue.</p>\n\n<p>Example for the actual/actual (counting all days \"correctly\") convention:</p>\n\n<pre><code>DateTime start, end = .... // Whatever, assume start is before end\n\ndouble startYearContribution = 1 - (double) start.DayOfYear / (double) (DateTime.IsLeapYear(start.Year) ? 366 : 365);\ndouble endYearContribution = (double)end.DayOfYear / (double)(DateTime.IsLeapYear(end.Year) ? 366 : 365);\ndouble middleContribution = (double) (end.Year - start.Year - 1);\n\ndouble DCF = startYearContribution + endYearContribution + middleContribution;\n</code></pre>\n\n<p>Another quite common way to measure time generally is by \"serializing\" (the dude who named this date convention must seriously have been trippin'):</p>\n\n<pre><code>DateTime start, end = .... // Whatever, assume start is before end\nint days = (end - start).Days;\n</code></pre>\n\n<p>I wonder how long we have to go before a relativistic age in seconds becomes more useful than the rough approximation of earth-around-sun-cycles during one's lifetime so far :) Or in other words, when a period must be given a location or a function representing motion for itself to be valid :)</p>\n",
        "votes": "19",
        "tags": "",
        "accepted": false
      },
      {
        "id": "60541141",
        "title": "",
        "text": "<p>Very simple answer</p>\n\n<pre><code>        DateTime dob = new DateTime(1991, 3, 4); \n        DateTime now = DateTime.Now; \n        int dobDay = dob.Day, dobMonth = dob.Month; \n        int add = -1; \n        if (dobMonth &lt; now.Month)\n        {\n            add = 0;\n        }\n        else if (dobMonth == now.Month)\n        {\n            if(dobDay &lt;= now.Day)\n            {\n                add = 0;\n            }\n            else\n            {\n                add = -1;\n            }\n        }\n        else\n        {\n            add = -1;\n        } \n        int age = now.Year - dob.Year + add;\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "39779195",
        "title": "",
        "text": "<p>Wow, I had to give my answer here... There are so many answers for such a simple question.</p>\n\n<pre><code>private int CalcularIdade(DateTime dtNascimento)\n    {\n        var nHoje = Convert.ToInt32(DateTime.Today.ToString(\"yyyyMMdd\"));\n        var nAniversario = Convert.ToInt32(dtNascimento.ToString(\"yyyyMMdd\"));\n\n        double diff = (nHoje - nAniversario) / 10000;\n\n        var ret = Convert.ToInt32(Math.Truncate(diff));\n\n        return ret;\n    }\n</code></pre>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3513146",
        "title": "",
        "text": "<p>Keeping it simple (and possibly stupid:)).</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>DateTime birth = new DateTime(1975, 09, 27, 01, 00, 00, 00);\nTimeSpan ts = DateTime.Now - birth;\nConsole.WriteLine(\"You are approximately \" + ts.TotalSeconds.ToString() + \" seconds old.\");\n</code></pre>\n",
        "votes": "20",
        "tags": "",
        "accepted": false
      },
      {
        "id": "24242",
        "title": "",
        "text": "<p>I have created a SQL Server User Defined Function to calculate someone's age, given their birthdate. This is useful when you need it as part of a query:</p>\n\n<pre><code>using System;\nusing System.Data;\nusing System.Data.Sql;\nusing System.Data.SqlClient;\nusing System.Data.SqlTypes;\nusing Microsoft.SqlServer.Server;\n\npublic partial class UserDefinedFunctions\n{\n    [SqlFunction(DataAccess = DataAccessKind.Read)]\n    public static SqlInt32 CalculateAge(string strBirthDate)\n    {\n        DateTime dtBirthDate = new DateTime();\n        dtBirthDate = Convert.ToDateTime(strBirthDate);\n        DateTime dtToday = DateTime.Now;\n\n        // get the difference in years\n        int years = dtToday.Year - dtBirthDate.Year;\n\n        // subtract another year if we're before the\n        // birth day in the current year\n        if (dtToday.Month &lt; dtBirthDate.Month || (dtToday.Month == dtBirthDate.Month &amp;&amp; dtToday.Day &lt; dtBirthDate.Day))\n            years=years-1;\n\n        int intCustomerAge = years;\n        return intCustomerAge;\n    }\n};\n</code></pre>\n",
        "votes": "30",
        "tags": "",
        "accepted": false
      },
      {
        "id": "20348258",
        "title": "",
        "text": "<p>To calculate the age with nearest age:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>var ts = DateTime.Now - new DateTime(1988, 3, 19);\nvar age = Math.Round(ts.Days / 365.0);\n</code></pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5989087",
        "title": "",
        "text": "<p>The following approach (extract from <a href=\"https://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET\" rel=\"nofollow noreferrer\">Time Period Library for .NET</a> class <em>DateDiff</em>) considers the calendar of the culture info:</p>\n\n<pre><code>// ----------------------------------------------------------------------\nprivate static int YearDiff( DateTime date1, DateTime date2 )\n{\n  return YearDiff( date1, date2, DateTimeFormatInfo.CurrentInfo.Calendar );\n} // YearDiff\n\n// ----------------------------------------------------------------------\nprivate static int YearDiff( DateTime date1, DateTime date2, Calendar calendar )\n{\n  if ( date1.Equals( date2 ) )\n  {\n    return 0;\n  }\n\n  int year1 = calendar.GetYear( date1 );\n  int month1 = calendar.GetMonth( date1 );\n  int year2 = calendar.GetYear( date2 );\n  int month2 = calendar.GetMonth( date2 );\n\n  // find the the day to compare\n  int compareDay = date2.Day;\n  int compareDaysPerMonth = calendar.GetDaysInMonth( year1, month1 );\n  if ( compareDay &gt; compareDaysPerMonth )\n  {\n    compareDay = compareDaysPerMonth;\n  }\n\n  // build the compare date\n  DateTime compareDate = new DateTime( year1, month2, compareDay,\n    date2.Hour, date2.Minute, date2.Second, date2.Millisecond );\n  if ( date2 &gt; date1 )\n  {\n    if ( compareDate &lt; date1 )\n    {\n      compareDate = compareDate.AddYears( 1 );\n    }\n  }\n  else\n  {\n    if ( compareDate &gt; date1 )\n    {\n      compareDate = compareDate.AddYears( -1 );\n    }\n  }\n  return year2 - calendar.GetYear( compareDate );\n} // YearDiff\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>// ----------------------------------------------------------------------\npublic void CalculateAgeSamples()\n{\n  PrintAge( new DateTime( 2000, 02, 29 ), new DateTime( 2009, 02, 28 ) );\n  // &gt; Birthdate=29.02.2000, Age at 28.02.2009 is 8 years\n  PrintAge( new DateTime( 2000, 02, 29 ), new DateTime( 2012, 02, 28 ) );\n  // &gt; Birthdate=29.02.2000, Age at 28.02.2012 is 11 years\n} // CalculateAgeSamples\n\n// ----------------------------------------------------------------------\npublic void PrintAge( DateTime birthDate, DateTime moment )\n{\n  Console.WriteLine( \"Birthdate={0:d}, Age at {1:d} is {2} years\", birthDate, moment, YearDiff( birthDate, moment ) );\n} // PrintAge\n</code></pre>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6075141",
        "title": "",
        "text": "<p>Here's a DateTime extender that adds the age calculation to the DateTime object.</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public static class AgeExtender\n{\n    public static int GetAge(this DateTime dt)\n    {\n        int d = int.Parse(dt.ToString(\"yyyyMMdd\"));\n        int t = int.Parse(DateTime.Today.ToString(\"yyyyMMdd\"));\n        return (t-d)/10000;\n    }\n}\n</code></pre>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "37022367",
        "title": "",
        "text": "<p>=== <strong>Common Saying (from months to years old)</strong> ===</p>\n\n<p>If you just for common use, here is the code as your information:</p>\n\n<pre><code>DateTime today = DateTime.Today;\nDateTime bday = DateTime.Parse(\"2016-2-14\");\nint age = today.Year - bday.Year;\nvar unit = \"\";\n\nif (bday &gt; today.AddYears(-age))\n{\n    age--;\n}\nif (age == 0)   // Under one year old\n{\n    age = today.Month - bday.Month;\n\n    age = age &lt;= 0 ? (12 + age) : age;  // The next year before birthday\n\n    age = today.Day - bday.Day &gt;= 0 ? age : --age;  // Before the birthday.day\n\n    unit = \"month\";\n}\nelse {\n    unit = \"year\";\n}\n\nif (age &gt; 1)\n{\n    unit = unit + \"s\";\n}\n</code></pre>\n\n<p>The test result as below:</p>\n\n<pre><code>The birthday: 2016-2-14\n\n2016-2-15 =&gt;  age=0, unit=month;\n2016-5-13 =&gt;  age=2, unit=months;\n2016-5-14 =&gt;  age=3, unit=months; \n2016-6-13 =&gt;  age=3, unit=months; \n2016-6-15 =&gt;  age=4, unit=months; \n2017-1-13 =&gt;  age=10, unit=months; \n2017-1-14 =&gt;  age=11, unit=months; \n2017-2-13 =&gt;  age=11, unit=months; \n2017-2-14 =&gt;  age=1, unit=year; \n2017-2-15 =&gt;  age=1, unit=year; \n2017-3-13 =&gt;  age=1, unit=year;\n2018-1-13 =&gt;  age=1, unit=year; \n2018-1-14 =&gt;  age=1, unit=year; \n2018-2-13 =&gt;  age=1, unit=year; \n2018-2-14 =&gt;  age=2, unit=years; \n</code></pre>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "11",
    "url": "https://stackoverflow.com/questions/11",
    "title": "Calculate relative time in C#",
    "text:": "<p>Given a specific <code>DateTime</code> value, how do I display relative time, like:</p>\n\n<ul>\n<li>2 hours ago</li>\n<li>3 days ago</li>\n<li>a month ago</li>\n</ul>\n",
    "codes": [
      [
        "TimeSpan timeDiff = DateTime.Now-CreatedDate;\n",
        "timeDiff.Days\ntimeDiff.Hours\n"
      ],
      [
        "/*\n * Javascript Humane Dates\n * Copyright (c) 2008 Dean Landolt (deanlandolt.com)\n * Re-write by Zach Leatherman (zachleat.com)\n * \n * Adopted from the John Resig's pretty.js\n * at http://ejohn.org/blog/javascript-pretty-date\n * and henrah's proposed modification \n * at http://ejohn.org/blog/javascript-pretty-date/#comment-297458\n * \n * Licensed under the MIT license.\n */\n\nfunction humane_date(date_str){\n        var time_formats = [\n                [60, 'just now'],\n                [90, '1 minute'], // 60*1.5\n                [3600, 'minutes', 60], // 60*60, 60\n                [5400, '1 hour'], // 60*60*1.5\n                [86400, 'hours', 3600], // 60*60*24, 60*60\n                [129600, '1 day'], // 60*60*24*1.5\n                [604800, 'days', 86400], // 60*60*24*7, 60*60*24\n                [907200, '1 week'], // 60*60*24*7*1.5\n                [2628000, 'weeks', 604800], // 60*60*24*(365/12), 60*60*24*7\n                [3942000, '1 month'], // 60*60*24*(365/12)*1.5\n                [31536000, 'months', 2628000], // 60*60*24*365, 60*60*24*(365/12)\n                [47304000, '1 year'], // 60*60*24*365*1.5\n                [3153600000, 'years', 31536000], // 60*60*24*365*100, 60*60*24*365\n                [4730400000, '1 century'] // 60*60*24*365*100*1.5\n        ];\n\n        var time = ('' + date_str).replace(/-/g,\"/\").replace(/[TZ]/g,\" \"),\n                dt = new Date,\n                seconds = ((dt - new Date(time) + (dt.getTimezoneOffset() * 60000)) / 1000),\n                token = ' ago',\n                i = 0,\n                format;\n\n        if (seconds < 0) {\n                seconds = Math.abs(seconds);\n                token = '';\n        }\n\n        while (format = time_formats[i++]) {\n                if (seconds < format[0]) {\n                        if (format.length == 2) {\n                                return format[1] + (i > 1 ? token : ''); // Conditional so we don't return Just Now Ago\n                        } else {\n                                return Math.round(seconds / format[2]) + ' ' + format[1] + (i > 1 ? token : '');\n                        }\n                }\n        }\n\n        // overflow for centuries\n        if(seconds > 4730400000)\n                return Math.round(seconds / 4730400000) + ' centuries' + token;\n\n        return date_str;\n};\n\nif(typeof jQuery != 'undefined') {\n        jQuery.fn.humane_dates = function(){\n                return this.each(function(){\n                        var date = humane_date(this.title);\n                        if(date && jQuery(this).text() != date) // don't modify the dom if we don't have to\n                                jQuery(this).text(date);\n                });\n        };\n}\n"
      ],
      [
        "public static string RelativeDate(DateTime theDate)\n{\n    Dictionary<long, string> thresholds = new Dictionary<long, string>();\n    int minute = 60;\n    int hour = 60 * minute;\n    int day = 24 * hour;\n    thresholds.Add(60, \"{0} seconds ago\");\n    thresholds.Add(minute * 2, \"a minute ago\");\n    thresholds.Add(45 * minute, \"{0} minutes ago\");\n    thresholds.Add(120 * minute, \"an hour ago\");\n    thresholds.Add(day, \"{0} hours ago\");\n    thresholds.Add(day * 2, \"yesterday\");\n    thresholds.Add(day * 30, \"{0} days ago\");\n    thresholds.Add(day * 365, \"{0} months ago\");\n    thresholds.Add(long.MaxValue, \"{0} years ago\");\n    long since = (DateTime.Now.Ticks - theDate.Ticks) / 10000000;\n    foreach (long threshold in thresholds.Keys) \n    {\n        if (since < threshold) \n        {\n            TimeSpan t = new TimeSpan((DateTime.Now.Ticks - theDate.Ticks));\n            return string.Format(thresholds[threshold], (t.Days > 365 ? t.Days / 365 : (t.Days > 0 ? t.Days : (t.Hours > 0 ? t.Hours : (t.Minutes > 0 ? t.Minutes : (t.Seconds > 0 ? t.Seconds : 0))))).ToString());\n        }\n    }\n    return \"\";\n}\n"
      ],
      [
        "public static class TimeSpanExtensions {\n\n    public static TimeSpan Days(this int value) {\n\n        return new TimeSpan(value, 0, 0, 0);\n    }\n\n    public static TimeSpan Hours(this int value) {\n\n        return new TimeSpan(0, value, 0, 0);\n    }\n\n    public static TimeSpan Minutes(this int value) {\n\n        return new TimeSpan(0, 0, value, 0);\n    }\n\n    public static TimeSpan Seconds(this int value) {\n\n        return new TimeSpan(0, 0, 0, value);\n    }\n\n    public static TimeSpan Milliseconds(this int value) {\n\n        return new TimeSpan(0, 0, 0, 0, value);\n    }\n\n    public static DateTime Ago(this TimeSpan value) {\n\n        return DateTime.Now - value;\n    }\n}\n",
        "public static class DateTimeExtensions {\n\n    public static DateTime Ago(this DateTime dateTime, TimeSpan delta) {\n\n        return dateTime - delta;\n    }\n}\n",
        "var date = DateTime.Now;\ndate.Ago(2.Days()); // 2 days ago\ndate.Ago(7.Hours()); // 7 hours ago\ndate.Ago(567.Milliseconds()); // 567 milliseconds ago\n"
      ],
      [
        "function posted(t) {\n    var now = new Date();\n    var diff = parseInt((now.getTime() - Date.parse(t)) / 1000);\n    if (diff < 60) { return 'less than a minute ago'; }\n    else if (diff < 120) { return 'about a minute ago'; }\n    else if (diff < (2700)) { return (parseInt(diff / 60)).toString() + ' minutes ago'; }\n    else if (diff < (5400)) { return 'about an hour ago'; }\n    else if (diff < (86400)) { return 'about ' + (parseInt(diff / 3600)).toString() + ' hours ago'; }\n    else if (diff < (172800)) { return '1 day ago'; } \n    else {return (parseInt(diff / 86400)).toString() + ' days ago'; }\n}\n"
      ],
      [
        "if (delta < 5400) // 90 * 60\n{\n    return \"an hour ago\";\n}\n",
        "if (delta < 7200) // 120 * 60\n{\n    return \"an hour ago\";\n}\n"
      ],
      [
        "var dateTime1 = 2.Hours().Ago();\nvar dateTime2 = 3.Days().Ago();\nvar dateTime3 = 1.Months().Ago();\nvar dateTime4 = 5.Hours().FromNow();\nvar dateTime5 = 2.Weeks().FromNow();\nvar dateTime6 = 40.Seconds().FromNow();\n"
      ],
      [
        "jQuery(document).ready(function() {\n    jQuery('abbr.timeago').timeago();\n});\n",
        "<abbr class=\"timeago\" title=\"2008-07-17T09:24:17Z\">July 17, 2008</abbr>\n",
        "<abbr class=\"timeago\" title=\"July 17, 2008\">4 months ago</abbr>\n"
      ],
      [
        "    const int SECOND = 1;\n    const int MINUTE = 60 * SECOND;\n    const int HOUR = 60 * MINUTE;\n    const int DAY = 24 * HOUR;\n    const int MONTH = 30 * DAY;\n\n    var ts = new TimeSpan(DateTime.UtcNow.Ticks - yourDate.Ticks);\n    double delta = Math.Abs(ts.TotalSeconds);\n\n    if (delta < 1 * MINUTE)\n        return ts.Seconds + \" saniye \u00f6nce\";\n\n    if (delta < 45 * MINUTE)\n        return ts.Minutes + \" dakika \u00f6nce\";\n\n    if (delta < 24 * HOUR)\n        return ts.Hours + \" saat \u00f6nce\";\n\n    if (delta < 48 * HOUR)\n        return \"d\u00fcn\";\n\n    if (delta < 30 * DAY)\n        return ts.Days + \" g\u00fcn \u00f6nce\";\n\n    if (delta < 12 * MONTH)\n    {\n        int months = Convert.ToInt32(Math.Floor((double)ts.Days / 30));\n        return months + \" ay \u00f6nce\";\n    }\n    else\n    {\n        int years = Convert.ToInt32(Math.Floor((double)ts.Days / 365));\n        return years + \" y\u0131l \u00f6nce\";\n    }\n"
      ],
      [
        "agoify($delta)\n  local($y, $mo, $d, $h, $m, $s);\n  $s = floor($delta);\n  if($s<=1)            return \"a second ago\";\n  if($s<60)            return \"$s seconds ago\";\n  $m = floor($s/60);\n  if($m==1)            return \"a minute ago\";\n  if($m<45)            return \"$m minutes ago\";\n  $h = floor($m/60);\n  if($h==1)            return \"an hour ago\";\n  if($h<24)            return \"$h hours ago\";\n  $d = floor($h/24);\n  if($d<2)             return \"yesterday\";\n  if($d<30)            return \"$d days ago\";\n  $mo = floor($d/30);\n  if($mo<=1)           return \"a month ago\";\n  $y = floor($mo/12);\n  if($y<1)             return \"$mo months ago\";\n  if($y==1)            return \"a year ago\";\n  return \"$y years ago\";\n"
      ],
      [
        "using System.Text;\n\n/// <summary>\n/// Compares a supplied date to the current date and generates a friendly English \n/// comparison (\"5 days ago\", \"5 days from now\")\n/// </summary>\n/// <param name=\"date\">The date to convert</param>\n/// <param name=\"approximate\">When off, calculate timespan down to the second.\n/// When on, approximate to the largest round unit of time.</param>\n/// <returns></returns>\npublic static string ToRelativeDateString(this DateTime value, bool approximate)\n{\n    StringBuilder sb = new StringBuilder();\n\n    string suffix = (value > DateTime.Now) ? \" from now\" : \" ago\";\n\n    TimeSpan timeSpan = new TimeSpan(Math.Abs(DateTime.Now.Subtract(value).Ticks));\n\n    if (timeSpan.Days > 0)\n    {\n        sb.AppendFormat(\"{0} {1}\", timeSpan.Days,\n          (timeSpan.Days > 1) ? \"days\" : \"day\");\n        if (approximate) return sb.ToString() + suffix;\n    }\n    if (timeSpan.Hours > 0)\n    {\n        sb.AppendFormat(\"{0}{1} {2}\", (sb.Length > 0) ? \", \" : string.Empty,\n          timeSpan.Hours, (timeSpan.Hours > 1) ? \"hours\" : \"hour\");\n        if (approximate) return sb.ToString() + suffix;\n    }\n    if (timeSpan.Minutes > 0)\n    {\n        sb.AppendFormat(\"{0}{1} {2}\", (sb.Length > 0) ? \", \" : string.Empty, \n          timeSpan.Minutes, (timeSpan.Minutes > 1) ? \"minutes\" : \"minute\");\n        if (approximate) return sb.ToString() + suffix;\n    }\n    if (timeSpan.Seconds > 0)\n    {\n        sb.AppendFormat(\"{0}{1} {2}\", (sb.Length > 0) ? \", \" : string.Empty, \n          timeSpan.Seconds, (timeSpan.Seconds > 1) ? \"seconds\" : \"second\");\n        if (approximate) return sb.ToString() + suffix;\n    }\n    if (sb.Length == 0) return \"right now\";\n\n    sb.Append(suffix);\n    return sb.ToString();\n}\n"
      ],
      [
        "public class RelativeTimeRange : IComparable\n{\n    public TimeSpan UpperBound { get; set; }\n\n    public delegate string RelativeTimeTextDelegate(TimeSpan timeDelta);\n\n    public RelativeTimeTextDelegate MessageCreator { get; set; }\n\n    public int CompareTo(object obj)\n    {\n        if (!(obj is RelativeTimeRange))\n        {\n            return 1;\n        }\n        // note that this sorts in reverse order to the way you'd expect, \n        // this saves having to reverse a list later\n        return (obj as RelativeTimeRange).UpperBound.CompareTo(UpperBound);\n    }\n}\n\npublic class PrintRelativeTime\n{\n    private static List<RelativeTimeRange> timeRanges;\n\n    static PrintRelativeTime()\n    {\n        timeRanges = new List<RelativeTimeRange>{\n            new RelativeTimeRange\n            {\n                UpperBound = TimeSpan.FromSeconds(1),\n                MessageCreator = (delta) => \n                { return \"one second ago\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = TimeSpan.FromSeconds(60),\n                MessageCreator = (delta) => \n                { return delta.Seconds + \" seconds ago\"; }\n\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = TimeSpan.FromMinutes(2),\n                MessageCreator = (delta) => \n                { return \"one minute ago\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = TimeSpan.FromMinutes(60),\n                MessageCreator = (delta) => \n                { return delta.Minutes + \" minutes ago\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = TimeSpan.FromHours(2),\n                MessageCreator = (delta) => \n                { return \"one hour ago\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = TimeSpan.FromHours(24),\n                MessageCreator = (delta) => \n                { return delta.Hours + \" hours ago\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = TimeSpan.FromDays(2),\n                MessageCreator = (delta) => \n                { return \"yesterday\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = DateTime.Now.Subtract(DateTime.Now.AddMonths(-1)),\n                MessageCreator = (delta) => \n                { return delta.Days + \" days ago\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = DateTime.Now.Subtract(DateTime.Now.AddMonths(-2)),\n                MessageCreator = (delta) => \n                { return \"one month ago\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = DateTime.Now.Subtract(DateTime.Now.AddYears(-1)),\n                MessageCreator = (delta) => \n                { return (int)Math.Floor(delta.TotalDays / 30) + \" months ago\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = DateTime.Now.Subtract(DateTime.Now.AddYears(-2)),\n                MessageCreator = (delta) => \n                { return \"one year ago\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = TimeSpan.MaxValue,\n                MessageCreator = (delta) => \n                { return (int)Math.Floor(delta.TotalDays / 365.24D) + \" years ago\"; }\n            }\n        };\n\n        timeRanges.Sort();\n    }\n\n    public static string GetRelativeTimeMessage(TimeSpan ago)\n    {\n        RelativeTimeRange postRelativeDateRange = timeRanges[0];\n\n        foreach (var timeRange in timeRanges)\n        {\n            if (ago.CompareTo(timeRange.UpperBound) <= 0)\n            {\n                postRelativeDateRange = timeRange;\n            }\n        }\n\n        return postRelativeDateRange.MessageCreator(ago);\n    }\n}\n"
      ],
      [
        "var ts = new TimeSpan(DateTime.UtcNow.Ticks - dt.Ticks);\ndouble delta = Math.Abs(ts.TotalSeconds);\n\nif (delta < 60)\n{\n  return ts.Seconds == 1 ? \"one second ago\" : ts.Seconds + \" seconds ago\";\n}\nif (delta < 120)\n{\n  return \"a minute ago\";\n}\nif (delta < 2700) // 45 * 60\n{\n  return ts.Minutes + \" minutes ago\";\n}\nif (delta < 5400) // 90 * 60\n{\n  return \"an hour ago\";\n}\nif (delta < 86400) // 24 * 60 * 60\n{\n  return ts.Hours + \" hours ago\";\n}\nif (delta < 172800) // 48 * 60 * 60\n{\n  return \"yesterday\";\n}\nif (delta < 2592000) // 30 * 24 * 60 * 60\n{\n  return ts.Days + \" days ago\";\n}\nif (delta < 31104000) // 12 * 30 * 24 * 60 * 60\n{\n  int months = Convert.ToInt32(Math.Floor((double)ts.Days / 30));\n  return months <= 1 ? \"one month ago\" : months + \" months ago\";\n}\nint years = Convert.ToInt32(Math.Floor((double)ts.Days / 365));\nreturn years <= 1 ? \"one year ago\" : years + \" years ago\";\n"
      ],
      [
        "var ts = new TimeSpan(DateTime.UtcNow.Ticks - dt.Ticks);\n",
        "(DateTime.UtcNow - dt).TotalSeconds\n"
      ],
      [
        "public static string ToLongString(this TimeSpan time)\n{\n    string output = String.Empty;\n\n    if (time.Days > 0)\n        output += time.Days + \" days \";\n\n    if ((time.Days == 0 || time.Days == 1) && time.Hours > 0)\n        output += time.Hours + \" hr \";\n\n    if (time.Days == 0 && time.Minutes > 0)\n        output += time.Minutes + \" min \";\n\n    if (output.Length == 0)\n        output += time.Seconds + \" sec\";\n\n    return output.Trim();\n}\n"
      ],
      [
        "import java.util.Date;\n\npublic class RelativeDateFormat {\n\n private static final long ONE_MINUTE = 60000L;\n private static final long ONE_HOUR = 3600000L;\n private static final long ONE_DAY = 86400000L;\n private static final long ONE_WEEK = 604800000L;\n\n public static String format(Date date) {\n\n  long delta = new Date().getTime() - date.getTime();\n  if (delta < 1L * ONE_MINUTE) {\n   return toSeconds(delta) == 1 ? \"one second ago\" : toSeconds(delta)\n     + \" seconds ago\";\n  }\n  if (delta < 2L * ONE_MINUTE) {\n   return \"one minute ago\";\n  }\n  if (delta < 45L * ONE_MINUTE) {\n   return toMinutes(delta) + \" minutes ago\";\n  }\n  if (delta < 90L * ONE_MINUTE) {\n   return \"one hour ago\";\n  }\n  if (delta < 24L * ONE_HOUR) {\n   return toHours(delta) + \" hours ago\";\n  }\n  if (delta < 48L * ONE_HOUR) {\n   return \"yesterday\";\n  }\n  if (delta < 30L * ONE_DAY) {\n   return toDays(delta) + \" days ago\";\n  }\n  if (delta < 12L * 4L * ONE_WEEK) {\n   long months = toMonths(delta);\n   return months <= 1 ? \"one month ago\" : months + \" months ago\";\n  } else {\n   long years = toYears(delta);\n   return years <= 1 ? \"one year ago\" : years + \" years ago\";\n  }\n }\n\n private static long toSeconds(long date) {\n  return date / 1000L;\n }\n\n private static long toMinutes(long date) {\n  return toSeconds(date) / 60L;\n }\n\n private static long toHours(long date) {\n  return toMinutes(date) / 60L;\n }\n\n private static long toDays(long date) {\n  return toHours(date) / 24L;\n }\n\n private static long toMonths(long date) {\n  return toDays(date) / 30L;\n }\n\n private static long toYears(long date) {\n  return toMonths(date) / 365L;\n }\n\n}\n"
      ],
      [
        "public static string RelativeDate(DateTime theDate)\n        {\n            var span = DateTime.Now - theDate;\n            if (span.Days > 365)\n            {\n                var years = (span.Days / 365);\n                if (span.Days % 365 != 0)\n                    years += 1;\n                return $\"about {years} {(years == 1 ? \"year\" : \"years\")} ago\";\n            }\n            if (span.Days > 30)\n            {\n                var months = (span.Days / 30);\n                if (span.Days % 31 != 0)\n                    months += 1;\n                return $\"about {months} {(months == 1 ? \"month\" : \"months\")} ago\";\n            }\n            if (span.Days > 0)\n                return $\"about {span.Days} {(span.Days == 1 ? \"day\" : \"days\")} ago\";\n            if (span.Hours > 0)\n                return $\"about {span.Hours} {(span.Hours == 1 ? \"hour\" : \"hours\")} ago\";\n            if (span.Minutes > 0)\n                return $\"about {span.Minutes} {(span.Minutes == 1 ? \"minute\" : \"minutes\")} ago\";\n            if (span.Seconds > 5)\n                return $\"about {span.Seconds} seconds ago\";\n\n            return span.Seconds <= 5 ? \"about 5 seconds ago\" : string.Empty;\n        }\n"
      ],
      [
        "// Calculate total days in current year\nint daysInYear;\n\nfor (var i = 1; i <= 12; i++)\n    daysInYear += DateTime.DaysInMonth(DateTime.Now.Year, i);\n\n// Past date\nDateTime dateToCompare = DateTime.Now.Subtract(TimeSpan.FromMinutes(582));\n\n// Calculate difference between current date and past date\ndouble diff = (DateTime.Now - dateToCompare).TotalMilliseconds;\n\nTimeSpan ts = TimeSpan.FromMilliseconds(diff);\n\nvar years = ts.TotalDays / daysInYear; // Years\nvar months = ts.TotalDays / (daysInYear / (double)12); // Months\nvar weeks = ts.TotalDays / 7; // Weeks\nvar days = ts.TotalDays; // Days\nvar hours = ts.TotalHours; // Hours\nvar minutes = ts.TotalMinutes; // Minutes\nvar seconds = ts.TotalSeconds; // Seconds\n\nif (years >= 1)\n    Console.WriteLine(Math.Round(years, 0) + \" year(s) ago\");\nelse if (months >= 1)\n    Console.WriteLine(Math.Round(months, 0) + \" month(s) ago\");\nelse if (weeks >= 1)\n    Console.WriteLine(Math.Round(weeks, 0) + \" week(s) ago\");\nelse if (days >= 1)\n    Console.WriteLine(Math.Round(days, 0) + \" days(s) ago\");\nelse if (hours >= 1)\n    Console.WriteLine(Math.Round(hours, 0) + \" hour(s) ago\");\nelse if (minutes >= 1)\n    Console.WriteLine(Math.Round(minutes, 0) + \" minute(s) ago\");\nelse if (seconds >= 1)\n    Console.WriteLine(Math.Round(seconds, 0) + \" second(s) ago\");\n\nConsole.ReadLine();\n"
      ],
      [
        "public string GetRelativeTime(DateTime timeStamp)\n{\n    return string.Format(\"<script>printdate({0});</script>\", timeStamp.ToFileTimeUtc());\n}\n"
      ],
      [
        "public static string ToRelativeDate(DateTime input)\n{\n    TimeSpan oSpan = DateTime.Now.Subtract(input);\n    double TotalMinutes = oSpan.TotalMinutes;\n    string Suffix = \" ago\";\n\n    if (TotalMinutes < 0.0)\n    {\n        TotalMinutes = Math.Abs(TotalMinutes);\n        Suffix = \" from now\";\n    }\n\n    var aValue = new SortedList<double, Func<string>>();\n    aValue.Add(0.75, () => \"less than a minute\");\n    aValue.Add(1.5, () => \"about a minute\");\n    aValue.Add(45, () => string.Format(\"{0} minutes\", Math.Round(TotalMinutes)));\n    aValue.Add(90, () => \"about an hour\");\n    aValue.Add(1440, () => string.Format(\"about {0} hours\", Math.Round(Math.Abs(oSpan.TotalHours)))); // 60 * 24\n    aValue.Add(2880, () => \"a day\"); // 60 * 48\n    aValue.Add(43200, () => string.Format(\"{0} days\", Math.Floor(Math.Abs(oSpan.TotalDays)))); // 60 * 24 * 30\n    aValue.Add(86400, () => \"about a month\"); // 60 * 24 * 60\n    aValue.Add(525600, () => string.Format(\"{0} months\", Math.Floor(Math.Abs(oSpan.TotalDays / 30)))); // 60 * 24 * 365 \n    aValue.Add(1051200, () => \"about a year\"); // 60 * 24 * 365 * 2\n    aValue.Add(double.MaxValue, () => string.Format(\"{0} years\", Math.Floor(Math.Abs(oSpan.TotalDays / 365))));\n\n    return aValue.First(n => TotalMinutes < n.Key).Value.Invoke() + Suffix;\n}\n",
        "static readonly SortedList<double, Func<TimeSpan, string>> offsets = \n   new SortedList<double, Func<TimeSpan, string>>\n{\n    { 0.75, _ => \"less than a minute\"},\n    { 1.5, _ => \"about a minute\"},\n    { 45, x => $\"{x.TotalMinutes:F0} minutes\"},\n    { 90, x => \"about an hour\"},\n    { 1440, x => $\"about {x.TotalHours:F0} hours\"},\n    { 2880, x => \"a day\"},\n    { 43200, x => $\"{x.TotalDays:F0} days\"},\n    { 86400, x => \"about a month\"},\n    { 525600, x => $\"{x.TotalDays / 30:F0} months\"},\n    { 1051200, x => \"about a year\"},\n    { double.MaxValue, x => $\"{x.TotalDays / 365:F0} years\"}\n};\n\npublic static string ToRelativeDate(this DateTime input)\n{\n    TimeSpan x = DateTime.Now - input;\n    string Suffix = x.TotalMinutes > 0 ? \" ago\" : \" from now\";\n    x = new TimeSpan(Math.Abs(x.Ticks));\n    return offsets.First(n => x.TotalMinutes < n.Key).Value(x) + Suffix;\n}\n"
      ],
      [
        "public class Grammar\n{\n    /// <summary> Gets or sets the term for \"just now\". </summary>\n    public string JustNow { get; set; }\n    /// <summary> Gets or sets the term for \"X minutes ago\". </summary>\n    /// <remarks>\n    ///     This is a <see cref=\"String.Format\"/> pattern, where <c>{0}</c>\n    ///     is the number of minutes.\n    /// </remarks>\n    public string MinutesAgo { get; set; }\n    public string OneHourAgo { get; set; }\n    public string HoursAgo { get; set; }\n    public string Yesterday { get; set; }\n    public string DaysAgo { get; set; }\n    public string LastMonth { get; set; }\n    public string MonthsAgo { get; set; }\n    public string LastYear { get; set; }\n    public string YearsAgo { get; set; }\n    /// <summary> Gets or sets the term for \"ages ago\". </summary>\n    public string AgesAgo { get; set; }\n\n    /// <summary>\n    ///     Gets or sets the threshold beyond which the fuzzy date should be\n    ///     considered \"ages ago\".\n    /// </summary>\n    public TimeSpan AgesAgoThreshold { get; set; }\n\n    /// <summary>\n    ///     Initialises a new <see cref=\"Grammar\"/> instance with the\n    ///     specified properties.\n    /// </summary>\n    private void Initialise(string justNow, string minutesAgo,\n        string oneHourAgo, string hoursAgo, string yesterday, string daysAgo,\n        string lastMonth, string monthsAgo, string lastYear, string yearsAgo,\n        string agesAgo, TimeSpan agesAgoThreshold)\n    { ... }\n}\n",
        "public static class FuzzyDateExtensions\n{\n    public static string ToFuzzyDateString(this TimeSpan timespan)\n    {\n        return timespan.ToFuzzyDateString(new Grammar());\n    }\n\n    public static string ToFuzzyDateString(this TimeSpan timespan,\n        Grammar grammar)\n    {\n        return GetFuzzyDateString(timespan, grammar);\n    }\n\n    public static string ToFuzzyDateString(this DateTime datetime)\n    {\n        return (DateTime.Now - datetime).ToFuzzyDateString();\n    }\n\n    public static string ToFuzzyDateString(this DateTime datetime,\n       Grammar grammar)\n    {\n        return (DateTime.Now - datetime).ToFuzzyDateString(grammar);\n    }\n\n\n    private static string GetFuzzyDateString(TimeSpan timespan,\n       Grammar grammar)\n    {\n        timespan = timespan.Duration();\n\n        if (timespan >= grammar.AgesAgoThreshold)\n        {\n            return grammar.AgesAgo;\n        }\n\n        if (timespan < new TimeSpan(0, 2, 0))    // 2 minutes\n        {\n            return grammar.JustNow;\n        }\n\n        if (timespan < new TimeSpan(1, 0, 0))    // 1 hour\n        {\n            return String.Format(grammar.MinutesAgo, timespan.Minutes);\n        }\n\n        if (timespan < new TimeSpan(1, 55, 0))    // 1 hour 55 minutes\n        {\n            return grammar.OneHourAgo;\n        }\n\n        if (timespan < new TimeSpan(12, 0, 0)    // 12 hours\n            && (DateTime.Now - timespan).IsToday())\n        {\n            return String.Format(grammar.HoursAgo, timespan.RoundedHours());\n        }\n\n        if ((DateTime.Now.AddDays(1) - timespan).IsToday())\n        {\n            return grammar.Yesterday;\n        }\n\n        if (timespan < new TimeSpan(32, 0, 0, 0)    // 32 days\n            && (DateTime.Now - timespan).IsThisMonth())\n        {\n            return String.Format(grammar.DaysAgo, timespan.RoundedDays());\n        }\n\n        if ((DateTime.Now.AddMonths(1) - timespan).IsThisMonth())\n        {\n            return grammar.LastMonth;\n        }\n\n        if (timespan < new TimeSpan(365, 0, 0, 0, 0)    // 365 days\n            && (DateTime.Now - timespan).IsThisYear())\n        {\n            return String.Format(grammar.MonthsAgo, timespan.RoundedMonths());\n        }\n\n        if ((DateTime.Now - timespan).AddYears(1).IsThisYear())\n        {\n            return grammar.LastYear;\n        }\n\n        return String.Format(grammar.YearsAgo, timespan.RoundedYears());\n    }\n}\n",
        "public static bool IsToday(this DateTime date)\n{\n    return date.DayOfYear == DateTime.Now.DayOfYear && date.IsThisYear();\n}\n",
        "public static int RoundedDays(this TimeSpan timespan)\n{\n    return (timespan.Hours > 12) ? timespan.Days + 1 : timespan.Days;\n}\n\npublic static int RoundedMonths(this TimeSpan timespan)\n{\n    DateTime then = DateTime.Now - timespan;\n\n    // Number of partial months elapsed since 1 Jan, AD 1 (DateTime.MinValue)\n    int nowMonthYears = DateTime.Now.Year * 12 + DateTime.Now.Month;\n    int thenMonthYears = then.Year * 12 + then.Month;                    \n\n    return nowMonthYears - thenMonthYears;\n}\n"
      ],
      [
        "<?php\nfunction timesince($original) {\n    // array of time period chunks\n    $chunks = array(\n        array(60 * 60 * 24 * 365 , 'year'),\n        array(60 * 60 * 24 * 30 , 'month'),\n        array(60 * 60 * 24 * 7, 'week'),\n        array(60 * 60 * 24 , 'day'),\n        array(60 * 60 , 'hour'),\n        array(60 , 'minute'),\n    );\n\n    $today = time(); /* Current unix time  */\n    $since = $today - $original;\n\n    if($since > 604800) {\n    $print = date(\"M jS\", $original);\n\n    if($since > 31536000) {\n        $print .= \", \" . date(\"Y\", $original);\n    }\n\n    return $print;\n}\n\n// $j saves performing the count function each time around the loop\nfor ($i = 0, $j = count($chunks); $i < $j; $i++) {\n\n    $seconds = $chunks[$i][0];\n    $name = $chunks[$i][1];\n\n    // finding the biggest chunk (if the chunk fits, break)\n    if (($count = floor($since / $seconds)) != 0) {\n        break;\n    }\n}\n\n$print = ($count == 1) ? '1 '.$name : \"$count {$name}s\";\n\nreturn $print . \" ago\";\n\n} ?>\n"
      ],
      [
        "const int SECOND = 1;\nconst int MINUTE = 60 * SECOND;\nconst int HOUR = 60 * MINUTE;\nconst int DAY = 24 * HOUR;\nconst int MONTH = 30 * DAY;\n\nvar ts = new TimeSpan(DateTime.UtcNow.Ticks - yourDate.Ticks);\ndouble delta = Math.Abs(ts.TotalSeconds);\n\nif (delta < 1 * MINUTE)\n  return ts.Seconds == 1 ? \"one second ago\" : ts.Seconds + \" seconds ago\";\n\nif (delta < 2 * MINUTE)\n  return \"a minute ago\";\n\nif (delta < 45 * MINUTE)\n  return ts.Minutes + \" minutes ago\";\n\nif (delta < 90 * MINUTE)\n  return \"an hour ago\";\n\nif (delta < 24 * HOUR)\n  return ts.Hours + \" hours ago\";\n\nif (delta < 48 * HOUR)\n  return \"yesterday\";\n\nif (delta < 30 * DAY)\n  return ts.Days + \" days ago\";\n\nif (delta < 12 * MONTH)\n{\n  int months = Convert.ToInt32(Math.Floor((double)ts.Days / 30));\n  return months <= 1 ? \"one month ago\" : months + \" months ago\";\n}\nelse\n{\n  int years = Convert.ToInt32(Math.Floor((double)ts.Days / 365));\n  return years <= 1 ? \"one year ago\" : years + \" years ago\";\n}\n"
      ],
      [
        "public string RelativeDateTimeCount(DateTime inputDateTime)\n{\n    string outputDateTime = string.Empty;\n    TimeSpan ts = DateTime.Now - inputDateTime;\n\n    if (ts.Days > 7)\n    { outputDateTime = inputDateTime.ToString(\"MMMM d, yyyy\"); }\n\n    else if (ts.Days > 0)\n    {\n        outputDateTime = ts.Days == 1 ? (\"about 1 Day ago\") : (\"about \" + ts.Days.ToString() + \" Days ago\");\n    }\n    else if (ts.Hours > 0)\n    {\n        outputDateTime = ts.Hours == 1 ? (\"an hour ago\") : (ts.Hours.ToString() + \" hours ago\");\n    }\n    else if (ts.Minutes > 0)\n    {\n        outputDateTime = ts.Minutes == 1 ? (\"1 minute ago\") : (ts.Minutes.ToString() + \" minutes ago\");\n    }\n    else outputDateTime = \"few seconds ago\";\n\n    return outputDateTime;\n}\n"
      ],
      [],
      [
        "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\npublic static class RelativeDateHelper\n{\n    private static Dictionary<double, Func<double, string>> sm_Dict = null;\n\n    private static Dictionary<double, Func<double, string>> DictionarySetup()\n    {\n        var dict = new Dictionary<double, Func<double, string>>();\n        dict.Add(0.75, (mins) => \"less than a minute\");\n        dict.Add(1.5, (mins) => \"about a minute\");\n        dict.Add(45, (mins) => string.Format(\"{0} minutes\", Math.Round(mins)));\n        dict.Add(90, (mins) => \"about an hour\");\n        dict.Add(1440, (mins) => string.Format(\"about {0} hours\", Math.Round(Math.Abs(mins / 60)))); // 60 * 24\n        dict.Add(2880, (mins) => \"a day\"); // 60 * 48\n        dict.Add(43200, (mins) => string.Format(\"{0} days\", Math.Floor(Math.Abs(mins / 1440)))); // 60 * 24 * 30\n        dict.Add(86400, (mins) => \"about a month\"); // 60 * 24 * 60\n        dict.Add(525600, (mins) => string.Format(\"{0} months\", Math.Floor(Math.Abs(mins / 43200)))); // 60 * 24 * 365 \n        dict.Add(1051200, (mins) => \"about a year\"); // 60 * 24 * 365 * 2\n        dict.Add(double.MaxValue, (mins) => string.Format(\"{0} years\", Math.Floor(Math.Abs(mins / 525600))));\n\n        return dict;\n    }\n\n    public static string ToRelativeDate(this DateTime input)\n    {\n        TimeSpan oSpan = DateTime.Now.Subtract(input);\n        double TotalMinutes = oSpan.TotalMinutes;\n        string Suffix = \" ago\";\n\n        if (TotalMinutes < 0.0)\n        {\n            TotalMinutes = Math.Abs(TotalMinutes);\n            Suffix = \" from now\";\n        }\n\n        if (null == sm_Dict)\n            sm_Dict = DictionarySetup();\n\n        return sm_Dict.First(n => TotalMinutes < n.Key).Value.Invoke(TotalMinutes) + Suffix;\n    }\n}\n"
      ],
      [
        "public string getRelativeDateTime(DateTime date)\n{\n    TimeSpan ts = DateTime.Now - date;\n    if (ts.TotalMinutes < 1)//seconds ago\n        return \"just now\";\n    if (ts.TotalHours < 1)//min ago\n        return (int)ts.TotalMinutes == 1 ? \"1 Minute ago\" : (int)ts.TotalMinutes + \" Minutes ago\";\n    if (ts.TotalDays < 1)//hours ago\n        return (int)ts.TotalHours == 1 ? \"1 Hour ago\" : (int)ts.TotalHours + \" Hours ago\";\n    if (ts.TotalDays < 7)//days ago\n        return (int)ts.TotalDays == 1 ? \"1 Day ago\" : (int)ts.TotalDays + \" Days ago\";\n    if (ts.TotalDays < 30.4368)//weeks ago\n        return (int)(ts.TotalDays / 7) == 1 ? \"1 Week ago\" : (int)(ts.TotalDays / 7) + \" Weeks ago\";\n    if (ts.TotalDays < 365.242)//months ago\n        return (int)(ts.TotalDays / 30.4368) == 1 ? \"1 Month ago\" : (int)(ts.TotalDays / 30.4368) + \" Months ago\";\n    //years ago\n    return (int)(ts.TotalDays / 365.242) == 1 ? \"1 Year ago\" : (int)(ts.TotalDays / 365.242) + \" Years ago\";\n}\n"
      ],
      [
        "DateTime.UtcNow.AddHours(-30).Humanize() => \"yesterday\"\nDateTime.UtcNow.AddHours(-2).Humanize() => \"2 hours ago\"\n\nDateTime.UtcNow.AddHours(30).Humanize() => \"tomorrow\"\nDateTime.UtcNow.AddHours(2).Humanize() => \"2 hours from now\"\n\nTimeSpan.FromMilliseconds(1299630020).Humanize() => \"2 weeks\"\nTimeSpan.FromMilliseconds(1299630020).Humanize(3) => \"2 weeks, 1 day, 1 hour\"\n"
      ],
      [
        "+ (NSString *)timeAgoString:(NSDate *)date {\n    int delta = -(int)[date timeIntervalSinceNow];\n\n    if (delta < 60)\n    {\n        return delta == 1 ? @\"one second ago\" : [NSString stringWithFormat:@\"%i seconds ago\", delta];\n    }\n    if (delta < 120)\n    {\n        return @\"a minute ago\";\n    }\n    if (delta < 2700)\n    {\n        return [NSString stringWithFormat:@\"%i minutes ago\", delta/60];\n    }\n    if (delta < 5400)\n    {\n        return @\"an hour ago\";\n    }\n    if (delta < 24 * 3600)\n    {\n        return [NSString stringWithFormat:@\"%i hours ago\", delta/3600];\n    }\n    if (delta < 48 * 3600)\n    {\n        return @\"yesterday\";\n    }\n    if (delta < 30 * 24 * 3600)\n    {\n        return [NSString stringWithFormat:@\"%i days ago\", delta/(24*3600)];\n    }\n    if (delta < 12 * 30 * 24 * 3600)\n    {\n        int months = delta/(30*24*3600);\n        return months <= 1 ? @\"one month ago\" : [NSString stringWithFormat:@\"%i months ago\", months];\n    }\n    else\n    {\n        int years = delta/(12*30*24*3600);\n        return years <= 1 ? @\"one year ago\" : [NSString stringWithFormat:@\"%i years ago\", years];\n    }\n}\n"
      ],
      [
        "public static class DateTimeHelper\n    {\n        private const int SECOND = 1;\n        private const int MINUTE = 60 * SECOND;\n        private const int HOUR = 60 * MINUTE;\n        private const int DAY = 24 * HOUR;\n        private const int MONTH = 30 * DAY;\n\n        /// <summary>\n        /// Returns a friendly version of the provided DateTime, relative to now. E.g.: \"2 days ago\", or \"in 6 months\".\n        /// </summary>\n        /// <param name=\"dateTime\">The DateTime to compare to Now</param>\n        /// <returns>A friendly string</returns>\n        public static string GetFriendlyRelativeTime(DateTime dateTime)\n        {\n            if (DateTime.UtcNow.Ticks == dateTime.Ticks)\n            {\n                return \"Right now!\";\n            }\n\n            bool isFuture = (DateTime.UtcNow.Ticks < dateTime.Ticks);\n            var ts = DateTime.UtcNow.Ticks < dateTime.Ticks ? new TimeSpan(dateTime.Ticks - DateTime.UtcNow.Ticks) : new TimeSpan(DateTime.UtcNow.Ticks - dateTime.Ticks);\n\n            double delta = ts.TotalSeconds;\n\n            if (delta < 1 * MINUTE)\n            {\n                return isFuture ? \"in \" + (ts.Seconds == 1 ? \"one second\" : ts.Seconds + \" seconds\") : ts.Seconds == 1 ? \"one second ago\" : ts.Seconds + \" seconds ago\";\n            }\n            if (delta < 2 * MINUTE)\n            {\n                return isFuture ? \"in a minute\" : \"a minute ago\";\n            }\n            if (delta < 45 * MINUTE)\n            {\n                return isFuture ? \"in \" + ts.Minutes + \" minutes\" : ts.Minutes + \" minutes ago\";\n            }\n            if (delta < 90 * MINUTE)\n            {\n                return isFuture ? \"in an hour\" : \"an hour ago\";\n            }\n            if (delta < 24 * HOUR)\n            {\n                return isFuture ? \"in \" + ts.Hours + \" hours\" : ts.Hours + \" hours ago\";\n            }\n            if (delta < 48 * HOUR)\n            {\n                return isFuture ? \"tomorrow\" : \"yesterday\";\n            }\n            if (delta < 30 * DAY)\n            {\n                return isFuture ? \"in \" + ts.Days + \" days\" : ts.Days + \" days ago\";\n            }\n            if (delta < 12 * MONTH)\n            {\n                int months = Convert.ToInt32(Math.Floor((double)ts.Days / 30));\n                return isFuture ? \"in \" + (months <= 1 ? \"one month\" : months + \" months\") : months <= 1 ? \"one month ago\" : months + \" months ago\";\n            }\n            else\n            {\n                int years = Convert.ToInt32(Math.Floor((double)ts.Days / 365));\n                return isFuture ? \"in \" + (years <= 1 ? \"one year\" : years + \" years\") : years <= 1 ? \"one year ago\" : years + \" years ago\";\n            }\n        }\n    }\n"
      ],
      [
        "    public static string TimeLeft(DateTime utcDate)\n    {\n        TimeSpan timeLeft = DateTime.UtcNow - utcDate;\n        string timeLeftString = \"\";\n        if (timeLeft.Days > 0)\n        {\n            timeLeftString += timeLeft.Days == 1 ? timeLeft.Days + \" day\" : timeLeft.Days + \" days\";\n        }\n        else if (timeLeft.Hours > 0)\n        {\n            timeLeftString += timeLeft.Hours == 1 ? timeLeft.Hours + \" hour\" : timeLeft.Hours + \" hours\";\n        }\n        else\n        {\n            timeLeftString += timeLeft.Minutes == 1 ? timeLeft.Minutes+\" minute\" : timeLeft.Minutes + \" minutes\";\n        }\n        return timeLeftString;\n    }\n"
      ],
      [
        "import java.util.Date;\nimport javax.management.timer.Timer;\n\nString getRelativeDate(Date date) {     \n  long delta = new Date().getTime() - date.getTime();\n  if (delta < 1L * Timer.ONE_MINUTE) {\n    return toSeconds(delta) == 1 ? \"one second ago\" : toSeconds(delta) + \" seconds ago\";\n  }\n  if (delta < 2L * Timer.ONE_MINUTE) {\n    return \"a minute ago\";\n  }\n  if (delta < 45L * Timer.ONE_MINUTE) {\n    return toMinutes(delta) + \" minutes ago\";\n  }\n  if (delta < 90L * Timer.ONE_MINUTE) {\n    return \"an hour ago\";\n  }\n  if (delta < 24L * Timer.ONE_HOUR) {\n    return toHours(delta) + \" hours ago\";\n  }\n  if (delta < 48L * Timer.ONE_HOUR) {\n    return \"yesterday\";\n  }\n  if (delta < 30L * Timer.ONE_DAY) {\n    return toDays(delta) + \" days ago\";\n  }\n  if (delta < 12L * 4L * Timer.ONE_WEEK) { // a month\n    long months = toMonths(delta); \n    return months <= 1 ? \"one month ago\" : months + \" months ago\";\n  }\n  else {\n    long years = toYears(delta);\n    return years <= 1 ? \"one year ago\" : years + \" years ago\";\n  }\n}\n\nprivate long toSeconds(long date) {\n  return date / 1000L;\n}\n\nprivate long toMinutes(long date) {\n  return toSeconds(date) / 60L;\n}\n\nprivate long toHours(long date) {\n  return toMinutes(date) / 60L;\n}\n\nprivate long toDays(long date) {\n  return toHours(date) / 24L;\n}\n\nprivate long toMonths(long date) {\n  return toDays(date) / 30L;\n}\n\nprivate long toYears(long date) {\n  return toMonths(date) / 365L;\n}\n"
      ],
      [
        "long delta = new Date().getTime() - date.getTime();\nconst int SECOND = 1;\nconst int MINUTE = 60 * SECOND;\nconst int HOUR = 60 * MINUTE;\nconst int DAY = 24 * HOUR;\nconst int MONTH = 30 * DAY;\n\nif (delta < 0L)\n{\n  return \"not yet\";\n}\nif (delta < 1L * MINUTE)\n{\n  return ts.Seconds == 1 ? \"one second ago\" : ts.Seconds + \" seconds ago\";\n}\nif (delta < 2L * MINUTE)\n{\n  return \"a minute ago\";\n}\nif (delta < 45L * MINUTE)\n{\n  return ts.Minutes + \" minutes ago\";\n}\nif (delta < 90L * MINUTE)\n{\n  return \"an hour ago\";\n}\nif (delta < 24L * HOUR)\n{\n  return ts.Hours + \" hours ago\";\n}\nif (delta < 48L * HOUR)\n{\n  return \"yesterday\";\n}\nif (delta < 30L * DAY)\n{\n  return ts.Days + \" days ago\";\n}\nif (delta < 12L * MONTH)\n{\n  int months = Convert.ToInt32(Math.Floor((double)ts.Days / 30));\n  return months <= 1 ? \"one month ago\" : months + \" months ago\";\n}\nelse\n{\n  int years = Convert.ToInt32(Math.Floor((double)ts.Days / 365));\n  return years <= 1 ? \"one year ago\" : years + \" years ago\";\n}\n"
      ],
      [
        "/** \n * {@code date1} has to be earlier than {@code date2}.\n */\npublic static String relativize(Date date1, Date date2) {\n    assert date2.getTime() >= date1.getTime();\n\n    long duration = date2.getTime() - date1.getTime();\n    long converted;\n\n    if ((converted = TimeUnit.MILLISECONDS.toDays(duration)) > 0) {\n        return String.format(\"%d %s ago\", converted, converted == 1 ? \"day\" : \"days\");\n    } else if ((converted = TimeUnit.MILLISECONDS.toHours(duration)) > 0) {\n        return String.format(\"%d %s ago\", converted, converted == 1 ? \"hour\" : \"hours\");\n    } else if ((converted = TimeUnit.MILLISECONDS.toMinutes(duration)) > 0) {\n        return String.format(\"%d %s ago\", converted, converted == 1 ? \"minute\" : \"minutes\");\n    } else if ((converted = TimeUnit.MILLISECONDS.toSeconds(duration)) > 0) {\n        return String.format(\"%d %s ago\", converted, converted == 1 ? \"second\" : \"seconds\");\n    } else {\n        return \"just now\";\n    }\n}\n"
      ],
      [
        "var ts = new TimeSpan(DateTime.Now.Ticks - dt.Ticks);\n"
      ],
      [
        "define(\"SECOND\", 1);\ndefine(\"MINUTE\", 60 * SECOND);\ndefine(\"HOUR\", 60 * MINUTE);\ndefine(\"DAY\", 24 * HOUR);\ndefine(\"MONTH\", 30 * DAY);\nfunction relativeTime($time)\n{   \n    $delta = time() - $time;\n\n    if ($delta < 1 * MINUTE)\n    {\n        return $delta == 1 ? \"one second ago\" : $delta . \" seconds ago\";\n    }\n    if ($delta < 2 * MINUTE)\n    {\n      return \"a minute ago\";\n    }\n    if ($delta < 45 * MINUTE)\n    {\n        return floor($delta / MINUTE) . \" minutes ago\";\n    }\n    if ($delta < 90 * MINUTE)\n    {\n      return \"an hour ago\";\n    }\n    if ($delta < 24 * HOUR)\n    {\n      return floor($delta / HOUR) . \" hours ago\";\n    }\n    if ($delta < 48 * HOUR)\n    {\n      return \"yesterday\";\n    }\n    if ($delta < 30 * DAY)\n    {\n        return floor($delta / DAY) . \" days ago\";\n    }\n    if ($delta < 12 * MONTH)\n    {\n      $months = floor($delta / DAY / 30);\n      return $months <= 1 ? \"one month ago\" : $months . \" months ago\";\n    }\n    else\n    {\n        $years = floor($delta / DAY / 365);\n        return $years <= 1 ? \"one year ago\" : $years . \" years ago\";\n    }\n}    \n"
      ],
      [
        "public static string TimeAgo(this DateTime dateTime)\n{\n    string result = string.Empty;\n    var timeSpan = DateTime.Now.Subtract(dateTime);\n\n    if (timeSpan <= TimeSpan.FromSeconds(60))\n    {\n        result = string.Format(\"{0} seconds ago\", timeSpan.Seconds);\n    }\n    else if (timeSpan <= TimeSpan.FromMinutes(60))\n    {\n        result = timeSpan.Minutes > 1 ? \n            String.Format(\"about {0} minutes ago\", timeSpan.Minutes) :\n            \"about a minute ago\";\n    }\n    else if (timeSpan <= TimeSpan.FromHours(24))\n    {\n        result = timeSpan.Hours > 1 ? \n            String.Format(\"about {0} hours ago\", timeSpan.Hours) : \n            \"about an hour ago\";\n    }\n    else if (timeSpan <= TimeSpan.FromDays(30))\n    {\n        result = timeSpan.Days > 1 ? \n            String.Format(\"about {0} days ago\", timeSpan.Days) : \n            \"yesterday\";\n    }\n    else if (timeSpan <= TimeSpan.FromDays(365))\n    {\n        result = timeSpan.Days > 30 ? \n            String.Format(\"about {0} months ago\", timeSpan.Days / 30) : \n            \"about a month ago\";\n    }\n    else\n    {\n        result = timeSpan.Days > 365 ? \n            String.Format(\"about {0} years ago\", timeSpan.Days / 365) : \n            \"about a year ago\";\n    }\n\n    return result;\n}\n"
      ]
    ],
    "votes:": "1527",
    "tags": "<c#><datetime><time><datediff><relative-time-span>",
    "AcceptedAnswerId": "1248",
    "answers": [
      {
        "id": "32459883",
        "title": "",
        "text": "<p>If you want to have an output like <code>\"2 days, 4 hours and 12 minutes ago\"</code>, you need a timespan:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>TimeSpan timeDiff = DateTime.Now-CreatedDate;\n</code></pre>\n\n<p>Then you can access the values you like:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>timeDiff.Days\ntimeDiff.Hours\n</code></pre>\n\n<p>etc...</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "229285",
        "title": "",
        "text": "<p>I would recommend computing this on the client side too. Less work for the server. </p>\n\n<p>The following is the version that I use (from Zach Leatherman)</p>\n\n<pre class=\"lang-csharp prettyprint-override\"><code>/*\n * Javascript Humane Dates\n * Copyright (c) 2008 Dean Landolt (deanlandolt.com)\n * Re-write by Zach Leatherman (zachleat.com)\n * \n * Adopted from the John Resig's pretty.js\n * at http://ejohn.org/blog/javascript-pretty-date\n * and henrah's proposed modification \n * at http://ejohn.org/blog/javascript-pretty-date/#comment-297458\n * \n * Licensed under the MIT license.\n */\n\nfunction humane_date(date_str){\n        var time_formats = [\n                [60, 'just now'],\n                [90, '1 minute'], // 60*1.5\n                [3600, 'minutes', 60], // 60*60, 60\n                [5400, '1 hour'], // 60*60*1.5\n                [86400, 'hours', 3600], // 60*60*24, 60*60\n                [129600, '1 day'], // 60*60*24*1.5\n                [604800, 'days', 86400], // 60*60*24*7, 60*60*24\n                [907200, '1 week'], // 60*60*24*7*1.5\n                [2628000, 'weeks', 604800], // 60*60*24*(365/12), 60*60*24*7\n                [3942000, '1 month'], // 60*60*24*(365/12)*1.5\n                [31536000, 'months', 2628000], // 60*60*24*365, 60*60*24*(365/12)\n                [47304000, '1 year'], // 60*60*24*365*1.5\n                [3153600000, 'years', 31536000], // 60*60*24*365*100, 60*60*24*365\n                [4730400000, '1 century'] // 60*60*24*365*100*1.5\n        ];\n\n        var time = ('' + date_str).replace(/-/g,\"/\").replace(/[TZ]/g,\" \"),\n                dt = new Date,\n                seconds = ((dt - new Date(time) + (dt.getTimezoneOffset() * 60000)) / 1000),\n                token = ' ago',\n                i = 0,\n                format;\n\n        if (seconds &lt; 0) {\n                seconds = Math.abs(seconds);\n                token = '';\n        }\n\n        while (format = time_formats[i++]) {\n                if (seconds &lt; format[0]) {\n                        if (format.length == 2) {\n                                return format[1] + (i &gt; 1 ? token : ''); // Conditional so we don't return Just Now Ago\n                        } else {\n                                return Math.round(seconds / format[2]) + ' ' + format[1] + (i &gt; 1 ? token : '');\n                        }\n                }\n        }\n\n        // overflow for centuries\n        if(seconds &gt; 4730400000)\n                return Math.round(seconds / 4730400000) + ' centuries' + token;\n\n        return date_str;\n};\n\nif(typeof jQuery != 'undefined') {\n        jQuery.fn.humane_dates = function(){\n                return this.each(function(){\n                        var date = humane_date(this.title);\n                        if(date &amp;&amp; jQuery(this).text() != date) // don't modify the dom if we don't have to\n                                jQuery(this).text(date);\n                });\n        };\n}\n</code></pre>\n",
        "votes": "39",
        "tags": "",
        "accepted": false
      },
      {
        "id": "10705",
        "title": "",
        "text": "<pre class=\"lang-csharp prettyprint-override\"><code>public static string RelativeDate(DateTime theDate)\n{\n    Dictionary&lt;long, string&gt; thresholds = new Dictionary&lt;long, string&gt;();\n    int minute = 60;\n    int hour = 60 * minute;\n    int day = 24 * hour;\n    thresholds.Add(60, \"{0} seconds ago\");\n    thresholds.Add(minute * 2, \"a minute ago\");\n    thresholds.Add(45 * minute, \"{0} minutes ago\");\n    thresholds.Add(120 * minute, \"an hour ago\");\n    thresholds.Add(day, \"{0} hours ago\");\n    thresholds.Add(day * 2, \"yesterday\");\n    thresholds.Add(day * 30, \"{0} days ago\");\n    thresholds.Add(day * 365, \"{0} months ago\");\n    thresholds.Add(long.MaxValue, \"{0} years ago\");\n    long since = (DateTime.Now.Ticks - theDate.Ticks) / 10000000;\n    foreach (long threshold in thresholds.Keys) \n    {\n        if (since &lt; threshold) \n        {\n            TimeSpan t = new TimeSpan((DateTime.Now.Ticks - theDate.Ticks));\n            return string.Format(thresholds[threshold], (t.Days &gt; 365 ? t.Days / 365 : (t.Days &gt; 0 ? t.Days : (t.Hours &gt; 0 ? t.Hours : (t.Minutes &gt; 0 ? t.Minutes : (t.Seconds &gt; 0 ? t.Seconds : 0))))).ToString());\n        }\n    }\n    return \"\";\n}\n</code></pre>\n\n<p>I prefer this version for its conciseness, and ability to add in new tick points.\nThis could be encapsulated with a <code>Latest()</code> extension to Timespan instead of that long 1 liner, but for the sake of brevity in posting, this will do.\n<strong>This fixes the an hour ago, 1 hours ago, by providing an hour until 2 hours have elapsed</strong></p>\n",
        "votes": "101",
        "tags": "",
        "accepted": false
      },
      {
        "id": "12406029",
        "title": "",
        "text": "<p>I would provide some handy extensions methods for this and make the code more readable. First, couple of extension methods for <code>Int32</code>.</p>\n\n<pre><code>public static class TimeSpanExtensions {\n\n    public static TimeSpan Days(this int value) {\n\n        return new TimeSpan(value, 0, 0, 0);\n    }\n\n    public static TimeSpan Hours(this int value) {\n\n        return new TimeSpan(0, value, 0, 0);\n    }\n\n    public static TimeSpan Minutes(this int value) {\n\n        return new TimeSpan(0, 0, value, 0);\n    }\n\n    public static TimeSpan Seconds(this int value) {\n\n        return new TimeSpan(0, 0, 0, value);\n    }\n\n    public static TimeSpan Milliseconds(this int value) {\n\n        return new TimeSpan(0, 0, 0, 0, value);\n    }\n\n    public static DateTime Ago(this TimeSpan value) {\n\n        return DateTime.Now - value;\n    }\n}\n</code></pre>\n\n<p>Then, one for <code>DateTime</code>.</p>\n\n<pre><code>public static class DateTimeExtensions {\n\n    public static DateTime Ago(this DateTime dateTime, TimeSpan delta) {\n\n        return dateTime - delta;\n    }\n}\n</code></pre>\n\n<p>Now, you can do something like below:</p>\n\n<pre><code>var date = DateTime.Now;\ndate.Ago(2.Days()); // 2 days ago\ndate.Ago(7.Hours()); // 7 hours ago\ndate.Ago(567.Milliseconds()); // 567 milliseconds ago\n</code></pre>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2179589",
        "title": "",
        "text": "<p>This, I got from one of Bill Gates' blog. I need to find it on my browser history and I'll give you the link.</p>\n\n<p>The Javascript code to do the same thing (as requested):</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function posted(t) {\n    var now = new Date();\n    var diff = parseInt((now.getTime() - Date.parse(t)) / 1000);\n    if (diff &lt; 60) { return 'less than a minute ago'; }\n    else if (diff &lt; 120) { return 'about a minute ago'; }\n    else if (diff &lt; (2700)) { return (parseInt(diff / 60)).toString() + ' minutes ago'; }\n    else if (diff &lt; (5400)) { return 'about an hour ago'; }\n    else if (diff &lt; (86400)) { return 'about ' + (parseInt(diff / 3600)).toString() + ' hours ago'; }\n    else if (diff &lt; (172800)) { return '1 day ago'; } \n    else {return (parseInt(diff / 86400)).toString() + ' days ago'; }\n}\n</code></pre>\n\n<p>Basically, you work in terms of seconds...</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "25709",
        "title": "",
        "text": "<p>Surely an easy fix to get rid of the '1 hours ago' problem would be to increase the window that 'an hour ago' is valid for.\nChange</p>\n\n<pre><code>if (delta &lt; 5400) // 90 * 60\n{\n    return \"an hour ago\";\n}\n</code></pre>\n\n<p>into</p>\n\n<pre><code>if (delta &lt; 7200) // 120 * 60\n{\n    return \"an hour ago\";\n}\n</code></pre>\n\n<p>This means that something that occurred 110 minutes ago will read as 'an hour ago' - this may not be perfect, but I'd say it is better than the current situation of '1 hours ago'. </p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1379178",
        "title": "",
        "text": "<p>using <a href=\"https://github.com/FluentDateTime\" rel=\"nofollow noreferrer\">Fluent DateTime</a></p>\n\n<pre><code>var dateTime1 = 2.Hours().Ago();\nvar dateTime2 = 3.Days().Ago();\nvar dateTime3 = 1.Months().Ago();\nvar dateTime4 = 5.Hours().FromNow();\nvar dateTime5 = 2.Weeks().FromNow();\nvar dateTime6 = 40.Seconds().FromNow();\n</code></pre>\n",
        "votes": "17",
        "tags": "",
        "accepted": false
      },
      {
        "id": "111303",
        "title": "",
        "text": "<h2><a href=\"https://timeago.yarp.com/\" rel=\"noreferrer\">jquery.timeago plugin</a></h2>\n\n<p>Jeff, because Stack Overflow uses jQuery extensively, I recommend the <a href=\"https://timeago.yarp.com/\" rel=\"noreferrer\">jquery.timeago plugin</a>.  </p>\n\n<p>Benefits:</p>\n\n<ul>\n<li>Avoid timestamps dated \"1 minute ago\" even though the page was opened 10 minutes ago; timeago refreshes automatically.</li>\n<li>You can take full advantage of page and/or fragment caching in your web applications, because the timestamps aren't calculated on the server.</li>\n<li>You get to use microformats like the cool kids.</li>\n</ul>\n\n<p>Just attach it to your timestamps on DOM ready:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>jQuery(document).ready(function() {\n    jQuery('abbr.timeago').timeago();\n});\n</code></pre>\n\n<p>This will turn all <code>abbr</code> elements with a class of timeago and an <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"noreferrer\">ISO 8601</a> timestamp in the title:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;abbr class=\"timeago\" title=\"2008-07-17T09:24:17Z\"&gt;July 17, 2008&lt;/abbr&gt;\n</code></pre>\n\n<p>into something like this:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;abbr class=\"timeago\" title=\"July 17, 2008\"&gt;4 months ago&lt;/abbr&gt;\n</code></pre>\n\n<p>which yields: 4 months ago. As time passes, the timestamps will automatically update. </p>\n\n<p><em>Disclaimer: I wrote this plugin, so I'm biased.</em></p>\n",
        "votes": "371",
        "tags": "",
        "accepted": false
      },
      {
        "id": "54018412",
        "title": "",
        "text": "<p><strong>Turkish</strong> localized version of Vincents answer.</p>\n\n<pre><code>    const int SECOND = 1;\n    const int MINUTE = 60 * SECOND;\n    const int HOUR = 60 * MINUTE;\n    const int DAY = 24 * HOUR;\n    const int MONTH = 30 * DAY;\n\n    var ts = new TimeSpan(DateTime.UtcNow.Ticks - yourDate.Ticks);\n    double delta = Math.Abs(ts.TotalSeconds);\n\n    if (delta &lt; 1 * MINUTE)\n        return ts.Seconds + \" saniye \u00f6nce\";\n\n    if (delta &lt; 45 * MINUTE)\n        return ts.Minutes + \" dakika \u00f6nce\";\n\n    if (delta &lt; 24 * HOUR)\n        return ts.Hours + \" saat \u00f6nce\";\n\n    if (delta &lt; 48 * HOUR)\n        return \"d\u00fcn\";\n\n    if (delta &lt; 30 * DAY)\n        return ts.Days + \" g\u00fcn \u00f6nce\";\n\n    if (delta &lt; 12 * MONTH)\n    {\n        int months = Convert.ToInt32(Math.Floor((double)ts.Days / 30));\n        return months + \" ay \u00f6nce\";\n    }\n    else\n    {\n        int years = Convert.ToInt32(Math.Floor((double)ts.Days / 365));\n        return years + \" y\u0131l \u00f6nce\";\n    }\n</code></pre>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "118569",
        "title": "",
        "text": "<p>Here's the algorithm stackoverflow uses but rewritten more concisely in perlish pseudocode with a bug fix (no \"one hours ago\").  The function takes a (positive) number of seconds ago and returns a human-friendly string like \"3 hours ago\" or \"yesterday\".</p>\n\n<pre><code>agoify($delta)\n  local($y, $mo, $d, $h, $m, $s);\n  $s = floor($delta);\n  if($s&lt;=1)            return \"a second ago\";\n  if($s&lt;60)            return \"$s seconds ago\";\n  $m = floor($s/60);\n  if($m==1)            return \"a minute ago\";\n  if($m&lt;45)            return \"$m minutes ago\";\n  $h = floor($m/60);\n  if($h==1)            return \"an hour ago\";\n  if($h&lt;24)            return \"$h hours ago\";\n  $d = floor($h/24);\n  if($d&lt;2)             return \"yesterday\";\n  if($d&lt;30)            return \"$d days ago\";\n  $mo = floor($d/30);\n  if($mo&lt;=1)           return \"a month ago\";\n  $y = floor($mo/12);\n  if($y&lt;1)             return \"$mo months ago\";\n  if($y==1)            return \"a year ago\";\n  return \"$y years ago\";\n</code></pre>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "628203",
        "title": "",
        "text": "<p>Here's an implementation I added as an extension method to the DateTime class that handles both future and past dates and provides an approximation option that allows you to specify the level of detail you're looking for (\"3 hour ago\" vs \"3 hours, 23 minutes, 12 seconds ago\"):</p>\n\n<pre class=\"lang-csharp prettyprint-override\"><code>using System.Text;\n\n/// &lt;summary&gt;\n/// Compares a supplied date to the current date and generates a friendly English \n/// comparison (\"5 days ago\", \"5 days from now\")\n/// &lt;/summary&gt;\n/// &lt;param name=\"date\"&gt;The date to convert&lt;/param&gt;\n/// &lt;param name=\"approximate\"&gt;When off, calculate timespan down to the second.\n/// When on, approximate to the largest round unit of time.&lt;/param&gt;\n/// &lt;returns&gt;&lt;/returns&gt;\npublic static string ToRelativeDateString(this DateTime value, bool approximate)\n{\n    StringBuilder sb = new StringBuilder();\n\n    string suffix = (value &gt; DateTime.Now) ? \" from now\" : \" ago\";\n\n    TimeSpan timeSpan = new TimeSpan(Math.Abs(DateTime.Now.Subtract(value).Ticks));\n\n    if (timeSpan.Days &gt; 0)\n    {\n        sb.AppendFormat(\"{0} {1}\", timeSpan.Days,\n          (timeSpan.Days &gt; 1) ? \"days\" : \"day\");\n        if (approximate) return sb.ToString() + suffix;\n    }\n    if (timeSpan.Hours &gt; 0)\n    {\n        sb.AppendFormat(\"{0}{1} {2}\", (sb.Length &gt; 0) ? \", \" : string.Empty,\n          timeSpan.Hours, (timeSpan.Hours &gt; 1) ? \"hours\" : \"hour\");\n        if (approximate) return sb.ToString() + suffix;\n    }\n    if (timeSpan.Minutes &gt; 0)\n    {\n        sb.AppendFormat(\"{0}{1} {2}\", (sb.Length &gt; 0) ? \", \" : string.Empty, \n          timeSpan.Minutes, (timeSpan.Minutes &gt; 1) ? \"minutes\" : \"minute\");\n        if (approximate) return sb.ToString() + suffix;\n    }\n    if (timeSpan.Seconds &gt; 0)\n    {\n        sb.AppendFormat(\"{0}{1} {2}\", (sb.Length &gt; 0) ? \", \" : string.Empty, \n          timeSpan.Seconds, (timeSpan.Seconds &gt; 1) ? \"seconds\" : \"second\");\n        if (approximate) return sb.ToString() + suffix;\n    }\n    if (sb.Length == 0) return \"right now\";\n\n    sb.Append(suffix);\n    return sb.ToString();\n}\n</code></pre>\n",
        "votes": "50",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1752",
        "title": "",
        "text": "<p>I thought I'd give this a shot using classes and polymorphism. I had a previous iteration which used sub-classing which ended up having way too much overhead. I've switched to a more flexible delegate / public property object model which is significantly better. My code is very slightly more accurate, I wish I could come up with a better way to generate \"months ago\" that didn't seem too over-engineered.</p>\n\n<p>I think I'd still stick with Jeff's if-then cascade because it's less code and it's simpler (it's definitely easier to ensure it'll work as expected).</p>\n\n<p>For the below code <em>PrintRelativeTime.GetRelativeTimeMessage(TimeSpan ago)</em> returns the relative time message (e.g. \"yesterday\").</p>\n\n<pre><code>public class RelativeTimeRange : IComparable\n{\n    public TimeSpan UpperBound { get; set; }\n\n    public delegate string RelativeTimeTextDelegate(TimeSpan timeDelta);\n\n    public RelativeTimeTextDelegate MessageCreator { get; set; }\n\n    public int CompareTo(object obj)\n    {\n        if (!(obj is RelativeTimeRange))\n        {\n            return 1;\n        }\n        // note that this sorts in reverse order to the way you'd expect, \n        // this saves having to reverse a list later\n        return (obj as RelativeTimeRange).UpperBound.CompareTo(UpperBound);\n    }\n}\n\npublic class PrintRelativeTime\n{\n    private static List&lt;RelativeTimeRange&gt; timeRanges;\n\n    static PrintRelativeTime()\n    {\n        timeRanges = new List&lt;RelativeTimeRange&gt;{\n            new RelativeTimeRange\n            {\n                UpperBound = TimeSpan.FromSeconds(1),\n                MessageCreator = (delta) =&gt; \n                { return \"one second ago\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = TimeSpan.FromSeconds(60),\n                MessageCreator = (delta) =&gt; \n                { return delta.Seconds + \" seconds ago\"; }\n\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = TimeSpan.FromMinutes(2),\n                MessageCreator = (delta) =&gt; \n                { return \"one minute ago\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = TimeSpan.FromMinutes(60),\n                MessageCreator = (delta) =&gt; \n                { return delta.Minutes + \" minutes ago\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = TimeSpan.FromHours(2),\n                MessageCreator = (delta) =&gt; \n                { return \"one hour ago\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = TimeSpan.FromHours(24),\n                MessageCreator = (delta) =&gt; \n                { return delta.Hours + \" hours ago\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = TimeSpan.FromDays(2),\n                MessageCreator = (delta) =&gt; \n                { return \"yesterday\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = DateTime.Now.Subtract(DateTime.Now.AddMonths(-1)),\n                MessageCreator = (delta) =&gt; \n                { return delta.Days + \" days ago\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = DateTime.Now.Subtract(DateTime.Now.AddMonths(-2)),\n                MessageCreator = (delta) =&gt; \n                { return \"one month ago\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = DateTime.Now.Subtract(DateTime.Now.AddYears(-1)),\n                MessageCreator = (delta) =&gt; \n                { return (int)Math.Floor(delta.TotalDays / 30) + \" months ago\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = DateTime.Now.Subtract(DateTime.Now.AddYears(-2)),\n                MessageCreator = (delta) =&gt; \n                { return \"one year ago\"; }\n            }, \n            new RelativeTimeRange\n            {\n                UpperBound = TimeSpan.MaxValue,\n                MessageCreator = (delta) =&gt; \n                { return (int)Math.Floor(delta.TotalDays / 365.24D) + \" years ago\"; }\n            }\n        };\n\n        timeRanges.Sort();\n    }\n\n    public static string GetRelativeTimeMessage(TimeSpan ago)\n    {\n        RelativeTimeRange postRelativeDateRange = timeRanges[0];\n\n        foreach (var timeRange in timeRanges)\n        {\n            if (ago.CompareTo(timeRange.UpperBound) &lt;= 0)\n            {\n                postRelativeDateRange = timeRange;\n            }\n        }\n\n        return postRelativeDateRange.MessageCreator(ago);\n    }\n}\n</code></pre>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "12",
        "title": "",
        "text": "<p>Here's how I do it</p>\n\n<pre class=\"lang-csharp prettyprint-override\"><code>var ts = new TimeSpan(DateTime.UtcNow.Ticks - dt.Ticks);\ndouble delta = Math.Abs(ts.TotalSeconds);\n\nif (delta &lt; 60)\n{\n  return ts.Seconds == 1 ? \"one second ago\" : ts.Seconds + \" seconds ago\";\n}\nif (delta &lt; 120)\n{\n  return \"a minute ago\";\n}\nif (delta &lt; 2700) // 45 * 60\n{\n  return ts.Minutes + \" minutes ago\";\n}\nif (delta &lt; 5400) // 90 * 60\n{\n  return \"an hour ago\";\n}\nif (delta &lt; 86400) // 24 * 60 * 60\n{\n  return ts.Hours + \" hours ago\";\n}\nif (delta &lt; 172800) // 48 * 60 * 60\n{\n  return \"yesterday\";\n}\nif (delta &lt; 2592000) // 30 * 24 * 60 * 60\n{\n  return ts.Days + \" days ago\";\n}\nif (delta &lt; 31104000) // 12 * 30 * 24 * 60 * 60\n{\n  int months = Convert.ToInt32(Math.Floor((double)ts.Days / 30));\n  return months &lt;= 1 ? \"one month ago\" : months + \" months ago\";\n}\nint years = Convert.ToInt32(Math.Floor((double)ts.Days / 365));\nreturn years &lt;= 1 ? \"one year ago\" : years + \" years ago\";\n</code></pre>\n\n<p>Suggestions? Comments? Ways to improve this algorithm?</p>\n",
        "votes": "338",
        "tags": "",
        "accepted": false
      },
      {
        "id": "12279",
        "title": "",
        "text": "<p>@Jeff</p>\n\n<blockquote>\n<pre><code>var ts = new TimeSpan(DateTime.UtcNow.Ticks - dt.Ticks);\n</code></pre>\n</blockquote>\n\n<p>Doing a subtraction on <code>DateTime</code> returns a <code>TimeSpan</code> anyway.</p>\n\n<p>So you can just do </p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>(DateTime.UtcNow - dt).TotalSeconds\n</code></pre>\n\n<p>I'm also surprised to see the constants multiplied-out by hand and then comments added with the multiplications in.   Was that some misguided optimisation?</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "27",
        "title": "",
        "text": "<p>@jeff</p>\n\n<p>IMHO yours seems a little long.  However it does seem a little more robust with support for \"yesterday\" and \"years\".  But in my experience when this is used the person is most likely to view the content in the first 30 days.  It is only the really hardcore people that come after that.  So that is why I usually elect to keep this short and simple.</p>\n\n<p>This is the method I am currently using on one of my websites.  This only returns a relative day, hour, time.  And then the user has to slap on \"ago\" in the output.</p>\n\n<pre><code>public static string ToLongString(this TimeSpan time)\n{\n    string output = String.Empty;\n\n    if (time.Days &gt; 0)\n        output += time.Days + \" days \";\n\n    if ((time.Days == 0 || time.Days == 1) &amp;&amp; time.Hours &gt; 0)\n        output += time.Hours + \" hr \";\n\n    if (time.Days == 0 &amp;&amp; time.Minutes &gt; 0)\n        output += time.Minutes + \" min \";\n\n    if (output.Length == 0)\n        output += time.Seconds + \" sec\";\n\n    return output.Trim();\n}\n</code></pre>\n",
        "votes": "30",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1735172",
        "title": "",
        "text": "<p>Java for client-side gwt usage:</p>\n\n<pre><code>import java.util.Date;\n\npublic class RelativeDateFormat {\n\n private static final long ONE_MINUTE = 60000L;\n private static final long ONE_HOUR = 3600000L;\n private static final long ONE_DAY = 86400000L;\n private static final long ONE_WEEK = 604800000L;\n\n public static String format(Date date) {\n\n  long delta = new Date().getTime() - date.getTime();\n  if (delta &lt; 1L * ONE_MINUTE) {\n   return toSeconds(delta) == 1 ? \"one second ago\" : toSeconds(delta)\n     + \" seconds ago\";\n  }\n  if (delta &lt; 2L * ONE_MINUTE) {\n   return \"one minute ago\";\n  }\n  if (delta &lt; 45L * ONE_MINUTE) {\n   return toMinutes(delta) + \" minutes ago\";\n  }\n  if (delta &lt; 90L * ONE_MINUTE) {\n   return \"one hour ago\";\n  }\n  if (delta &lt; 24L * ONE_HOUR) {\n   return toHours(delta) + \" hours ago\";\n  }\n  if (delta &lt; 48L * ONE_HOUR) {\n   return \"yesterday\";\n  }\n  if (delta &lt; 30L * ONE_DAY) {\n   return toDays(delta) + \" days ago\";\n  }\n  if (delta &lt; 12L * 4L * ONE_WEEK) {\n   long months = toMonths(delta);\n   return months &lt;= 1 ? \"one month ago\" : months + \" months ago\";\n  } else {\n   long years = toYears(delta);\n   return years &lt;= 1 ? \"one year ago\" : years + \" years ago\";\n  }\n }\n\n private static long toSeconds(long date) {\n  return date / 1000L;\n }\n\n private static long toMinutes(long date) {\n  return toSeconds(date) / 60L;\n }\n\n private static long toHours(long date) {\n  return toMinutes(date) / 60L;\n }\n\n private static long toDays(long date) {\n  return toHours(date) / 24L;\n }\n\n private static long toMonths(long date) {\n  return toDays(date) / 30L;\n }\n\n private static long toYears(long date) {\n  return toMonths(date) / 365L;\n }\n\n}\n</code></pre>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "46029235",
        "title": "",
        "text": "<p>This is my function, works like a charm :)</p>\n\n<pre><code>public static string RelativeDate(DateTime theDate)\n        {\n            var span = DateTime.Now - theDate;\n            if (span.Days &gt; 365)\n            {\n                var years = (span.Days / 365);\n                if (span.Days % 365 != 0)\n                    years += 1;\n                return $\"about {years} {(years == 1 ? \"year\" : \"years\")} ago\";\n            }\n            if (span.Days &gt; 30)\n            {\n                var months = (span.Days / 30);\n                if (span.Days % 31 != 0)\n                    months += 1;\n                return $\"about {months} {(months == 1 ? \"month\" : \"months\")} ago\";\n            }\n            if (span.Days &gt; 0)\n                return $\"about {span.Days} {(span.Days == 1 ? \"day\" : \"days\")} ago\";\n            if (span.Hours &gt; 0)\n                return $\"about {span.Hours} {(span.Hours == 1 ? \"hour\" : \"hours\")} ago\";\n            if (span.Minutes &gt; 0)\n                return $\"about {span.Minutes} {(span.Minutes == 1 ? \"minute\" : \"minutes\")} ago\";\n            if (span.Seconds &gt; 5)\n                return $\"about {span.Seconds} seconds ago\";\n\n            return span.Seconds &lt;= 5 ? \"about 5 seconds ago\" : string.Empty;\n        }\n</code></pre>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "56310196",
        "title": "",
        "text": "<pre><code>// Calculate total days in current year\nint daysInYear;\n\nfor (var i = 1; i &lt;= 12; i++)\n    daysInYear += DateTime.DaysInMonth(DateTime.Now.Year, i);\n\n// Past date\nDateTime dateToCompare = DateTime.Now.Subtract(TimeSpan.FromMinutes(582));\n\n// Calculate difference between current date and past date\ndouble diff = (DateTime.Now - dateToCompare).TotalMilliseconds;\n\nTimeSpan ts = TimeSpan.FromMilliseconds(diff);\n\nvar years = ts.TotalDays / daysInYear; // Years\nvar months = ts.TotalDays / (daysInYear / (double)12); // Months\nvar weeks = ts.TotalDays / 7; // Weeks\nvar days = ts.TotalDays; // Days\nvar hours = ts.TotalHours; // Hours\nvar minutes = ts.TotalMinutes; // Minutes\nvar seconds = ts.TotalSeconds; // Seconds\n\nif (years &gt;= 1)\n    Console.WriteLine(Math.Round(years, 0) + \" year(s) ago\");\nelse if (months &gt;= 1)\n    Console.WriteLine(Math.Round(months, 0) + \" month(s) ago\");\nelse if (weeks &gt;= 1)\n    Console.WriteLine(Math.Round(weeks, 0) + \" week(s) ago\");\nelse if (days &gt;= 1)\n    Console.WriteLine(Math.Round(days, 0) + \" days(s) ago\");\nelse if (hours &gt;= 1)\n    Console.WriteLine(Math.Round(hours, 0) + \" hour(s) ago\");\nelse if (minutes &gt;= 1)\n    Console.WriteLine(Math.Round(minutes, 0) + \" minute(s) ago\");\nelse if (seconds &gt;= 1)\n    Console.WriteLine(Math.Round(seconds, 0) + \" second(s) ago\");\n\nConsole.ReadLine();\n</code></pre>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "13690",
        "title": "",
        "text": "<p>You can reduce the server-side load by performing this logic client-side. View source on some Digg pages for reference. They have the server emit an epoch time value that gets processed by Javascript. This way you don't need to manage the end user's time zone. The new server-side code would be something like:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public string GetRelativeTime(DateTime timeStamp)\n{\n    return string.Format(\"&lt;script&gt;printdate({0});&lt;/script&gt;\", timeStamp.ToFileTimeUtc());\n}\n</code></pre>\n\n<p>You could even add a NOSCRIPT block there and just perform a ToString().</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "79601",
        "title": "",
        "text": "<pre class=\"lang-csharp prettyprint-override\"><code>public static string ToRelativeDate(DateTime input)\n{\n    TimeSpan oSpan = DateTime.Now.Subtract(input);\n    double TotalMinutes = oSpan.TotalMinutes;\n    string Suffix = \" ago\";\n\n    if (TotalMinutes &lt; 0.0)\n    {\n        TotalMinutes = Math.Abs(TotalMinutes);\n        Suffix = \" from now\";\n    }\n\n    var aValue = new SortedList&lt;double, Func&lt;string&gt;&gt;();\n    aValue.Add(0.75, () =&gt; \"less than a minute\");\n    aValue.Add(1.5, () =&gt; \"about a minute\");\n    aValue.Add(45, () =&gt; string.Format(\"{0} minutes\", Math.Round(TotalMinutes)));\n    aValue.Add(90, () =&gt; \"about an hour\");\n    aValue.Add(1440, () =&gt; string.Format(\"about {0} hours\", Math.Round(Math.Abs(oSpan.TotalHours)))); // 60 * 24\n    aValue.Add(2880, () =&gt; \"a day\"); // 60 * 48\n    aValue.Add(43200, () =&gt; string.Format(\"{0} days\", Math.Floor(Math.Abs(oSpan.TotalDays)))); // 60 * 24 * 30\n    aValue.Add(86400, () =&gt; \"about a month\"); // 60 * 24 * 60\n    aValue.Add(525600, () =&gt; string.Format(\"{0} months\", Math.Floor(Math.Abs(oSpan.TotalDays / 30)))); // 60 * 24 * 365 \n    aValue.Add(1051200, () =&gt; \"about a year\"); // 60 * 24 * 365 * 2\n    aValue.Add(double.MaxValue, () =&gt; string.Format(\"{0} years\", Math.Floor(Math.Abs(oSpan.TotalDays / 365))));\n\n    return aValue.First(n =&gt; TotalMinutes &lt; n.Key).Value.Invoke() + Suffix;\n}\n</code></pre>\n\n<p><a href=\"http://refactormycode.com/codes/493-twitter-esque-relative-dates\" rel=\"noreferrer\">http://refactormycode.com/codes/493-twitter-esque-relative-dates</a></p>\n\n<p>C# 6 version:</p>\n\n<pre><code>static readonly SortedList&lt;double, Func&lt;TimeSpan, string&gt;&gt; offsets = \n   new SortedList&lt;double, Func&lt;TimeSpan, string&gt;&gt;\n{\n    { 0.75, _ =&gt; \"less than a minute\"},\n    { 1.5, _ =&gt; \"about a minute\"},\n    { 45, x =&gt; $\"{x.TotalMinutes:F0} minutes\"},\n    { 90, x =&gt; \"about an hour\"},\n    { 1440, x =&gt; $\"about {x.TotalHours:F0} hours\"},\n    { 2880, x =&gt; \"a day\"},\n    { 43200, x =&gt; $\"{x.TotalDays:F0} days\"},\n    { 86400, x =&gt; \"about a month\"},\n    { 525600, x =&gt; $\"{x.TotalDays / 30:F0} months\"},\n    { 1051200, x =&gt; \"about a year\"},\n    { double.MaxValue, x =&gt; $\"{x.TotalDays / 365:F0} years\"}\n};\n\npublic static string ToRelativeDate(this DateTime input)\n{\n    TimeSpan x = DateTime.Now - input;\n    string Suffix = x.TotalMinutes &gt; 0 ? \" ago\" : \" from now\";\n    x = new TimeSpan(Math.Abs(x.Ticks));\n    return offsets.First(n =&gt; x.TotalMinutes &lt; n.Key).Value(x) + Suffix;\n}\n</code></pre>\n",
        "votes": "67",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5835905",
        "title": "",
        "text": "<p>\nGiven the world and her husband appear to be posting code samples, here is what I wrote a while ago, based on a couple of these answers.</p>\n\n<p>I had a specific need for this code to be localisable. So I have two classes \u2014 <code>Grammar</code>, which specifies the localisable terms, and <code>FuzzyDateExtensions</code>, which holds a bunch of extension methods. I had no need to deal with future datetimes, so no attempt is made to handle them with this code.</p>\n\n<p>I've left some of the XMLdoc in the source, but removed most (where they'd be obvious) for brevity's sake. I've also not included every class member here:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public class Grammar\n{\n    /// &lt;summary&gt; Gets or sets the term for \"just now\". &lt;/summary&gt;\n    public string JustNow { get; set; }\n    /// &lt;summary&gt; Gets or sets the term for \"X minutes ago\". &lt;/summary&gt;\n    /// &lt;remarks&gt;\n    ///     This is a &lt;see cref=\"String.Format\"/&gt; pattern, where &lt;c&gt;{0}&lt;/c&gt;\n    ///     is the number of minutes.\n    /// &lt;/remarks&gt;\n    public string MinutesAgo { get; set; }\n    public string OneHourAgo { get; set; }\n    public string HoursAgo { get; set; }\n    public string Yesterday { get; set; }\n    public string DaysAgo { get; set; }\n    public string LastMonth { get; set; }\n    public string MonthsAgo { get; set; }\n    public string LastYear { get; set; }\n    public string YearsAgo { get; set; }\n    /// &lt;summary&gt; Gets or sets the term for \"ages ago\". &lt;/summary&gt;\n    public string AgesAgo { get; set; }\n\n    /// &lt;summary&gt;\n    ///     Gets or sets the threshold beyond which the fuzzy date should be\n    ///     considered \"ages ago\".\n    /// &lt;/summary&gt;\n    public TimeSpan AgesAgoThreshold { get; set; }\n\n    /// &lt;summary&gt;\n    ///     Initialises a new &lt;see cref=\"Grammar\"/&gt; instance with the\n    ///     specified properties.\n    /// &lt;/summary&gt;\n    private void Initialise(string justNow, string minutesAgo,\n        string oneHourAgo, string hoursAgo, string yesterday, string daysAgo,\n        string lastMonth, string monthsAgo, string lastYear, string yearsAgo,\n        string agesAgo, TimeSpan agesAgoThreshold)\n    { ... }\n}\n</code></pre>\n\n<p>The <code>FuzzyDateString</code> class contains:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public static class FuzzyDateExtensions\n{\n    public static string ToFuzzyDateString(this TimeSpan timespan)\n    {\n        return timespan.ToFuzzyDateString(new Grammar());\n    }\n\n    public static string ToFuzzyDateString(this TimeSpan timespan,\n        Grammar grammar)\n    {\n        return GetFuzzyDateString(timespan, grammar);\n    }\n\n    public static string ToFuzzyDateString(this DateTime datetime)\n    {\n        return (DateTime.Now - datetime).ToFuzzyDateString();\n    }\n\n    public static string ToFuzzyDateString(this DateTime datetime,\n       Grammar grammar)\n    {\n        return (DateTime.Now - datetime).ToFuzzyDateString(grammar);\n    }\n\n\n    private static string GetFuzzyDateString(TimeSpan timespan,\n       Grammar grammar)\n    {\n        timespan = timespan.Duration();\n\n        if (timespan &gt;= grammar.AgesAgoThreshold)\n        {\n            return grammar.AgesAgo;\n        }\n\n        if (timespan &lt; new TimeSpan(0, 2, 0))    // 2 minutes\n        {\n            return grammar.JustNow;\n        }\n\n        if (timespan &lt; new TimeSpan(1, 0, 0))    // 1 hour\n        {\n            return String.Format(grammar.MinutesAgo, timespan.Minutes);\n        }\n\n        if (timespan &lt; new TimeSpan(1, 55, 0))    // 1 hour 55 minutes\n        {\n            return grammar.OneHourAgo;\n        }\n\n        if (timespan &lt; new TimeSpan(12, 0, 0)    // 12 hours\n            &amp;&amp; (DateTime.Now - timespan).IsToday())\n        {\n            return String.Format(grammar.HoursAgo, timespan.RoundedHours());\n        }\n\n        if ((DateTime.Now.AddDays(1) - timespan).IsToday())\n        {\n            return grammar.Yesterday;\n        }\n\n        if (timespan &lt; new TimeSpan(32, 0, 0, 0)    // 32 days\n            &amp;&amp; (DateTime.Now - timespan).IsThisMonth())\n        {\n            return String.Format(grammar.DaysAgo, timespan.RoundedDays());\n        }\n\n        if ((DateTime.Now.AddMonths(1) - timespan).IsThisMonth())\n        {\n            return grammar.LastMonth;\n        }\n\n        if (timespan &lt; new TimeSpan(365, 0, 0, 0, 0)    // 365 days\n            &amp;&amp; (DateTime.Now - timespan).IsThisYear())\n        {\n            return String.Format(grammar.MonthsAgo, timespan.RoundedMonths());\n        }\n\n        if ((DateTime.Now - timespan).AddYears(1).IsThisYear())\n        {\n            return grammar.LastYear;\n        }\n\n        return String.Format(grammar.YearsAgo, timespan.RoundedYears());\n    }\n}\n</code></pre>\n\n<p>One of the key things I wanted to achieve, as well as localisation, was that \"today\" would only mean \"this calendar day\", so the <code>IsToday</code>, <code>IsThisMonth</code>, <code>IsThisYear</code> methods look like this:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public static bool IsToday(this DateTime date)\n{\n    return date.DayOfYear == DateTime.Now.DayOfYear &amp;&amp; date.IsThisYear();\n}\n</code></pre>\n\n<p>and the rounding methods are like this (I've included <code>RoundedMonths</code>, as that's a bit different):</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public static int RoundedDays(this TimeSpan timespan)\n{\n    return (timespan.Hours &gt; 12) ? timespan.Days + 1 : timespan.Days;\n}\n\npublic static int RoundedMonths(this TimeSpan timespan)\n{\n    DateTime then = DateTime.Now - timespan;\n\n    // Number of partial months elapsed since 1 Jan, AD 1 (DateTime.MinValue)\n    int nowMonthYears = DateTime.Now.Year * 12 + DateTime.Now.Month;\n    int thenMonthYears = then.Year * 12 + then.Month;                    \n\n    return nowMonthYears - thenMonthYears;\n}\n</code></pre>\n\n<p>I hope people find this useful and/or interesting  :o)</p>\n",
        "votes": "19",
        "tags": "",
        "accepted": false
      },
      {
        "id": "18393",
        "title": "",
        "text": "<p>In PHP, I do it this way: </p>\n\n<pre class=\"lang-php prettyprint-override\"><code>&lt;?php\nfunction timesince($original) {\n    // array of time period chunks\n    $chunks = array(\n        array(60 * 60 * 24 * 365 , 'year'),\n        array(60 * 60 * 24 * 30 , 'month'),\n        array(60 * 60 * 24 * 7, 'week'),\n        array(60 * 60 * 24 , 'day'),\n        array(60 * 60 , 'hour'),\n        array(60 , 'minute'),\n    );\n\n    $today = time(); /* Current unix time  */\n    $since = $today - $original;\n\n    if($since &gt; 604800) {\n    $print = date(\"M jS\", $original);\n\n    if($since &gt; 31536000) {\n        $print .= \", \" . date(\"Y\", $original);\n    }\n\n    return $print;\n}\n\n// $j saves performing the count function each time around the loop\nfor ($i = 0, $j = count($chunks); $i &lt; $j; $i++) {\n\n    $seconds = $chunks[$i][0];\n    $name = $chunks[$i][1];\n\n    // finding the biggest chunk (if the chunk fits, break)\n    if (($count = floor($since / $seconds)) != 0) {\n        break;\n    }\n}\n\n$print = ($count == 1) ? '1 '.$name : \"$count {$name}s\";\n\nreturn $print . \" ago\";\n\n} ?&gt;\n</code></pre>\n",
        "votes": "19",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1248",
        "title": "",
        "text": "<p>Jeff, <a href=\"https://stackoverflow.com/questions/11/how-do-i-calculate-relative-time/12#12\">your code</a> is nice but could be clearer with constants (as suggested in Code Complete).</p>\n\n<pre class=\"lang-csharp prettyprint-override\"><code>const int SECOND = 1;\nconst int MINUTE = 60 * SECOND;\nconst int HOUR = 60 * MINUTE;\nconst int DAY = 24 * HOUR;\nconst int MONTH = 30 * DAY;\n\nvar ts = new TimeSpan(DateTime.UtcNow.Ticks - yourDate.Ticks);\ndouble delta = Math.Abs(ts.TotalSeconds);\n\nif (delta &lt; 1 * MINUTE)\n  return ts.Seconds == 1 ? \"one second ago\" : ts.Seconds + \" seconds ago\";\n\nif (delta &lt; 2 * MINUTE)\n  return \"a minute ago\";\n\nif (delta &lt; 45 * MINUTE)\n  return ts.Minutes + \" minutes ago\";\n\nif (delta &lt; 90 * MINUTE)\n  return \"an hour ago\";\n\nif (delta &lt; 24 * HOUR)\n  return ts.Hours + \" hours ago\";\n\nif (delta &lt; 48 * HOUR)\n  return \"yesterday\";\n\nif (delta &lt; 30 * DAY)\n  return ts.Days + \" days ago\";\n\nif (delta &lt; 12 * MONTH)\n{\n  int months = Convert.ToInt32(Math.Floor((double)ts.Days / 30));\n  return months &lt;= 1 ? \"one month ago\" : months + \" months ago\";\n}\nelse\n{\n  int years = Convert.ToInt32(Math.Floor((double)ts.Days / 365));\n  return years &lt;= 1 ? \"one year ago\" : years + \" years ago\";\n}\n</code></pre>\n",
        "votes": "1000",
        "tags": "",
        "accepted": true
      },
      {
        "id": "15446338",
        "title": "",
        "text": "<p>I think there is already a number of answers related to this post, but one can use this which is easy to use just like plugin and also easily readable for programmers. \nSend your specific date, and get its value in string form:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public string RelativeDateTimeCount(DateTime inputDateTime)\n{\n    string outputDateTime = string.Empty;\n    TimeSpan ts = DateTime.Now - inputDateTime;\n\n    if (ts.Days &gt; 7)\n    { outputDateTime = inputDateTime.ToString(\"MMMM d, yyyy\"); }\n\n    else if (ts.Days &gt; 0)\n    {\n        outputDateTime = ts.Days == 1 ? (\"about 1 Day ago\") : (\"about \" + ts.Days.ToString() + \" Days ago\");\n    }\n    else if (ts.Hours &gt; 0)\n    {\n        outputDateTime = ts.Hours == 1 ? (\"an hour ago\") : (ts.Hours.ToString() + \" hours ago\");\n    }\n    else if (ts.Minutes &gt; 0)\n    {\n        outputDateTime = ts.Minutes == 1 ? (\"1 minute ago\") : (ts.Minutes.ToString() + \" minutes ago\");\n    }\n    else outputDateTime = \"few seconds ago\";\n\n    return outputDateTime;\n}\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "12852",
        "title": "",
        "text": "<p>When you know the viewer's time zone, it might be clearer to use calendar days at the day scale. I'm not familiar with the .NET libraries so I don't know how you'd do that in C#, unfortunately.</p>\n\n<p>On consumer sites, you could also be hand-wavier under a minute. \"Less than a minute ago\" or \"just now\" could be good enough.</p>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1141237",
        "title": "",
        "text": "<pre><code>using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\npublic static class RelativeDateHelper\n{\n    private static Dictionary&lt;double, Func&lt;double, string&gt;&gt; sm_Dict = null;\n\n    private static Dictionary&lt;double, Func&lt;double, string&gt;&gt; DictionarySetup()\n    {\n        var dict = new Dictionary&lt;double, Func&lt;double, string&gt;&gt;();\n        dict.Add(0.75, (mins) =&gt; \"less than a minute\");\n        dict.Add(1.5, (mins) =&gt; \"about a minute\");\n        dict.Add(45, (mins) =&gt; string.Format(\"{0} minutes\", Math.Round(mins)));\n        dict.Add(90, (mins) =&gt; \"about an hour\");\n        dict.Add(1440, (mins) =&gt; string.Format(\"about {0} hours\", Math.Round(Math.Abs(mins / 60)))); // 60 * 24\n        dict.Add(2880, (mins) =&gt; \"a day\"); // 60 * 48\n        dict.Add(43200, (mins) =&gt; string.Format(\"{0} days\", Math.Floor(Math.Abs(mins / 1440)))); // 60 * 24 * 30\n        dict.Add(86400, (mins) =&gt; \"about a month\"); // 60 * 24 * 60\n        dict.Add(525600, (mins) =&gt; string.Format(\"{0} months\", Math.Floor(Math.Abs(mins / 43200)))); // 60 * 24 * 365 \n        dict.Add(1051200, (mins) =&gt; \"about a year\"); // 60 * 24 * 365 * 2\n        dict.Add(double.MaxValue, (mins) =&gt; string.Format(\"{0} years\", Math.Floor(Math.Abs(mins / 525600))));\n\n        return dict;\n    }\n\n    public static string ToRelativeDate(this DateTime input)\n    {\n        TimeSpan oSpan = DateTime.Now.Subtract(input);\n        double TotalMinutes = oSpan.TotalMinutes;\n        string Suffix = \" ago\";\n\n        if (TotalMinutes &lt; 0.0)\n        {\n            TotalMinutes = Math.Abs(TotalMinutes);\n            Suffix = \" from now\";\n        }\n\n        if (null == sm_Dict)\n            sm_Dict = DictionarySetup();\n\n        return sm_Dict.First(n =&gt; TotalMinutes &lt; n.Key).Value.Invoke(TotalMinutes) + Suffix;\n    }\n}\n</code></pre>\n\n<p>The same as <a href=\"https://stackoverflow.com/questions/11/how-do-i-calculate-relative-time/79601#79601\">another answer to this question</a> but as an extension method with a static dictionary.</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "18074585",
        "title": "",
        "text": "<pre><code>public string getRelativeDateTime(DateTime date)\n{\n    TimeSpan ts = DateTime.Now - date;\n    if (ts.TotalMinutes &lt; 1)//seconds ago\n        return \"just now\";\n    if (ts.TotalHours &lt; 1)//min ago\n        return (int)ts.TotalMinutes == 1 ? \"1 Minute ago\" : (int)ts.TotalMinutes + \" Minutes ago\";\n    if (ts.TotalDays &lt; 1)//hours ago\n        return (int)ts.TotalHours == 1 ? \"1 Hour ago\" : (int)ts.TotalHours + \" Hours ago\";\n    if (ts.TotalDays &lt; 7)//days ago\n        return (int)ts.TotalDays == 1 ? \"1 Day ago\" : (int)ts.TotalDays + \" Days ago\";\n    if (ts.TotalDays &lt; 30.4368)//weeks ago\n        return (int)(ts.TotalDays / 7) == 1 ? \"1 Week ago\" : (int)(ts.TotalDays / 7) + \" Weeks ago\";\n    if (ts.TotalDays &lt; 365.242)//months ago\n        return (int)(ts.TotalDays / 30.4368) == 1 ? \"1 Month ago\" : (int)(ts.TotalDays / 30.4368) + \" Months ago\";\n    //years ago\n    return (int)(ts.TotalDays / 365.242) == 1 ? \"1 Year ago\" : (int)(ts.TotalDays / 365.242) + \" Years ago\";\n}\n</code></pre>\n\n<p>Conversion values for days in a month and year were taken from Google.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "22961626",
        "title": "",
        "text": "<p>There are also a package called <a href=\"https://github.com/Humanizr/Humanizer\" rel=\"nofollow noreferrer\">Humanizr</a> on Nuget, and it actually works really well, and is in the .NET Foundation.</p>\n\n<pre><code>DateTime.UtcNow.AddHours(-30).Humanize() =&gt; \"yesterday\"\nDateTime.UtcNow.AddHours(-2).Humanize() =&gt; \"2 hours ago\"\n\nDateTime.UtcNow.AddHours(30).Humanize() =&gt; \"tomorrow\"\nDateTime.UtcNow.AddHours(2).Humanize() =&gt; \"2 hours from now\"\n\nTimeSpan.FromMilliseconds(1299630020).Humanize() =&gt; \"2 weeks\"\nTimeSpan.FromMilliseconds(1299630020).Humanize(3) =&gt; \"2 weeks, 1 day, 1 hour\"\n</code></pre>\n\n<p>Scott Hanselman has a writeup on it on his <a href=\"http://www.hanselman.com/blog/NuGetPackageOfTheWeekHumanizerMakesNETDataTypesMoreHuman.aspx\" rel=\"nofollow noreferrer\">blog</a></p>\n",
        "votes": "36",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2244324",
        "title": "",
        "text": "<h2>iPhone Objective-C Version</h2>\n\n<pre><code>+ (NSString *)timeAgoString:(NSDate *)date {\n    int delta = -(int)[date timeIntervalSinceNow];\n\n    if (delta &lt; 60)\n    {\n        return delta == 1 ? @\"one second ago\" : [NSString stringWithFormat:@\"%i seconds ago\", delta];\n    }\n    if (delta &lt; 120)\n    {\n        return @\"a minute ago\";\n    }\n    if (delta &lt; 2700)\n    {\n        return [NSString stringWithFormat:@\"%i minutes ago\", delta/60];\n    }\n    if (delta &lt; 5400)\n    {\n        return @\"an hour ago\";\n    }\n    if (delta &lt; 24 * 3600)\n    {\n        return [NSString stringWithFormat:@\"%i hours ago\", delta/3600];\n    }\n    if (delta &lt; 48 * 3600)\n    {\n        return @\"yesterday\";\n    }\n    if (delta &lt; 30 * 24 * 3600)\n    {\n        return [NSString stringWithFormat:@\"%i days ago\", delta/(24*3600)];\n    }\n    if (delta &lt; 12 * 30 * 24 * 3600)\n    {\n        int months = delta/(30*24*3600);\n        return months &lt;= 1 ? @\"one month ago\" : [NSString stringWithFormat:@\"%i months ago\", months];\n    }\n    else\n    {\n        int years = delta/(12*30*24*3600);\n        return years &lt;= 1 ? @\"one year ago\" : [NSString stringWithFormat:@\"%i years ago\", years];\n    }\n}\n</code></pre>\n",
        "votes": "20",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5427203",
        "title": "",
        "text": "<p>A couple of years late to the party, but I had a requirement to do this for both past and future dates, so I combined <a href=\"https://stackoverflow.com/questions/11/how-do-i-calculate-relative-time/12#12\">Jeff</a>'s and <a href=\"https://stackoverflow.com/questions/11/how-do-i-calculate-relative-time/1248#1248\">Vincent's</a> into this.  It's a ternarytastic extravaganza! :)</p>\n\n<pre><code>public static class DateTimeHelper\n    {\n        private const int SECOND = 1;\n        private const int MINUTE = 60 * SECOND;\n        private const int HOUR = 60 * MINUTE;\n        private const int DAY = 24 * HOUR;\n        private const int MONTH = 30 * DAY;\n\n        /// &lt;summary&gt;\n        /// Returns a friendly version of the provided DateTime, relative to now. E.g.: \"2 days ago\", or \"in 6 months\".\n        /// &lt;/summary&gt;\n        /// &lt;param name=\"dateTime\"&gt;The DateTime to compare to Now&lt;/param&gt;\n        /// &lt;returns&gt;A friendly string&lt;/returns&gt;\n        public static string GetFriendlyRelativeTime(DateTime dateTime)\n        {\n            if (DateTime.UtcNow.Ticks == dateTime.Ticks)\n            {\n                return \"Right now!\";\n            }\n\n            bool isFuture = (DateTime.UtcNow.Ticks &lt; dateTime.Ticks);\n            var ts = DateTime.UtcNow.Ticks &lt; dateTime.Ticks ? new TimeSpan(dateTime.Ticks - DateTime.UtcNow.Ticks) : new TimeSpan(DateTime.UtcNow.Ticks - dateTime.Ticks);\n\n            double delta = ts.TotalSeconds;\n\n            if (delta &lt; 1 * MINUTE)\n            {\n                return isFuture ? \"in \" + (ts.Seconds == 1 ? \"one second\" : ts.Seconds + \" seconds\") : ts.Seconds == 1 ? \"one second ago\" : ts.Seconds + \" seconds ago\";\n            }\n            if (delta &lt; 2 * MINUTE)\n            {\n                return isFuture ? \"in a minute\" : \"a minute ago\";\n            }\n            if (delta &lt; 45 * MINUTE)\n            {\n                return isFuture ? \"in \" + ts.Minutes + \" minutes\" : ts.Minutes + \" minutes ago\";\n            }\n            if (delta &lt; 90 * MINUTE)\n            {\n                return isFuture ? \"in an hour\" : \"an hour ago\";\n            }\n            if (delta &lt; 24 * HOUR)\n            {\n                return isFuture ? \"in \" + ts.Hours + \" hours\" : ts.Hours + \" hours ago\";\n            }\n            if (delta &lt; 48 * HOUR)\n            {\n                return isFuture ? \"tomorrow\" : \"yesterday\";\n            }\n            if (delta &lt; 30 * DAY)\n            {\n                return isFuture ? \"in \" + ts.Days + \" days\" : ts.Days + \" days ago\";\n            }\n            if (delta &lt; 12 * MONTH)\n            {\n                int months = Convert.ToInt32(Math.Floor((double)ts.Days / 30));\n                return isFuture ? \"in \" + (months &lt;= 1 ? \"one month\" : months + \" months\") : months &lt;= 1 ? \"one month ago\" : months + \" months ago\";\n            }\n            else\n            {\n                int years = Convert.ToInt32(Math.Floor((double)ts.Days / 365));\n                return isFuture ? \"in \" + (years &lt;= 1 ? \"one year\" : years + \" years\") : years &lt;= 1 ? \"one year ago\" : years + \" years ago\";\n            }\n        }\n    }\n</code></pre>\n",
        "votes": "24",
        "tags": "",
        "accepted": false
      },
      {
        "id": "49300196",
        "title": "",
        "text": "<p>My way is much more simpler. You can tweak with the return strings as you want</p>\n\n<pre><code>    public static string TimeLeft(DateTime utcDate)\n    {\n        TimeSpan timeLeft = DateTime.UtcNow - utcDate;\n        string timeLeftString = \"\";\n        if (timeLeft.Days &gt; 0)\n        {\n            timeLeftString += timeLeft.Days == 1 ? timeLeft.Days + \" day\" : timeLeft.Days + \" days\";\n        }\n        else if (timeLeft.Hours &gt; 0)\n        {\n            timeLeftString += timeLeft.Hours == 1 ? timeLeft.Hours + \" hour\" : timeLeft.Hours + \" hours\";\n        }\n        else\n        {\n            timeLeftString += timeLeft.Minutes == 1 ? timeLeft.Minutes+\" minute\" : timeLeft.Minutes + \" minutes\";\n        }\n        return timeLeftString;\n    }\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "569913",
        "title": "",
        "text": "<p>Is there an easy way to do this in Java? The <code>java.util.Date</code> class seems rather limited.</p>\n\n<p>Here is my quick and dirty Java solution:</p>\n\n<pre><code>import java.util.Date;\nimport javax.management.timer.Timer;\n\nString getRelativeDate(Date date) {     \n  long delta = new Date().getTime() - date.getTime();\n  if (delta &lt; 1L * Timer.ONE_MINUTE) {\n    return toSeconds(delta) == 1 ? \"one second ago\" : toSeconds(delta) + \" seconds ago\";\n  }\n  if (delta &lt; 2L * Timer.ONE_MINUTE) {\n    return \"a minute ago\";\n  }\n  if (delta &lt; 45L * Timer.ONE_MINUTE) {\n    return toMinutes(delta) + \" minutes ago\";\n  }\n  if (delta &lt; 90L * Timer.ONE_MINUTE) {\n    return \"an hour ago\";\n  }\n  if (delta &lt; 24L * Timer.ONE_HOUR) {\n    return toHours(delta) + \" hours ago\";\n  }\n  if (delta &lt; 48L * Timer.ONE_HOUR) {\n    return \"yesterday\";\n  }\n  if (delta &lt; 30L * Timer.ONE_DAY) {\n    return toDays(delta) + \" days ago\";\n  }\n  if (delta &lt; 12L * 4L * Timer.ONE_WEEK) { // a month\n    long months = toMonths(delta); \n    return months &lt;= 1 ? \"one month ago\" : months + \" months ago\";\n  }\n  else {\n    long years = toYears(delta);\n    return years &lt;= 1 ? \"one year ago\" : years + \" years ago\";\n  }\n}\n\nprivate long toSeconds(long date) {\n  return date / 1000L;\n}\n\nprivate long toMinutes(long date) {\n  return toSeconds(date) / 60L;\n}\n\nprivate long toHours(long date) {\n  return toMinutes(date) / 60L;\n}\n\nprivate long toDays(long date) {\n  return toHours(date) / 24L;\n}\n\nprivate long toMonths(long date) {\n  return toDays(date) / 30L;\n}\n\nprivate long toYears(long date) {\n  return toMonths(date) / 365L;\n}\n</code></pre>\n",
        "votes": "21",
        "tags": "",
        "accepted": false
      },
      {
        "id": "19377828",
        "title": "",
        "text": "<p>you can try this.I think it will work correctly.</p>\n\n<pre><code>long delta = new Date().getTime() - date.getTime();\nconst int SECOND = 1;\nconst int MINUTE = 60 * SECOND;\nconst int HOUR = 60 * MINUTE;\nconst int DAY = 24 * HOUR;\nconst int MONTH = 30 * DAY;\n\nif (delta &lt; 0L)\n{\n  return \"not yet\";\n}\nif (delta &lt; 1L * MINUTE)\n{\n  return ts.Seconds == 1 ? \"one second ago\" : ts.Seconds + \" seconds ago\";\n}\nif (delta &lt; 2L * MINUTE)\n{\n  return \"a minute ago\";\n}\nif (delta &lt; 45L * MINUTE)\n{\n  return ts.Minutes + \" minutes ago\";\n}\nif (delta &lt; 90L * MINUTE)\n{\n  return \"an hour ago\";\n}\nif (delta &lt; 24L * HOUR)\n{\n  return ts.Hours + \" hours ago\";\n}\nif (delta &lt; 48L * HOUR)\n{\n  return \"yesterday\";\n}\nif (delta &lt; 30L * DAY)\n{\n  return ts.Days + \" days ago\";\n}\nif (delta &lt; 12L * MONTH)\n{\n  int months = Convert.ToInt32(Math.Floor((double)ts.Days / 30));\n  return months &lt;= 1 ? \"one month ago\" : months + \" months ago\";\n}\nelse\n{\n  int years = Convert.ToInt32(Math.Floor((double)ts.Days / 365));\n  return years &lt;= 1 ? \"one year ago\" : years + \" years ago\";\n}\n</code></pre>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "25677278",
        "title": "",
        "text": "<pre class=\"lang-java prettyprint-override\"><code>/** \n * {@code date1} has to be earlier than {@code date2}.\n */\npublic static String relativize(Date date1, Date date2) {\n    assert date2.getTime() &gt;= date1.getTime();\n\n    long duration = date2.getTime() - date1.getTime();\n    long converted;\n\n    if ((converted = TimeUnit.MILLISECONDS.toDays(duration)) &gt; 0) {\n        return String.format(\"%d %s ago\", converted, converted == 1 ? \"day\" : \"days\");\n    } else if ((converted = TimeUnit.MILLISECONDS.toHours(duration)) &gt; 0) {\n        return String.format(\"%d %s ago\", converted, converted == 1 ? \"hour\" : \"hours\");\n    } else if ((converted = TimeUnit.MILLISECONDS.toMinutes(duration)) &gt; 0) {\n        return String.format(\"%d %s ago\", converted, converted == 1 ? \"minute\" : \"minutes\");\n    } else if ((converted = TimeUnit.MILLISECONDS.toSeconds(duration)) &gt; 0) {\n        return String.format(\"%d %s ago\", converted, converted == 1 ? \"second\" : \"seconds\");\n    } else {\n        return \"just now\";\n    }\n}\n</code></pre>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "10775917",
        "title": "",
        "text": "<pre class=\"lang-cs prettyprint-override\"><code>var ts = new TimeSpan(DateTime.Now.Ticks - dt.Ticks);\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "501415",
        "title": "",
        "text": "<p>Here a rewrite from Jeffs Script for PHP:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>define(\"SECOND\", 1);\ndefine(\"MINUTE\", 60 * SECOND);\ndefine(\"HOUR\", 60 * MINUTE);\ndefine(\"DAY\", 24 * HOUR);\ndefine(\"MONTH\", 30 * DAY);\nfunction relativeTime($time)\n{   \n    $delta = time() - $time;\n\n    if ($delta &lt; 1 * MINUTE)\n    {\n        return $delta == 1 ? \"one second ago\" : $delta . \" seconds ago\";\n    }\n    if ($delta &lt; 2 * MINUTE)\n    {\n      return \"a minute ago\";\n    }\n    if ($delta &lt; 45 * MINUTE)\n    {\n        return floor($delta / MINUTE) . \" minutes ago\";\n    }\n    if ($delta &lt; 90 * MINUTE)\n    {\n      return \"an hour ago\";\n    }\n    if ($delta &lt; 24 * HOUR)\n    {\n      return floor($delta / HOUR) . \" hours ago\";\n    }\n    if ($delta &lt; 48 * HOUR)\n    {\n      return \"yesterday\";\n    }\n    if ($delta &lt; 30 * DAY)\n    {\n        return floor($delta / DAY) . \" days ago\";\n    }\n    if ($delta &lt; 12 * MONTH)\n    {\n      $months = floor($delta / DAY / 30);\n      return $months &lt;= 1 ? \"one month ago\" : $months . \" months ago\";\n    }\n    else\n    {\n        $years = floor($delta / DAY / 365);\n        return $years &lt;= 1 ? \"one year ago\" : $years . \" years ago\";\n    }\n}    \n</code></pre>\n",
        "votes": "72",
        "tags": "",
        "accepted": false
      },
      {
        "id": "32459892",
        "title": "",
        "text": "<p>You can use <a href=\"http://dotnetthoughts.net/time-ago-function-for-c/\" rel=\"noreferrer\">TimeAgo extension</a> from which looks like the following:</p>\n\n<pre><code>public static string TimeAgo(this DateTime dateTime)\n{\n    string result = string.Empty;\n    var timeSpan = DateTime.Now.Subtract(dateTime);\n\n    if (timeSpan &lt;= TimeSpan.FromSeconds(60))\n    {\n        result = string.Format(\"{0} seconds ago\", timeSpan.Seconds);\n    }\n    else if (timeSpan &lt;= TimeSpan.FromMinutes(60))\n    {\n        result = timeSpan.Minutes &gt; 1 ? \n            String.Format(\"about {0} minutes ago\", timeSpan.Minutes) :\n            \"about a minute ago\";\n    }\n    else if (timeSpan &lt;= TimeSpan.FromHours(24))\n    {\n        result = timeSpan.Hours &gt; 1 ? \n            String.Format(\"about {0} hours ago\", timeSpan.Hours) : \n            \"about an hour ago\";\n    }\n    else if (timeSpan &lt;= TimeSpan.FromDays(30))\n    {\n        result = timeSpan.Days &gt; 1 ? \n            String.Format(\"about {0} days ago\", timeSpan.Days) : \n            \"yesterday\";\n    }\n    else if (timeSpan &lt;= TimeSpan.FromDays(365))\n    {\n        result = timeSpan.Days &gt; 30 ? \n            String.Format(\"about {0} months ago\", timeSpan.Days / 30) : \n            \"about a month ago\";\n    }\n    else\n    {\n        result = timeSpan.Days &gt; 365 ? \n            String.Format(\"about {0} years ago\", timeSpan.Days / 365) : \n            \"about a year ago\";\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>Or use <a href=\"http://ardalis.com/wiring-up-timeago-and-aspnet-mvc\" rel=\"noreferrer\">jQuery plugin</a> with Razor extension from Timeago.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "13",
    "url": "https://stackoverflow.com/questions/13",
    "title": "Determine a user's timezone",
    "text:": "<p>Is there a standard way for a web server to be able to determine a user's timezone within a web page? </p>\n\n<p>Perhaps from an HTTP header or part of the <code>user-agent</code> string?</p>\n",
    "codes": [
      [],
      [
        "<?php\n    $ip = $_SERVER['REMOTE_ADDR'];\n    $json = file_get_contents(\"http://api.easyjquery.com/ips/?ip=\" . $ip . \"&full=true\");\n    $json = json_decode($json,true);\n    $timezone = $json['LocalTimeZone'];\n?>\n"
      ],
      [],
      [
        "visitortime.getTimezoneOffset()\n"
      ],
      [
        "var off = (-new Date().getTimezoneOffset()/60).toString();//note the '-' in front which makes it return positive for negative offsets and negative for positive offsets\nvar tzo = off == '0' ? 'GMT' : off.indexOf('-') > -1 ? 'GMT'+off : 'GMT+'+off;\n",
        "$ts = new DateTime('now', new DateTimeZone($_POST['tzo']);\n$user_time = $ts->format(\"F j, Y, g:i a\");//will return the users current time in readable format, regardless of whether date_default_timezone() is set or not.\n$user_timestamp = strtotime($user_time);\n",
        "$date_created = // Get from the database\n$created = date(\"F j, Y, g:i a\",$date_created); // Return it to the user or whatever\n"
      ],
      [
        "$.ajaxSetup({\n    beforeSend: function(xhr, settings) {\n        xhr.setRequestHeader(\"X-TZ-Offset\", -new Date().getTimezoneOffset()/60);\n    }\n});\n"
      ],
      [
        "<?php\nsession_start();\n\nif(!isset($_SESSION['timezone']))\n{\n    if(!isset($_REQUEST['offset']))\n    {\n    ?>\n        <script>\n        var d = new Date()\n        var offset= -d.getTimezoneOffset()/60;\n        location.href = \"<?php echo $_SERVER['PHP_SELF']; ?>?offset=\"+offset;\n        </script>\n        <?php   \n    }\n    else\n    {\n        $zonelist = array('Kwajalein' => -12.00, 'Pacific/Midway' => -11.00, 'Pacific/Honolulu' => -10.00, 'America/Anchorage' => -9.00, 'America/Los_Angeles' => -8.00, 'America/Denver' => -7.00, 'America/Tegucigalpa' => -6.00, 'America/New_York' => -5.00, 'America/Caracas' => -4.30, 'America/Halifax' => -4.00, 'America/St_Johns' => -3.30, 'America/Argentina/Buenos_Aires' => -3.00, 'America/Sao_Paulo' => -3.00, 'Atlantic/South_Georgia' => -2.00, 'Atlantic/Azores' => -1.00, 'Europe/Dublin' => 0, 'Europe/Belgrade' => 1.00, 'Europe/Minsk' => 2.00, 'Asia/Kuwait' => 3.00, 'Asia/Tehran' => 3.30, 'Asia/Muscat' => 4.00, 'Asia/Yekaterinburg' => 5.00, 'Asia/Kolkata' => 5.30, 'Asia/Katmandu' => 5.45, 'Asia/Dhaka' => 6.00, 'Asia/Rangoon' => 6.30, 'Asia/Krasnoyarsk' => 7.00, 'Asia/Brunei' => 8.00, 'Asia/Seoul' => 9.00, 'Australia/Darwin' => 9.30, 'Australia/Canberra' => 10.00, 'Asia/Magadan' => 11.00, 'Pacific/Fiji' => 12.00, 'Pacific/Tongatapu' => 13.00);\n        $index = array_keys($zonelist, $_REQUEST['offset']);\n        $_SESSION['timezone'] = $index[0];\n    }\n}\n\ndate_default_timezone_set($_SESSION['timezone']);\n\n//rest of your code goes here\n?>\n"
      ],
      [
        ">>> var timezone = jstz.determine();\n>>> timezone.name(); \n\"Europe/London\"\n"
      ],
      [
        "> moment.tz.guess()\n\"America/Asuncion\"\n"
      ],
      [
        "var timezone_offset_minutes = new Date().getTimezoneOffset();\ntimezone_offset_minutes = timezone_offset_minutes == 0 ? 0 : -timezone_offset_minutes;\n",
        "// Just an example.\n$timezone_offset_minutes = -360;  // $_GET['timezone_offset_minutes']\n\n// Convert minutes to seconds\n$timezone_name = timezone_name_from_abbr(\"\", $timezone_offset_minutes*60, false);\n\n// America/Chicago\necho $timezone_name;</code></pre>\n"
      ],
      [],
      [],
      [
        "function maketimus(timestampz)\n{\n    var linktime = new Date(timestampz * 1000);\n    var linkday = linktime.getDate();\n    var freakingmonths = new Array();\n\n    freakingmonths[0]  = \"jan\";\n    freakingmonths[1]  = \"feb\";\n    freakingmonths[2]  = \"mar\";\n    freakingmonths[3]  = \"apr\";\n    freakingmonths[4]  = \"may\";\n    freakingmonths[5]  = \"jun\";\n    freakingmonths[6]  = \"jul\";\n    freakingmonths[7]  = \"aug\";\n    freakingmonths[8]  = \"sep\";\n    freakingmonths[9]  = \"oct\";\n    freakingmonths[10] = \"nov\";\n    freakingmonths[11] = \"dec\";\n\n    var linkmonthnum = linktime.getMonth();\n    var linkmonth = freakingmonths[linkmonthnum];\n    var linkyear = linktime.getFullYear();\n    var linkhour = linktime.getHours();\n    var linkminute = linktime.getMinutes();\n\n    if (linkminute < 10)\n    {\n        linkminute = \"0\" + linkminute;\n    }\n\n    var fomratedtime = linkday + linkmonth + linkyear + \" \" +\n                       linkhour + \":\" + linkminute + \"h\";\n    return fomratedtime;\n}\n",
        "echo '<script type=\"text/javascript\">\nvar eltimio = maketimus('.$unix_timestamp_ofshiz.');\ndocument.write(eltimio);\n</script><noscript>pls enable javascript</noscript>';\n"
      ],
      [],
      [
        "<?php\n    #http://www.php.net/manual/en/timezones.php List of Time Zones\n    function showclienttime()\n    {\n        if(!isset($_COOKIE['GMT_bias']))\n        {\n?>\n\n            <script type=\"text/javascript\">\n                var Cookies = {};\n                Cookies.create = function (name, value, days) {\n                    if (days) {\n                        var date = new Date();\n                        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n                        var expires = \"; expires=\" + date.toGMTString();\n                    }\n                    else {\n                        var expires = \"\";\n                    }\n                    document.cookie = name + \"=\" + value + expires + \"; path=/\";\n                    this[name] = value;\n                }\n\n                var now = new Date();\n                Cookies.create(\"GMT_bias\",now.getTimezoneOffset(),1);\n                window.location = \"<?php echo $_SERVER['PHP_SELF'];?>\";\n            </script>\n\n            <?php\n\n        }\n        else {\n          $fct_clientbias = $_COOKIE['GMT_bias'];\n        }\n\n        $fct_servertimedata = gettimeofday();\n        $fct_servertime = $fct_servertimedata['sec'];\n        $fct_serverbias = $fct_servertimedata['minuteswest'];\n        $fct_totalbias = $fct_serverbias \u2013 $fct_clientbias;\n        $fct_totalbias = $fct_totalbias * 60;\n        $fct_clienttimestamp = $fct_servertime + $fct_totalbias;\n        $fct_time = time();\n        $fct_year = strftime(\"%Y\", $fct_clienttimestamp);\n        $fct_month = strftime(\"%B\", $fct_clienttimestamp);\n        $fct_day = strftime(\"%d\", $fct_clienttimestamp);\n        $fct_hour = strftime(\"%I\", $fct_clienttimestamp);\n        $fct_minute = strftime(\"%M\", $fct_clienttimestamp);\n        $fct_second = strftime(\"%S\", $fct_clienttimestamp);\n        $fct_am_pm = strftime(\"%p\", $fct_clienttimestamp);\n        echo $fct_day.\", \".$fct_month.\" \".$fct_year.\" ( \".$fct_hour.\":\".$fct_minute.\":\".$fct_second.\" \".$fct_am_pm.\" )\";\n    }\n\n    showclienttime();\n?>\n"
      ],
      [],
      [
        ">> new Date().toTimeString();\n\"15:46:04 GMT+1200 (New Zealand Standard Time)\"\n//Use some regular expression to extract the time.\n"
      ],
      [
        "-new Date().getTimezoneOffset()/60;\n"
      ],
      [
        "-new Date().getTimezoneOffset()/60;\n"
      ],
      [
        "new Date().getTimezoneOffset();\n"
      ],
      [
        "<?php\n    session_start();\n    $timezone = $_SESSION['time'];\n?>\n",
        "<script type=\"text/javascript\" src=\"http://code.jquery.com/jquery-latest.min.js\"></script>\n",
        "<script type=\"text/javascript\">\n    $(document).ready(function() {\n        if(\"<?php echo $timezone; ?>\".length==0){\n            var visitortime = new Date();\n            var visitortimezone = \"GMT \" + -visitortime.getTimezoneOffset()/60;\n            $.ajax({\n                type: \"GET\",\n                url: \"http://example.org/timezone.php\",\n                data: 'time='+ visitortimezone,\n                success: function(){\n                    location.reload();\n                }\n            });\n        }\n    });\n</script>\n",
        "<?php\n    session_start();\n    $_SESSION['time'] = $_GET['time'];\n?>\n"
      ],
      [
        "function TimezoneDetect(){\n    var dtDate = new Date('1/1/' + (new Date()).getUTCFullYear());\n    var intOffset = 10000; //set initial offset high so it is adjusted on the first attempt\n    var intMonth;\n    var intHoursUtc;\n    var intHours;\n    var intDaysMultiplyBy;\n\n    // Go through each month to find the lowest offset to account for DST\n    for (intMonth=0;intMonth < 12;intMonth++){\n        //go to the next month\n        dtDate.setUTCMonth(dtDate.getUTCMonth() + 1);\n\n        // To ignore daylight saving time look for the lowest offset.\n        // Since, during DST, the clock moves forward, it'll be a bigger number.\n        if (intOffset > (dtDate.getTimezoneOffset() * (-1))){\n            intOffset = (dtDate.getTimezoneOffset() * (-1));\n        }\n    }\n\n    return intOffset;\n}\n"
      ],
      [],
      [
        "const tzid = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\nconsole.log(tzid);",
        "// using jsTimeZoneDetect\nvar tzid = jstz.determine().name();\n\n// using moment-timezone\nvar tzid = moment.tz.guess();\n"
      ]
    ],
    "votes:": "618",
    "tags": "<html><browser><timezone><user-agent><timezone-offset>",
    "AcceptedAnswerId": "",
    "answers": [
      {
        "id": "797",
        "title": "",
        "text": "<p>The most popular (==standard?) way of determining the time zone I've seen around is simply <em>asking the users themselves.</em> If your website requires subscription, this could be saved in the users' profile data. For anon users, the dates could be displayed as UTC or GMT or some such.</p>\n\n<p>I'm not trying to be a smart aleck. It's just that sometimes some problems have finer solutions outside of any programming context.</p>\n",
        "votes": "207",
        "tags": "",
        "accepted": false
      },
      {
        "id": "11717580",
        "title": "",
        "text": "<p>Try this PHP code:</p>\n\n<pre><code>&lt;?php\n    $ip = $_SERVER['REMOTE_ADDR'];\n    $json = file_get_contents(\"http://api.easyjquery.com/ips/?ip=\" . $ip . \"&amp;full=true\");\n    $json = json_decode($json,true);\n    $timezone = $json['LocalTimeZone'];\n?&gt;\n</code></pre>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "35819",
        "title": "",
        "text": "<p>If you happen to be using <a href=\"http://openid.net/\" rel=\"noreferrer\">OpenID</a> for authentication, <a href=\"http://openid.net/specs/openid-simple-registration-extension-1_0.html\" rel=\"noreferrer\">Simple Registration Extension</a> would solve the problem for authenticated users (You'll need to convert from tz to numeric).</p>\n\n<p>Another option would be to infer the time zone from the user agent's country preference. This is a somewhat crude method (won't work for en-US), but makes a good approximation.</p>\n",
        "votes": "14",
        "tags": "",
        "accepted": false
      },
      {
        "id": "817",
        "title": "",
        "text": "<p>The magic all seems to be in </p>\n\n<pre><code>visitortime.getTimezoneOffset()\n</code></pre>\n\n<p>That's cool, I didn't know about that. Does it work in Internet&nbsp;Explorer, etc? From there you should be able to use JavaScript to Ajax, set cookies, whatever. I'd probably go the cookie route myself.</p>\n\n<p>You'll need to allow the user to change it though. We tried to use geolocation (via maxmind) to do this a while ago, and it was wrong reasonably often - enough to make it not worth doing, so we just let the user set it in their profile, and show a notice to users who haven't set theirs yet.</p>\n",
        "votes": "20",
        "tags": "",
        "accepted": false
      },
      {
        "id": "25839604",
        "title": "",
        "text": "<p>It is simple with JavaScript and PHP:</p>\n\n<p>Even though the user can mess with his/her internal clock and/or timezone, the best way I found so far, to get the offset, remains <code>new Date().getTimezoneOffset();</code>. It's non-invasive, doesn't give head-aches and eliminates the need to rely on third parties.</p>\n\n<p>Say I have a table, <code>users</code>, that contains a field <code>date_created int(13)</code>, for storing Unix timestamps;</p>\n\n<p>Assuming a client <code>creates a new account</code>, data is received by <code>post</code>, and I need to <code>insert/update</code> the <code>date_created column</code> with the client's Unix timestamp, not the server's.</p>\n\n<p>Since the timezoneOffset is needed at the time of insert/update, it is passed as an extra $_POST element when the client submits the form, thus eliminating the need to store it in sessions and/or cookies, and no additional server hits either.</p>\n\n<pre><code>var off = (-new Date().getTimezoneOffset()/60).toString();//note the '-' in front which makes it return positive for negative offsets and negative for positive offsets\nvar tzo = off == '0' ? 'GMT' : off.indexOf('-') &gt; -1 ? 'GMT'+off : 'GMT+'+off;\n</code></pre>\n\n<p>Say the server receives <code>tzo</code> as <code>$_POST['tzo']</code>;</p>\n\n<pre><code>$ts = new DateTime('now', new DateTimeZone($_POST['tzo']);\n$user_time = $ts-&gt;format(\"F j, Y, g:i a\");//will return the users current time in readable format, regardless of whether date_default_timezone() is set or not.\n$user_timestamp = strtotime($user_time);\n</code></pre>\n\n<p>Insert/update <code>date_created=$user_timestamp</code>.</p>\n\n<p>When retrieving the date_created, you can convert the timestamp like so:</p>\n\n<pre><code>$date_created = // Get from the database\n$created = date(\"F j, Y, g:i a\",$date_created); // Return it to the user or whatever\n</code></pre>\n\n<p>Now, this example may fit one's needs, when it comes to inserting a <code>first</code> timestamp... When it comes to an additional timestamp, or table, you may want to consider inserting the tzo value into the users table for future reference, or setting it as session or as a cookie.</p>\n\n<p>P.S. BUT what if the user travels and switches timezones. Logs in at GMT+4, travels fast to GMT-1 and logs in again. Last login would be in the future.</p>\n\n<p>I think... we think too much.</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "12398468",
        "title": "",
        "text": "<p>To submit the timezone offset as an HTTP header on AJAX requests with <a href=\"http://jquery.com/\" rel=\"noreferrer\">jQuery</a></p>\n\n<pre><code>$.ajaxSetup({\n    beforeSend: function(xhr, settings) {\n        xhr.setRequestHeader(\"X-TZ-Offset\", -new Date().getTimezoneOffset()/60);\n    }\n});\n</code></pre>\n\n<p>You can also do something similar to get the actual time zone name by using <code>moment.tz.guess();</code> from <a href=\"http://momentjs.com/timezone/docs/#/using-timezones/guessing-user-timezone/\" rel=\"noreferrer\">http://momentjs.com/timezone/docs/#/using-timezones/guessing-user-timezone/</a></p>\n",
        "votes": "27",
        "tags": "",
        "accepted": false
      },
      {
        "id": "9043904",
        "title": "",
        "text": "<p>Here's how I do it. This will set the PHP default timezone to the user's local timezone. Just paste the following on the top of all your pages:</p>\n\n<pre><code>&lt;?php\nsession_start();\n\nif(!isset($_SESSION['timezone']))\n{\n    if(!isset($_REQUEST['offset']))\n    {\n    ?&gt;\n        &lt;script&gt;\n        var d = new Date()\n        var offset= -d.getTimezoneOffset()/60;\n        location.href = \"&lt;?php echo $_SERVER['PHP_SELF']; ?&gt;?offset=\"+offset;\n        &lt;/script&gt;\n        &lt;?php   \n    }\n    else\n    {\n        $zonelist = array('Kwajalein' =&gt; -12.00, 'Pacific/Midway' =&gt; -11.00, 'Pacific/Honolulu' =&gt; -10.00, 'America/Anchorage' =&gt; -9.00, 'America/Los_Angeles' =&gt; -8.00, 'America/Denver' =&gt; -7.00, 'America/Tegucigalpa' =&gt; -6.00, 'America/New_York' =&gt; -5.00, 'America/Caracas' =&gt; -4.30, 'America/Halifax' =&gt; -4.00, 'America/St_Johns' =&gt; -3.30, 'America/Argentina/Buenos_Aires' =&gt; -3.00, 'America/Sao_Paulo' =&gt; -3.00, 'Atlantic/South_Georgia' =&gt; -2.00, 'Atlantic/Azores' =&gt; -1.00, 'Europe/Dublin' =&gt; 0, 'Europe/Belgrade' =&gt; 1.00, 'Europe/Minsk' =&gt; 2.00, 'Asia/Kuwait' =&gt; 3.00, 'Asia/Tehran' =&gt; 3.30, 'Asia/Muscat' =&gt; 4.00, 'Asia/Yekaterinburg' =&gt; 5.00, 'Asia/Kolkata' =&gt; 5.30, 'Asia/Katmandu' =&gt; 5.45, 'Asia/Dhaka' =&gt; 6.00, 'Asia/Rangoon' =&gt; 6.30, 'Asia/Krasnoyarsk' =&gt; 7.00, 'Asia/Brunei' =&gt; 8.00, 'Asia/Seoul' =&gt; 9.00, 'Australia/Darwin' =&gt; 9.30, 'Australia/Canberra' =&gt; 10.00, 'Asia/Magadan' =&gt; 11.00, 'Pacific/Fiji' =&gt; 12.00, 'Pacific/Tongatapu' =&gt; 13.00);\n        $index = array_keys($zonelist, $_REQUEST['offset']);\n        $_SESSION['timezone'] = $index[0];\n    }\n}\n\ndate_default_timezone_set($_SESSION['timezone']);\n\n//rest of your code goes here\n?&gt;\n</code></pre>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "11836123",
        "title": "",
        "text": "<p>Here is a robust JavaScript solution to determine the time zone the browser is in.</p>\n\n<pre><code>&gt;&gt;&gt; var timezone = jstz.determine();\n&gt;&gt;&gt; timezone.name(); \n\"Europe/London\"\n</code></pre>\n\n<p><a href=\"https://bitbucket.org/pellepim/jstimezonedetect\" rel=\"nofollow noreferrer\">https://bitbucket.org/pellepim/jstimezonedetect</a></p>\n\n<p>Appendix 1: Now this project is located on GitHub: <a href=\"https://github.com/pellepim/jstimezonedetect\" rel=\"nofollow noreferrer\">https://github.com/pellepim/jstimezonedetect</a></p>\n",
        "votes": "52",
        "tags": "",
        "accepted": false
      },
      {
        "id": "39463380",
        "title": "",
        "text": "<p>You could do it on the client with <a href=\"http://momentjs.com/timezone/\" rel=\"nofollow noreferrer\">moment-timezone</a> and send the value to server; sample usage:</p>\n\n<pre><code>&gt; moment.tz.guess()\n\"America/Asuncion\"\n</code></pre>\n",
        "votes": "14",
        "tags": "",
        "accepted": false
      },
      {
        "id": "41568276",
        "title": "",
        "text": "<p>Getting a valid TZ Database timezone name in PHP is a two-step process:</p>\n\n<ol>\n<li><p>With JavaScript, get timezone offset in minutes through <code>getTimezoneOffset</code>. This offset will be positive if the local timezone is behind UTC and negative if it is ahead. So you must add an opposite sign to the offset.</p>\n\n<pre><code>var timezone_offset_minutes = new Date().getTimezoneOffset();\ntimezone_offset_minutes = timezone_offset_minutes == 0 ? 0 : -timezone_offset_minutes;\n</code></pre>\n\n<p>Pass this offset to PHP.</p></li>\n<li><p>In PHP convert this offset into a valid timezone name with <em>timezone_name_from_abbr</em> function.</p>\n\n<pre><code>// Just an example.\n$timezone_offset_minutes = -360;  // $_GET['timezone_offset_minutes']\n\n// Convert minutes to seconds\n$timezone_name = timezone_name_from_abbr(\"\", $timezone_offset_minutes*60, false);\n\n// America/Chicago\necho $timezone_name;&lt;/code&gt;&lt;/pre&gt;\n</code></pre></li>\n</ol>\n\n<p>I've written a blog post on it: <em><a href=\"http://usefulangle.com/post/31/detect-user-browser-timezone-name-in-php\" rel=\"nofollow noreferrer\">How to Detect User Timezone in PHP</a></em>. It also contains a demo.</p>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "25734579",
        "title": "",
        "text": "<p>One possible option is to use the <code>Date</code> header field, which is defined in <a href=\"https://tools.ietf.org/html/rfc7231#page-65\" rel=\"noreferrer\">RFC 7231</a> and is supposed to include the timezone. Of course, it is not guaranteed that the value is really the client's timezone, but it can be a convenient starting point.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "103",
        "title": "",
        "text": "<p>JavaScript is the easiest way to get the client's local time. I would suggest using an <a href=\"http://en.wikipedia.org/wiki/XMLHttpRequest\" rel=\"noreferrer\">XMLHttpRequest</a> to send back the local time, and if that fails, fall back to the timezone detected based on their IP address.</p>\n\n<p>As far as geolocation, I've used <a href=\"http://www.maxmind.com/app/ip-location\" rel=\"noreferrer\">MaxMind GeoIP</a> on several projects and it works well, though I'm not sure if they provide timezone data. It's a service you pay for and they provide monthly updates to your database. They provide wrappers in several web languages.</p>\n",
        "votes": "55",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7217925",
        "title": "",
        "text": "<p>JavaScript:</p>\n\n<pre><code>function maketimus(timestampz)\n{\n    var linktime = new Date(timestampz * 1000);\n    var linkday = linktime.getDate();\n    var freakingmonths = new Array();\n\n    freakingmonths[0]  = \"jan\";\n    freakingmonths[1]  = \"feb\";\n    freakingmonths[2]  = \"mar\";\n    freakingmonths[3]  = \"apr\";\n    freakingmonths[4]  = \"may\";\n    freakingmonths[5]  = \"jun\";\n    freakingmonths[6]  = \"jul\";\n    freakingmonths[7]  = \"aug\";\n    freakingmonths[8]  = \"sep\";\n    freakingmonths[9]  = \"oct\";\n    freakingmonths[10] = \"nov\";\n    freakingmonths[11] = \"dec\";\n\n    var linkmonthnum = linktime.getMonth();\n    var linkmonth = freakingmonths[linkmonthnum];\n    var linkyear = linktime.getFullYear();\n    var linkhour = linktime.getHours();\n    var linkminute = linktime.getMinutes();\n\n    if (linkminute &lt; 10)\n    {\n        linkminute = \"0\" + linkminute;\n    }\n\n    var fomratedtime = linkday + linkmonth + linkyear + \" \" +\n                       linkhour + \":\" + linkminute + \"h\";\n    return fomratedtime;\n}\n</code></pre>\n\n<p>Simply provide your times in Unix timestamp format to this function; JavaScript already knows the timezone of the user.</p>\n\n<p>Like this:</p>\n\n<p>PHP:</p>\n\n<pre><code>echo '&lt;script type=\"text/javascript\"&gt;\nvar eltimio = maketimus('.$unix_timestamp_ofshiz.');\ndocument.write(eltimio);\n&lt;/script&gt;&lt;noscript&gt;pls enable javascript&lt;/noscript&gt;';\n</code></pre>\n\n<p>This will always show the times correctly based on the timezone the person has set on his/her computer clock. There is no need to ask anything to anyone and save it into places, thank god!</p>\n",
        "votes": "22",
        "tags": "",
        "accepted": false
      },
      {
        "id": "14126931",
        "title": "",
        "text": "<p>Don't use the IP address to definitively determine location (and hence timezone)-- that's because with NAT, proxies (increasingly popular), and VPNs, IP addresses do not necessarily realistically reflect the user's actual location, but the location at which the servers implementing those protocols reside.</p>\n\n<p>Similar to how US area codes are no longer useful for locating a telephone user, given the popularity of number portability.</p>\n\n<p>IP address and other techniques shown above are useful for <strong>suggesting a default</strong> that the user can adjust/correct.</p>\n",
        "votes": "22",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3724089",
        "title": "",
        "text": "<p>With the PHP <code>date</code> function you will get the date time of server on which the site is located. The only way to get the user time is to use JavaScript.</p>\n\n<p>But I suggest you to, if your site has registration required then the best way is to ask the user while to have registration as a compulsory field. You can list various time zones in the register page and save that in the database. After this, if the user logs in to the site then you can set the default time zone for that session as per the users\u2019 selected time zone.</p>\n\n<p>You can set any specific time zone using the PHP function <code>date_default_timezone_set</code>. This sets the specified time zone for users.</p>\n\n<p>Basically the users\u2019 time zone is goes to the client side, so we must use JavaScript for this.</p>\n\n<p>Below is the script to get users\u2019 time zone using PHP and JavaScript.</p>\n\n<pre><code>&lt;?php\n    #http://www.php.net/manual/en/timezones.php List of Time Zones\n    function showclienttime()\n    {\n        if(!isset($_COOKIE['GMT_bias']))\n        {\n?&gt;\n\n            &lt;script type=\"text/javascript\"&gt;\n                var Cookies = {};\n                Cookies.create = function (name, value, days) {\n                    if (days) {\n                        var date = new Date();\n                        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n                        var expires = \"; expires=\" + date.toGMTString();\n                    }\n                    else {\n                        var expires = \"\";\n                    }\n                    document.cookie = name + \"=\" + value + expires + \"; path=/\";\n                    this[name] = value;\n                }\n\n                var now = new Date();\n                Cookies.create(\"GMT_bias\",now.getTimezoneOffset(),1);\n                window.location = \"&lt;?php echo $_SERVER['PHP_SELF'];?&gt;\";\n            &lt;/script&gt;\n\n            &lt;?php\n\n        }\n        else {\n          $fct_clientbias = $_COOKIE['GMT_bias'];\n        }\n\n        $fct_servertimedata = gettimeofday();\n        $fct_servertime = $fct_servertimedata['sec'];\n        $fct_serverbias = $fct_servertimedata['minuteswest'];\n        $fct_totalbias = $fct_serverbias \u2013 $fct_clientbias;\n        $fct_totalbias = $fct_totalbias * 60;\n        $fct_clienttimestamp = $fct_servertime + $fct_totalbias;\n        $fct_time = time();\n        $fct_year = strftime(\"%Y\", $fct_clienttimestamp);\n        $fct_month = strftime(\"%B\", $fct_clienttimestamp);\n        $fct_day = strftime(\"%d\", $fct_clienttimestamp);\n        $fct_hour = strftime(\"%I\", $fct_clienttimestamp);\n        $fct_minute = strftime(\"%M\", $fct_clienttimestamp);\n        $fct_second = strftime(\"%S\", $fct_clienttimestamp);\n        $fct_am_pm = strftime(\"%p\", $fct_clienttimestamp);\n        echo $fct_day.\", \".$fct_month.\" \".$fct_year.\" ( \".$fct_hour.\":\".$fct_minute.\":\".$fct_second.\" \".$fct_am_pm.\" )\";\n    }\n\n    showclienttime();\n?&gt;\n</code></pre>\n\n<p>But as per my point of view, it\u2019s better to ask to the users if registration is mandatory in your project.</p>\n",
        "votes": "22",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2901216",
        "title": "",
        "text": "<p>Here is an article (with source code) that explains how to determine and use localized time in an ASP.NET (VB.NET, C#) application: </p>\n\n<p><a href=\"http://www.windowsitpro.com/article/aspnet2/it-s-about-time.aspx\" rel=\"noreferrer\"><strong>It's About Time</strong></a></p>\n\n<p>In short, the described approach relies on the JavaScript <code>getTimezoneOffset</code> function, which returns the value that is saved in the session cookie and used by code-behind to adjust time values between GMT and local time. The nice thing is that the user does not need to specify the time zone (the code does it automatically). There is more involved (this is why I link to the article), but provided code makes it really easy to use. I suspect that you can convert the logic to PHP and other languages (as long as you understand ASP.NET). </p>\n",
        "votes": "16",
        "tags": "",
        "accepted": false
      },
      {
        "id": "12190240",
        "title": "",
        "text": "<p>I still have not seen a detailed answer here that gets the time zone. You shouldn't need to geocode by IP address or use PHP (lol) or incorrectly guess from an offset. </p>\n\n<p>Firstly a time zone is not just an offset from GMT. It is an area of land in which the time rules are set by local standards. Some countries have daylight savings, and will switch on DST at differing times. It's usually important to get the actual zone, not just the current offset.</p>\n\n<p>If you intend to store this timezone, for instance in user preferences you want the zone and not just the offset. For realtime conversions it won't matter much.</p>\n\n<p>Now, to get the time zone with javascript you can use this:</p>\n\n<pre><code>&gt;&gt; new Date().toTimeString();\n\"15:46:04 GMT+1200 (New Zealand Standard Time)\"\n//Use some regular expression to extract the time.\n</code></pre>\n\n<p>However I found it easier to simply use this robust plugin which returns the Olsen formatted timezone:</p>\n\n<p><a href=\"https://github.com/scottwater/jquery.detect_timezone\" rel=\"noreferrer\">https://github.com/scottwater/jquery.detect_timezone</a></p>\n",
        "votes": "24",
        "tags": "",
        "accepted": false
      },
      {
        "id": "10775887",
        "title": "",
        "text": "<p>Easy, just use the JavaScript <code>getTimezoneOffset</code> function like so:</p>\n\n<pre><code>-new Date().getTimezoneOffset()/60;\n</code></pre>\n",
        "votes": "24",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1809974",
        "title": "",
        "text": "<pre><code>-new Date().getTimezoneOffset()/60;\n</code></pre>\n\n<p>The method <code>getTimezoneOffset()</code> will subtract your time from GMT and return the number of minutes. So if you live in GMT-8, it will return 480.</p>\n\n<p>To put this into hours, divide by 60. Also, notice that the sign is the opposite of what you need - it's calculating GMT's offset from your time zone, not your time zone's offset from GMT. To fix this, simply multiply by -1. </p>\n\n<p>Also note that <a href=\"http://www.w3schools.com/jsref/jsref_gettimezoneoffset.asp\" rel=\"noreferrer\">w3school</a> says:</p>\n\n<blockquote>\n  <p>The returned value is not a constant, because of the practice of using\n  Daylight Saving Time.</p>\n</blockquote>\n",
        "votes": "335",
        "tags": "",
        "accepted": false
      },
      {
        "id": "8340357",
        "title": "",
        "text": "<p>A simple way to do it is by using:</p>\n\n<pre><code>new Date().getTimezoneOffset();\n</code></pre>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5607229",
        "title": "",
        "text": "<p>Using Unkwntech's approach, I wrote a function using jQuery and PHP. This is tested and does work!</p>\n\n<p>On the PHP page where you want to have the timezone as a variable, have this snippet of code somewhere near the top of the page:</p>\n\n<pre><code>&lt;?php\n    session_start();\n    $timezone = $_SESSION['time'];\n?&gt;\n</code></pre>\n\n<p>This will read the session variable \"time\", which we are now about to create.</p>\n\n<p>On the same page, in the &lt;head>, you need to first of all include jQuery:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"http://code.jquery.com/jquery-latest.min.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Also in the &lt;head>, below the jQuery, paste this:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function() {\n        if(\"&lt;?php echo $timezone; ?&gt;\".length==0){\n            var visitortime = new Date();\n            var visitortimezone = \"GMT \" + -visitortime.getTimezoneOffset()/60;\n            $.ajax({\n                type: \"GET\",\n                url: \"http://example.org/timezone.php\",\n                data: 'time='+ visitortimezone,\n                success: function(){\n                    location.reload();\n                }\n            });\n        }\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>You may or may not have noticed, but you need to change the URL to your actual domain.</p>\n\n<p>One last thing. You are probably wondering what the heck timezone.php is. Well, it is simply this:\n(create a new file called <strong>timezone.php</strong> and point to it with the above URL)</p>\n\n<pre><code>&lt;?php\n    session_start();\n    $_SESSION['time'] = $_GET['time'];\n?&gt;\n</code></pre>\n\n<p>If this works correctly, it will first load the page, execute the JavaScript, and reload the page. You will then be able to read the $timezone variable and use it to your pleasure! It returns the current UTC/GMT time zone offset (GMT -7) or whatever timezone you are in.</p>\n",
        "votes": "33",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5492192",
        "title": "",
        "text": "<p>Here is a more complete way.</p>\n\n<ol>\n<li>Get the timezone offset for the user</li>\n<li>Test some days on daylight saving boundaries to determine if they are in a zone that uses daylight saving.</li>\n</ol>\n\n<p>An excerpt is below:</p>\n\n<pre><code>function TimezoneDetect(){\n    var dtDate = new Date('1/1/' + (new Date()).getUTCFullYear());\n    var intOffset = 10000; //set initial offset high so it is adjusted on the first attempt\n    var intMonth;\n    var intHoursUtc;\n    var intHours;\n    var intDaysMultiplyBy;\n\n    // Go through each month to find the lowest offset to account for DST\n    for (intMonth=0;intMonth &lt; 12;intMonth++){\n        //go to the next month\n        dtDate.setUTCMonth(dtDate.getUTCMonth() + 1);\n\n        // To ignore daylight saving time look for the lowest offset.\n        // Since, during DST, the clock moves forward, it'll be a bigger number.\n        if (intOffset &gt; (dtDate.getTimezoneOffset() * (-1))){\n            intOffset = (dtDate.getTimezoneOffset() * (-1));\n        }\n    }\n\n    return intOffset;\n}\n</code></pre>\n\n<p><a href=\"https://web.archive.org/web/20140703082827/http://michaelapproved.com/articles/timezone-detect-and-ignore-daylight-saving-time-dst\" rel=\"noreferrer\">Getting TZ and DST from JS</a> (via Way Back Machine)</p>\n",
        "votes": "43",
        "tags": "",
        "accepted": false
      },
      {
        "id": "29",
        "title": "",
        "text": "<p>There are no HTTP headers that will report the clients timezone so far although it has been suggested to include it in the HTTP specification.</p>\n\n<p>If it was me, I would probably try to fetch the timezone using clientside JavaScript and then submit it to the server using Ajax or something.</p>\n",
        "votes": "133",
        "tags": "",
        "accepted": false
      },
      {
        "id": "22625076",
        "title": "",
        "text": "<p>First, understand that time zone detection in JavaScript is imperfect.  You can get the local <em>time zone offset</em> for a particular date and time using <code>getTimezoneOffset</code> on an instance of the <code>Date</code> object, but that's not quite the same as a full <a href=\"https://iana.org/time-zones\" rel=\"nofollow noreferrer\">IANA time zone</a> like <code>America/Los_Angeles</code>.</p>\n\n<p>There are some options that can work though:</p>\n\n<ul>\n<li>Most modern browsers support IANA time zones in their implementation of the <a href=\"https://www.ecma-international.org/ecma-402/\" rel=\"nofollow noreferrer\">ECMAScript Internationalization API</a>, so you can do this:</li>\n</ul>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const tzid = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\nconsole.log(tzid);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The result is a string containing the IANA time zone setting of the computer where the code is running.</p>\n\n<p>Supported environments are listed <a href=\"https://kangax.github.io/compat-table/esintl/#test-DateTimeFormat_resolvedOptions().timeZone_defaults_to_the_host_environment\" rel=\"nofollow noreferrer\">in the Intl compatibility table</a>. Expand the <code>DateTimeFormat</code> section, and look at the feature named <code>resolvedOptions().timeZone defaults to the host environment</code>.</p>\n\n<ul>\n<li><p>Some libraries, such as <a href=\"https://moment.github.io/luxon\" rel=\"nofollow noreferrer\">Luxon</a> use this API to determine the time zone through functions like <code>luxon.Settings.defaultZoneName</code>.</p>\n\n<ul>\n<li>If you need to support an wider set of environments, such as older web browsers, you can use a library to make an <em>educated guess</em> at the time zone.  They work by first trying the <code>Intl</code> API if it's available, and when it's not available, they interrogate the <code>getTimezoneOffset</code> function of the <code>Date</code> object, for several different points in time, using the results to choose an appropriate time zone from an internal data set.</li>\n</ul>\n\n<p>Both <a href=\"https://bitbucket.org/pellepim/jstimezonedetect\" rel=\"nofollow noreferrer\">jsTimezoneDetect</a> and <a href=\"https://momentjs.com/timezone\" rel=\"nofollow noreferrer\">moment-timezone</a> have this functionality.</p>\n\n<pre><code>// using jsTimeZoneDetect\nvar tzid = jstz.determine().name();\n\n// using moment-timezone\nvar tzid = moment.tz.guess();\n</code></pre>\n\n<p>In both cases, the result can only be thought of as a guess.  The guess may be correct in many cases, but not all of them.</p>\n\n<p>Additionally, these libraries have to be periodically updated to counteract the fact that many older JavaScript implementations are only aware of the <em>current</em> daylight saving time rule for their local time zone.  <a href=\"https://codeofmatt.com/2013/06/07/javascript-date-type-is-horribly-broken/\" rel=\"nofollow noreferrer\">More details on that here.</a></p></li>\n</ul>\n\n<p>Ultimately, a better approach is to actually ask your user for their time zone.  Provide a setting that they can change.  You can use one of the above options to choose a <em>default</em> setting, but don't make it impossible to deviate from that in your app.</p>\n\n<p>There's also the entirely different approach of <em>not</em> relying on the time zone setting of the user's computer at all.  Instead, if you can gather latitude and longitude coordinates, you can resolve those to a time zone using <a href=\"https://stackoverflow.com/a/16086964/634824\">one of these methods</a>.  This works well on mobile devices.</p>\n",
        "votes": "50",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "14",
    "url": "https://stackoverflow.com/questions/14",
    "title": "Difference between Math.Floor() and Math.Truncate()",
    "text:": "<p>What is the difference between <a href=\"http://msdn.microsoft.com/en-us/library/9a6a2sxy.aspx\" rel=\"noreferrer\"><code>Math.Floor()</code></a> and <a href=\"http://msdn.microsoft.com/en-us/library/system.math.truncate.aspx\" rel=\"noreferrer\"><code>Math.Truncate()</code></a> in .NET?</p>\n",
    "codes": [
      [
        "Round(1.5) = 2\nRound(2.5) = 2\nRound(1.5, MidpointRounding.AwayFromZero) = 2\nRound(2.5, MidpointRounding.AwayFromZero) = 3\nRound(1.55, 1) = 1.6\nRound(1.65, 1) = 1.6\nRound(1.55, 1, MidpointRounding.AwayFromZero) = 1.6\nRound(1.65, 1, MidpointRounding.AwayFromZero) = 1.7\n\nTruncate(2.10) = 2\nTruncate(2.00) = 2\nTruncate(1.90) = 1\nTruncate(1.80) = 1\n"
      ],
      [
        "-3        -2        -1         0         1         2         3\n +--|------+---------+----|----+--|------+----|----+-------|-+\n    a                     b       c           d            e\n\n                       a=-2.7  b=-0.5  c=0.3  d=1.5  e=2.8\n                       ======  ======  =====  =====  =====\nFloor                    -3      -1      0      1      2\nCeiling                  -2       0      1      2      3\nTruncate                 -2       0      0      1      2\nRound (ToEven)           -3       0      0      2      3\nRound (AwayFromZero)     -3      -1      0      2      3\n",
        "n = 3.145;\na = System.Math.Round (n, 2, MidpointRounding.ToEven);       // 3.14\nb = System.Math.Round (n, 2, MidpointRounding.AwayFromZero); // 3.15\n",
        "c = System.Math.Truncate (n * 100) / 100;                    // 3.14\nd = System.Math.Ceiling (n * 100) / 100;                     // 3.15\n"
      ],
      [
        "Math.Floor(2.5) = 2\nMath.Truncate(2.5) = 2\n\nMath.Floor(-2.5) = -3\nMath.Truncate(-2.5) = -2\n",
        "float myFloat = 4.5;\nConsole.WriteLine( Math.Round(myFloat) ); // writes 4\nConsole.WriteLine( Math.Round(myFloat, 0, MidpointRounding.AwayFromZero) ) //writes 5\nConsole.WriteLine( myFloat.ToString(\"F0\") ); // writes 5\n"
      ],
      [
        "Math.Floor(2.56) = 2\nMath.Floor(3.22) = 3\nMath.Floor(-2.56) = -3\nMath.Floor(-3.26) = -4\n\nMath.Truncate(2.56) = 2\nMath.Truncate(2.00) = 2\nMath.Truncate(1.20) = 1\nMath.Truncate(-3.26) = -3\nMath.Truncate(-3.96) = -3\n",
        "   Math.Round(1.6) = 2\n   Math.Round(-8.56) = -9\n   Math.Round(8.16) = 8\n   Math.Round(8.50) = 8\n   Math.Round(8.51) = 9\n"
      ],
      [],
      [
        "if (this == \"wrong\")\n    return \"i don't wanna be right\";\n"
      ],
      [],
      [
        "Math.Floor(-3.4)     = -4\nMath.Truncate(-3.4)  = -3\n",
        "Math.Floor(3.4)     = 3\nMath.Truncate(3.4)  = 3\n"
      ],
      [],
      [],
      []
    ],
    "votes:": "431",
    "tags": "<.net><math>",
    "AcceptedAnswerId": "",
    "answers": [
      {
        "id": "2086",
        "title": "",
        "text": "<p>Some examples:</p>\n\n<pre><code>Round(1.5) = 2\nRound(2.5) = 2\nRound(1.5, MidpointRounding.AwayFromZero) = 2\nRound(2.5, MidpointRounding.AwayFromZero) = 3\nRound(1.55, 1) = 1.6\nRound(1.65, 1) = 1.6\nRound(1.55, 1, MidpointRounding.AwayFromZero) = 1.6\nRound(1.65, 1, MidpointRounding.AwayFromZero) = 1.7\n\nTruncate(2.10) = 2\nTruncate(2.00) = 2\nTruncate(1.90) = 1\nTruncate(1.80) = 1\n</code></pre>\n",
        "votes": "48",
        "tags": "",
        "accepted": false
      },
      {
        "id": "580252",
        "title": "",
        "text": "<p>Follow these links for the MSDN descriptions of:</p>\n\n<ul>\n<li><a href=\"http://msdn.microsoft.com/en-us/library/system.math.floor.aspx\" rel=\"noreferrer\"><code>Math.Floor</code></a>, which rounds down towards negative infinity.</li>\n<li><a href=\"http://msdn.microsoft.com/en-us/library/system.math.ceiling.aspx\" rel=\"noreferrer\"><code>Math.Ceiling</code></a>, which rounds up towards positive infinity.</li>\n<li><a href=\"http://msdn.microsoft.com/en-us/library/system.math.truncate.aspx\" rel=\"noreferrer\"><code>Math.Truncate</code></a>, which rounds up or down towards zero.</li>\n<li><a href=\"http://msdn.microsoft.com/en-us/library/system.math.round.aspx\" rel=\"noreferrer\"><code>Math.Round</code></a>, which rounds to the nearest integer or specified number of decimal places. You can specify the behavior if it's exactly equidistant between two possibilities, such as rounding so that the final digit is even (\"<code>Round(2.5,MidpointRounding.ToEven)</code>\" becoming 2) or so that it's further away from zero (\"<code>Round(2.5,MidpointRounding.AwayFromZero)</code>\" becoming 3).</li>\n</ul>\n\n<p>The following diagram and table may help:</p>\n\n<pre><code>-3        -2        -1         0         1         2         3\n +--|------+---------+----|----+--|------+----|----+-------|-+\n    a                     b       c           d            e\n\n                       a=-2.7  b=-0.5  c=0.3  d=1.5  e=2.8\n                       ======  ======  =====  =====  =====\nFloor                    -3      -1      0      1      2\nCeiling                  -2       0      1      2      3\nTruncate                 -2       0      0      1      2\nRound (ToEven)           -3       0      0      2      3\nRound (AwayFromZero)     -3      -1      0      2      3\n</code></pre>\n\n<p>Note that <code>Round</code> is a lot more powerful than it seems, simply because it can round to a specific number of decimal places. All the others round to zero decimals always. For example:</p>\n\n<pre><code>n = 3.145;\na = System.Math.Round (n, 2, MidpointRounding.ToEven);       // 3.14\nb = System.Math.Round (n, 2, MidpointRounding.AwayFromZero); // 3.15\n</code></pre>\n\n<p>With the other functions, you have to use multiply/divide trickery to achieve the same effect:</p>\n\n<pre><code>c = System.Math.Truncate (n * 100) / 100;                    // 3.14\nd = System.Math.Ceiling (n * 100) / 100;                     // 3.15\n</code></pre>\n",
        "votes": "386",
        "tags": "",
        "accepted": false
      },
      {
        "id": "27742779",
        "title": "",
        "text": "<p>They are functionally equivalent with positive numbers. The difference is in how they handle negative numbers.</p>\n\n<p>For example:</p>\n\n<pre><code>Math.Floor(2.5) = 2\nMath.Truncate(2.5) = 2\n\nMath.Floor(-2.5) = -3\nMath.Truncate(-2.5) = -2\n</code></pre>\n\n<p>MSDN links:\n - <a href=\"http://msdn.microsoft.com/en-us/library/e0b5f0xb.aspx\" rel=\"noreferrer\">Math.Floor Method</a>\n - <a href=\"http://msdn.microsoft.com/en-us/library/c2eabd70.aspx\" rel=\"noreferrer\">Math.Truncate Method</a></p>\n\n<p>P.S. Beware of Math.Round it may not be what you expect.</p>\n\n<p>To get the \"standard\" rounding result use:</p>\n\n<pre><code>float myFloat = 4.5;\nConsole.WriteLine( Math.Round(myFloat) ); // writes 4\nConsole.WriteLine( Math.Round(myFloat, 0, MidpointRounding.AwayFromZero) ) //writes 5\nConsole.WriteLine( myFloat.ToString(\"F0\") ); // writes 5\n</code></pre>\n",
        "votes": "27",
        "tags": "",
        "accepted": false
      },
      {
        "id": "35358670",
        "title": "",
        "text": "<p>Try this, Examples: </p>\n\n<p><strong><em>Math.Floor()</em></strong> vs  <strong><em>Math.Truncate()</em></strong></p>\n\n<pre><code>Math.Floor(2.56) = 2\nMath.Floor(3.22) = 3\nMath.Floor(-2.56) = -3\nMath.Floor(-3.26) = -4\n\nMath.Truncate(2.56) = 2\nMath.Truncate(2.00) = 2\nMath.Truncate(1.20) = 1\nMath.Truncate(-3.26) = -3\nMath.Truncate(-3.96) = -3\n</code></pre>\n\n<p>Also <strong><em>Math.Round()</em></strong></p>\n\n<pre><code>   Math.Round(1.6) = 2\n   Math.Round(-8.56) = -9\n   Math.Round(8.16) = 8\n   Math.Round(8.50) = 8\n   Math.Round(8.51) = 9\n</code></pre>\n\n<p><strong><code>math.floor()</code></strong></p>\n\n<p>Returns the largest integer less than or equal to the specified number.\nMSDN <a href=\"https://msdn.microsoft.com/en-us/library/system.math.floor.aspx\" rel=\"nofollow noreferrer\">system.math.floor</a></p>\n\n<p><strong><code>math.truncate()</code></strong></p>\n\n<p>Calculates the integral part of a number.\nMSDN <a href=\"https://msdn.microsoft.com/en-us/library/system.math.truncate(v=vs.110).aspx\" rel=\"nofollow noreferrer\">system.math.truncate</a></p>\n",
        "votes": "25",
        "tags": "",
        "accepted": false
      },
      {
        "id": "33",
        "title": "",
        "text": "<p><code>Math.Floor</code> rounds down, <code>Math.Ceiling</code> rounds up, and <code>Math.Truncate</code> rounds towards zero. Thus, <code>Math.Truncate</code> is like <code>Math.Floor</code> for positive numbers, and like <code>Math.Ceiling</code> for negative numbers. Here's the <a href=\"http://msdn.microsoft.com/en-us/library/system.math.truncate.aspx\" rel=\"noreferrer\">reference</a>.</p>\n\n<p>For completeness, <code>Math.Round</code> rounds to the nearest integer. If the number is exactly midway between two integers, then it rounds towards the even one. <a href=\"http://msdn.microsoft.com/en-us/library/system.math.round.aspx\" rel=\"noreferrer\">Reference.</a></p>\n\n<p>See also: <a href=\"https://stackoverflow.com/questions/14/whats-the-difference-between-math-floor-and-math-truncate-in-c/580252#580252\">Pax Diablo's answer</a>. Highly recommended!</p>\n",
        "votes": "483",
        "tags": "",
        "accepted": false
      },
      {
        "id": "48732884",
        "title": "",
        "text": "<p><code>Math.floor</code> sliiiide to the left...<br>\n<code>Math.ceil</code> sliiiide to the right...<br>\n<code>Math.truncate</code> criiiiss crooooss (floor/ceil always towards 0)<br>\n<code>Math.round</code> cha cha, real smooth... (go to closest side)</p>\n\n<p>Let's go to work! (\u2310\u25a1_\u25a1)</p>\n\n<p>To the left... <code>Math.floor</code><br>\nTake it back now y'all... <code>--</code><br>\nTwo hops this time... <code>-=2</code></p>\n\n<p>Everybody clap your hands \u270b\u270b</p>\n\n<p>How low can you go? Can you go down low? All the way to the <code>floor</code>?  </p>\n\n<pre><code>if (this == \"wrong\")\n    return \"i don't wanna be right\";\n</code></pre>\n\n<p><code>Math.truncate(x)</code> is also the same as <code>int(x)</code>.<br>\nby removing a positive or negative fraction, you're always heading towards 0.</p>\n",
        "votes": "29",
        "tags": "",
        "accepted": false
      },
      {
        "id": "51375320",
        "title": "",
        "text": "<p><strong><code>Math.floor()</code></strong> will always round down ie., it returns LESSER integer. While <strong><code>round()</code></strong> will return the NEAREST integer</p>\n\n<p><strong><em>math.floor()</em></strong></p>\n\n<p>Returns the largest integer less than or equal to the specified number.</p>\n\n<p><strong><em>math.truncate()</em></strong></p>\n\n<p>Calculates the integral part of a number.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6742125",
        "title": "",
        "text": "<p><code>Math.Floor()</code> rounds toward negative infinity </p>\n\n<p><code>Math.Truncate</code> rounds up or down towards zero.</p>\n\n<p>For example:</p>\n\n<pre><code>Math.Floor(-3.4)     = -4\nMath.Truncate(-3.4)  = -3\n</code></pre>\n\n<p>while </p>\n\n<pre><code>Math.Floor(3.4)     = 3\nMath.Truncate(3.4)  = 3\n</code></pre>\n",
        "votes": "63",
        "tags": "",
        "accepted": false
      },
      {
        "id": "60803832",
        "title": "",
        "text": "<p>Truncate drops the decimal****</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "18893721",
        "title": "",
        "text": "<p><code>Math.Floor()</code>: Returns the largest integer less than or equal to the specified double-precision floating-point number.</p>\n\n<p><code>Math.Round()</code>: Rounds a value to the nearest integer or to the specified number of fractional digits.</p>\n",
        "votes": "17",
        "tags": "",
        "accepted": false
      },
      {
        "id": "10937469",
        "title": "",
        "text": "<p><a href=\"http://msdn.microsoft.com/en-us/library/system.math.floor.aspx\" rel=\"noreferrer\"><code>Math.Floor()</code></a> rounds \n\"toward negative infinity\" in compliance to <a href=\"http://standards.ieee.org/findstds/standard/754-2008.html\" rel=\"noreferrer\">IEEE Standard 754</a> section 4.</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/system.math.truncate.aspx\" rel=\"noreferrer\"><code>Math.Truncate()</code></a> rounds \" to the nearest integer towards zero.\" </p>\n",
        "votes": "24",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "16",
    "url": "https://stackoverflow.com/questions/16",
    "title": "Filling a DataSet or DataTable from a LINQ query result set",
    "text:": "<p>How do you expose a LINQ query as an ASMX web service? Usually, from the business tier, I can return a typed <code>DataSet</code> or <code>DataTable</code> which can be serialized for transport over ASMX.</p>\n\n<p>How can I do the same for a LINQ query? Is there a way to populate a typed <code>DataSet</code> or <code>DataTable</code> via a LINQ query?</p>\n\n<pre><code>public static MyDataTable CallMySproc()\n{\n    string conn = \"...\";\n\n    MyDatabaseDataContext db = new MyDatabaseDataContext(conn);\n    MyDataTable dt = new MyDataTable();\n\n    // execute a sproc via LINQ\n    var query = from dr\n                in db.MySproc().AsEnumerable\n                select dr;\n\n    // copy LINQ query resultset into a DataTable -this does not work !    \n    dt = query.CopyToDataTable();\n\n    return dt;\n}\n</code></pre>\n\n<p>How can I get the result set of a LINQ query into a <code>DataSet</code> or <code>DataTable</code>? Alternatively, is the LINQ query serializable so that I can expose it as an ASMX web service?</p>\n",
    "codes": [
      [
        "MyDataContext db = new MyDataContext();\nIEnumerable<DataRow> query = \n    (from order in db.Orders.AsEnumerable()\n        select new\n        {\n            order.Property,\n            order.Property2\n        })\n    as IEnumerable<DataRow>;\nreturn query.CopyToDataTable<DataRow>();\n"
      ],
      [],
      [],
      [],
      [],
      [
        "IEnumerable<DataRow> query =\n    from order in orders.AsEnumerable()\n    where order.Field<DateTime>(\"OrderDate\") > new DateTime(2001, 8, 1)\n    select order;\n\n// Create a table from the query.\nDataTable boundTable = query.CopyToDataTable<DataRow>();\n"
      ],
      [
        "MyDataContext db = new MyDataContext();\nIEnumerable<DataRow> query = \n    (from order in db.Orders.AsEnumerable()\n        select new\n        {\n            order.Property,\n            order.Property2\n        })\n    as IEnumerable<DataRow>;\nreturn query.CopyToDataTable<DataRow>();\n"
      ]
    ],
    "votes:": "137",
    "tags": "<c#><linq><web-services><.net-3.5>",
    "AcceptedAnswerId": "12446",
    "answers": [
      {
        "id": "544169",
        "title": "",
        "text": "<p>To perform this query against a <code>DataContext</code> class, you'll need to do the following:</p>\n\n<pre><code>MyDataContext db = new MyDataContext();\nIEnumerable&lt;DataRow&gt; query = \n    (from order in db.Orders.AsEnumerable()\n        select new\n        {\n            order.Property,\n            order.Property2\n        })\n    as IEnumerable&lt;DataRow&gt;;\nreturn query.CopyToDataTable&lt;DataRow&gt;();\n</code></pre>\n\n<p>Without the <code>as IEnumerable&lt;DataRow&gt;;</code> you will see the following compilation error:</p>\n\n<blockquote>\n  <p>Cannot implicitly convert type 'System.Collections.Generic.IEnumerable' to 'System.Collections.Generic.IEnumerable'. An explicit conversion exists (are you missing a cast?)</p>\n</blockquote>\n",
        "votes": "26",
        "tags": "",
        "accepted": false
      },
      {
        "id": "56693278",
        "title": "",
        "text": "<p>For the sake of completeness, these solutions do not work for EF Core (at least not for EF Core 2.2). Casting to <code>IEnumerable&lt;DataRow&gt;</code>, as suggested in the other answers here, fails. Implementing this class and extension methods worked for me <a href=\"https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/implement-copytodatatable-where-type-not-a-datarow\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/implement-copytodatatable-where-type-not-a-datarow</a>.</p>\n\n<p>Why it's not built into EF Core, I have not idea.</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5830",
        "title": "",
        "text": "<p>Create a class object and return a <code>list(T)</code> of the query.</p>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "12460",
        "title": "",
        "text": "<p>Make a set of Data Transfer Objects, a couple of mappers, and return that via the .asmx.<br>\nYou should <em>never</em> expose the database objects directly, as a change in the procedure schema will propagate to the web service consumer without you noticing it.</p>\n",
        "votes": "22",
        "tags": "",
        "accepted": false
      },
      {
        "id": "84",
        "title": "",
        "text": "<p>If you use a return type of <code>IEnumerable</code>, you can return your <strong>query</strong> variable directly.</p>\n",
        "votes": "16",
        "tags": "",
        "accepted": false
      },
      {
        "id": "12446",
        "title": "",
        "text": "<p>As mentioned in the question, <code>IEnumerable</code> has a <code>CopyToDataTable</code> method:</p>\n\n<pre><code>IEnumerable&lt;DataRow&gt; query =\n    from order in orders.AsEnumerable()\n    where order.Field&lt;DateTime&gt;(\"OrderDate\") &gt; new DateTime(2001, 8, 1)\n    select order;\n\n// Create a table from the query.\nDataTable boundTable = query.CopyToDataTable&lt;DataRow&gt;();\n</code></pre>\n\n<p>Why won't that work for you?</p>\n",
        "votes": "88",
        "tags": "",
        "accepted": true
      },
      {
        "id": "49774484",
        "title": "",
        "text": "<p>If you use the return type of <code>IEnumerable</code>.It helps return your query variable directly.</p>\n\n<pre><code>MyDataContext db = new MyDataContext();\nIEnumerable&lt;DataRow&gt; query = \n    (from order in db.Orders.AsEnumerable()\n        select new\n        {\n            order.Property,\n            order.Property2\n        })\n    as IEnumerable&lt;DataRow&gt;;\nreturn query.CopyToDataTable&lt;DataRow&gt;();\n</code></pre>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "17",
    "url": "https://stackoverflow.com/questions/17",
    "title": "Binary Data in MySQL",
    "text:": "<p>How do I store binary data in <a href=\"http://en.wikipedia.org/wiki/MySQL\" rel=\"noreferrer\">MySQL</a>?</p>\n",
    "codes": [
      [],
      [],
      [
        "mysql_query(\"UPDATE table SET field=X'\".bin2hex($bin_data).\"' WHERE id=$id\");\n"
      ],
      [],
      [],
      [],
      [],
      [
        "CREATE TABLE binary_data (\n    id INT(4) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    description CHAR(50),\n    bin_data LONGBLOB,\n    filename CHAR(50),\n    filesize CHAR(50),\n    filetype CHAR(50)\n);\n",
        "<?php\n    // store.php3 - by Florian Dittmer <dittmer@gmx.net>\n    // Example php script to demonstrate the storing of binary files into\n    // an sql database. More information can be found at http://www.phpbuilder.com/\n?>\n\n<html>\n    <head><title>Store binary data into SQL Database</title></head>\n\n    <body>\n        <?php\n            // Code that will be executed if the form has been submitted:\n\n            if ($submit) {\n                // Connect to the database (you may have to adjust\n                // the hostname, username or password).\n\n                mysql_connect(\"localhost\", \"root\", \"password\");\n                mysql_select_db(\"binary_data\");\n\n                $data = mysql_real_escape_string(fread(fopen($form_data, \"r\"), filesize($form_data)));\n\n                $result = mysql_query(\"INSERT INTO binary_data (description, bin_data, filename, filesize, filetype) \".\n                                    \"VALUES ('$form_description', '$data', '$form_data_name', '$form_data_size', '$form_data_type')\");\n\n                $id= mysql_insert_id();\n                print \"<p>This file has the following Database ID: <b>$id</b>\";\n\n                mysql_close();\n            } else {\n\n                // else show the form to submit new data:\n        ?>\n        <form method=\"post\" action=\"<?php echo $PHP_SELF; ?>\" enctype=\"multipart/form-data\">\n            File Description:<br>\n            <input type=\"text\" name=\"form_description\"  size=\"40\">\n            <input type=\"hidden\" name=\"MAX_FILE_SIZE\" value=\"1000000\">\n            <br>File to upload/store in database:<br>\n            <input type=\"file\" name=\"form_data\"  size=\"40\">\n            <p><input type=\"submit\" name=\"submit\" value=\"submit\">\n        </form>\n\n        <?php\n            }\n        ?>\n    </body>\n</html>\n"
      ],
      []
    ],
    "votes:": "190",
    "tags": "<mysql><database><binary-data><data-storage>",
    "AcceptedAnswerId": "26",
    "answers": [
      {
        "id": "87385",
        "title": "",
        "text": "<p>I strongly recommend <strong>against</strong> storing binary data in a relational database. Relational databases are designed to work with fixed-size data; that's where their performance strength is: remember <a href=\"http://www.joelonsoftware.com/articles/fog0000000319.html\" rel=\"noreferrer\">Joel's old article</a> on why databases are so fast? because it takes exactly 1 pointer increment to move from a record to another record. If you add BLOB data of undefined and vastly varying size, you'll screw up performance. </p>\n\n<p>Instead, store files in the file system, and store file names in your database. </p>\n",
        "votes": "51",
        "tags": "",
        "accepted": false
      },
      {
        "id": "4567420",
        "title": "",
        "text": "<p>It depends on the data you wish to store.  The above example uses the <code>LONGBLOB</code> data type, but you should be aware that there are other binary data formats:</p>\n\n<p><code>TINYBLOB/BLOB/MEDIUMBLOB/LONGBLOB</code><br>\n<code>VARBINARY</code><br>\n<code>BINARY</code></p>\n\n<p>Each has their use cases.  If it is a known (short) length (e.g. packed data) often times <code>BINARY</code> or <code>VARBINARY</code> will work.  They have the added benefit of being able ton index on them.</p>\n",
        "votes": "17",
        "tags": "",
        "accepted": false
      },
      {
        "id": "18763725",
        "title": "",
        "text": "<p>If the - <a href=\"https://stackoverflow.com/a/87385/669677\">not recommended</a> - BLOB field exists, you can save data this way:</p>\n\n<pre><code>mysql_query(\"UPDATE table SET field=X'\".bin2hex($bin_data).\"' WHERE id=$id\");\n</code></pre>\n\n<p>Idea taken from <a href=\"https://stackoverflow.com/q/2558453/669677\">here</a>.</p>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "69311",
        "title": "",
        "text": "<p>While it shouldn't be necessary, you could try <code>base64</code> encoding data in and decoding it out. That means the db will just have ascii characters. It will take a bit more space and time, but any issue to do with the binary data will be eliminated.</p>\n",
        "votes": "14",
        "tags": "",
        "accepted": false
      },
      {
        "id": "467",
        "title": "",
        "text": "<p>While you haven't said what you're storing, and you may have a great reason for doing so, often the answer is 'as a filesystem reference' and the actual data is on the filesystem somewhere.</p>\n\n<p><a href=\"http://www.onlamp.com/pub/a/onlamp/2002/07/11/MySQLtips.html\" rel=\"noreferrer\">http://www.onlamp.com/pub/a/onlamp/2002/07/11/MySQLtips.html</a></p>\n",
        "votes": "23",
        "tags": "",
        "accepted": false
      },
      {
        "id": "23405248",
        "title": "",
        "text": "<p>When I need to store binary data I always use <code>VARBINARY</code> format, as introduced <code>byd0nut</code>.</p>\n\n<p>You can find documentation at MySQL website under documented topic <a href=\"http://dev.mysql.com/doc/refman/5.0/en/binary-varbinary.html\" rel=\"noreferrer\"> 12.4.2 The BINARY and VARBINARY Types</a></p>\n\n<p>If you are asking what are advantagese, please look at question <a href=\"https://stackoverflow.com/questions/13393718/why-varbinary-instead-of-varchar\">why-varbinary-instead-of-varchar</a></p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "26",
        "title": "",
        "text": "<p>The answer by phpguy is correct but I think there is a lot of confusion in the  additional details there.</p>\n\n<p>The basic answer is in a <code>BLOB</code> data type / attribute domain. <strong>BLOB</strong> is short for Binary Large Object and that column data type is specific for handling binary data.</p>\n\n<p>See <a href=\"http://dev.mysql.com/doc/refman/5.7/en/blob.html\" rel=\"noreferrer\">the relevant manual page for MySQL</a>.</p>\n",
        "votes": "139",
        "tags": "",
        "accepted": true
      },
      {
        "id": "18",
        "title": "",
        "text": "<p>For a table like this:</p>\n\n<pre><code>CREATE TABLE binary_data (\n    id INT(4) NOT NULL AUTO_INCREMENT PRIMARY KEY,\n    description CHAR(50),\n    bin_data LONGBLOB,\n    filename CHAR(50),\n    filesize CHAR(50),\n    filetype CHAR(50)\n);\n</code></pre>\n\n<p>Here is a PHP example:</p>\n\n<pre><code>&lt;?php\n    // store.php3 - by Florian Dittmer &lt;dittmer@gmx.net&gt;\n    // Example php script to demonstrate the storing of binary files into\n    // an sql database. More information can be found at http://www.phpbuilder.com/\n?&gt;\n\n&lt;html&gt;\n    &lt;head&gt;&lt;title&gt;Store binary data into SQL Database&lt;/title&gt;&lt;/head&gt;\n\n    &lt;body&gt;\n        &lt;?php\n            // Code that will be executed if the form has been submitted:\n\n            if ($submit) {\n                // Connect to the database (you may have to adjust\n                // the hostname, username or password).\n\n                mysql_connect(\"localhost\", \"root\", \"password\");\n                mysql_select_db(\"binary_data\");\n\n                $data = mysql_real_escape_string(fread(fopen($form_data, \"r\"), filesize($form_data)));\n\n                $result = mysql_query(\"INSERT INTO binary_data (description, bin_data, filename, filesize, filetype) \".\n                                    \"VALUES ('$form_description', '$data', '$form_data_name', '$form_data_size', '$form_data_type')\");\n\n                $id= mysql_insert_id();\n                print \"&lt;p&gt;This file has the following Database ID: &lt;b&gt;$id&lt;/b&gt;\";\n\n                mysql_close();\n            } else {\n\n                // else show the form to submit new data:\n        ?&gt;\n        &lt;form method=\"post\" action=\"&lt;?php echo $PHP_SELF; ?&gt;\" enctype=\"multipart/form-data\"&gt;\n            File Description:&lt;br&gt;\n            &lt;input type=\"text\" name=\"form_description\"  size=\"40\"&gt;\n            &lt;input type=\"hidden\" name=\"MAX_FILE_SIZE\" value=\"1000000\"&gt;\n            &lt;br&gt;File to upload/store in database:&lt;br&gt;\n            &lt;input type=\"file\" name=\"form_data\"  size=\"40\"&gt;\n            &lt;p&gt;&lt;input type=\"submit\" name=\"submit\" value=\"submit\"&gt;\n        &lt;/form&gt;\n\n        &lt;?php\n            }\n        ?&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n",
        "votes": "69",
        "tags": "",
        "accepted": false
      },
      {
        "id": "30404",
        "title": "",
        "text": "<p>The question also arises how to get the data into the BLOB. You can put the data in an INSERT statement, as the PHP example shows (although you should use <a href=\"http://www.php.net/mysql-real-escape-string\" rel=\"noreferrer\">mysql_real_escape_string</a> instead of addslashes). If the file exists on the database server, you can also use MySQL's <a href=\"http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_load-file\" rel=\"noreferrer\" title=\"LOAD FILE\">LOAD_FILE</a></p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "19",
    "url": "https://stackoverflow.com/questions/19",
    "title": "What is the fastest way to get the value of \u03c0?",
    "text:": "<p>I'm looking for the fastest way to obtain the value of \u03c0, as a personal challenge. More specifically, I'm using ways that don't involve using <code>#define</code> constants like <code>M_PI</code>, or hard-coding the number in.</p>\n\n<p>The program below tests the various ways I know of. The inline assembly version is, in theory, the fastest option, though clearly not portable. I've included it as a baseline to compare against the other versions. In my tests, with built-ins, the <code>4 * atan(1)</code> version is fastest on GCC 4.2, because it auto-folds the <code>atan(1)</code> into a constant. With <code>-fno-builtin</code> specified, the <code>atan2(0, -1)</code> version is fastest.</p>\n\n<p>Here's the main testing program (<code>pitimes.c</code>):</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\n#define ITERS 10000000\n#define TESTWITH(x) {                                                       \\\n    diff = 0.0;                                                             \\\n    time1 = clock();                                                        \\\n    for (i = 0; i &lt; ITERS; ++i)                                             \\\n        diff += (x) - M_PI;                                                 \\\n    time2 = clock();                                                        \\\n    printf(\"%s\\t=&gt; %e, time =&gt; %f\\n\", #x, diff, diffclock(time2, time1));   \\\n}\n\nstatic inline double\ndiffclock(clock_t time1, clock_t time0)\n{\n    return (double) (time1 - time0) / CLOCKS_PER_SEC;\n}\n\nint\nmain()\n{\n    int i;\n    clock_t time1, time2;\n    double diff;\n\n    /* Warmup. The atan2 case catches GCC's atan folding (which would\n     * optimise the ``4 * atan(1) - M_PI'' to a no-op), if -fno-builtin\n     * is not used. */\n    TESTWITH(4 * atan(1))\n    TESTWITH(4 * atan2(1, 1))\n\n#if defined(__GNUC__) &amp;&amp; (defined(__i386__) || defined(__amd64__))\n    extern double fldpi();\n    TESTWITH(fldpi())\n#endif\n\n    /* Actual tests start here. */\n    TESTWITH(atan2(0, -1))\n    TESTWITH(acos(-1))\n    TESTWITH(2 * asin(1))\n    TESTWITH(4 * atan2(1, 1))\n    TESTWITH(4 * atan(1))\n\n    return 0;\n}\n</code></pre>\n\n<p>And the inline assembly stuff (<code>fldpi.c</code>) that will only work for x86 and x64 systems:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>double\nfldpi()\n{\n    double pi;\n    asm(\"fldpi\" : \"=t\" (pi));\n    return pi;\n}\n</code></pre>\n\n<p>And a build script that builds all the configurations I'm testing (<code>build.sh</code>):</p>\n\n<pre><code>#!/bin/sh\ngcc -O3 -Wall -c           -m32 -o fldpi-32.o fldpi.c\ngcc -O3 -Wall -c           -m64 -o fldpi-64.o fldpi.c\n\ngcc -O3 -Wall -ffast-math  -m32 -o pitimes1-32 pitimes.c fldpi-32.o\ngcc -O3 -Wall              -m32 -o pitimes2-32 pitimes.c fldpi-32.o -lm\ngcc -O3 -Wall -fno-builtin -m32 -o pitimes3-32 pitimes.c fldpi-32.o -lm\ngcc -O3 -Wall -ffast-math  -m64 -o pitimes1-64 pitimes.c fldpi-64.o -lm\ngcc -O3 -Wall              -m64 -o pitimes2-64 pitimes.c fldpi-64.o -lm\ngcc -O3 -Wall -fno-builtin -m64 -o pitimes3-64 pitimes.c fldpi-64.o -lm\n</code></pre>\n\n<p>Apart from testing between various compiler flags (I've compared 32-bit against 64-bit too because the optimizations are different), I've also tried switching the order of the tests around. But still, the <code>atan2(0, -1)</code> version still comes out on top every time.</p>\n",
    "codes": [
      [
        "using System;\nusing System.Text;\n\nclass Program {\n    static void Main(string[] args) {\n        int Digits = 100;\n\n        BigNumber x = new BigNumber(Digits);\n        BigNumber y = new BigNumber(Digits);\n        x.ArcTan(16, 5);\n        y.ArcTan(4, 239);\n        x.Subtract(y);\n        string pi = x.ToString();\n        Console.WriteLine(pi);\n    }\n}\n\npublic class BigNumber {\n    private UInt32[] number;\n    private int size;\n    private int maxDigits;\n\n    public BigNumber(int maxDigits) {\n        this.maxDigits = maxDigits;\n        this.size = (int)Math.Ceiling((float)maxDigits * 0.104) + 2;\n        number = new UInt32[size];\n    }\n    public BigNumber(int maxDigits, UInt32 intPart)\n        : this(maxDigits) {\n        number[0] = intPart;\n        for (int i = 1; i < size; i++) {\n            number[i] = 0;\n        }\n    }\n    private void VerifySameSize(BigNumber value) {\n        if (Object.ReferenceEquals(this, value))\n            throw new Exception(\"BigNumbers cannot operate on themselves\");\n        if (value.size != this.size)\n            throw new Exception(\"BigNumbers must have the same size\");\n    }\n\n    public void Add(BigNumber value) {\n        VerifySameSize(value);\n\n        int index = size - 1;\n        while (index >= 0 && value.number[index] == 0)\n            index--;\n\n        UInt32 carry = 0;\n        while (index >= 0) {\n            UInt64 result = (UInt64)number[index] +\n                            value.number[index] + carry;\n            number[index] = (UInt32)result;\n            if (result >= 0x100000000U)\n                carry = 1;\n            else\n                carry = 0;\n            index--;\n        }\n    }\n    public void Subtract(BigNumber value) {\n        VerifySameSize(value);\n\n        int index = size - 1;\n        while (index >= 0 && value.number[index] == 0)\n            index--;\n\n        UInt32 borrow = 0;\n        while (index >= 0) {\n            UInt64 result = 0x100000000U + (UInt64)number[index] -\n                            value.number[index] - borrow;\n            number[index] = (UInt32)result;\n            if (result >= 0x100000000U)\n                borrow = 0;\n            else\n                borrow = 1;\n            index--;\n        }\n    }\n    public void Multiply(UInt32 value) {\n        int index = size - 1;\n        while (index >= 0 && number[index] == 0)\n            index--;\n\n        UInt32 carry = 0;\n        while (index >= 0) {\n            UInt64 result = (UInt64)number[index] * value + carry;\n            number[index] = (UInt32)result;\n            carry = (UInt32)(result >> 32);\n            index--;\n        }\n    }\n    public void Divide(UInt32 value) {\n        int index = 0;\n        while (index < size && number[index] == 0)\n            index++;\n\n        UInt32 carry = 0;\n        while (index < size) {\n            UInt64 result = number[index] + ((UInt64)carry << 32);\n            number[index] = (UInt32)(result / (UInt64)value);\n            carry = (UInt32)(result % (UInt64)value);\n            index++;\n        }\n    }\n    public void Assign(BigNumber value) {\n        VerifySameSize(value);\n        for (int i = 0; i < size; i++) {\n            number[i] = value.number[i];\n        }\n    }\n\n    public override string ToString() {\n        BigNumber temp = new BigNumber(maxDigits);\n        temp.Assign(this);\n\n        StringBuilder sb = new StringBuilder();\n        sb.Append(temp.number[0]);\n        sb.Append(System.Globalization.CultureInfo.CurrentCulture.NumberFormat.CurrencyDecimalSeparator);\n\n        int digitCount = 0;\n        while (digitCount < maxDigits) {\n            temp.number[0] = 0;\n            temp.Multiply(100000);\n            sb.AppendFormat(\"{0:D5}\", temp.number[0]);\n            digitCount += 5;\n        }\n\n        return sb.ToString();\n    }\n    public bool IsZero() {\n        foreach (UInt32 item in number) {\n            if (item != 0)\n                return false;\n        }\n        return true;\n    }\n\n    public void ArcTan(UInt32 multiplicand, UInt32 reciprocal) {\n        BigNumber X = new BigNumber(maxDigits, multiplicand);\n        X.Divide(reciprocal);\n        reciprocal *= reciprocal;\n\n        this.Assign(X);\n\n        BigNumber term = new BigNumber(maxDigits);\n        UInt32 divisor = 1;\n        bool subtractTerm = true;\n        while (true) {\n            X.Divide(reciprocal);\n            term.Assign(X);\n            divisor += 2;\n            term.Divide(divisor);\n            if (term.IsZero())\n                break;\n\n            if (subtractTerm)\n                this.Subtract(term);\n            else\n                this.Add(term);\n            subtractTerm = !subtractTerm;\n        }\n    }\n}\n"
      ],
      [],
      [
        "#define _ -F<00||--F-OO--;\nint F=00,OO=00;main(){F_OO();printf(\"%1.3f\\n\",4.*-F/OO/OO);}F_OO()\n{\n            _-_-_-_\n       _-_-_-_-_-_-_-_-_\n    _-_-_-_-_-_-_-_-_-_-_-_\n  _-_-_-_-_-_-_-_-_-_-_-_-_-_\n _-_-_-_-_-_-_-_-_-_-_-_-_-_-_\n _-_-_-_-_-_-_-_-_-_-_-_-_-_-_\n_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_\n_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_\n_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_\n_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_\n _-_-_-_-_-_-_-_-_-_-_-_-_-_-_\n _-_-_-_-_-_-_-_-_-_-_-_-_-_-_\n  _-_-_-_-_-_-_-_-_-_-_-_-_-_\n    _-_-_-_-_-_-_-_-_-_-_-_\n        _-_-_-_-_-_-_-_\n            _-_-_-_\n}\n"
      ],
      [
        "/*\n    Chudnovsky algorithm for computing PI\n*/\n\n#include <iostream>\n#include <cmath>\nusing namespace std;\n\ndouble calc_PI(int K=2) {\n\n    static const int A = 545140134;\n    static const int B = 13591409;\n    static const int D = 640320;\n\n    const double ID3 = 1./ (double(D)*double(D)*double(D));\n\n    double sum = 0.;\n    double b   = sqrt(ID3);\n    long long int p = 1;\n    long long int a = B;\n\n    sum += double(p) * double(a)* b;\n\n    // 2 iterations enough for double convergence\n    for (int k=1; k<K; ++k) {\n        // A*k + B\n        a += A;\n        // update denominator\n        b *= ID3;\n        // p = (-1)^k 6k! / 3k! k!^3\n        p *= (6*k)*(6*k-1)*(6*k-2)*(6*k-3)*(6*k-4)*(6*k-5);\n        p /= (3*k)*(3*k-1)*(3*k-2) * k*k*k;\n        p = -p;\n\n        sum += double(p) * double(a)* b;\n    }\n\n    return 1./(12*sum);\n}\n\nint main() {\n\n    cout.precision(16);\n    cout.setf(ios::fixed);\n\n    for (int k=1; k<=5; ++k) cout << \"k = \" << k << \"   PI = \" << calc_PI(k) << endl;\n\n    return 0;\n}\n",
        "k = 1   PI = 3.1415926535897341\nk = 2   PI = 3.1415926535897931\nk = 3   PI = 3.1415926535897931\nk = 4   PI = 3.1415926535897931\nk = 5   PI = 3.1415926535897931\n"
      ],
      [
        "from math import pi\nfrom time import time\n\n\nprecision = 10**6 # higher value -> higher precision\n                  # lower  value -> higher speed\n\nt = time()\n\ncalc = 0\nfor k in xrange(0, precision):\n    calc += ((-1)**k) / (2*k+1.)\ncalc *= 4. # this is just a little optimization\n\nt = time()-t\n\nprint \"Calculated: %.40f\" % calc\nprint \"Constant pi: %.40f\" % pi\nprint \"Difference: %.40f\" % abs(calc-pi)\nprint \"Time elapsed: %s\" % repr(t)\n",
        "from gmpy import pi\nprint pi(3000) # the rule is the same as \n               # the precision on the previous code\n",
        "static char doc_pi[]=\"\\\npi(n): returns pi with n bits of precision in an mpf object\\n\\\n\";\n\n/* This function was originally from netlib, package bmp, by\n * Richard P. Brent. Paulo Cesar Pereira de Andrade converted\n * it to C and used it in his LISP interpreter.\n *\n * Original comments:\n * \n *   sets mp pi = 3.14159... to the available precision.\n *   uses the gauss-legendre algorithm.\n *   this method requires time o(ln(t)m(t)), so it is slower\n *   than mppi if m(t) = o(t**2), but would be faster for\n *   large t if a faster multiplication algorithm were used\n *   (see comments in mpmul).\n *   for a description of the method, see - multiple-precision\n *   zero-finding and the complexity of elementary function\n *   evaluation (by r. p. brent), in analytic computational\n *   complexity (edited by j. f. traub), academic press, 1976, 151-176.\n *   rounding options not implemented, no guard digits used.\n*/\nstatic PyObject *\nPygmpy_pi(PyObject *self, PyObject *args)\n{\n    PympfObject *pi;\n    int precision;\n    mpf_t r_i2, r_i3, r_i4;\n    mpf_t ix;\n\n    ONE_ARG(\"pi\", \"i\", &precision);\n    if(!(pi = Pympf_new(precision))) {\n        return NULL;\n    }\n\n    mpf_set_si(pi->f, 1);\n\n    mpf_init(ix);\n    mpf_set_ui(ix, 1);\n\n    mpf_init2(r_i2, precision);\n\n    mpf_init2(r_i3, precision);\n    mpf_set_d(r_i3, 0.25);\n\n    mpf_init2(r_i4, precision);\n    mpf_set_d(r_i4, 0.5);\n    mpf_sqrt(r_i4, r_i4);\n\n    for (;;) {\n        mpf_set(r_i2, pi->f);\n        mpf_add(pi->f, pi->f, r_i4);\n        mpf_div_ui(pi->f, pi->f, 2);\n        mpf_mul(r_i4, r_i2, r_i4);\n        mpf_sub(r_i2, pi->f, r_i2);\n        mpf_mul(r_i2, r_i2, r_i2);\n        mpf_mul(r_i2, r_i2, ix);\n        mpf_sub(r_i3, r_i3, r_i2);\n        mpf_sqrt(r_i4, r_i4);\n        mpf_mul_ui(ix, ix, 2);\n        /* Check for convergence */\n        if (!(mpf_cmp_si(r_i2, 0) && \n              mpf_get_prec(r_i2) >= (unsigned)precision)) {\n            mpf_mul(pi->f, pi->f, r_i4);\n            mpf_div(pi->f, pi->f, r_i3);\n            break;\n        }\n    }\n\n    mpf_clear(ix);\n    mpf_clear(r_i2);\n    mpf_clear(r_i3);\n    mpf_clear(r_i4);\n\n    return (PyObject*)pi;\n}\n"
      ],
      [
        "<input id=\"range\" type=\"range\" min=\"10\" max=\"960\" value=\"10\" step=\"50\" oninput=\"calcPi()\">\r\n<br>\r\n<div id=\"cont\"></div>\r\n\r\n<script>\r\nfunction generateCircle(width) {\r\n    var c = width/2;\r\n    var delta = 1.0;\r\n    var str = \"\";\r\n    var xCount = 0;\r\n    for (var x=0; x <= width; x++) {\r\n        for (var y = 0; y <= width; y++) {\r\n            var d = Math.sqrt((x-c)*(x-c) + (y-c)*(y-c));\r\n            if (d > (width-1)/2) {\r\n                str += '.';\r\n            }\r\n            else {\r\n                xCount++;\r\n                str += 'o';\r\n            }\r\n            str += \"&nbsp;\" \r\n        }\r\n        str += \"\\n\";\r\n    }\r\n    var pi = (xCount * 4) / (width * width);\r\n    return [str, pi];\r\n}\r\n\r\nfunction calcPi() {\r\n    var e = document.getElementById(\"cont\");\r\n    var width = document.getElementById(\"range\").value;\r\n    e.innerHTML = \"<h4>Generating circle...</h4>\";\r\n    setTimeout(function() {\r\n        var circ = generateCircle(width);\r\n        e.innerHTML  = \"<pre>\" + \"\u03c0 = \" + circ[1].toFixed(2) + \"\\n\" + circ[0] +\"</pre>\";\r\n    }, 200);\r\n}\r\ncalcPi();\r\n</script>"
      ],
      [],
      [
        "#include <iostream>\n\ntemplate<int I>\nstruct sign\n{\n    enum {value = (I % 2) == 0 ? 1 : -1};\n};\n\ntemplate<int I, int J>\nstruct pi_calc\n{\n    inline static double value ()\n    {\n        return (pi_calc<I-1, J>::value () + pi_calc<I-1, J+1>::value ()) / 2.0;\n    }\n};\n\ntemplate<int J>\nstruct pi_calc<0, J>\n{\n    inline static double value ()\n    {\n        return (sign<J>::value * 4.0) / (2.0 * J + 1.0) + pi_calc<0, J-1>::value ();\n    }\n};\n\n\ntemplate<>\nstruct pi_calc<0, 0>\n{\n    inline static double value ()\n    {\n        return 4.0;\n    }\n};\n\ntemplate<int I>\nstruct pi\n{\n    inline static double value ()\n    {\n        return pi_calc<I, I>::value ();\n    }\n};\n\nint main ()\n{\n    std::cout.precision (12);\n\n    const double pi_value = pi<10>::value ();\n\n    std::cout << \"pi ~ \" << pi_value << std::endl;\n\n    return 0;\n}\n"
      ],
      [
        "program calcpi;\n\n{$APPTYPE CONSOLE}\n\nuses\n  SysUtils;\n\nvar\n  start, finish: TDateTime;\n\nfunction CalculatePi(iterations: integer): double;\nvar\n  numerator, denominator, i: integer;\n  sum: double;\nbegin\n  {\n  PI may be approximated with this formula:\n  4 * (1 - 1/3 + 1/5 - 1/7 + 1/9 - 1/11 .......)\n  //}\n  numerator := 1;\n  denominator := 1;\n  sum := 0;\n  for i := 1 to iterations do begin\n    sum := sum + (numerator/denominator);\n    denominator := denominator + 2;\n    numerator := -numerator;\n  end;\n  Result := 4 * sum;\nend;\n\nbegin\n  try\n    start := Now;\n    WriteLn(FloatToStr(CalculatePi(StrToInt(ParamStr(1)))));\n    finish := Now;\n    WriteLn('Seconds:' + FormatDateTime('hh:mm:ss.zz',finish-start));\n  except\n    on E:Exception do\n      Writeln(E.Classname, ': ', E.Message);\n  end;\nend.\n"
      ],
      [],
      [
        "import math\nprint math.pi\n",
        "Command being timed: \"python math_pi.py\"\nUser time (seconds): 0.01\nSystem time (seconds): 0.01\nPercent of CPU this job got: 91%\nElapsed (wall clock) time (h:mm:ss or m:ss): 0:00.03\n",
        "import math\nprint math.acos(-1)\n",
        "Command being timed: \"python acos_pi.py\"\nUser time (seconds): 0.02\nSystem time (seconds): 0.01\nPercent of CPU this job got: 94%\nElapsed (wall clock) time (h:mm:ss or m:ss): 0:00.03\n",
        "from decimal import Decimal, getcontext\ngetcontext().prec=100\nprint sum(1/Decimal(16)**k * \n          (Decimal(4)/(8*k+1) - \n           Decimal(2)/(8*k+4) - \n           Decimal(1)/(8*k+5) -\n           Decimal(1)/(8*k+6)) for k in range(100))\n",
        "Command being timed: \"python c.py\"\nUser time (seconds): 0.05\nSystem time (seconds): 0.01\nPercent of CPU this job got: 98%\nElapsed (wall clock) time (h:mm:ss or m:ss): 0:00.06\n"
      ],
      [],
      [],
      [
        ";''6666,-2%{2+.2/@*\\/10.3??2*+}*`1000<~\\;\n"
      ],
      [
        "/** Calculate pi at compile time\n *\n * Compile with dmd -c pi.d\n */\nmodule calcpi;\n\nimport meta.math;\nimport meta.conv;\n\n/** real evaluateSeries!(real x, real metafunction!(real y, int n) term)\n *\n * Evaluate a power series at compile time.\n *\n * Given a metafunction of the form\n *  real term!(real y, int n),\n * which gives the nth term of a convergent series at the point y\n * (where the first term is n==1), and a real number x,\n * this metafunction calculates the infinite sum at the point x\n * by adding terms until the sum doesn't change any more.\n */\ntemplate evaluateSeries(real x, alias term, int n=1, real sumsofar=0.0)\n{\n  static if (n>1 && sumsofar == sumsofar + term!(x, n+1)) {\n     const real evaluateSeries = sumsofar;\n  } else {\n     const real evaluateSeries = evaluateSeries!(x, term, n+1, sumsofar + term!(x, n));\n  }\n}\n\n/*** Calculate atan(x) at compile time.\n *\n * Uses the Maclaurin formula\n *  atan(z) = z - z^3/3 + Z^5/5 - Z^7/7 + ...\n */\ntemplate atan(real z)\n{\n    const real atan = evaluateSeries!(z, atanTerm);\n}\n\ntemplate atanTerm(real x, int n)\n{\n    const real atanTerm =  (n & 1 ? 1 : -1) * pow!(x, 2*n-1)/(2*n-1);\n}\n\n/// Machin's formula for pi\n/// pi/4 = 4 atan(1/5) - atan(1/239).\npragma(msg, \"PI = \" ~ fcvt!(4.0 * (4*atan!(1/5.0) - atan!(1/239.0))) );\n"
      ],
      [
        "/* Return approximation of n * PI; n is integer */\n#define pi_times(n) (((n) * 22) / 7)\n"
      ],
      [
        "176 * arctan (1/57) + 28 * arctan (1/239) - 48 * arctan (1/682) + 96 * arctan(1/12943) \n\n[; \\left( 176 \\arctan \\frac{1}{57} + 28 \\arctan \\frac{1}{239} - 48 \\arctan \\frac{1}{682} + 96 \\arctan \\frac{1}{12943}\\right) ;], for you TeX the World people.\n"
      ],
      [
        "let pi_2 iters =\n    let rec loop_ a b t p i =\n        if i = 0 then a,b,t,p\n        else\n            let a_n = (a +. b) /. 2.0 \n            and b_n = sqrt (a*.b)\n            and p_n = 2.0 *. p in\n            let t_n = t -. (p *. (a -. a_n) *. (a -. a_n)) in\n            loop_ a_n b_n t_n p_n (i - 1)\n    in \n    let a,b,t,p = loop_ (1.0) (1.0 /. (sqrt 2.0)) (1.0/.4.0) (1.0) iters in\n    (a +. b) *. (a +. b) /. (4.0 *. t)\n",
        "int a=10000,b,c=2800,d,e,f[2801],g;main(){for(;b-c;)f[b++]=a/5;for(;d=0,g=c*2;c-=14,printf(\"%.4d\",e+d/a),e=d%a)for(b=c;d+=f[b]*a,f[b]=d%--g,d/=g--,--b;d*=b);}\n"
      ],
      [],
      [
        "PI = 3.141592654\n"
      ],
      [
        "4.0 * (4.0 * Math.Atan(0.2) - Math.Atan(1.0 / 239.0))\n"
      ],
      []
    ],
    "votes:": "333",
    "tags": "<performance><algorithm><language-agnostic><unix><pi>",
    "AcceptedAnswerId": "531",
    "answers": [
      {
        "id": "592025",
        "title": "",
        "text": "<p>Pi is exactly 3! [Prof. Frink (Simpsons)]</p>\n\n<p>Joke, but here's one in C# (.NET-Framework required).</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>using System;\nusing System.Text;\n\nclass Program {\n    static void Main(string[] args) {\n        int Digits = 100;\n\n        BigNumber x = new BigNumber(Digits);\n        BigNumber y = new BigNumber(Digits);\n        x.ArcTan(16, 5);\n        y.ArcTan(4, 239);\n        x.Subtract(y);\n        string pi = x.ToString();\n        Console.WriteLine(pi);\n    }\n}\n\npublic class BigNumber {\n    private UInt32[] number;\n    private int size;\n    private int maxDigits;\n\n    public BigNumber(int maxDigits) {\n        this.maxDigits = maxDigits;\n        this.size = (int)Math.Ceiling((float)maxDigits * 0.104) + 2;\n        number = new UInt32[size];\n    }\n    public BigNumber(int maxDigits, UInt32 intPart)\n        : this(maxDigits) {\n        number[0] = intPart;\n        for (int i = 1; i &lt; size; i++) {\n            number[i] = 0;\n        }\n    }\n    private void VerifySameSize(BigNumber value) {\n        if (Object.ReferenceEquals(this, value))\n            throw new Exception(\"BigNumbers cannot operate on themselves\");\n        if (value.size != this.size)\n            throw new Exception(\"BigNumbers must have the same size\");\n    }\n\n    public void Add(BigNumber value) {\n        VerifySameSize(value);\n\n        int index = size - 1;\n        while (index &gt;= 0 &amp;&amp; value.number[index] == 0)\n            index--;\n\n        UInt32 carry = 0;\n        while (index &gt;= 0) {\n            UInt64 result = (UInt64)number[index] +\n                            value.number[index] + carry;\n            number[index] = (UInt32)result;\n            if (result &gt;= 0x100000000U)\n                carry = 1;\n            else\n                carry = 0;\n            index--;\n        }\n    }\n    public void Subtract(BigNumber value) {\n        VerifySameSize(value);\n\n        int index = size - 1;\n        while (index &gt;= 0 &amp;&amp; value.number[index] == 0)\n            index--;\n\n        UInt32 borrow = 0;\n        while (index &gt;= 0) {\n            UInt64 result = 0x100000000U + (UInt64)number[index] -\n                            value.number[index] - borrow;\n            number[index] = (UInt32)result;\n            if (result &gt;= 0x100000000U)\n                borrow = 0;\n            else\n                borrow = 1;\n            index--;\n        }\n    }\n    public void Multiply(UInt32 value) {\n        int index = size - 1;\n        while (index &gt;= 0 &amp;&amp; number[index] == 0)\n            index--;\n\n        UInt32 carry = 0;\n        while (index &gt;= 0) {\n            UInt64 result = (UInt64)number[index] * value + carry;\n            number[index] = (UInt32)result;\n            carry = (UInt32)(result &gt;&gt; 32);\n            index--;\n        }\n    }\n    public void Divide(UInt32 value) {\n        int index = 0;\n        while (index &lt; size &amp;&amp; number[index] == 0)\n            index++;\n\n        UInt32 carry = 0;\n        while (index &lt; size) {\n            UInt64 result = number[index] + ((UInt64)carry &lt;&lt; 32);\n            number[index] = (UInt32)(result / (UInt64)value);\n            carry = (UInt32)(result % (UInt64)value);\n            index++;\n        }\n    }\n    public void Assign(BigNumber value) {\n        VerifySameSize(value);\n        for (int i = 0; i &lt; size; i++) {\n            number[i] = value.number[i];\n        }\n    }\n\n    public override string ToString() {\n        BigNumber temp = new BigNumber(maxDigits);\n        temp.Assign(this);\n\n        StringBuilder sb = new StringBuilder();\n        sb.Append(temp.number[0]);\n        sb.Append(System.Globalization.CultureInfo.CurrentCulture.NumberFormat.CurrencyDecimalSeparator);\n\n        int digitCount = 0;\n        while (digitCount &lt; maxDigits) {\n            temp.number[0] = 0;\n            temp.Multiply(100000);\n            sb.AppendFormat(\"{0:D5}\", temp.number[0]);\n            digitCount += 5;\n        }\n\n        return sb.ToString();\n    }\n    public bool IsZero() {\n        foreach (UInt32 item in number) {\n            if (item != 0)\n                return false;\n        }\n        return true;\n    }\n\n    public void ArcTan(UInt32 multiplicand, UInt32 reciprocal) {\n        BigNumber X = new BigNumber(maxDigits, multiplicand);\n        X.Divide(reciprocal);\n        reciprocal *= reciprocal;\n\n        this.Assign(X);\n\n        BigNumber term = new BigNumber(maxDigits);\n        UInt32 divisor = 1;\n        bool subtractTerm = true;\n        while (true) {\n            X.Divide(reciprocal);\n            term.Assign(X);\n            divisor += 2;\n            term.Divide(divisor);\n            if (term.IsZero())\n                break;\n\n            if (subtractTerm)\n                this.Subtract(term);\n            else\n                this.Add(term);\n            subtractTerm = !subtractTerm;\n        }\n    }\n}\n</code></pre>\n",
        "votes": "16",
        "tags": "",
        "accepted": false
      },
      {
        "id": "622950",
        "title": "",
        "text": "<p>Instead of defining pi as a constant, I always use <code>acos(-1)</code>.</p>\n",
        "votes": "23",
        "tags": "",
        "accepted": false
      },
      {
        "id": "39512",
        "title": "",
        "text": "<p>I really like this program, because it approximates \u03c0 by looking at its own area.</p>\n\n<p>IOCCC 1988 : <a href=\"http://www0.us.ioccc.org/1988/westley.c\" rel=\"noreferrer\">westley.c</a> </p>\n\n<blockquote>\n<pre><code>#define _ -F&lt;00||--F-OO--;\nint F=00,OO=00;main(){F_OO();printf(\"%1.3f\\n\",4.*-F/OO/OO);}F_OO()\n{\n            _-_-_-_\n       _-_-_-_-_-_-_-_-_\n    _-_-_-_-_-_-_-_-_-_-_-_\n  _-_-_-_-_-_-_-_-_-_-_-_-_-_\n _-_-_-_-_-_-_-_-_-_-_-_-_-_-_\n _-_-_-_-_-_-_-_-_-_-_-_-_-_-_\n_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_\n_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_\n_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_\n_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_\n _-_-_-_-_-_-_-_-_-_-_-_-_-_-_\n _-_-_-_-_-_-_-_-_-_-_-_-_-_-_\n  _-_-_-_-_-_-_-_-_-_-_-_-_-_\n    _-_-_-_-_-_-_-_-_-_-_-_\n        _-_-_-_-_-_-_-_\n            _-_-_-_\n}\n</code></pre>\n</blockquote>\n",
        "votes": "118",
        "tags": "",
        "accepted": false
      },
      {
        "id": "61670212",
        "title": "",
        "text": "<p>The Chudnovsky algorithm is pretty fast if you don't mind performing a square root and a couple inverses. It converges to double precision in just 2 iterations.</p>\n\n<pre><code>/*\n    Chudnovsky algorithm for computing PI\n*/\n\n#include &lt;iostream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\ndouble calc_PI(int K=2) {\n\n    static const int A = 545140134;\n    static const int B = 13591409;\n    static const int D = 640320;\n\n    const double ID3 = 1./ (double(D)*double(D)*double(D));\n\n    double sum = 0.;\n    double b   = sqrt(ID3);\n    long long int p = 1;\n    long long int a = B;\n\n    sum += double(p) * double(a)* b;\n\n    // 2 iterations enough for double convergence\n    for (int k=1; k&lt;K; ++k) {\n        // A*k + B\n        a += A;\n        // update denominator\n        b *= ID3;\n        // p = (-1)^k 6k! / 3k! k!^3\n        p *= (6*k)*(6*k-1)*(6*k-2)*(6*k-3)*(6*k-4)*(6*k-5);\n        p /= (3*k)*(3*k-1)*(3*k-2) * k*k*k;\n        p = -p;\n\n        sum += double(p) * double(a)* b;\n    }\n\n    return 1./(12*sum);\n}\n\nint main() {\n\n    cout.precision(16);\n    cout.setf(ios::fixed);\n\n    for (int k=1; k&lt;=5; ++k) cout &lt;&lt; \"k = \" &lt;&lt; k &lt;&lt; \"   PI = \" &lt;&lt; calc_PI(k) &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>k = 1   PI = 3.1415926535897341\nk = 2   PI = 3.1415926535897931\nk = 3   PI = 3.1415926535897931\nk = 4   PI = 3.1415926535897931\nk = 5   PI = 3.1415926535897931\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "164687",
        "title": "",
        "text": "<p>This is a \"classic\" method, very easy to implement.\nThis implementation in python (not the fastest language) does it:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>from math import pi\nfrom time import time\n\n\nprecision = 10**6 # higher value -&gt; higher precision\n                  # lower  value -&gt; higher speed\n\nt = time()\n\ncalc = 0\nfor k in xrange(0, precision):\n    calc += ((-1)**k) / (2*k+1.)\ncalc *= 4. # this is just a little optimization\n\nt = time()-t\n\nprint \"Calculated: %.40f\" % calc\nprint \"Constant pi: %.40f\" % pi\nprint \"Difference: %.40f\" % abs(calc-pi)\nprint \"Time elapsed: %s\" % repr(t)\n</code></pre>\n\n<p>You can find more information <a href=\"http://functions.wolfram.com/Constants/Pi/02/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Anyway, the fastest way to get a precise as-much-as-you-want value of pi in python is:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>from gmpy import pi\nprint pi(3000) # the rule is the same as \n               # the precision on the previous code\n</code></pre>\n\n<p>Here is the piece of source for the gmpy pi method, I don't think the code is as useful as the comment in this case:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>static char doc_pi[]=\"\\\npi(n): returns pi with n bits of precision in an mpf object\\n\\\n\";\n\n/* This function was originally from netlib, package bmp, by\n * Richard P. Brent. Paulo Cesar Pereira de Andrade converted\n * it to C and used it in his LISP interpreter.\n *\n * Original comments:\n * \n *   sets mp pi = 3.14159... to the available precision.\n *   uses the gauss-legendre algorithm.\n *   this method requires time o(ln(t)m(t)), so it is slower\n *   than mppi if m(t) = o(t**2), but would be faster for\n *   large t if a faster multiplication algorithm were used\n *   (see comments in mpmul).\n *   for a description of the method, see - multiple-precision\n *   zero-finding and the complexity of elementary function\n *   evaluation (by r. p. brent), in analytic computational\n *   complexity (edited by j. f. traub), academic press, 1976, 151-176.\n *   rounding options not implemented, no guard digits used.\n*/\nstatic PyObject *\nPygmpy_pi(PyObject *self, PyObject *args)\n{\n    PympfObject *pi;\n    int precision;\n    mpf_t r_i2, r_i3, r_i4;\n    mpf_t ix;\n\n    ONE_ARG(\"pi\", \"i\", &amp;precision);\n    if(!(pi = Pympf_new(precision))) {\n        return NULL;\n    }\n\n    mpf_set_si(pi-&gt;f, 1);\n\n    mpf_init(ix);\n    mpf_set_ui(ix, 1);\n\n    mpf_init2(r_i2, precision);\n\n    mpf_init2(r_i3, precision);\n    mpf_set_d(r_i3, 0.25);\n\n    mpf_init2(r_i4, precision);\n    mpf_set_d(r_i4, 0.5);\n    mpf_sqrt(r_i4, r_i4);\n\n    for (;;) {\n        mpf_set(r_i2, pi-&gt;f);\n        mpf_add(pi-&gt;f, pi-&gt;f, r_i4);\n        mpf_div_ui(pi-&gt;f, pi-&gt;f, 2);\n        mpf_mul(r_i4, r_i2, r_i4);\n        mpf_sub(r_i2, pi-&gt;f, r_i2);\n        mpf_mul(r_i2, r_i2, r_i2);\n        mpf_mul(r_i2, r_i2, ix);\n        mpf_sub(r_i3, r_i3, r_i2);\n        mpf_sqrt(r_i4, r_i4);\n        mpf_mul_ui(ix, ix, 2);\n        /* Check for convergence */\n        if (!(mpf_cmp_si(r_i2, 0) &amp;&amp; \n              mpf_get_prec(r_i2) &gt;= (unsigned)precision)) {\n            mpf_mul(pi-&gt;f, pi-&gt;f, r_i4);\n            mpf_div(pi-&gt;f, pi-&gt;f, r_i3);\n            break;\n        }\n    }\n\n    mpf_clear(ix);\n    mpf_clear(r_i2);\n    mpf_clear(r_i3);\n    mpf_clear(r_i4);\n\n    return (PyObject*)pi;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT:</strong> I had some problems with cut and paste and indentation, you can find the source <a href=\"http://code.google.com/p/gmpy/source/browse/branches/aleax-sandbox/src/gmpy.c\" rel=\"nofollow noreferrer\">here</a>.</p>\n",
        "votes": "21",
        "tags": "",
        "accepted": false
      },
      {
        "id": "44346598",
        "title": "",
        "text": "<p>Calculating \u03c0 from circle area :-)</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;input id=\"range\" type=\"range\" min=\"10\" max=\"960\" value=\"10\" step=\"50\" oninput=\"calcPi()\"&gt;\r\n&lt;br&gt;\r\n&lt;div id=\"cont\"&gt;&lt;/div&gt;\r\n\r\n&lt;script&gt;\r\nfunction generateCircle(width) {\r\n    var c = width/2;\r\n    var delta = 1.0;\r\n    var str = \"\";\r\n    var xCount = 0;\r\n    for (var x=0; x &lt;= width; x++) {\r\n        for (var y = 0; y &lt;= width; y++) {\r\n            var d = Math.sqrt((x-c)*(x-c) + (y-c)*(y-c));\r\n            if (d &gt; (width-1)/2) {\r\n                str += '.';\r\n            }\r\n            else {\r\n                xCount++;\r\n                str += 'o';\r\n            }\r\n            str += \"&amp;nbsp;\" \r\n        }\r\n        str += \"\\n\";\r\n    }\r\n    var pi = (xCount * 4) / (width * width);\r\n    return [str, pi];\r\n}\r\n\r\nfunction calcPi() {\r\n    var e = document.getElementById(\"cont\");\r\n    var width = document.getElementById(\"range\").value;\r\n    e.innerHTML = \"&lt;h4&gt;Generating circle...&lt;/h4&gt;\";\r\n    setTimeout(function() {\r\n        var circ = generateCircle(width);\r\n        e.innerHTML  = \"&lt;pre&gt;\" + \"\u03c0 = \" + circ[1].toFixed(2) + \"\\n\" + circ[0] +\"&lt;/pre&gt;\";\r\n    }, 200);\r\n}\r\ncalcPi();\r\n&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1439914",
        "title": "",
        "text": "<p>If you are willing to use an approximation, <code>355 / 113</code> is good for 6 decimal digits, and has the added advantage of being usable with integer expressions. That's not as important these days, as \"floating point math co-processor\" ceased to have any meaning, but it was quite important once.</p>\n",
        "votes": "18",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1947163",
        "title": "",
        "text": "<p>In the interests of completeness, a C++ template version, which, for an optimised build, will compute an approximation of PI at compile time, and will inline to a single value.</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>#include &lt;iostream&gt;\n\ntemplate&lt;int I&gt;\nstruct sign\n{\n    enum {value = (I % 2) == 0 ? 1 : -1};\n};\n\ntemplate&lt;int I, int J&gt;\nstruct pi_calc\n{\n    inline static double value ()\n    {\n        return (pi_calc&lt;I-1, J&gt;::value () + pi_calc&lt;I-1, J+1&gt;::value ()) / 2.0;\n    }\n};\n\ntemplate&lt;int J&gt;\nstruct pi_calc&lt;0, J&gt;\n{\n    inline static double value ()\n    {\n        return (sign&lt;J&gt;::value * 4.0) / (2.0 * J + 1.0) + pi_calc&lt;0, J-1&gt;::value ();\n    }\n};\n\n\ntemplate&lt;&gt;\nstruct pi_calc&lt;0, 0&gt;\n{\n    inline static double value ()\n    {\n        return 4.0;\n    }\n};\n\ntemplate&lt;int I&gt;\nstruct pi\n{\n    inline static double value ()\n    {\n        return pi_calc&lt;I, I&gt;::value ();\n    }\n};\n\nint main ()\n{\n    std::cout.precision (12);\n\n    const double pi_value = pi&lt;10&gt;::value ();\n\n    std::cout &lt;&lt; \"pi ~ \" &lt;&lt; pi_value &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Note for I > 10, optimised builds can be slow, likewise for non-optimised runs. For 12 iterations I believe there are around 80k calls to value() (in the absence of memoisation).</p>\n",
        "votes": "55",
        "tags": "",
        "accepted": false
      },
      {
        "id": "436447",
        "title": "",
        "text": "<p>This version (in Delphi) is nothing special, but it is at least faster than <a href=\"http://blogs.codegear.com/nickhodges/2009/01/09/39174\" rel=\"nofollow noreferrer\">the version Nick Hodge posted on his blog</a> :).  On my machine, it takes about 16 seconds to do a billion iterations, giving a value of <strong>3.14159265</strong>25879 (the accurate part is in bold).</p>\n\n<pre class=\"lang-pascal prettyprint-override\"><code>program calcpi;\n\n{$APPTYPE CONSOLE}\n\nuses\n  SysUtils;\n\nvar\n  start, finish: TDateTime;\n\nfunction CalculatePi(iterations: integer): double;\nvar\n  numerator, denominator, i: integer;\n  sum: double;\nbegin\n  {\n  PI may be approximated with this formula:\n  4 * (1 - 1/3 + 1/5 - 1/7 + 1/9 - 1/11 .......)\n  //}\n  numerator := 1;\n  denominator := 1;\n  sum := 0;\n  for i := 1 to iterations do begin\n    sum := sum + (numerator/denominator);\n    denominator := denominator + 2;\n    numerator := -numerator;\n  end;\n  Result := 4 * sum;\nend;\n\nbegin\n  try\n    start := Now;\n    WriteLn(FloatToStr(CalculatePi(StrToInt(ParamStr(1)))));\n    finish := Now;\n    WriteLn('Seconds:' + FormatDateTime('hh:mm:ss.zz',finish-start));\n  except\n    on E:Exception do\n      Writeln(E.Classname, ': ', E.Message);\n  end;\nend.\n</code></pre>\n",
        "votes": "14",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1230060",
        "title": "",
        "text": "<p>Brent's method posted above by Chris is very good; Brent generally is a giant in the field of arbitrary-precision arithmetic.</p>\n\n<p>If all you want is the Nth digit, the famous \n<a href=\"http://en.literateprograms.org/Pi_with_the_BBP_formula_(Python)\" rel=\"noreferrer\">BBP formula</a>\nis useful in hex</p>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "50907044",
        "title": "",
        "text": "<h2>Better Approach</h2>\n\n<p>To get the output of standard constants like <strong>pi</strong> or the standard concepts, we should first go with the builtins methods available in the language that you are using. It will return a value in the fastest and best way. I am using python to run the fastest way to get the value of pi.</p>\n\n<ul>\n<li><strong>pi variable of the math library</strong>. The math library stores the variable pi as a constant.</li>\n</ul>\n\n<p>math_pi.py</p>\n\n<pre><code>import math\nprint math.pi\n</code></pre>\n\n<p>Run the script with time utility of linux <code>/usr/bin/time -v python math_pi.py</code></p>\n\n<p>Output:</p>\n\n<pre><code>Command being timed: \"python math_pi.py\"\nUser time (seconds): 0.01\nSystem time (seconds): 0.01\nPercent of CPU this job got: 91%\nElapsed (wall clock) time (h:mm:ss or m:ss): 0:00.03\n</code></pre>\n\n<ul>\n<li><strong>Use arc cos method of math</strong></li>\n</ul>\n\n<p>acos_pi.py</p>\n\n<pre><code>import math\nprint math.acos(-1)\n</code></pre>\n\n<p>Run the script with time utility of linux <code>/usr/bin/time -v python acos_pi.py</code></p>\n\n<p>Output:</p>\n\n<pre><code>Command being timed: \"python acos_pi.py\"\nUser time (seconds): 0.02\nSystem time (seconds): 0.01\nPercent of CPU this job got: 94%\nElapsed (wall clock) time (h:mm:ss or m:ss): 0:00.03\n</code></pre>\n\n<ul>\n<li><strong>use <a href=\"https://en.wikipedia.org/wiki/Bailey%E2%80%93Borwein%E2%80%93Plouffe_formula\" rel=\"nofollow noreferrer\">BBP formula</a></strong></li>\n</ul>\n\n<p>bbp_pi.py</p>\n\n<pre><code>from decimal import Decimal, getcontext\ngetcontext().prec=100\nprint sum(1/Decimal(16)**k * \n          (Decimal(4)/(8*k+1) - \n           Decimal(2)/(8*k+4) - \n           Decimal(1)/(8*k+5) -\n           Decimal(1)/(8*k+6)) for k in range(100))\n</code></pre>\n\n<p>Run the script with time utility of linux <code>/usr/bin/time -v python bbp_pi.py</code></p>\n\n<p>Output:</p>\n\n<pre><code>Command being timed: \"python c.py\"\nUser time (seconds): 0.05\nSystem time (seconds): 0.01\nPercent of CPU this job got: 98%\nElapsed (wall clock) time (h:mm:ss or m:ss): 0:00.06\n</code></pre>\n\n<p><strong>So the best way is to use builtin methods provided by the language because they are the fastest and best to get the output. In python use math.pi</strong></p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "25197",
        "title": "",
        "text": "<p>There's actually a whole book dedicated (amongst other things) to <em>fast</em> methods for the computation of \\pi: 'Pi and the AGM', by Jonathan and Peter Borwein (<a href=\"https://rads.stackoverflow.com/amzn/click/com/047131515X\" rel=\"noreferrer\" rel=\"nofollow noreferrer\" title=\"available on Amazon\">available on Amazon</a>).</p>\n\n<p>I studied the AGM and related algorithms quite a bit: it's quite interesting (though sometimes non-trivial).</p>\n\n<p>Note that to implement most modern algorithms to compute \\pi, you will need a multiprecision arithmetic library (<a href=\"http://gmplib.org/\" rel=\"noreferrer\">GMP</a> is quite a good choice, though it's been a while since I last used it).</p>\n\n<p>The time-complexity of the best algorithms is in O(M(n)log(n)), where M(n) is the time-complexity for the multiplication of two n-bit integers (M(n)=O(n log(n) log(log(n))) using FFT-based algorithms, which are usually needed when computing digits of \\pi, and such an algorithm is implemented in GMP).</p>\n\n<p>Note that even though the mathematics behind the algorithms might not be trivial, the algorithms themselves are usually a few lines of pseudo-code, and their implementation is usually very straightforward (if you chose not to write your own multiprecision arithmetic :-) ). </p>\n",
        "votes": "43",
        "tags": "",
        "accepted": false
      },
      {
        "id": "71",
        "title": "",
        "text": "<p>Here's a general description of a technique for calculating pi that I learnt in high school.</p>\n\n<p>I only share this because I think it is simple enough that anyone can remember it, indefinitely, plus it teaches you the concept of \"Monte-Carlo\" methods -- which are statistical methods of arriving at answers that don't immediately appear to be deducible through random processes.</p>\n\n<p>Draw a square, and inscribe a quadrant (one quarter of a semi-circle) inside that square (a quadrant with radius equal to the side of the square, so it fills as much of the square as possible)</p>\n\n<p>Now throw a dart at the square, and record where it lands -- that is, choose a random point anywhere inside the square. Of course, it landed inside the square, but is it inside the semi-circle? Record this fact.</p>\n\n<p>Repeat this process many times -- and you will find there is a ratio of the number of points inside the semi-circle versus the total number thrown, call this ratio x.</p>\n\n<p>Since the area of the square is r times r, you can deduce that the area of the semi circle is x times r times r (that is, x times r squared). Hence x times 4 will give you pi. </p>\n\n<p>This is not a quick method to use. But it's a nice example of a Monte Carlo method. And if you look around, you may find that many problems otherwise outside your computational skills can be solved by such methods.</p>\n",
        "votes": "81",
        "tags": "",
        "accepted": false
      },
      {
        "id": "4089",
        "title": "",
        "text": "<p>If by fastest you mean fastest to type in the code, here's the <a href=\"http://www.golfscript.com/golfscript/examples.html\" rel=\"noreferrer\">golfscript</a> solution:</p>\n\n<pre><code>;''6666,-2%{2+.2/@*\\/10.3??2*+}*`1000&lt;~\\;\n</code></pre>\n",
        "votes": "20",
        "tags": "",
        "accepted": false
      },
      {
        "id": "85798",
        "title": "",
        "text": "<h2>Calculate PI at compile-time with D.</h2>\n\n<p>( Copied from <a href=\"http://www.dsource.org/projects/ddl/browser/trunk/meta/demo/calcpi.d\" rel=\"noreferrer\">DSource.org</a> )</p>\n\n<pre class=\"lang-d prettyprint-override\"><code>/** Calculate pi at compile time\n *\n * Compile with dmd -c pi.d\n */\nmodule calcpi;\n\nimport meta.math;\nimport meta.conv;\n\n/** real evaluateSeries!(real x, real metafunction!(real y, int n) term)\n *\n * Evaluate a power series at compile time.\n *\n * Given a metafunction of the form\n *  real term!(real y, int n),\n * which gives the nth term of a convergent series at the point y\n * (where the first term is n==1), and a real number x,\n * this metafunction calculates the infinite sum at the point x\n * by adding terms until the sum doesn't change any more.\n */\ntemplate evaluateSeries(real x, alias term, int n=1, real sumsofar=0.0)\n{\n  static if (n&gt;1 &amp;&amp; sumsofar == sumsofar + term!(x, n+1)) {\n     const real evaluateSeries = sumsofar;\n  } else {\n     const real evaluateSeries = evaluateSeries!(x, term, n+1, sumsofar + term!(x, n));\n  }\n}\n\n/*** Calculate atan(x) at compile time.\n *\n * Uses the Maclaurin formula\n *  atan(z) = z - z^3/3 + Z^5/5 - Z^7/7 + ...\n */\ntemplate atan(real z)\n{\n    const real atan = evaluateSeries!(z, atanTerm);\n}\n\ntemplate atanTerm(real x, int n)\n{\n    const real atanTerm =  (n &amp; 1 ? 1 : -1) * pow!(x, 2*n-1)/(2*n-1);\n}\n\n/// Machin's formula for pi\n/// pi/4 = 4 atan(1/5) - atan(1/239).\npragma(msg, \"PI = \" ~ fcvt!(4.0 * (4*atan!(1/5.0) - atan!(1/239.0))) );\n</code></pre>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "571276",
        "title": "",
        "text": "<p>Back in the old days, with small word sizes and slow or non-existent floating-point operations, we used to do stuff like this:</p>\n\n<pre><code>/* Return approximation of n * PI; n is integer */\n#define pi_times(n) (((n) * 22) / 7)\n</code></pre>\n\n<p>For applications that don't require a lot of precision (video games, for example), this is very fast and is accurate enough.</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "4905303",
        "title": "",
        "text": "<p>Use the Machin-like formula </p>\n\n<pre><code>176 * arctan (1/57) + 28 * arctan (1/239) - 48 * arctan (1/682) + 96 * arctan(1/12943) \n\n[; \\left( 176 \\arctan \\frac{1}{57} + 28 \\arctan \\frac{1}{239} - 48 \\arctan \\frac{1}{682} + 96 \\arctan \\frac{1}{12943}\\right) ;], for you TeX the World people.\n</code></pre>\n\n<p>Implemented in Scheme, for instance: </p>\n\n<p><code>(+ (- (+ (* 176 (atan (/ 1 57))) (* 28 (atan (/ 1 239)))) (* 48 (atan (/ 1 682)))) (* 96 (atan (/ 1 12943))))</code></p>\n",
        "votes": "18",
        "tags": "",
        "accepted": false
      },
      {
        "id": "531",
        "title": "",
        "text": "<p>The <a href=\"http://en.wikipedia.org/wiki/Monte_Carlo_method\" rel=\"noreferrer\">Monte Carlo method</a>, as mentioned, applies some great concepts but it is, clearly, not the fastest, not by a long shot, not by any reasonable measure. Also, it all depends on what kind of accuracy you are looking for. The fastest \u03c0 I know of is the one with the digits hard coded. Looking at <a href=\"http://functions.wolfram.com/Constants/Pi/\" rel=\"noreferrer\" title=\"pi\">Pi</a> and <a href=\"http://functions.wolfram.com/PDF/Pi.pdf\" rel=\"noreferrer\" title=\"pi formulas\">Pi[PDF]</a>, there are a lot of formulae.</p>\n\n<p>Here is a method that converges quickly \u2014 about 14 digits per iteration. <a href=\"http://numbers.computation.free.fr/Constants/PiProgram/pifast.html\" rel=\"noreferrer\" title=\"PiFast\">PiFast</a>, the current fastest application, uses this formula with the FFT. I'll just write the formula, since the code is straightforward. This formula was almost found by <a href=\"http://numbers.computation.free.fr/Constants/Pi/piramanujan.html\" rel=\"noreferrer\">Ramanujan and discovered by Chudnovsky</a>. It is actually how he calculated several billion digits of the number \u2014 so it isn't a method to disregard. The formula will overflow quickly and, since we are dividing factorials, it would be advantageous then to delay such calculations to remove terms.</p>\n\n<p><img src=\"https://i.stack.imgur.com/aQMkk.gif\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/2y2l9.gif\" alt=\"enter image description here\"></p>\n\n<p>where,</p>\n\n<p><img src=\"https://i.stack.imgur.com/QqVnB.gif\" alt=\"enter image description here\"></p>\n\n<p>Below is the <a href=\"http://mathworld.wolfram.com/Brent-SalaminFormula.html\" rel=\"noreferrer\" title=\"Brent Salamin Formula\">Brent\u2013Salamin algorithm</a>. Wikipedia mentions that when <strong>a</strong> and <strong>b</strong> are \"close enough\" then <strong>(a + b)\u00b2 / 4t</strong> will be an approximation of \u03c0. I'm not sure what \"close enough\" means, but from my tests, one iteration got 2 digits, two got 7, and three had 15, of course this is with doubles, so it might have an error based on its representation and the <em>true</em> calculation could be more accurate.</p>\n\n<pre><code>let pi_2 iters =\n    let rec loop_ a b t p i =\n        if i = 0 then a,b,t,p\n        else\n            let a_n = (a +. b) /. 2.0 \n            and b_n = sqrt (a*.b)\n            and p_n = 2.0 *. p in\n            let t_n = t -. (p *. (a -. a_n) *. (a -. a_n)) in\n            loop_ a_n b_n t_n p_n (i - 1)\n    in \n    let a,b,t,p = loop_ (1.0) (1.0 /. (sqrt 2.0)) (1.0/.4.0) (1.0) iters in\n    (a +. b) *. (a +. b) /. (4.0 *. t)\n</code></pre>\n\n<p>Lastly, how about some pi golf (800 digits)? 160 characters!</p>\n\n<pre><code>int a=10000,b,c=2800,d,e,f[2801],g;main(){for(;b-c;)f[b++]=a/5;for(;d=0,g=c*2;c-=14,printf(\"%.4d\",e+d/a),e=d%a)for(b=c;d+=f[b]*a,f[b]=d%--g,d/=g--,--b;d*=b);}\n</code></pre>\n",
        "votes": "205",
        "tags": "",
        "accepted": true
      },
      {
        "id": "7924123",
        "title": "",
        "text": "<p>The following answers <strong>precisely how to do this in the fastest possible way -- with the least computing effort</strong>. Even if you don't like the answer, you have to admit that it is indeed the fastest way to get the value of PI.</p>\n\n<p>The <strong>FASTEST</strong> way to get the value of Pi is:</p>\n\n<p>1) chose your favourite programming language\n2) load its Math library\n3) and find that Pi is already defined there -- ready for use!</p>\n\n<p>In case you don't have a Math library at hand..</p>\n\n<p>The <strong>SECOND FASTEST</strong> way (more universal solution) is:</p>\n\n<p>look up Pi on the Internet, e.g. here:</p>\n\n<p><a href=\"http://www.eveandersson.com/pi/digits/1000000\" rel=\"nofollow noreferrer\">http://www.eveandersson.com/pi/digits/1000000</a> (1 million digits .. what's your floating point precision?  )</p>\n\n<p>or here:</p>\n\n<p><a href=\"http://3.141592653589793238462643383279502884197169399375105820974944592.com/\" rel=\"nofollow noreferrer\">http://3.141592653589793238462643383279502884197169399375105820974944592.com/</a></p>\n\n<p>or here:</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Pi\" rel=\"nofollow noreferrer\">http://en.wikipedia.org/wiki/Pi</a></p>\n\n<p>It's really fast to find the digits you need for whatever precision arithmetic you would like to use, and by defining a constant, you can make sure that you don't waste precious CPU time.</p>\n\n<p>Not only is this a partly humorous answer, but in reality, if anybody would go ahead and compute the value of Pi in a real application .. that would be a pretty big waste of CPU time, wouldn't it? At least I don't see a real application for trying to re-compute this.</p>\n\n<p>Dear Moderator: please note that the OP asked: \"Fastest Way to get the value of PI\"</p>\n",
        "votes": "42",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1949194",
        "title": "",
        "text": "<p>If you want to <em>compute</em> an approximation of the value of \u03c0 (for some reason), you should try a binary extraction algorithm. <a href=\"http://en.wikipedia.org/wiki/Bellard%27s_formula\" rel=\"noreferrer\">Bellard's</a> improvement of <a href=\"http://en.wikipedia.org/wiki/Bailey%E2%80%93Borwein%E2%80%93Plouffe_formula\" rel=\"noreferrer\">BBP</a> gives does PI in O(N^2). </p>\n\n<hr>\n\n<p>If you want to <em>obtain</em> an approximation of the value of \u03c0 to do calculations, then: </p>\n\n<pre><code>PI = 3.141592654\n</code></pre>\n\n<p>Granted, that's only an approximation, and not entirely accurate. It's off by a little more than 0.00000000004102. (four ten-trillionths, about <sup>4</sup>/<sub>10,000,000,000</sub>).</p>\n\n<hr>\n\n<p>If you want to do <em>math</em> with \u03c0, then get yourself a pencil and paper or a computer algebra package, and use \u03c0's exact value, \u03c0. </p>\n\n<p>If you really want a formula, this one is fun: </p>\n\n<h2>\u03c0 = -<em>i</em> ln(-1)</h2>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2350024",
        "title": "",
        "text": "<p>With doubles:</p>\n\n<pre><code>4.0 * (4.0 * Math.Atan(0.2) - Math.Atan(1.0 / 239.0))\n</code></pre>\n\n<p>This will be accurate up to 14 decimal places, enough to fill a double (the inaccuracy is probably because the rest of the decimals in the arc tangents are truncated).</p>\n\n<p>Also Seth, it's 3.14159265358979323846<b>3</b>, not 64.</p>\n",
        "votes": "16",
        "tags": "",
        "accepted": false
      },
      {
        "id": "34239",
        "title": "",
        "text": "<p>The <a href=\"http://en.wikipedia.org/wiki/Bailey-Borwein-Plouffe_formula\" rel=\"noreferrer\">BBP formula</a> allows you to compute the nth digit - in base 2 (or 16) - without having to even bother with the previous n-1 digits first :)</p>\n",
        "votes": "27",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "24",
    "url": "https://stackoverflow.com/questions/24",
    "title": "Throw an error in a MySQL trigger",
    "text:": "<p>If I have a <code>trigger</code> <code>before the update</code> on a table, how can I throw an error that prevents the update on that table?</p>\n",
    "codes": [
      [
        "create table mysql_error_generator(error_field varchar(64) unique) engine INNODB;\nDELIMITER $$\nCREATE PROCEDURE throwCustomError(IN errorText VARCHAR(44))\nBEGIN\n    DECLARE errorWithDate varchar(64);\n    select concat(\"[\",DATE_FORMAT(now(),\"%Y%m%d %T\"),\"] \", errorText) into errorWithDate;\n    INSERT IGNORE INTO mysql_error_generator(error_field) VALUES (errorWithDate);\n    INSERT INTO mysql_error_generator(error_field) VALUES (errorWithDate);\nEND;\n$$\nDELIMITER ;\n\n\ncall throwCustomError(\"Custom error message with log support.\");\n"
      ],
      [
        "CREATE TRIGGER sample_trigger_msg \n    BEFORE INSERT\nFOR EACH ROW\n    BEGIN\nIF(NEW.important_value) < (1*2) THEN\n    DECLARE dummy INT;\n    SELECT \n           Enter your Message Here!!!\n INTO dummy \n        FROM mytable\n      WHERE mytable.id=new.id\nEND IF;\nEND;\n"
      ],
      [
        "DELIMITER $$\n-- before inserting new id\nDROP TRIGGER IF EXISTS before_insert_id$$\nCREATE TRIGGER before_insert_id\n    BEFORE INSERT ON test FOR EACH ROW\n    BEGIN\n        -- condition to check\n        IF NEW.id < 0 THEN\n            -- hack to solve absence of SIGNAL/prepared statements in triggers\n            UPDATE `Error: invalid_id_test` SET x=1;\n        END IF;\n    END$$\n\nDELIMITER ;\n",
        "DELIMITER $$\n-- my_signal procedure\nCREATE PROCEDURE `my_signal`(in_errortext VARCHAR(255))\nBEGIN\n    SET @sql=CONCAT('UPDATE `', in_errortext, '` SET x=1');\n    PREPARE my_signal_stmt FROM @sql;\n    EXECUTE my_signal_stmt;\n    DEALLOCATE PREPARE my_signal_stmt;\nEND$$\n\nCREATE PROCEDURE insert_test(p_id INT)\nBEGIN\n    IF NEW.id < 0 THEN\n         CALL my_signal('Error: invalid_id_test; Id must be a positive integer');\n    ELSE\n        INSERT INTO test (id) VALUES (p_id);\n    END IF;\nEND$$\nDELIMITER ;\n"
      ],
      [],
      [
        "BEGIN\n    -- Force one of the following to be assigned otherwise set required field to null which will throw an error\n    IF (NEW.`nullable_field_1` IS NULL AND NEW.`nullable_field_2` IS NULL) THEN\n        SET NEW.`required_id_field`=NULL;\n    END IF;\nEND\n",
        "BEGIN\n    -- Force one of the following to be assigned otherwise use signal sqlstate to throw a unique error\n    IF (NEW.`nullable_field_1` IS NULL AND NEW.`nullable_field_2` IS NULL) THEN\n        SIGNAL SQLSTATE '45000' set message_text='A unique identifier for nullable_field_1 OR nullable_field_2 is required!';\n    END IF;\nEND\n"
      ],
      [
        "signal sqlstate '45000' set message_text = 'My Error Message';\n",
        "delimiter //\nuse test//\ncreate table trigger_test\n(\n    id int not null\n)//\ndrop trigger if exists trg_trigger_test_ins //\ncreate trigger trg_trigger_test_ins before insert on trigger_test\nfor each row\nbegin\n    declare msg varchar(128);\n    if new.id < 0 then\n        set msg = concat('MyTriggerError: Trying to insert a negative value in trigger_test: ', cast(new.id as char));\n        signal sqlstate '45000' set message_text = msg;\n    end if;\nend\n//\n\ndelimiter ;\n-- run the following as seperate statements:\ninsert into trigger_test values (1), (-1), (2); -- everything fails as one row is bad\nselect * from trigger_test;\ninsert into trigger_test values (1); -- succeeds as expected\ninsert into trigger_test values (-1); -- fails as expected\nselect * from trigger_test;\n"
      ]
    ],
    "votes:": "174",
    "tags": "<mysql><database><triggers>",
    "AcceptedAnswerId": "49",
    "answers": [
      {
        "id": "13293014",
        "title": "",
        "text": "<p>The following procedure is (on mysql5) a way to throw custom errors , and log them at the same time:</p>\n\n<pre><code>create table mysql_error_generator(error_field varchar(64) unique) engine INNODB;\nDELIMITER $$\nCREATE PROCEDURE throwCustomError(IN errorText VARCHAR(44))\nBEGIN\n    DECLARE errorWithDate varchar(64);\n    select concat(\"[\",DATE_FORMAT(now(),\"%Y%m%d %T\"),\"] \", errorText) into errorWithDate;\n    INSERT IGNORE INTO mysql_error_generator(error_field) VALUES (errorWithDate);\n    INSERT INTO mysql_error_generator(error_field) VALUES (errorWithDate);\nEND;\n$$\nDELIMITER ;\n\n\ncall throwCustomError(\"Custom error message with log support.\");\n</code></pre>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "38924077",
        "title": "",
        "text": "<pre><code>CREATE TRIGGER sample_trigger_msg \n    BEFORE INSERT\nFOR EACH ROW\n    BEGIN\nIF(NEW.important_value) &lt; (1*2) THEN\n    DECLARE dummy INT;\n    SELECT \n           Enter your Message Here!!!\n INTO dummy \n        FROM mytable\n      WHERE mytable.id=new.id\nEND IF;\nEND;\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "9046539",
        "title": "",
        "text": "<p>Unfortunately, the answer provided by @RuiDC does not work in MySQL versions prior to 5.5 because there is no implementation of <em>SIGNAL</em> for stored procedures.</p>\n\n<p>The solution I've <a href=\"http://www.devshed.com/c/a/MySQL/Using-the-SIGNAL-Statement-for-Error-Handling/1/\" rel=\"noreferrer\">found</a> is to simulate a signal throwing a <code>table_name doesn't exist</code> error, pushing a customized error message into the <code>table_name</code>.</p>\n\n<p>The hack could be implemented using triggers or using a stored procedure. I describe both options below following the example used by @RuiDC.</p>\n\n<h2>Using triggers</h2>\n\n\n\n<pre><code>DELIMITER $$\n-- before inserting new id\nDROP TRIGGER IF EXISTS before_insert_id$$\nCREATE TRIGGER before_insert_id\n    BEFORE INSERT ON test FOR EACH ROW\n    BEGIN\n        -- condition to check\n        IF NEW.id &lt; 0 THEN\n            -- hack to solve absence of SIGNAL/prepared statements in triggers\n            UPDATE `Error: invalid_id_test` SET x=1;\n        END IF;\n    END$$\n\nDELIMITER ;\n</code></pre>\n\n<h2>Using a stored procedure</h2>\n\n<p>Stored procedures allows you to use dynamic sql, which makes possible the encapsulation of the error generation functionality in one procedure. The counterpoint is that we should control the applications insert/update methods, so they use only our stored procedure (not granting direct privileges to INSERT/UPDATE).</p>\n\n\n\n<pre><code>DELIMITER $$\n-- my_signal procedure\nCREATE PROCEDURE `my_signal`(in_errortext VARCHAR(255))\nBEGIN\n    SET @sql=CONCAT('UPDATE `', in_errortext, '` SET x=1');\n    PREPARE my_signal_stmt FROM @sql;\n    EXECUTE my_signal_stmt;\n    DEALLOCATE PREPARE my_signal_stmt;\nEND$$\n\nCREATE PROCEDURE insert_test(p_id INT)\nBEGIN\n    IF NEW.id &lt; 0 THEN\n         CALL my_signal('Error: invalid_id_test; Id must be a positive integer');\n    ELSE\n        INSERT INTO test (id) VALUES (p_id);\n    END IF;\nEND$$\nDELIMITER ;\n</code></pre>\n",
        "votes": "34",
        "tags": "",
        "accepted": false
      },
      {
        "id": "49",
        "title": "",
        "text": "<p><a href=\"https://web.archive.org/web/20180330233216/http://www.brokenbuild.com/blog/2006/08/15/mysql-triggers-how-do-you-abort-an-insert-update-or-delete-with-a-trigger/\" rel=\"noreferrer\">Here is one hack</a> that may work. It isn't clean, but it looks like it might work:</p>\n\n<p>Essentially, you just try to update a column that doesn't exist.</p>\n",
        "votes": "63",
        "tags": "",
        "accepted": true
      },
      {
        "id": "36523822",
        "title": "",
        "text": "<p>Another (hack) method (if you are not on 5.5+ for some reason) that you can use:</p>\n\n<p>If you have a required field, then within a trigger set the required field to an invalid value such as NULL. This will work for both INSERT and UPDATE. Do note that if NULL is a valid value for the required field (for some crazy reason) then this approach will not work.</p>\n\n<pre><code>BEGIN\n    -- Force one of the following to be assigned otherwise set required field to null which will throw an error\n    IF (NEW.`nullable_field_1` IS NULL AND NEW.`nullable_field_2` IS NULL) THEN\n        SET NEW.`required_id_field`=NULL;\n    END IF;\nEND\n</code></pre>\n\n<p>If you are on 5.5+ then you can use the signal state as described in other answers:</p>\n\n<pre><code>BEGIN\n    -- Force one of the following to be assigned otherwise use signal sqlstate to throw a unique error\n    IF (NEW.`nullable_field_1` IS NULL AND NEW.`nullable_field_2` IS NULL) THEN\n        SIGNAL SQLSTATE '45000' set message_text='A unique identifier for nullable_field_1 OR nullable_field_2 is required!';\n    END IF;\nEND\n</code></pre>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7189396",
        "title": "",
        "text": "<p>As of MySQL 5.5, you can use the <a href=\"https://dev.mysql.com/doc/refman/5.7/en/signal.html\" rel=\"noreferrer\"><code>SIGNAL</code> syntax to throw an exception</a>:</p>\n\n<pre><code>signal sqlstate '45000' set message_text = 'My Error Message';\n</code></pre>\n\n<p>State 45000 is a generic state representing \"unhandled user-defined exception\".</p>\n\n<hr>\n\n<p>Here is a more complete example of the approach:</p>\n\n<pre><code>delimiter //\nuse test//\ncreate table trigger_test\n(\n    id int not null\n)//\ndrop trigger if exists trg_trigger_test_ins //\ncreate trigger trg_trigger_test_ins before insert on trigger_test\nfor each row\nbegin\n    declare msg varchar(128);\n    if new.id &lt; 0 then\n        set msg = concat('MyTriggerError: Trying to insert a negative value in trigger_test: ', cast(new.id as char));\n        signal sqlstate '45000' set message_text = msg;\n    end if;\nend\n//\n\ndelimiter ;\n-- run the following as seperate statements:\ninsert into trigger_test values (1), (-1), (2); -- everything fails as one row is bad\nselect * from trigger_test;\ninsert into trigger_test values (1); -- succeeds as expected\ninsert into trigger_test values (-1); -- fails as expected\nselect * from trigger_test;\n</code></pre>\n",
        "votes": "143",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "25",
    "url": "https://stackoverflow.com/questions/25",
    "title": "How to use the C socket API in C++ on z/OS",
    "text:": "<p>I'm having issues getting the C sockets API to work properly in <code>C++</code> on <code>z/OS</code>.</p>\n\n<p>Although I am including <code>sys/socket.h</code>, I still get <strong>compile time errors</strong> telling me that <strong><code>AF_INET</code> is not defined</strong>.</p>\n\n<p>Am I missing something obvious, or is this related to the fact that being on <code>z/OS</code> makes my problems much more complicated?</p>\n\n<hr>\n\n<p><strong>Update</strong> : Upon further investigation, I discovered that there is an <code>#ifdef</code> that I'm hitting. Apparently <code>z/OS</code> isn't happy unless I define which \"type\" of sockets I'm using with:</p>\n\n<pre><code>#define _OE_SOCKETS\n</code></pre>\n\n<p>Now, I personally have no idea what this <code>_OE_SOCKETS</code> is actually for, so if any <code>z/OS</code> sockets programmers are out there (all 3 of you), perhaps you could give me a rundown of how this all works?</p>\n\n<hr>\n\n<p><strong>Test App</strong></p>\n\n<pre><code>#include &lt;sys/socket.h&gt;\n\nint main()\n{\n    return AF_INET;\n}\n</code></pre>\n\n<p><strong>Compile/Link Output:</strong></p>\n\n<pre><code>cxx -Wc,xplink -Wl,xplink -o inet_test inet.C\n\n\"./inet.C\", line 5.16: CCN5274 (S) The name lookup for \"AF_INET\" did not find a declaration.\nCCN0797(I) Compilation failed for file ./inet.C. Object file not created.\n</code></pre>\n\n<hr>\n\n<p>A check of sys/sockets.h does include the definition I need, and as far as I can tell, it is not being blocked by any <code>#ifdef</code> statements.</p>\n\n<p>I have however noticed it contains the following:</p>\n\n<pre><code>#ifdef __cplusplus\n  extern \"C\" {\n#endif\n</code></pre>\n\n<p>which encapsulates basically the whole file? Not sure if it matters.</p>\n",
    "codes": [
      [
        " -D_OE_SOCKETS\n",
        " bash-2.03$ c89 -D_OE_SOCKETS [filename].c\n"
      ],
      [
        "#define _XOPEN_SOURCE_EXTENDED 1\n#include <sys/socket.h>\n\nint connect(int socket, const struct sockaddr *address, socklen_t address_len);\n",
        "#define _OE_SOCKETS\n#include <sys/types.h>\n#include <sys/socket.h>\n\nint connect(int socket, struct sockaddr *address, int address_len);\n"
      ],
      [],
      [
        "#include <sys/socket.h>\n\nint\nmain()\n{\n    return AF_INET;\n}\n"
      ],
      [],
      [
        "extern \"C\" {\n#include <sys/socket.h>\n// include other similarly non-compliant header files\n}\n"
      ],
      [],
      [
        "class my_sock {\n    private int sock;\n    private int socket_type;\n    private socklen_t sock_len;\n    private struct sockaddr_in server_addr;\n    public char *server_ip;\n    public unsigned short server_port;\n};\n",
        "int my_socket_connect()\n{\n    int return_code = 0;\n\n    if ( this->socket_type != CLIENT_SOCK ) {\n        cout << \"This is a not a client socket!\\n\";\n        return -1;\n    }\n\n    return_code = connect( this->local_sock, (struct sockaddr *) &this->server_addr, sizeof(this->server_addr));\n\n    if( return_code < 0 ) {\n        cout << \"Connect() failure! %s\\n\", strerror(errno);\n        return return_code;\n    }\n\n    return return_code;\n}\n"
      ],
      [
        "#define _OE_SOCKETS\n"
      ]
    ],
    "votes:": "155",
    "tags": "<c++><c><sockets><mainframe><zos>",
    "AcceptedAnswerId": "1443907",
    "answers": [
      {
        "id": "5626132",
        "title": "",
        "text": "<p>The answer is use the c89 flag that follows:</p>\n\n<pre><code> -D_OE_SOCKETS\n</code></pre>\n\n<p>Example follows;</p>\n\n<pre><code> bash-2.03$ c89 -D_OE_SOCKETS [filename].c\n</code></pre>\n\n<p>For more information look for C89 Options in the z/OS XLC/C++ User's Guide.</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1443907",
        "title": "",
        "text": "<p>Keep a copy of the IBM manuals handy:</p>\n\n<ul>\n<li><a href=\"http://publibz.boulder.ibm.com/cgi-bin/bookmgr_OS390/BOOKS/CBCPG1A0/CCONTENTS?DT=20090606065305\" rel=\"noreferrer\"> z/OS V1R11.0 XL C/C++ Programming Guide</a>  </li>\n<li><a href=\"http://publibz.boulder.ibm.com/cgi-bin/bookmgr_OS390/BOOKS/EDCLB1A0/CCONTENTS?DT=20090607203246\" rel=\"noreferrer\"> z/OS V1R11.0 XL C/C++ Run-Time Library Reference</a>  </li>\n</ul>\n\n<p>The IBM publications are generally very good, but you need to get used to their format, as well as knowing where to look for an answer.  You'll find quite often that a feature that you want to use is guarded by a \"feature test macro\"</p>\n\n<p>You should ask your friendly system programmer to install the <a href=\"http://www-03.ibm.com/servers/eserver/zseries/zos/le/manpgs.html\" rel=\"noreferrer\">XL C/C++ Run-Time Library Reference: Man Pages\n</a> on your system.  Then you can do things like \"man connect\" to pull up the man page for the socket connect() API.  When I do that, this is what I see:</p>\n\n<p>FORMAT</p>\n\n<p>X/Open</p>\n\n<pre><code>#define _XOPEN_SOURCE_EXTENDED 1\n#include &lt;sys/socket.h&gt;\n\nint connect(int socket, const struct sockaddr *address, socklen_t address_len);\n</code></pre>\n\n<p>Berkeley Sockets</p>\n\n<pre><code>#define _OE_SOCKETS\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n\nint connect(int socket, struct sockaddr *address, int address_len);\n</code></pre>\n",
        "votes": "87",
        "tags": "",
        "accepted": true
      },
      {
        "id": "48248",
        "title": "",
        "text": "<p>You may want to take a look to <a href=\"http://sourceforge.net/projects/cpp-sockets/\" rel=\"noreferrer\">cpp-sockets</a>, a C++ wrapper for the sockets system calls. It works with many operating systems (Win32, POSIX, Linux, *BSD). I don't think it will work with z/OS but you can take a look at the include files it uses and you'll have many examples of tested code that works well on other OSs.</p>\n",
        "votes": "19",
        "tags": "",
        "accepted": false
      },
      {
        "id": "30",
        "title": "",
        "text": "<p>I've had no trouble using the BSD sockets API in C++, in GNU/Linux. Here's the sample program I used:</p>\n\n<pre><code>#include &lt;sys/socket.h&gt;\n\nint\nmain()\n{\n    return AF_INET;\n}\n</code></pre>\n\n<p>So my take on this is that z/OS is probably the complicating factor here, however, because I've never used z/OS before, much less programmed in it, I can't say this definitively. :-P</p>\n",
        "votes": "39",
        "tags": "",
        "accepted": false
      },
      {
        "id": "867088",
        "title": "",
        "text": "<p>See the <em>Using z/OS UNIX System Services sockets</em> section in the z/OS XL C/C++ Programming Guide.  Make sure you're including the necessary header files and using the appropriate #defines.</p>\n\n<p>The link to the doc has changed over the years, but you should be able to get to it easily enough by finding the current location of the <a href=\"http://ibm.com/support/entry/portal/documentation\" rel=\"noreferrer\">Support &amp; Downloads section</a> on <a href=\"http://www.ibm.com/\" rel=\"noreferrer\">ibm.com</a> and searching the documentation by title.</p>\n",
        "votes": "32",
        "tags": "",
        "accepted": false
      },
      {
        "id": "73",
        "title": "",
        "text": "<p>@Jax: The <code>extern \"C\"</code> thing matters, very very much. If a header file doesn't have one, then (unless it's a C++-only header file), you would have to enclose your <code>#include</code> with it:</p>\n\n<pre><code>extern \"C\" {\n#include &lt;sys/socket.h&gt;\n// include other similarly non-compliant header files\n}\n</code></pre>\n\n<p>Basically, anytime where a C++ program wants to link to C-based facilities, the <code>extern \"C\"</code> is vital. In practical terms, it means that the names used in external references will not be mangled, like normal C++ names would. <a href=\"http://www.parashift.com/c++-faq-lite/mixing-c-and-cpp.html\" rel=\"noreferrer\">Reference.</a></p>\n",
        "votes": "19",
        "tags": "",
        "accepted": false
      },
      {
        "id": "193478",
        "title": "",
        "text": "<p>The _OE_SOCKETS appears to be simply to enable/disable the definition of socket-related symbols. It is not uncommon in some libraries to have a bunch of macros to do that, to assure that you're not compiling/linking parts not needed. The macro is not standard in other sockets implementations, it appears to be something specific to z/OS.</p>\n\n<p>Take a look at this page:<br>\n<a href=\"http://publib.boulder.ibm.com/infocenter/zvm/v5r3/index.jsp?topic=/com.ibm.zvm.v53.kiml0/sktnew.htm\" rel=\"noreferrer\">Compiling and Linking a z/VM C Sockets Program</a></p>\n",
        "votes": "27",
        "tags": "",
        "accepted": false
      },
      {
        "id": "35029",
        "title": "",
        "text": "<p>DISCLAIMER: I am not a C++ programmer, however I know C really well.  I\nadapated these calls from some C code I have.</p>\n\n<p>Also markdown put these strange &#95; as my underscores.</p>\n\n<p>You should just be able to write an abstraction class around the C sockets with something like this:</p>\n\n<pre><code>class my_sock {\n    private int sock;\n    private int socket_type;\n    private socklen_t sock_len;\n    private struct sockaddr_in server_addr;\n    public char *server_ip;\n    public unsigned short server_port;\n};\n</code></pre>\n\n<p>Then have methods for opening, closing, and sending packets down the socket.</p>\n\n<p>For example, the open call might look something like this:</p>\n\n<pre><code>int my_socket_connect()\n{\n    int return_code = 0;\n\n    if ( this-&gt;socket_type != CLIENT_SOCK ) {\n        cout &lt;&lt; \"This is a not a client socket!\\n\";\n        return -1;\n    }\n\n    return_code = connect( this-&gt;local_sock, (struct sockaddr *) &amp;this-&gt;server_addr, sizeof(this-&gt;server_addr));\n\n    if( return_code &lt; 0 ) {\n        cout &lt;&lt; \"Connect() failure! %s\\n\", strerror(errno);\n        return return_code;\n    }\n\n    return return_code;\n}\n</code></pre>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "110917",
        "title": "",
        "text": "<p>So try</p>\n\n<pre><code>#define _OE_SOCKETS\n</code></pre>\n\n<p>before you include sys/socket.h</p>\n",
        "votes": "25",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "34",
    "url": "https://stackoverflow.com/questions/34",
    "title": "Unloading a ByteArray using Actionscript 3",
    "text:": "<p>How do I forcefully unload a <code>ByteArray</code> from memory using ActionScript 3?</p>\n\n<p>I have tried the following:</p>\n\n<pre><code>// First non-working solution\nbyteArray.length = 0;\nbyteArray = new ByteArray();\n\n// Second non-working solution\nfor ( var i:int=0; i &lt; byteArray.length; i++ ) {\n    byteArray[i] = null;\n}\n</code></pre>\n",
    "codes": [
      [
        "flash.system.System.gc();\nflash.system.System.gc();\n"
      ],
      [],
      [],
      [],
      [],
      [
        "private var gcCount:int;\nprivate function startGCCycle():void{\n    gcCount = 0;\n    addEventListener(Event.ENTER_FRAME, doGC);\n}\nprivate function doGC(evt:Event):void{\n    flash.system.System.gc();\n    if(++gcCount > 1){\n        removeEventListener(Event.ENTER_FRAME, doGC);\n        setTimeout(lastGC, 40);\n    }\n}\nprivate function lastGC():void{\n    flash.system.System.gc();\n}\n"
      ],
      [],
      [
        "var byteObject:Object = new Object();\n\nbyteObject.byteArray = new ByteArray();\n\n...\n\n//Then when you are finished delete the variable from byteObject\ndelete byteObject.byteArray;\n"
      ]
    ],
    "votes:": "89",
    "tags": "<arrays><actionscript-3><apache-flex>",
    "AcceptedAnswerId": "",
    "answers": [
      {
        "id": "53",
        "title": "",
        "text": "<p>(I'm not positive about this, but...)</p>\n\n<p>AS3 uses a non-deterministic garbage collection. Which means that unreferenced memory will be freed up whenever the runtime feels like it (typically not unless there's a reason to run, since it's an expensive operation to execute). This is the same approach used by most modern garbage collected languages (like C# and Java as well).</p>\n\n<p>Assuming there are no other references to the memory pointed to by <code>byteArray</code> or the items within the array itself, the memory will be freed at some point after you exit the scope where <code>byteArray</code> is declared.</p>\n\n<p>You can force a garbage collection, though you really shouldn't. If you do, do it only for testing... if you do it in production, you'll hurt performance much more than help it.</p>\n\n<p>To force a GC, try (yes, twice):</p>\n\n<pre><code>flash.system.System.gc();\nflash.system.System.gc();\n</code></pre>\n\n<p><a href=\"http://www.craftymind.com/2008/04/09/kick-starting-the-garbage-collector-in-actionscript-3-with-air/\" rel=\"noreferrer\">You can read more here</a>.</p>\n",
        "votes": "24",
        "tags": "",
        "accepted": false
      },
      {
        "id": "175520",
        "title": "",
        "text": "<blockquote>\n  <p>So, if I load say 20MB from MySQL, in the Task Manager the RAM for the application goes up by about 25MB. Then when I close the connection and try to dispose the ByteArray, the RAM never frees up. However, if I use System.totalMemory, flash player shows that the memory is being released, which is not the case.</p>\n</blockquote>\n\n<p>The player is \"releasing\" the memory. If you minimize the window and restore it you should see that the memeory is now much closer to what System.totalMemory shows.</p>\n\n<p>You might also be interested in using FlexBuilder's profiling tools which can show you if you really have memory leaks.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "24925309",
        "title": "",
        "text": "<p>Use these resources: </p>\n\n<p><a href=\"http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b8cbfe-7ff7.html\">http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b8cbfe-7ff7.html</a></p>\n\n<p>and this</p>\n\n<p><a href=\"http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b8cbfe-7ff7.html\">http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b8cbfe-7ff7.html</a></p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "11340",
        "title": "",
        "text": "<p>I don't think you have anything to worry about. If <code>System.totalMemory</code> goes down you can relax. It may very well be the OS that doesn't reclaim the newly freed memory (in anticipation of the next time Flash Player will ask for more memory).</p>\n\n<p>Try doing something else that is very memory intensive and I'm sure that you'll notice that the memory allocated to Flash Player will decrease and be used for the other process instead.</p>\n\n<p>As I've understood it, memory management in modern OS's isn't intuitive from the perspective of looking at the amounts allocated to each process, or even the total amount allocated.</p>\n\n<p>When I've used my Mac for 5 minutes 95% of my 3 GB RAM is used, and it will stay that way, it never goes down. That's just the way the OS handles memory.</p>\n\n<p>As long as it's not needed elsewhere even processes that have quit still have memory assigned to them (this can make them launch quicker the next time, for example).</p>\n",
        "votes": "34",
        "tags": "",
        "accepted": false
      },
      {
        "id": "81",
        "title": "",
        "text": "<p>I believe you have answered your own question...</p>\n\n<p><code>System.totalMemory</code> gives you the total amount of memory being \"used\", not allocated. It is accurate that your application may only be using 20mb, but it has 5mb that is free for future allocations.</p>\n\n<p>I'm not sure if the Adobe docs would shed light on the way that it manages memory...</p>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "52",
        "title": "",
        "text": "<p>Have a look at this article</p>\n\n<p><a href=\"http://www.gskinner.com/blog/archives/2006/06/as3_resource_ma.html\" rel=\"noreferrer\">http://www.gskinner.com/blog/archives/2006/06/as3_resource_ma.html</a></p>\n\n<p>IANA actionscript programmer, however the feeling I'm getting is that, because the garbage collector might not run when you want it to.</p>\n\n<p>Hence\n<a href=\"http://www.craftymind.com/2008/04/09/kick-starting-the-garbage-collector-in-actionscript-3-with-air/\" rel=\"noreferrer\">http://www.craftymind.com/2008/04/09/kick-starting-the-garbage-collector-in-actionscript-3-with-air/</a></p>\n\n<p>So I'd recommend trying out their collection code and see if it helps</p>\n\n<pre><code>private var gcCount:int;\nprivate function startGCCycle():void{\n    gcCount = 0;\n    addEventListener(Event.ENTER_FRAME, doGC);\n}\nprivate function doGC(evt:Event):void{\n    flash.system.System.gc();\n    if(++gcCount &gt; 1){\n        removeEventListener(Event.ENTER_FRAME, doGC);\n        setTimeout(lastGC, 40);\n    }\n}\nprivate function lastGC():void{\n    flash.system.System.gc();\n}\n</code></pre>\n",
        "votes": "19",
        "tags": "",
        "accepted": false
      },
      {
        "id": "81683",
        "title": "",
        "text": "<blockquote>\n  <p>So, if I load say 20MB from MySQL, in the Task Manager the RAM for the application goes up by about 25MB. Then when I close the connection and try to dispose the ByteArray, the RAM never frees up. However, if I use System.totalMemory, flash player shows that the memory is being released, which is not the case.</p>\n  \n  <p>Is the flash player doing something like Java and reserving heap space and not releasing it until the app quits?</p>\n</blockquote>\n\n<p>Well yes and no, as you might have read from countless blogposts the GC in AVM2 is optimistic and will work it's own mysterious ways. So it does work a bit like Java and tries to reserve heap space, however if you let it long enough and start doing other operations that are consuming some significant memory it will free that previous space. You can see this using the profiler over night with some tests running on top of your app.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "60",
        "title": "",
        "text": "<p>Unfortunately when it comes to memory management in <em>Flash/actionscript</em> there isn't a whole lot you can do. ActionScript was designed to be easy to use (so they didn't want people to have to worry about memory management)</p>\n\n<p>The following is a workaround, instead of creating a <code>ByteArray</code> variable try this.</p>\n\n<pre><code>var byteObject:Object = new Object();\n\nbyteObject.byteArray = new ByteArray();\n\n...\n\n//Then when you are finished delete the variable from byteObject\ndelete byteObject.byteArray;\n</code></pre>\n\n<p>Where <code>byteArray</code> is a dynamic property of <code>byteObject</code>, you can free the memory that was allocated for it.</p>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "36",
    "url": "https://stackoverflow.com/questions/36",
    "title": "Check for changes to an SQL Server table?",
    "text:": "<p>How can I monitor an SQL Server database for changes to a table without using triggers or modifying the structure of the database in any way? My preferred programming environment is <a href=\"http://en.wikipedia.org/wiki/.NET_Framework\" rel=\"noreferrer\">.NET</a> and C#.</p>\n\n<p>I'd like to be able to support any <a href=\"http://en.wikipedia.org/wiki/Microsoft_SQL_Server#Genesis\" rel=\"noreferrer\">SQL Server 2000</a> SP4 or newer. My application is a bolt-on data visualization for another company's product. Our customer base is in the thousands, so I don't want to have to put in requirements that we modify the third-party vendor's table at every installation.</p>\n\n<p>By <em>\"changes to a table\"</em> I mean changes to table data, not changes to table structure.</p>\n\n<p>Ultimately, I would like the change to trigger an event in my application, instead of having to check for changes at an interval.</p>\n\n<hr>\n\n<p>The best course of action given my requirements (no triggers or schema modification, SQL Server 2000 and 2005) seems to be to use the <code>BINARY_CHECKSUM</code> function in <a href=\"http://en.wikipedia.org/wiki/Transact-SQL\" rel=\"noreferrer\">T-SQL</a>. The way I plan to implement is this:</p>\n\n<p>Every X seconds run the following query:</p>\n\n<pre><code>SELECT CHECKSUM_AGG(BINARY_CHECKSUM(*))\nFROM sample_table\nWITH (NOLOCK);\n</code></pre>\n\n<p>And compare that against the stored value. If the value has changed, go through the table row by row using the query:</p>\n\n<pre><code>SELECT row_id, BINARY_CHECKSUM(*)\nFROM sample_table\nWITH (NOLOCK);\n</code></pre>\n\n<p>And compare the returned checksums against stored values.</p>\n",
    "codes": [
      [],
      [
        "\nSELECT CHECKSUM_AGG(BINARY_CHECKSUM(*)) FROM \n(\n  SELECT 1 as numA, 1 as numB\n  UNION ALL\n  SELECT 1 as numA, 1 as numB\n)  q\n-- delivers 0!"
      ],
      [
        "SELECT CHECKSUM_AGG(BINARY_CHECKSUM(*)) FROM sample_table WITH (NOLOCK);\n"
      ],
      [],
      [],
      [],
      [],
      [
        "select * from INFORMATION_SCHEMA.COLUMNS where TABLE_NAME = 'ABC'\n"
      ]
    ],
    "votes:": "143",
    "tags": "<sql><sql-server><datatable><rdbms>",
    "AcceptedAnswerId": "352",
    "answers": [
      {
        "id": "51",
        "title": "",
        "text": "<p>Why don't you want to use triggers?  They are a good thing if you use them correctly.  If you use them as a way to enforce referential integrity that is when they go from good to bad.  But if you use them for monitoring, they are not really considered taboo.</p>\n",
        "votes": "25",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5486054",
        "title": "",
        "text": "<p><b>Unfortunately CHECKSUM does not always work properly to detect changes</b>.</p>\n\n<p>It is only a primitive checksum and no cyclic redundancy check (CRC) calculation.</p>\n\n<p>Therefore you can't use it to detect all changes, e. g. symmetrical changes result in the same CHECKSUM!</p>\n\n<p>E. g. the solution with <code>CHECKSUM_AGG(BINARY_CHECKSUM(*))</code> will always deliver 0 for all 3 tables with different content:</p>\n\n<p><pre><code>\nSELECT CHECKSUM_AGG(BINARY_CHECKSUM(*)) FROM \n(\n  SELECT 1 as numA, 1 as numB\n  UNION ALL\n  SELECT 1 as numA, 1 as numB\n)  q\n-- delivers 0!</p>\n\n<p>SELECT CHECKSUM_AGG(BINARY_CHECKSUM(*)) FROM \n(\n  SELECT 1 as numA, 2 as numB\n  UNION ALL\n  SELECT 1 as numA, 2 as numB\n)  q\n-- delivers 0!</p>\n\n<p>SELECT CHECKSUM_AGG(BINARY_CHECKSUM(*)) FROM \n(\n  SELECT 0 as numA, 0 as numB\n  UNION ALL\n  SELECT 0 as numA, 0 as numB\n)  q\n-- delivers 0!\n</pre></code></p>\n",
        "votes": "30",
        "tags": "",
        "accepted": false
      },
      {
        "id": "352",
        "title": "",
        "text": "<p>Take a look at the CHECKSUM command:</p>\n\n<pre><code>SELECT CHECKSUM_AGG(BINARY_CHECKSUM(*)) FROM sample_table WITH (NOLOCK);\n</code></pre>\n\n<p>That will return the same number each time it's run as long as the table contents haven't changed. See my post on this for more information:</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/aa258245(SQL.80).aspx\" rel=\"noreferrer\">CHECKSUM</a></p>\n\n<p>Here's how I used it to rebuild cache dependencies when tables changed:<br>\n<a href=\"http://weblogs.asp.net/jgalloway/archive/2005/05/07/406056.aspx\" rel=\"noreferrer\">ASP.NET 1.1 database cache dependency (without triggers)</a></p>\n",
        "votes": "99",
        "tags": "",
        "accepted": true
      },
      {
        "id": "24925434",
        "title": "",
        "text": "<p>Check the last commit date. Every database has a history of when each commit is made. I believe its a standard of ACID compliance.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3009",
        "title": "",
        "text": "<p>Unfortunately, I do not think that there is a clean way to do this in SQL2000. If you narrow your requirements to SQL Server 2005 (and later), then you are in business. You can use the <code>SQLDependency</code> class in <code>System.Data.SqlClient</code>. See <a href=\"http://msdn.microsoft.com/en-us/library/t9x04ed2.aspx\" rel=\"noreferrer\">Query Notifications in SQL Server (ADO.NET)</a>.</p>\n",
        "votes": "18",
        "tags": "",
        "accepted": false
      },
      {
        "id": "695",
        "title": "",
        "text": "<p>How often do you need to check for changes and how large (in terms of row size) are the tables in the database?  If you use the <code>CHECKSUM_AGG(BINARY_CHECKSUM(*))</code> method suggested by John, it will scan every row of the specified table.  The <code>NOLOCK</code> hint helps, but on a large database, you are still hitting every row.  You will also need to store the checksum for every row so that you tell one has changed.</p>\n\n<p>Have you considered going at this from a different angle?  If you do not want to modify the schema to add triggers, (which makes a sense, it's not your database), have you considered working with the application vendor that does make the database?  </p>\n\n<p>They could implement an API that provides a mechanism for notifying accessory apps that data has changed.  It could be as simple as writing to a notification table that lists what table and which row were modified.  That could be implemented through triggers or application code.  From your side, ti wouldn't matter, your only concern would be scanning the notification table on a periodic basis.  The performance hit on the database would be far less than scanning every row for changes.</p>\n\n<p>The hard part would be convincing the application vendor to implement this feature.  Since this can be handles entirely through SQL via triggers, you could do the bulk of the work for them by writing and testing the triggers and then bringing the code to the application vendor.  By having the vendor support the triggers, it prevent the situation where your adding a trigger inadvertently replaces a trigger supplied by the vendor.</p>\n",
        "votes": "20",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1778",
        "title": "",
        "text": "<p>Wild guess here: If you don't want to modify the third party's tables, Can you create a view and then put a trigger on that view?</p>\n",
        "votes": "14",
        "tags": "",
        "accepted": false
      },
      {
        "id": "82",
        "title": "",
        "text": "<p>Have a DTS job (or a job that is started by a windows service) that runs at a given interval. Each time it is run, it gets information about the given table by using the system <a href=\"http://msdn.microsoft.com/en-us/library/ms186778.aspx\" rel=\"noreferrer\">INFORMATION_SCHEMA</a> tables, and records this data in the data repository. Compare the data returned regarding the structure of the table with the data returned the previous time. If it is different, then you know that the structure has changed.</p>\n\n<p>Example query to return information regarding all of the columns in table ABC (ideally listing out just the columns from the INFORMATION_SCHEMA table that you want, instead of using *select ** like I do here):</p>\n\n<pre><code>select * from INFORMATION_SCHEMA.COLUMNS where TABLE_NAME = 'ABC'\n</code></pre>\n\n<p>You would monitor different columns and INFORMATION_SCHEMA views depending on how exactly you define \"changes to a table\".</p>\n",
        "votes": "18",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "42",
    "url": "https://stackoverflow.com/questions/42",
    "title": "Best way to allow plugins for a PHP application",
    "text:": "<p>I am starting a new web application in PHP and this time around I want to create something that people can extend by using a plugin interface. </p>\n\n<p>How does one go about writing 'hooks' into their code so that plugins can attach to specific events?</p>\n",
    "codes": [
      [
        "    <?php\n\nclass SignalsHandler {\n\n\n    /**\n     * hash of senders/signals to slots\n     *\n     * @var array\n     */\n    private static $connections = array();\n\n\n    /**\n     * current sender\n     *\n     * @var class|object\n     */\n    private static $sender;\n\n\n    /**\n     * connects an object/signal with a slot\n     *\n     * @param class|object $sender\n     * @param string $signal\n     * @param callable $slot\n     */\n    public static function connect($sender, $signal, $slot) {\n        if (is_object($sender)) {\n            self::$connections[spl_object_hash($sender)][$signal][] = $slot;\n        }\n        else {\n            self::$connections[md5($sender)][$signal][] = $slot;\n        }\n    }\n\n\n    /**\n     * sends a signal, so all connected slots are called\n     *\n     * @param class|object $sender\n     * @param string $signal\n     * @param array $params\n     */\n    public static function signal($sender, $signal, $params = array()) {\n        self::$sender = $sender;\n        if (is_object($sender)) {\n            if ( ! isset(self::$connections[spl_object_hash($sender)][$signal])) {\n                return;\n            }\n            foreach (self::$connections[spl_object_hash($sender)][$signal] as $slot) {\n                call_user_func_array($slot, (array)$params);\n            }\n\n        }\n        else {\n            if ( ! isset(self::$connections[md5($sender)][$signal])) {\n                return;\n            }\n            foreach (self::$connections[md5($sender)][$signal] as $slot) {\n                call_user_func_array($slot, (array)$params);\n            }\n        }\n\n        self::$sender = null;\n    }\n\n\n    /**\n     * returns a current signal sender\n     *\n     * @return class|object\n     */\n    public static function sender() {\n        return self::$sender;\n    }\n\n}   \n\nclass User {\n\n    public function login() {\n        /**\n         * try to login\n         */\n        if ( ! $logged ) {\n            SignalsHandler::signal(this, 'loginFailed', 'login failed - username not valid' );\n        }\n    }\n\n}\n\nclass App {\n    public static function onFailedLogin($message) {\n        print $message;\n    }\n}\n\n\n$user = new User();\nSignalsHandler::connect($user, 'loginFailed', array($Log, 'writeLog'));\nSignalsHandler::connect($user, 'loginFailed', array('App', 'onFailedLogin'));\n\n$user->login();\n\n?>\n"
      ],
      [
        "<?php\n\n/** Plugin system **/\n\n$listeners = array();\n\n/* Create an entry point for plugins */\nfunction hook() {\n    global $listeners;\n\n    $num_args = func_num_args();\n    $args = func_get_args();\n\n    if($num_args < 2)\n        trigger_error(\"Insufficient arguments\", E_USER_ERROR);\n\n    // Hook name should always be first argument\n    $hook_name = array_shift($args);\n\n    if(!isset($listeners[$hook_name]))\n        return; // No plugins have registered this hook\n\n    foreach($listeners[$hook_name] as $func) {\n        $args = $func($args); \n    }\n    return $args;\n}\n\n/* Attach a function to a hook */\nfunction add_listener($hook, $function_name) {\n    global $listeners;\n    $listeners[$hook][] = $function_name;\n}\n\n/////////////////////////\n\n/** Sample Plugin **/\nadd_listener('a_b', 'my_plugin_func1');\nadd_listener('str', 'my_plugin_func2');\n\nfunction my_plugin_func1($args) {\n    return array(4, 5);\n}\n\nfunction my_plugin_func2($args) {\n    return str_replace('sample', 'CRAZY', $args[0]);\n}\n\n/////////////////////////\n\n/** Sample Application **/\n\n$a = 1;\n$b = 2;\n\nlist($a, $b) = hook('a_b', $a, $b);\n\n$str  = \"This is my sample application\\n\";\n$str .= \"$a + $b = \".($a+$b).\"\\n\";\n$str .= \"$a * $b = \".($a*$b).\"\\n\";\n\n$str = hook('str', $str);\necho $str;\n?>\n",
        "This is my CRAZY application\n4 + 5 = 9\n4 * 5 = 20\n"
      ],
      [
        "<?php\n\n////////////////////\n// PART 1\n////////////////////\n\nclass Plugin {\n\n    private $_RefObject;\n    private $_Class = '';\n\n    public function __construct(&$RefObject) {\n        $this->_Class = get_class(&$RefObject);\n        $this->_RefObject = $RefObject;\n    }\n\n    public function __set($sProperty,$mixed) {\n        $sPlugin = $this->_Class . '_' . $sProperty . '_setEvent';\n        if (is_callable($sPlugin)) {\n            $mixed = call_user_func_array($sPlugin, $mixed);\n        }   \n        $this->_RefObject->$sProperty = $mixed;\n    }\n\n    public function __get($sProperty) {\n        $asItems = (array) $this->_RefObject;\n        $mixed = $asItems[$sProperty];\n        $sPlugin = $this->_Class . '_' . $sProperty . '_getEvent';\n        if (is_callable($sPlugin)) {\n            $mixed = call_user_func_array($sPlugin, $mixed);\n        }   \n        return $mixed;\n    }\n\n    public function __call($sMethod,$mixed) {\n        $sPlugin = $this->_Class . '_' .  $sMethod . '_beforeEvent';\n        if (is_callable($sPlugin)) {\n            $mixed = call_user_func_array($sPlugin, $mixed);\n        }\n        if ($mixed != 'BLOCK_EVENT') {\n            call_user_func_array(array(&$this->_RefObject, $sMethod), $mixed);\n            $sPlugin = $this->_Class . '_' . $sMethod . '_afterEvent';\n            if (is_callable($sPlugin)) {\n                call_user_func_array($sPlugin, $mixed);\n            }       \n        } \n    }\n\n} //end class Plugin\n\nclass Pluggable extends Plugin {\n} //end class Pluggable\n\n////////////////////\n// PART 2\n////////////////////\n\nclass Dog {\n\n    public $Name = '';\n\n    public function bark(&$sHow) {\n        echo \"$sHow<br />\\n\";\n    }\n\n    public function sayName() {\n        echo \"<br />\\nMy Name is: \" . $this->Name . \"<br />\\n\";\n    }\n\n\n} //end class Dog\n\n$Dog = new Dog();\n\n////////////////////\n// PART 3\n////////////////////\n\n$PDog = new Pluggable($Dog);\n\nfunction Dog_bark_beforeEvent(&$mixed) {\n    $mixed = 'Woof'; // Override saying 'meow' with 'Woof'\n    //$mixed = 'BLOCK_EVENT'; // if you want to block the event\n    return $mixed;\n}\n\nfunction Dog_bark_afterEvent(&$mixed) {\n    echo $mixed; // show the override\n}\n\nfunction Dog_Name_setEvent(&$mixed) {\n    $mixed = 'Coco'; // override 'Fido' with 'Coco'\n    return $mixed;\n}\n\nfunction Dog_Name_getEvent(&$mixed) {\n    $mixed = 'Different'; // override 'Coco' with 'Different'\n    return $mixed;\n}\n\n////////////////////\n// PART 4\n////////////////////\n\n$PDog->Name = 'Fido';\n$PDog->Bark('meow');\n$PDog->SayName();\necho 'My New Name is: ' . $PDog->Name;\n"
      ],
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "279",
    "tags": "<php><plugins><architecture><hook>",
    "AcceptedAnswerId": "77",
    "answers": [
      {
        "id": "136273",
        "title": "",
        "text": "<p>Here is an approach I've used, it's an attempt to copy from Qt signals/slots mechanism, a kind of Observer pattern.\nObjects can emit signals.\nEvery signal has an ID in the system - it's composed by sender's id + object name\nEvery signal can be binded to the receivers, which simply is a \"callable\"\nYou use a bus class to pass the signals to anybody interested in receiving them\nWhen something happens, you \"send\" a signal. \nBelow is and example implementation</p>\n\n<pre><code>    &lt;?php\n\nclass SignalsHandler {\n\n\n    /**\n     * hash of senders/signals to slots\n     *\n     * @var array\n     */\n    private static $connections = array();\n\n\n    /**\n     * current sender\n     *\n     * @var class|object\n     */\n    private static $sender;\n\n\n    /**\n     * connects an object/signal with a slot\n     *\n     * @param class|object $sender\n     * @param string $signal\n     * @param callable $slot\n     */\n    public static function connect($sender, $signal, $slot) {\n        if (is_object($sender)) {\n            self::$connections[spl_object_hash($sender)][$signal][] = $slot;\n        }\n        else {\n            self::$connections[md5($sender)][$signal][] = $slot;\n        }\n    }\n\n\n    /**\n     * sends a signal, so all connected slots are called\n     *\n     * @param class|object $sender\n     * @param string $signal\n     * @param array $params\n     */\n    public static function signal($sender, $signal, $params = array()) {\n        self::$sender = $sender;\n        if (is_object($sender)) {\n            if ( ! isset(self::$connections[spl_object_hash($sender)][$signal])) {\n                return;\n            }\n            foreach (self::$connections[spl_object_hash($sender)][$signal] as $slot) {\n                call_user_func_array($slot, (array)$params);\n            }\n\n        }\n        else {\n            if ( ! isset(self::$connections[md5($sender)][$signal])) {\n                return;\n            }\n            foreach (self::$connections[md5($sender)][$signal] as $slot) {\n                call_user_func_array($slot, (array)$params);\n            }\n        }\n\n        self::$sender = null;\n    }\n\n\n    /**\n     * returns a current signal sender\n     *\n     * @return class|object\n     */\n    public static function sender() {\n        return self::$sender;\n    }\n\n}   \n\nclass User {\n\n    public function login() {\n        /**\n         * try to login\n         */\n        if ( ! $logged ) {\n            SignalsHandler::signal(this, 'loginFailed', 'login failed - username not valid' );\n        }\n    }\n\n}\n\nclass App {\n    public static function onFailedLogin($message) {\n        print $message;\n    }\n}\n\n\n$user = new User();\nSignalsHandler::connect($user, 'loginFailed', array($Log, 'writeLog'));\nSignalsHandler::connect($user, 'loginFailed', array('App', 'onFailedLogin'));\n\n$user-&gt;login();\n\n?&gt;\n</code></pre>\n",
        "votes": "24",
        "tags": "",
        "accepted": false
      },
      {
        "id": "77",
        "title": "",
        "text": "<p>You could use an Observer pattern.  A simple functional way to accomplish this:</p>\n\n<pre><code>&lt;?php\n\n/** Plugin system **/\n\n$listeners = array();\n\n/* Create an entry point for plugins */\nfunction hook() {\n    global $listeners;\n\n    $num_args = func_num_args();\n    $args = func_get_args();\n\n    if($num_args &lt; 2)\n        trigger_error(\"Insufficient arguments\", E_USER_ERROR);\n\n    // Hook name should always be first argument\n    $hook_name = array_shift($args);\n\n    if(!isset($listeners[$hook_name]))\n        return; // No plugins have registered this hook\n\n    foreach($listeners[$hook_name] as $func) {\n        $args = $func($args); \n    }\n    return $args;\n}\n\n/* Attach a function to a hook */\nfunction add_listener($hook, $function_name) {\n    global $listeners;\n    $listeners[$hook][] = $function_name;\n}\n\n/////////////////////////\n\n/** Sample Plugin **/\nadd_listener('a_b', 'my_plugin_func1');\nadd_listener('str', 'my_plugin_func2');\n\nfunction my_plugin_func1($args) {\n    return array(4, 5);\n}\n\nfunction my_plugin_func2($args) {\n    return str_replace('sample', 'CRAZY', $args[0]);\n}\n\n/////////////////////////\n\n/** Sample Application **/\n\n$a = 1;\n$b = 2;\n\nlist($a, $b) = hook('a_b', $a, $b);\n\n$str  = \"This is my sample application\\n\";\n$str .= \"$a + $b = \".($a+$b).\"\\n\";\n$str .= \"$a * $b = \".($a*$b).\"\\n\";\n\n$str = hook('str', $str);\necho $str;\n?&gt;\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>This is my CRAZY application\n4 + 5 = 9\n4 * 5 = 20\n</code></pre>\n\n<p><strong>Notes:</strong></p>\n\n<p>For this example source code, you must declare all your plugins before the actual source code that you want to be extendable.  I've included an example of how to handle single or multiple values being passed to the plugin.  The hardest part of this is writing the actual documentation which lists what arguments get passed to each hook.</p>\n\n<p>This is just one method of accomplishing a plugin system in PHP.  There are better alternatives, I suggest you check out the WordPress Documentation for more information.</p>\n",
        "votes": "164",
        "tags": "",
        "accepted": true
      },
      {
        "id": "933700",
        "title": "",
        "text": "<p>So let's say you don't want the Observer pattern because it requires that you change your class methods to handle the task of listening, and want something generic. And let's say you don't want to use <code>extends</code> inheritance because you may already be inheriting in your class from some other class. Wouldn't it be great to have a generic way to make <em>any class pluggable without much effort</em>? Here's how:</p>\n\n<pre><code>&lt;?php\n\n////////////////////\n// PART 1\n////////////////////\n\nclass Plugin {\n\n    private $_RefObject;\n    private $_Class = '';\n\n    public function __construct(&amp;$RefObject) {\n        $this-&gt;_Class = get_class(&amp;$RefObject);\n        $this-&gt;_RefObject = $RefObject;\n    }\n\n    public function __set($sProperty,$mixed) {\n        $sPlugin = $this-&gt;_Class . '_' . $sProperty . '_setEvent';\n        if (is_callable($sPlugin)) {\n            $mixed = call_user_func_array($sPlugin, $mixed);\n        }   \n        $this-&gt;_RefObject-&gt;$sProperty = $mixed;\n    }\n\n    public function __get($sProperty) {\n        $asItems = (array) $this-&gt;_RefObject;\n        $mixed = $asItems[$sProperty];\n        $sPlugin = $this-&gt;_Class . '_' . $sProperty . '_getEvent';\n        if (is_callable($sPlugin)) {\n            $mixed = call_user_func_array($sPlugin, $mixed);\n        }   \n        return $mixed;\n    }\n\n    public function __call($sMethod,$mixed) {\n        $sPlugin = $this-&gt;_Class . '_' .  $sMethod . '_beforeEvent';\n        if (is_callable($sPlugin)) {\n            $mixed = call_user_func_array($sPlugin, $mixed);\n        }\n        if ($mixed != 'BLOCK_EVENT') {\n            call_user_func_array(array(&amp;$this-&gt;_RefObject, $sMethod), $mixed);\n            $sPlugin = $this-&gt;_Class . '_' . $sMethod . '_afterEvent';\n            if (is_callable($sPlugin)) {\n                call_user_func_array($sPlugin, $mixed);\n            }       \n        } \n    }\n\n} //end class Plugin\n\nclass Pluggable extends Plugin {\n} //end class Pluggable\n\n////////////////////\n// PART 2\n////////////////////\n\nclass Dog {\n\n    public $Name = '';\n\n    public function bark(&amp;$sHow) {\n        echo \"$sHow&lt;br /&gt;\\n\";\n    }\n\n    public function sayName() {\n        echo \"&lt;br /&gt;\\nMy Name is: \" . $this-&gt;Name . \"&lt;br /&gt;\\n\";\n    }\n\n\n} //end class Dog\n\n$Dog = new Dog();\n\n////////////////////\n// PART 3\n////////////////////\n\n$PDog = new Pluggable($Dog);\n\nfunction Dog_bark_beforeEvent(&amp;$mixed) {\n    $mixed = 'Woof'; // Override saying 'meow' with 'Woof'\n    //$mixed = 'BLOCK_EVENT'; // if you want to block the event\n    return $mixed;\n}\n\nfunction Dog_bark_afterEvent(&amp;$mixed) {\n    echo $mixed; // show the override\n}\n\nfunction Dog_Name_setEvent(&amp;$mixed) {\n    $mixed = 'Coco'; // override 'Fido' with 'Coco'\n    return $mixed;\n}\n\nfunction Dog_Name_getEvent(&amp;$mixed) {\n    $mixed = 'Different'; // override 'Coco' with 'Different'\n    return $mixed;\n}\n\n////////////////////\n// PART 4\n////////////////////\n\n$PDog-&gt;Name = 'Fido';\n$PDog-&gt;Bark('meow');\n$PDog-&gt;SayName();\necho 'My New Name is: ' . $PDog-&gt;Name;\n</code></pre>\n\n<p>In Part 1, that's what you might include with a <code>require_once()</code> call at the top of your PHP script. It loads the classes to make something pluggable.</p>\n\n<p>In Part 2, that's where we load a class. Note I didn't have to do anything special to the class, which is significantly different than the Observer pattern.</p>\n\n<p>In Part 3, that's where we switch our class around into being \"pluggable\" (that is, supports plugins that let us override class methods and properties). So, for instance, if you have a web app, you might have a plugin registry, and you could activate plugins here. Notice also the <code>Dog_bark_beforeEvent()</code> function. If I set <code>$mixed = 'BLOCK_EVENT'</code> before the return statement, it will block the dog from barking and would also block the Dog_bark_afterEvent because there wouldn't be any event.</p>\n\n<p>In Part 4, that's the normal operation code, but notice that what you might think would run does not run like that at all. For instance, the dog does not announce it's name as 'Fido', but 'Coco'. The dog does not say 'meow', but 'Woof'. And when you want to look at the dog's name afterwards, you find it is 'Different' instead of 'Coco'. All those overrides were provided in Part 3.</p>\n\n<p>So how does this work? Well, let's rule out <code>eval()</code> (which everyone says is \"evil\") and rule out that it's not an Observer pattern. So, the way it works is the sneaky empty class called Pluggable, which does not contain the methods and properties used by the Dog class. Thus, since that occurs, the magic methods will engage for us. That's why in parts 3 and 4 we mess with the object derived from the Pluggable class, not the Dog class itself. Instead, we let the Plugin class do the \"touching\" on the Dog object for us. (If that's some kind of design pattern I don't know about -- please let me know.)</p>\n",
        "votes": "59",
        "tags": "",
        "accepted": false
      },
      {
        "id": "86796",
        "title": "",
        "text": "<p>Good advice is to look how other projects have done it. Many call for having plugins installed and their \"name\" registered for services (like wordpress does) so you have \"points\" in your code where you call a function that identifies registered listeners and executes them. A standard OO design patter is the <a href=\"http://www.phppatterns.com/docs/design/observer_pattern\" rel=\"noreferrer\">Observer Pattern</a>, which would be a good option to implement in a truly object oriented PHP system.</p>\n\n<p>The <a href=\"http://framework.zend.com\" rel=\"noreferrer\">Zend Framework</a> makes use of many hooking methods, and is very nicely architected. That would be a good system to look at.</p>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "147",
        "title": "",
        "text": "<p>The <em>hook</em> and <em>listener</em> method is the most commonly used, but there are other things you can do.  Depending on the size of your app, and who your going to allow see the code (is this going to be a FOSS script, or something in house) will influence greatly how you want to allow plugins.</p>\n\n<p>kdeloach has a nice example, but his implementation and hook function is a little unsafe.  I would ask for you to give more information of the nature of php app your writing, And how you see plugins fitting in.  </p>\n\n<p>+1 to kdeloach from me.</p>\n",
        "votes": "35",
        "tags": "",
        "accepted": false
      },
      {
        "id": "86433",
        "title": "",
        "text": "<p>There's a neat project called <a href=\"http://developer.yahoo.net/blog/archives/2007/10/r3_and_stickleb.html\" rel=\"noreferrer\">Stickleback</a> by Matt Zandstra at Yahoo that handles much of the work for handling plugins in PHP.</p>\n\n<p>It enforces the interface of a plugin class, supports a command line interface and isn't too hard to get up and running - especially if you read the cover story about it in the <a href=\"http://www.phparch.com\" rel=\"noreferrer\">PHP architect magazine</a>.</p>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "76",
        "title": "",
        "text": "<p>I believe the easiest way would be to follow Jeff's own advice and have a look around existing code. Try looking at Wordpress, Drupal, Joomla and other well known PHP-based CMS's to see how their API hooks look and feel. This way you can even get ideas you may have not thought of previously to make things a little more rubust.</p>\n\n<p>A more direct answer would be to write general files that they would \"include_once\" into their file that would provide the usability they would need. This would be broken up into categories and NOT provided in one MASSIVE \"hooks.php\" file. Be careful though, because what ends up happening is that files that they include end up having more and more dependencies and functionality improves. Try to keep API dependencies low. I.E fewer files for them to include.</p>\n",
        "votes": "18",
        "tags": "",
        "accepted": false
      },
      {
        "id": "16141818",
        "title": "",
        "text": "<p>I am surprised that most of the answers here seem to be geared about plugins that are local to the web application, ie, plugins that run on the local web server.</p>\n\n<p>What about if you wanted the plugins to run on a different - remote - server? The best way to do this would be to provide a form that allows you to define different URLs that would be called when particular events occur in your application.</p>\n\n<p>Different events would send different information based on the event that just occurred.</p>\n\n<p>This way, you would just perform a cURL call to the URL that has been provided to your application (eg over https) where remote servers can perform tasks based on information that has been sent by your application.</p>\n\n<p>This provides two benefits:</p>\n\n<ol>\n<li>You don't have to host any code on your local server (security)</li>\n<li>The code can be on remote servers (extensibility) in different languages other then PHP (portability)</li>\n</ol>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "48",
    "url": "https://stackoverflow.com/questions/48",
    "title": "Multiple submit buttons in an HTML form",
    "text:": "<p>Let's say you create a wizard in an HTML form. One button goes back, and one goes forward. Since the <em>back</em> button appears first in the markup when you press <kbd>Enter</kbd>, it will use that button to submit the form.</p>\n\n<p>Example:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;form&gt;\r\n  &lt;!-- Put your cursor in this field and press Enter --&gt;\r\n  &lt;input type=\"text\" name=\"field1\" /&gt;\r\n\r\n  &lt;!-- This is the button that will submit --&gt;\r\n  &lt;input type=\"submit\" name=\"prev\" value=\"Previous Page\" /&gt;\r\n\r\n  &lt;!-- But this is the button that I WANT to submit --&gt;\r\n  &lt;input type=\"submit\" name=\"next\" value=\"Next Page\" /&gt;\r\n&lt;/form&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I would like to get to decide which button is used to submit the form when a user presses <kbd>Enter</kbd>. That way, when you press <kbd>Enter</kbd> the wizard will move to the next page, not the previous. Do you have to use <code>tabindex</code> to do this?</p>\n",
    "codes": [
      [],
      [
        "<html>\r\n    <head>\r\n        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js\"></script>\r\n    </head>\r\n\r\n    <body>\r\n        <form action=\"http://httpbin.org/post\" method=\"post\">\r\n            If JavaScript  is disabled, then you CAN submit the form\r\n            with button1, button2 or button3.\r\n\r\n            If you press enter on a text field, then the form is\r\n            submitted with the first submit button.\r\n\r\n            If JavaScript is enabled, then the submit typed buttons\r\n            without the 'defaultSubmitButton' style are converted\r\n            to button typed buttons.\r\n\r\n            If you press Enter on a text field, then the form is\r\n            submitted with the only submit button\r\n            (the one with class defaultSubmitButton)\r\n\r\n            If you click on any other button in the form, then the\r\n            form is submitted with that button's value.\r\n\r\n            <br />\r\n\r\n            <input type=\"text\" name=\"text1\" ></input>\r\n            <button type=\"submit\" name=\"action\" value=\"button1\" >button 1</button>\r\n            <br />\r\n\r\n            <input type=\"text\" name=\"text2\" ></input>\r\n            <button type=\"submit\" name=\"action\" value=\"button2\" >button 2</button>\r\n            <br />\r\n\r\n            <input type=\"text\" name=\"text3\" ></input>\r\n            <button class=\"defaultSubmitButton\" type=\"submit\" name=\"action\" value=\"button3\" >default button</button>\r\n        </form>\r\n\r\n        <script>\r\n            $(document).ready(function(){\r\n\r\n                /* Change submit typed buttons without the 'defaultSubmitButton'\r\n                   style to button typed buttons */\r\n                $('form button[type=submit]').not('.defaultSubmitButton').each(function(){\r\n                    $(this).attr('type', 'button');\r\n                });\r\n\r\n                /* Clicking on button typed buttons results in:\r\n                   1. Setting the form's submit button's value to\r\n                      the clicked button's value,\r\n                   2. Clicking on the form's submit button */\r\n                $('form button[type=button]').click(function( event ){\r\n                    var form = event.target.closest('form');\r\n                    var submit = $(\"button[type='submit']\",form).first();\r\n                    submit.val(event.target.value);\r\n                    submit.click();\r\n                });\r\n            });\r\n        </script>\r\n    </body>\r\n</html>"
      ],
      [
        "<html>\n<head>\n    <style>\n        div.defaultsubmitbutton {\n            display: none;\n        }\n    </style>\n</head>\n<body>\n    <form action=\"action\" method=\"get\">\n        <div class=\"defaultsubmitbutton\">\n            <input type=\"submit\" name=\"next\" value=\"Next\">\n        </div>\n        <p><input type=\"text\" name=\"filter\"><input type=\"submit\" value=\"Filter\"></p>\n        <p>Filtered results</p>\n        <input type=\"radio\" name=\"choice\" value=\"1\">Filtered result 1\n        <input type=\"radio\" name=\"choice\" value=\"2\">Filtered result 2\n        <input type=\"radio\" name=\"choice\" value=\"3\">Filtered result 3\n        <div>                \n            <input type=\"submit\" name=\"prev\" value=\"Prev\">\n            <input type=\"submit\" name=\"next\" value=\"Next\">\n        </div>\n    </form>\n</body>\n</html>\n"
      ],
      [
        "<form>\n    <input type=\"text\" name=\"field1\" /> <!-- Put your cursor in this field and press Enter -->\n\n    <input type=\"submit\" name=\"prev\" value=\"Previous Page\" /> <!-- This is the button that will submit -->\n    <input type=\"submit\" name=\"next\" value=\"Next Page\" /> <!-- But this is the button that I WANT to submit -->\n</form>\n",
        "if(isset($_POST['prev']))\n{\n    header(\"Location: previous.html\");\n    die();\n}\n\nif(isset($_POST['next']))\n{\n    header(\"Location: next.html\");\n    die();\n}\n"
      ],
      [],
      [
        "<form>\n   <input type=\"text\" name=\"field1\" /> <!-- put your cursor in this field and press Enter -->\n\n   <input type=\"button\" name=\"prev\" value=\"Previous Page\" /> <!-- This is the button that will submit -->\n   <input type=\"submit\" name=\"next\" value=\"Next Page\" /> <!-- But this is the button that I WANT to submit -->\n</form>\n"
      ],
      [],
      [
        "<form>\r\n  <input type=\"text\" name=\"Name\" />\r\n  <!-- Enter the value -->\r\n\r\n  <input type=\"button\" name=\"prev\" value=\"Previous Page\" />\r\n  <!-- This is the button that will submit -->\r\n  <input type=\"submit\" name=\"next\" value=\"Next Page\" />\r\n  <!-- But this is the button that I WANT to submit -->\r\n</form>"
      ],
      [],
      [
        "<asp:Button runat=\"server\" ID=\"SumbitButton\" UseSubmitBehavior=\"False\" Text=\"Submit\" />\n"
      ],
      [
        "<form>\n    <p><input type=\"text\" name=\"field1\" /></p>\n    <p><a href=\"previous.html\">\n    <button type=\"button\">Previous Page</button></a>\n    <button type=\"submit\">Next Page</button></p>\n</form>\n",
        "<form>\n    <p><input type=\"text\" name=\"field1\" /></p>\n    <p><a href=\"previous.html\">\n    <button type=\"button\" onclick=\"window.location='previous.html'\">Previous Page</button></a>\n    <button type=\"submit\">Next Page</button></p>\n</form>\n"
      ],
      [],
      [
        "<form>\n    <input type=\"text\" name=\"field1\" /><!-- Put your cursor in this field and press Enter -->\n    <input type=\"submit\" name=\"prev\" value=\"Previous Page\" /> <!-- This is the button that will submit -->\n    <input type=\"submit\" name=\"next\" value=\"Next Page\" /> <!-- But this is the button that I WANT to submit -->\n</form>\n",
        "If \"prev\" submitted then\n    Previous Page was click\nElse If \"next\" submitted then\n    Next Page was click\nElse\n    No button was click\n"
      ],
      [
        "<SCRIPT TYPE=\"text/javascript\">//<!--\nfunction submitenter(myfield,e) {\n  var keycode;\n  if (window.event) {\n    keycode = window.event.keyCode;\n  } else if (e) {\n    keycode = e.which;\n  } else {\n    return true;\n  }\n\n  if (keycode == 13) {\n    myfield.form.submit();\n    return false;\n  } else {\n    return true;\n  }\n}\n//--></SCRIPT>\n\n<INPUT NAME=\"MyText\" TYPE=\"Text\" onKeyPress=\"return submitenter(this,event)\" />\n"
      ],
      [
        "$('form').on('keypress', function(event) {\n    if (event.which == 13) {\n        $('input[name=\"prev\"]').prop('type', 'button');\n    }\n});\n"
      ],
      [
        ".f {\r\n  float: right;\r\n}\r\n.clr {\r\n  clear: both;\r\n}",
        "<form action=\"action\" method=\"get\">\r\n  <input type=\"text\" name=\"abc\">\r\n  <div id=\"buttons\">\r\n    <input type=\"submit\" class=\"f\" name=\"next\" value=\"Next\">\r\n    <input type=\"submit\" class=\"f\" name=\"prev\" value=\"Prev\">\r\n    <div class=\"clr\"></div><!-- This div prevents later elements from floating with the buttons. Keeps them 'inside' div#buttons -->\r\n  </div>\r\n</form>"
      ],
      [
        "<input type=\"submit\" name=\"submitButton\" value=\"Previous Page\" />\n<input type=\"submit\" name=\"submitButton\" value=\"Next Page\" />\n",
        "If Request.Form(\"submitButton\") = \"Previous Page\" Then\n    ' Code for the previous page\nElseIf Request.Form(\"submitButton\") = \"Next Page\" Then\n    ' Code for the next page\nEnd If\n"
      ],
      [],
      [
        "<input type=\"submit\" name=\"perv\" value=\"Previous Page\"> \n<input type=\"submit\" name=\"prev\" value=\"Next Page\"> \n",
        "    btnID = \"\"\nif Request.Form(\"prev\") = \"Previous Page\" then\n    btnID = \"1\"\nelse if Request.Form(\"prev\") = \"Next Page\" then\n    btnID = \"2\"\nend if\n"
      ],
      [
        "<input type=\"button\" name=\"prev\" value=\"Previous Page\" />\n",
        "<input type=\"submit\" name=\"next\" value=\"Next Page\" default />\n"
      ],
      [
        "$(document).on(\"keydown\", function(event) {\r\n  if (event.which.toString() == \"8\") {\r\n    var findActiveElementsClosestForm = $(document.activeElement).closest(\"form\");\r\n\r\n    if (findActiveElementsClosestForm && findActiveElementsClosestForm.length) {\r\n      $(\"form#\" + findActiveElementsClosestForm[0].id + \" .secondary_button\").trigger(\"click\");\r\n    }\r\n  }\r\n});",
        "<script src=\"https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.1.min.js\"></script>\r\n\r\n<form action=\"action\" method=\"get\" defaultbutton=\"TriggerOnEnter\">\r\n  <input type=\"submit\" id=\"PreviousButton\" name=\"prev\" value=\"Prev\" class=\"secondary_button\" />\r\n  <input type=\"submit\" id='TriggerOnEnter' name=\"next\" value=\"Next\" class=\"primary_button\" />\r\n</form>"
      ],
      [],
      [
        "@model myApp.Models.myModel\n\n<script type=\"text/javascript\">\n    function doOperation(op) {\n        document.getElementById(\"OperationId\").innerText = op;\n        // you could also use Ajax to reference the element.\n    }\n</script>\n\n<form>\n  <input type=\"text\" id = \"TextFieldId\" name=\"TextField\" value=\"\" />\n  <input type=\"hidden\" id=\"OperationId\" name=\"Operation\" value=\"\" />\n  <input type=\"submit\" name=\"write\" value=\"Write\" onclick='doOperation(\"Write\")'/>\n  <input type=\"submit\" name=\"read\" value=\"Read\" onclick='doOperation(\"Read\")'/>\n</form>\n",
        "// Do operation according to which submit button was clicked\n// based on the contents of the hidden Operation field.\nif (myModel.Operation == \"Read\")\n{\n     // Do read logic\n}\nelse if (myModel.Operation == \"Write\")\n{\n     // Do write logic\n}\nelse\n{\n     // Do error logic\n}\n"
      ]
    ],
    "votes:": "264",
    "tags": "<html><forms><form-submit><submit-button>",
    "AcceptedAnswerId": "31910",
    "answers": [
      {
        "id": "411",
        "title": "",
        "text": "<p>If the fact that the first button is used by default is consistent across browsers, put them the right way around in the source code, and then use CSS to switch their apparent positions.</p>\n\n<p><code>float</code> them left and right to switch them around visually, for example.</p>\n",
        "votes": "33",
        "tags": "",
        "accepted": false
      },
      {
        "id": "48171459",
        "title": "",
        "text": "<p>I solved a very similar problem in this way:</p>\n\n<ol>\n<li><p>If JavaScript is enabled (in most cases nowadays) then all the submit buttons are \"<strong>degraded</strong>\" to buttons at page load via JavaScript (jQuery). Click events on the \"<strong>degraded</strong>\" button typed buttons are also handled via JavaScript.</p></li>\n<li><p>If JavaScript is not enabled then the form is served to the browser with multiple submit buttons. In this case hitting <kbd>Enter</kbd> on a <code>textfield</code> within the form will submit the form with the first button instead of the intended <strong>default</strong>, but at least the form is still usable: you can submit with both the <strong>prev</strong> and <strong>next</strong> buttons.</p></li>\n</ol>\n\n<p>Working example:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;html&gt;\r\n    &lt;head&gt;\r\n        &lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js\"&gt;&lt;/script&gt;\r\n    &lt;/head&gt;\r\n\r\n    &lt;body&gt;\r\n        &lt;form action=\"http://httpbin.org/post\" method=\"post\"&gt;\r\n            If JavaScript  is disabled, then you CAN submit the form\r\n            with button1, button2 or button3.\r\n\r\n            If you press enter on a text field, then the form is\r\n            submitted with the first submit button.\r\n\r\n            If JavaScript is enabled, then the submit typed buttons\r\n            without the 'defaultSubmitButton' style are converted\r\n            to button typed buttons.\r\n\r\n            If you press Enter on a text field, then the form is\r\n            submitted with the only submit button\r\n            (the one with class defaultSubmitButton)\r\n\r\n            If you click on any other button in the form, then the\r\n            form is submitted with that button's value.\r\n\r\n            &lt;br /&gt;\r\n\r\n            &lt;input type=\"text\" name=\"text1\" &gt;&lt;/input&gt;\r\n            &lt;button type=\"submit\" name=\"action\" value=\"button1\" &gt;button 1&lt;/button&gt;\r\n            &lt;br /&gt;\r\n\r\n            &lt;input type=\"text\" name=\"text2\" &gt;&lt;/input&gt;\r\n            &lt;button type=\"submit\" name=\"action\" value=\"button2\" &gt;button 2&lt;/button&gt;\r\n            &lt;br /&gt;\r\n\r\n            &lt;input type=\"text\" name=\"text3\" &gt;&lt;/input&gt;\r\n            &lt;button class=\"defaultSubmitButton\" type=\"submit\" name=\"action\" value=\"button3\" &gt;default button&lt;/button&gt;\r\n        &lt;/form&gt;\r\n\r\n        &lt;script&gt;\r\n            $(document).ready(function(){\r\n\r\n                /* Change submit typed buttons without the 'defaultSubmitButton'\r\n                   style to button typed buttons */\r\n                $('form button[type=submit]').not('.defaultSubmitButton').each(function(){\r\n                    $(this).attr('type', 'button');\r\n                });\r\n\r\n                /* Clicking on button typed buttons results in:\r\n                   1. Setting the form's submit button's value to\r\n                      the clicked button's value,\r\n                   2. Clicking on the form's submit button */\r\n                $('form button[type=button]').click(function( event ){\r\n                    var form = event.target.closest('form');\r\n                    var submit = $(\"button[type='submit']\",form).first();\r\n                    submit.val(event.target.value);\r\n                    submit.click();\r\n                });\r\n            });\r\n        &lt;/script&gt;\r\n    &lt;/body&gt;\r\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "13084655",
        "title": "",
        "text": "<p>Sometimes the provided solution by @palotasb is not sufficient. There are use cases where for example a \"Filter\" submits button is placed above buttons like \"Next and Previous\". I found a workaround for this: <em>copy</em> the submit button which needs to act as the default submit button in a hidden div and place it inside the form above any other submit button. \nTechnically it will be submitted by a different button when pressing Enter than when clicking on the visible Next button. But since the name and value are the same, there's no difference in the result.</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;style&gt;\n        div.defaultsubmitbutton {\n            display: none;\n        }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;form action=\"action\" method=\"get\"&gt;\n        &lt;div class=\"defaultsubmitbutton\"&gt;\n            &lt;input type=\"submit\" name=\"next\" value=\"Next\"&gt;\n        &lt;/div&gt;\n        &lt;p&gt;&lt;input type=\"text\" name=\"filter\"&gt;&lt;input type=\"submit\" value=\"Filter\"&gt;&lt;/p&gt;\n        &lt;p&gt;Filtered results&lt;/p&gt;\n        &lt;input type=\"radio\" name=\"choice\" value=\"1\"&gt;Filtered result 1\n        &lt;input type=\"radio\" name=\"choice\" value=\"2\"&gt;Filtered result 2\n        &lt;input type=\"radio\" name=\"choice\" value=\"3\"&gt;Filtered result 3\n        &lt;div&gt;                \n            &lt;input type=\"submit\" name=\"prev\" value=\"Prev\"&gt;\n            &lt;input type=\"submit\" name=\"next\" value=\"Next\"&gt;\n        &lt;/div&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n",
        "votes": "18",
        "tags": "",
        "accepted": false
      },
      {
        "id": "22139927",
        "title": "",
        "text": "<p>This is what I have tried out:</p>\n\n<ol>\n<li>You need to make sure you give your buttons different names</li>\n<li>Write an <code>if</code> statement that will do the required action if either button is clicked.</li>\n</ol>\n\n<p>&nbsp;</p>\n\n<pre><code>&lt;form&gt;\n    &lt;input type=\"text\" name=\"field1\" /&gt; &lt;!-- Put your cursor in this field and press Enter --&gt;\n\n    &lt;input type=\"submit\" name=\"prev\" value=\"Previous Page\" /&gt; &lt;!-- This is the button that will submit --&gt;\n    &lt;input type=\"submit\" name=\"next\" value=\"Next Page\" /&gt; &lt;!-- But this is the button that I WANT to submit --&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>In PHP,</p>\n\n<pre><code>if(isset($_POST['prev']))\n{\n    header(\"Location: previous.html\");\n    die();\n}\n\nif(isset($_POST['next']))\n{\n    header(\"Location: next.html\");\n    die();\n}\n</code></pre>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "50015400",
        "title": "",
        "text": "<p>You can use <code>Tabindex</code> to solve this issue. Also changing the order of the buttons would be a more efficient way to achieve this.</p>\n\n<p>Change the order of the buttons and add <code>float</code> values to assign them the desired position you want to show in your <code>HTML</code> view.</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "29322619",
        "title": "",
        "text": "<p>From <a href=\"https://html.spec.whatwg.org/multipage/forms.html#implicit-submission\">https://html.spec.whatwg.org/multipage/forms.html#implicit-submission</a></p>\n\n<blockquote>\n  <p>A form element's default button is the first submit button in tree\n  order whose form owner is that form element.</p>\n  \n  <p>If the user agent supports letting the user submit a form implicitly\n  (for example, on some platforms hitting the \"enter\" key while a text\n  field is focused implicitly submits the form)...</p>\n</blockquote>\n\n<p>Having the next input be type=\"submit\" and changing the previous input to type=\"button\" should give the desired default behavior.</p>\n\n<pre><code>&lt;form&gt;\n   &lt;input type=\"text\" name=\"field1\" /&gt; &lt;!-- put your cursor in this field and press Enter --&gt;\n\n   &lt;input type=\"button\" name=\"prev\" value=\"Previous Page\" /&gt; &lt;!-- This is the button that will submit --&gt;\n   &lt;input type=\"submit\" name=\"next\" value=\"Next Page\" /&gt; &lt;!-- But this is the button that I WANT to submit --&gt;\n&lt;/form&gt;\n</code></pre>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "27368",
        "title": "",
        "text": "<p>If you really just want it to work like an install dialog, just give focus to the \"Next\" button OnLoad.  </p>\n\n<p>That way if the user hits <kbd>Return</kbd>, the form submits and goes forward. If they want to go back they can hit <kbd>Tab</kbd> or click on the button.</p>\n",
        "votes": "18",
        "tags": "",
        "accepted": false
      },
      {
        "id": "46482077",
        "title": "",
        "text": "<p>Try this..!</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;form&gt;\r\n  &lt;input type=\"text\" name=\"Name\" /&gt;\r\n  &lt;!-- Enter the value --&gt;\r\n\r\n  &lt;input type=\"button\" name=\"prev\" value=\"Previous Page\" /&gt;\r\n  &lt;!-- This is the button that will submit --&gt;\r\n  &lt;input type=\"submit\" name=\"next\" value=\"Next Page\" /&gt;\r\n  &lt;!-- But this is the button that I WANT to submit --&gt;\r\n&lt;/form&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "13594316",
        "title": "",
        "text": "<p>Changing the tab order should be all it takes to accomplish this. Keep it simple. </p>\n\n<p>Another simple option would be to put the back button after the submit button in the HTML code but float it to the left so it appears on the page before the submit button. </p>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "36206414",
        "title": "",
        "text": "<p>I came across this question when trying to find an answer to basically the same thing, only with ASP.NET  controls, when I figured out that the ASP button has a property called <code>UseSubmitBehavior</code> that allows you to set which one does the submitting.</p>\n\n<pre><code>&lt;asp:Button runat=\"server\" ID=\"SumbitButton\" UseSubmitBehavior=\"False\" Text=\"Submit\" /&gt;\n</code></pre>\n\n<p>Just in case someone is looking for the ASP.NET button way to do it.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "71322",
        "title": "",
        "text": "<p>This works without JavaScript or CSS in most browsers:</p>\n\n<pre><code>&lt;form&gt;\n    &lt;p&gt;&lt;input type=\"text\" name=\"field1\" /&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;a href=\"previous.html\"&gt;\n    &lt;button type=\"button\"&gt;Previous Page&lt;/button&gt;&lt;/a&gt;\n    &lt;button type=\"submit\"&gt;Next Page&lt;/button&gt;&lt;/p&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Firefox, Opera, Safari, and Google Chrome all work. <br/> As always, Internet&nbsp;Explorer is the problem.</p>\n\n<p>This version works when JavaScript is turned on:</p>\n\n<pre><code>&lt;form&gt;\n    &lt;p&gt;&lt;input type=\"text\" name=\"field1\" /&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;a href=\"previous.html\"&gt;\n    &lt;button type=\"button\" onclick=\"window.location='previous.html'\"&gt;Previous Page&lt;/button&gt;&lt;/a&gt;\n    &lt;button type=\"submit\"&gt;Next Page&lt;/button&gt;&lt;/p&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>So the flaw in this solution is:</p>\n\n<p>Previous Page does not work if you use Internet&nbsp;Explorer with JavaScript off.</p>\n\n<p>Mind you, the back button still works!</p>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "71629",
        "title": "",
        "text": "<p>You can do it with CSS.</p>\n\n<p>Put the buttons in the markup with the <code>Next</code> button first, then the <code>Prev</code> button afterwards.</p>\n\n<p>Then use CSS to position them to appear the way you want.</p>\n",
        "votes": "17",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2452",
        "title": "",
        "text": "<p>Using the example you gave:</p>\n\n<pre><code>&lt;form&gt;\n    &lt;input type=\"text\" name=\"field1\" /&gt;&lt;!-- Put your cursor in this field and press Enter --&gt;\n    &lt;input type=\"submit\" name=\"prev\" value=\"Previous Page\" /&gt; &lt;!-- This is the button that will submit --&gt;\n    &lt;input type=\"submit\" name=\"next\" value=\"Next Page\" /&gt; &lt;!-- But this is the button that I WANT to submit --&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>If you click on \"Previous Page\", only the value of \"prev\" will be submitted. If you click on \"Next Page\" only the value of \"next\" will be submitted.</p>\n\n<p>If however, you press <kbd>Enter</kbd> somewhere on the form, neither \"prev\" nor \"next\" will be submitted.</p>\n\n<p>So using pseudocode you could do the following:</p>\n\n<pre><code>If \"prev\" submitted then\n    Previous Page was click\nElse If \"next\" submitted then\n    Next Page was click\nElse\n    No button was click\n</code></pre>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "679",
        "title": "",
        "text": "<p>I would use JavaScript to submit the form. The function would be triggered by the OnKeyPress event of the form element and would detect whether the <kbd>Enter</kbd> key was selected. If this is the case, it will submit the form.</p>\n\n<p>Here are two pages that give techniques on how to do this: <a href=\"http://www.htmlcodetutorial.com/forms/index_famsupp_157.html\" rel=\"nofollow noreferrer\">1</a>, <a href=\"http://www.java2s.com/Code/JavaScript/Form-Control/SubmitaformViaEnter.htm\" rel=\"nofollow noreferrer\">2</a>. Based on these, here is an example of usage (based on <a href=\"http://www.htmlcodetutorial.com/forms/index_famsupp_157.html\" rel=\"nofollow noreferrer\">here</a>):</p>\n\n<pre><code>&lt;SCRIPT TYPE=\"text/javascript\"&gt;//&lt;!--\nfunction submitenter(myfield,e) {\n  var keycode;\n  if (window.event) {\n    keycode = window.event.keyCode;\n  } else if (e) {\n    keycode = e.which;\n  } else {\n    return true;\n  }\n\n  if (keycode == 13) {\n    myfield.form.submit();\n    return false;\n  } else {\n    return true;\n  }\n}\n//--&gt;&lt;/SCRIPT&gt;\n\n&lt;INPUT NAME=\"MyText\" TYPE=\"Text\" onKeyPress=\"return submitenter(this,event)\" /&gt;\n</code></pre>\n",
        "votes": "22",
        "tags": "",
        "accepted": false
      },
      {
        "id": "32007399",
        "title": "",
        "text": "<p>With JavaScript (here jQuery), you can disable the prev button before submitting the form.</p>\n\n<pre><code>$('form').on('keypress', function(event) {\n    if (event.which == 13) {\n        $('input[name=\"prev\"]').prop('type', 'button');\n    }\n});\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "31910",
        "title": "",
        "text": "<p>I hope this helps. I'm just doing the trick of <code>float</code>ing the buttons to the right.</p>\n\n<p>This way the <code>Prev</code> button is left of the <code>Next</code> button, but the <code>Next</code> comes first in the HTML structure:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.f {\r\n  float: right;\r\n}\r\n.clr {\r\n  clear: both;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;form action=\"action\" method=\"get\"&gt;\r\n  &lt;input type=\"text\" name=\"abc\"&gt;\r\n  &lt;div id=\"buttons\"&gt;\r\n    &lt;input type=\"submit\" class=\"f\" name=\"next\" value=\"Next\"&gt;\r\n    &lt;input type=\"submit\" class=\"f\" name=\"prev\" value=\"Prev\"&gt;\r\n    &lt;div class=\"clr\"&gt;&lt;/div&gt;&lt;!-- This div prevents later elements from floating with the buttons. Keeps them 'inside' div#buttons --&gt;\r\n  &lt;/div&gt;\r\n&lt;/form&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Benefits over other suggestions: no JavaScript code, accessible, and both buttons remain <code>type=\"submit\"</code>.</p>\n",
        "votes": "144",
        "tags": "",
        "accepted": true
      },
      {
        "id": "56",
        "title": "",
        "text": "<p>Give your submit buttons the same name like this:</p>\n\n<pre><code>&lt;input type=\"submit\" name=\"submitButton\" value=\"Previous Page\" /&gt;\n&lt;input type=\"submit\" name=\"submitButton\" value=\"Next Page\" /&gt;\n</code></pre>\n\n<p>When the user presses <kbd>Enter</kbd> and the <em>request</em> goes to the server, you can check the value for <code>submitButton</code> on your server-side code which contains a collection of form <code>name/value</code> pairs. For example, in <a href=\"http://en.wikipedia.org/wiki/Active_Server_Pages\" rel=\"nofollow noreferrer\">ASP Classic</a>:</p>\n\n<pre class=\"lang-vb prettyprint-override\"><code>If Request.Form(\"submitButton\") = \"Previous Page\" Then\n    ' Code for the previous page\nElseIf Request.Form(\"submitButton\") = \"Next Page\" Then\n    ' Code for the next page\nEnd If\n</code></pre>\n\n<p>Reference: <em><a href=\"http://www.chami.com/tips/internet/042599I.html\" rel=\"nofollow noreferrer\">Using multiple submit buttons on a single form</a></em></p>\n",
        "votes": "77",
        "tags": "",
        "accepted": false
      },
      {
        "id": "27372",
        "title": "",
        "text": "<p>This cannot be done with pure HTML. You must rely on JavaScript for this trick.</p>\n\n<p>However, if you place two forms on the HTML page you can do this.</p>\n\n<p>Form1 would have the previous button.</p>\n\n<p>Form2 would have any user inputs + the next button.</p>\n\n<p>When the user presses <kbd>Enter</kbd> in Form2, the Next submit button would fire.</p>\n",
        "votes": "19",
        "tags": "",
        "accepted": false
      },
      {
        "id": "10894669",
        "title": "",
        "text": "<pre><code>&lt;input type=\"submit\" name=\"perv\" value=\"Previous Page\"&gt; \n&lt;input type=\"submit\" name=\"prev\" value=\"Next Page\"&gt; \n</code></pre>\n\n<p>Keep the name of all submit buttons the same -- \"prev\". </p>\n\n<p>The only difference is the <code>value</code> attribute with unique values. When we create the script, these unique values will help us to figure out which of the submit buttons was pressed. </p>\n\n<p>And write the following coding:</p>\n\n<pre><code>    btnID = \"\"\nif Request.Form(\"prev\") = \"Previous Page\" then\n    btnID = \"1\"\nelse if Request.Form(\"prev\") = \"Next Page\" then\n    btnID = \"2\"\nend if\n</code></pre>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "58",
        "title": "",
        "text": "<p>Change the previous button type into a button like this:  </p>\n\n<pre><code>&lt;input type=\"button\" name=\"prev\" value=\"Previous Page\" /&gt;\n</code></pre>\n\n<p>Now the <em>Next</em> button would be the default, plus you could also add the <code>default</code> attribute to it so that your browser will highlight it like so:</p>\n\n<pre><code>&lt;input type=\"submit\" name=\"next\" value=\"Next Page\" default /&gt;\n</code></pre>\n",
        "votes": "75",
        "tags": "",
        "accepted": false
      },
      {
        "id": "22408408",
        "title": "",
        "text": "<p>If you have multiple active buttons on one page then you can do something like this:</p>\n\n<p>Mark the first button you want to trigger on the <kbd>Enter</kbd> keypress as the default button on the form. For the second button, associate it to the <kbd>Backspace</kbd> button on the keyboard. The <kbd>Backspace</kbd> eventcode is 8.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(document).on(\"keydown\", function(event) {\r\n  if (event.which.toString() == \"8\") {\r\n    var findActiveElementsClosestForm = $(document.activeElement).closest(\"form\");\r\n\r\n    if (findActiveElementsClosestForm &amp;&amp; findActiveElementsClosestForm.length) {\r\n      $(\"form#\" + findActiveElementsClosestForm[0].id + \" .secondary_button\").trigger(\"click\");\r\n    }\r\n  }\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.1.min.js\"&gt;&lt;/script&gt;\r\n\r\n&lt;form action=\"action\" method=\"get\" defaultbutton=\"TriggerOnEnter\"&gt;\r\n  &lt;input type=\"submit\" id=\"PreviousButton\" name=\"prev\" value=\"Prev\" class=\"secondary_button\" /&gt;\r\n  &lt;input type=\"submit\" id='TriggerOnEnter' name=\"next\" value=\"Next\" class=\"primary_button\" /&gt;\r\n&lt;/form&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "26365211",
        "title": "",
        "text": "<p>Another simple option would be to put the back button after the submit button in the HTML code, but float it to the left, so it appears on the page before the submit button.</p>\n\n<p>Changing the tab order should be all it takes to accomplish this. Keep it simple.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "32377058",
        "title": "",
        "text": "<p>The first time I came up against this, I came up with an onclick()/JavaScript hack when choices are not prev/next   that I still like for its simplicity. It goes like this:</p>\n\n<pre><code>@model myApp.Models.myModel\n\n&lt;script type=\"text/javascript\"&gt;\n    function doOperation(op) {\n        document.getElementById(\"OperationId\").innerText = op;\n        // you could also use Ajax to reference the element.\n    }\n&lt;/script&gt;\n\n&lt;form&gt;\n  &lt;input type=\"text\" id = \"TextFieldId\" name=\"TextField\" value=\"\" /&gt;\n  &lt;input type=\"hidden\" id=\"OperationId\" name=\"Operation\" value=\"\" /&gt;\n  &lt;input type=\"submit\" name=\"write\" value=\"Write\" onclick='doOperation(\"Write\")'/&gt;\n  &lt;input type=\"submit\" name=\"read\" value=\"Read\" onclick='doOperation(\"Read\")'/&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>When either submit button is clicked, it stores the desired operation in a hidden field (which is a string field included in the model the form is associated with) and submits the form to the Controller, which does all the deciding. In the Controller, you simply write:</p>\n\n<pre><code>// Do operation according to which submit button was clicked\n// based on the contents of the hidden Operation field.\nif (myModel.Operation == \"Read\")\n{\n     // Do read logic\n}\nelse if (myModel.Operation == \"Write\")\n{\n     // Do write logic\n}\nelse\n{\n     // Do error logic\n}\n</code></pre>\n\n<p>You can also tighten this up slightly using numeric operation codes to avoid the string parsing, but unless you play with enumerations, the code is less readable, modifiable, and self-documenting and the parsing is trivial, anyway.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "59",
    "url": "https://stackoverflow.com/questions/59",
    "title": "How do I get a distinct, ordered list of names from a DataTable using LINQ?",
    "text:": "<p>I have a <code>DataTable</code> with a <code>Name</code> column. I want to generate a collection of the unique names ordered alphabetically. The following query ignores the <em>order by</em> clause.</p>\n\n<pre><code>var names =\n    (from DataRow dr in dataTable.Rows\n    orderby (string)dr[\"Name\"]\n    select (string)dr[\"Name\"]).Distinct();\n</code></pre>\n\n<p>Why does the <code>orderby</code> not get enforced?</p>\n",
    "codes": [
      [
        "var names = (from DataRow dr in dataTable.Rows\n             select (string)dr[\"Name\"]).Distinct().OrderBy( name => name );\n"
      ],
      [
        "dataTable.Rows.Cast<DataRow>().select(dr => dr[\"Name\"].ToString()).Distinct().OrderBy(name => name);\n"
      ],
      [],
      [],
      [
        "dataTable.Rows.Cast<DataRow>().GroupBy(g => g[\"Name\"]).Select(s => s.First()).OrderBy(o => o[\"Name\"]);\n"
      ],
      [
        "var names = (from dr in dataTable.Rows\n             select (string)dr[\"Name\"]).Distinct().OrderBy(name => name);\n"
      ],
      [
        "var sortedTable = (from results in resultTable.AsEnumerable()\nselect (string)results[attributeList]).Distinct().OrderBy(name => name);\n"
      ]
    ],
    "votes:": "102",
    "tags": "<c#><linq><.net-3.5>",
    "AcceptedAnswerId": "43110",
    "answers": [
      {
        "id": "62",
        "title": "",
        "text": "<p><strong>The problem is that the Distinct\n operator does not grant that it will\n maintain the original order of\n values.</strong></p>\n\n<p>So your query will need to work like this</p>\n\n<pre><code>var names = (from DataRow dr in dataTable.Rows\n             select (string)dr[\"Name\"]).Distinct().OrderBy( name =&gt; name );\n</code></pre>\n",
        "votes": "54",
        "tags": "",
        "accepted": false
      },
      {
        "id": "16261469",
        "title": "",
        "text": "<p>Try out the following:</p>\n\n<pre><code>dataTable.Rows.Cast&lt;DataRow&gt;().select(dr =&gt; dr[\"Name\"].ToString()).Distinct().OrderBy(name =&gt; name);\n</code></pre>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "48526016",
        "title": "",
        "text": "<p>To abstract: all of the answers have something in common.</p>\n\n<p>OrderBy needs to be the final operation.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "43110",
        "title": "",
        "text": "<p>To make it more readable and maintainable, you can also split it up into multiple LINQ statements.</p>\n\n<ol>\n<li>First, select your data into a new list, let's call it <code>x1</code>, do a projection if desired</li>\n<li>Next, create a distinct list, from <code>x1</code> into <code>x2</code>, using whatever distinction you require</li>\n<li>Finally, create an ordered list, from <code>x2</code> into <code>x3</code>, sorting by whatever you desire </li>\n</ol>\n",
        "votes": "37",
        "tags": "",
        "accepted": true
      },
      {
        "id": "51021828",
        "title": "",
        "text": "<p>You can use something like that:</p>\n\n<pre><code>dataTable.Rows.Cast&lt;DataRow&gt;().GroupBy(g =&gt; g[\"Name\"]).Select(s =&gt; s.First()).OrderBy(o =&gt; o[\"Name\"]);\n</code></pre>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "4313",
        "title": "",
        "text": "<p>Try the following</p>\n\n<pre><code>var names = (from dr in dataTable.Rows\n             select (string)dr[\"Name\"]).Distinct().OrderBy(name =&gt; name);\n</code></pre>\n\n<p>this should work for what you need.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "342600",
        "title": "",
        "text": "<pre><code>var sortedTable = (from results in resultTable.AsEnumerable()\nselect (string)results[attributeList]).Distinct().OrderBy(name =&gt; name);\n</code></pre>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "66",
    "url": "https://stackoverflow.com/questions/66",
    "title": "Paging a collection with LINQ",
    "text:": "<p>How do you page through a collection in LINQ given that you have a <code>startIndex</code> and a <code>count</code>?</p>\n",
    "codes": [
      [
        "var query = from i in ideas\n            select i;\nvar pagedCollection = query.InPagesOf(10);\nvar pageOfIdeas = pagedCollection.Page(2);\n"
      ],
      [
        "var query = from i in ideas\n            select i;\n\nvar paggedCollection = query.Skip(startIndex).Take(count);\n"
      ],
      [
        "const int pageSize = 10;\nconst int count = 100;\nconst int startIndex = 20;\n\nint took = 0;\nbool getNextPage;\nvar page = ideas.Skip(startIndex);\n\ndo\n{\n    Console.WriteLine(\"Page {0}:\", (took / pageSize) + 1);\n    foreach (var idea in page.Take(pageSize))\n    {\n        Console.WriteLine(idea);\n    }\n\n    took += pageSize;\n    if (took < count)\n    {\n        Console.WriteLine(\"Next page (y/n)?\");\n        char answer = Console.ReadLine().FirstOrDefault();\n        getNextPage = default(char) != answer && 'y' == char.ToLowerInvariant(answer);\n\n        if (getNextPage)\n        {\n            page = page.Skip(pageSize);\n        }\n    }\n}\nwhile (getNextPage && took < count);\n",
        "const int pageSize = 10;\nconst int count = 100;\nconst int startIndex = 20;\n\nint took = 0;\nbool getNextPage = true;\nusing (var page = ideas.Skip(startIndex).GetEnumerator())\n{\n    do \n    {\n        Console.WriteLine(\"Page {0}:\", (took / pageSize) + 1);\n\n        int currentPageItemNo = 0;\n        while (currentPageItemNo++ < pageSize && page.MoveNext())\n        {\n            var idea = page.Current;\n            Console.WriteLine(idea);\n        }\n\n        took += pageSize;\n        if (took < count)\n        {\n            Console.WriteLine(\"Next page (y/n)?\");\n            char answer = Console.ReadLine().FirstOrDefault();\n            getNextPage = default(char) != answer && 'y' == char.ToLowerInvariant(answer);\n        }\n    }\n    while (getNextPage && took < count);\n}\n"
      ],
      [
        "// assumes that the item collection is \"myItems\"\n\nint pageCount = (myItems.Count + PageSize - 1) / PageSize;\n\nIEnumerable<int> pageRange = Enumerable.Range(1, pageCount);\n   // pageRange contains [1, 2, ... , pageCount]\n",
        "IEnumerable<IEnumerable<Item>> pageRange\n    .Select((page, index) => \n        myItems\n            .Skip(index*PageSize)\n            .Take(PageSize));\n",
        "var pages = Enumerable\n    .Range(0, pageCount)\n    .Select((index) => myItems.Skip(index*PageSize).Take(PageSize));\n",
        "for (Enumerable<Item> page : pages) \n{\n    // handle page\n\n    for (Item item : page) \n    {\n        // handle item in page\n    }\n}\n"
      ]
    ],
    "votes:": "85",
    "tags": "<linq><.net-3.5>",
    "AcceptedAnswerId": "4521",
    "answers": [
      {
        "id": "4521",
        "title": "",
        "text": "<p>A few months back I wrote a blog post about  Fluent Interfaces and LINQ which used an Extension Method on <code>IQueryable&lt;T&gt;</code> and another class to provide the following natural way of paginating a LINQ collection.</p>\n\n<pre><code>var query = from i in ideas\n            select i;\nvar pagedCollection = query.InPagesOf(10);\nvar pageOfIdeas = pagedCollection.Page(2);\n</code></pre>\n\n<p>You can get the code from the MSDN Code Gallery Page: <a href=\"http://code.msdn.microsoft.com/productschallenge\" rel=\"noreferrer\">Pipelines, Filters, Fluent API and LINQ to SQL</a>.</p>\n",
        "votes": "43",
        "tags": "",
        "accepted": true
      },
      {
        "id": "68",
        "title": "",
        "text": "<p>It is very simple with the <code>Skip</code> and <code>Take</code> extension methods.</p>\n\n<pre><code>var query = from i in ideas\n            select i;\n\nvar paggedCollection = query.Skip(startIndex).Take(count);\n</code></pre>\n",
        "votes": "64",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6719914",
        "title": "",
        "text": "<p>This question is somewhat old, but I wanted to post my paging algorithm that shows the whole procedure (including user interaction).</p>\n\n<pre><code>const int pageSize = 10;\nconst int count = 100;\nconst int startIndex = 20;\n\nint took = 0;\nbool getNextPage;\nvar page = ideas.Skip(startIndex);\n\ndo\n{\n    Console.WriteLine(\"Page {0}:\", (took / pageSize) + 1);\n    foreach (var idea in page.Take(pageSize))\n    {\n        Console.WriteLine(idea);\n    }\n\n    took += pageSize;\n    if (took &lt; count)\n    {\n        Console.WriteLine(\"Next page (y/n)?\");\n        char answer = Console.ReadLine().FirstOrDefault();\n        getNextPage = default(char) != answer &amp;&amp; 'y' == char.ToLowerInvariant(answer);\n\n        if (getNextPage)\n        {\n            page = page.Skip(pageSize);\n        }\n    }\n}\nwhile (getNextPage &amp;&amp; took &lt; count);\n</code></pre>\n\n<p>However, if you are after performance, and in production code, we're all after performance, you shouldn't use LINQ's paging as shown above, but rather the underlying <code>IEnumerator</code> to implement paging yourself. As a matter of fact, it is as simple as the LINQ-algorithm shown above, but more performant:</p>\n\n<pre><code>const int pageSize = 10;\nconst int count = 100;\nconst int startIndex = 20;\n\nint took = 0;\nbool getNextPage = true;\nusing (var page = ideas.Skip(startIndex).GetEnumerator())\n{\n    do \n    {\n        Console.WriteLine(\"Page {0}:\", (took / pageSize) + 1);\n\n        int currentPageItemNo = 0;\n        while (currentPageItemNo++ &lt; pageSize &amp;&amp; page.MoveNext())\n        {\n            var idea = page.Current;\n            Console.WriteLine(idea);\n        }\n\n        took += pageSize;\n        if (took &lt; count)\n        {\n            Console.WriteLine(\"Next page (y/n)?\");\n            char answer = Console.ReadLine().FirstOrDefault();\n            getNextPage = default(char) != answer &amp;&amp; 'y' == char.ToLowerInvariant(answer);\n        }\n    }\n    while (getNextPage &amp;&amp; took &lt; count);\n}\n</code></pre>\n\n<p>Explanation: The downside of using <code>Skip()</code> for multiple times in a \"cascading manner\" is, that it will not really store the \"pointer\" of the iteration, where it was last skipped. - Instead the original sequence will be front-loaded with skip calls, which will lead to \"consuming\" the already \"consumed\" pages over and over again. - You can prove that yourself, when you create the sequence <code>ideas</code> so that it yields side effects. -> Even if you have skipped 10-20 and 20-30 and want to process 40+, you'll see all side effects of 10-30 being executed again, before you start iterating 40+.\nThe variant using <code>IEnumerable</code>'s interface directly, will instead remember the position of the end of the last logical page, so no explicit skipping is needed and side effects won't be repeated.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "9787122",
        "title": "",
        "text": "<p>I solved this a bit differently than what the others have as I had to make my own paginator, with a repeater. So I first made a collection of page numbers for the collection of items that I have:</p>\n\n<pre><code>// assumes that the item collection is \"myItems\"\n\nint pageCount = (myItems.Count + PageSize - 1) / PageSize;\n\nIEnumerable&lt;int&gt; pageRange = Enumerable.Range(1, pageCount);\n   // pageRange contains [1, 2, ... , pageCount]\n</code></pre>\n\n<p>Using this I could easily partition the item collection into a collection of \"pages\". A page in this case is just a collection of items (<code>IEnumerable&lt;Item&gt;</code>). This is how you can do it using <code>Skip</code> and <code>Take</code> together with selecting the index from the <code>pageRange</code> created above:</p>\n\n<pre><code>IEnumerable&lt;IEnumerable&lt;Item&gt;&gt; pageRange\n    .Select((page, index) =&gt; \n        myItems\n            .Skip(index*PageSize)\n            .Take(PageSize));\n</code></pre>\n\n<p>Of course you have to handle each page as an additional collection but e.g. if you're nesting repeaters then this is actually easy to handle.</p>\n\n<hr>\n\n<p>The <em>one-liner TLDR</em> version would be this:</p>\n\n<pre><code>var pages = Enumerable\n    .Range(0, pageCount)\n    .Select((index) =&gt; myItems.Skip(index*PageSize).Take(PageSize));\n</code></pre>\n\n<p>Which can be used as this:</p>\n\n<pre><code>for (Enumerable&lt;Item&gt; page : pages) \n{\n    // handle page\n\n    for (Item item : page) \n    {\n        // handle item in page\n    }\n}\n</code></pre>\n",
        "votes": "14",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "79",
    "url": "https://stackoverflow.com/questions/79",
    "title": "Getting Subclipse in Aptana to work with the newest release of Subversion",
    "text:": "<p>The version of <strong>Subclipse (1.2.4)</strong> currently available through Aptana's automatic <em>Plugins Manager</em> does not work with the newest version of Subversion.</p>\n\n<p>I see on the Subclipse website however that they have 1.4.2 out for Eclipse. So I added a <a href=\"http://subclipse.tigris.org/update_1.4.x\" rel=\"noreferrer\">new remote update site</a> to my Update manager. When I tried to install it, it told me I needed <strong>Mylyn 3.0.0</strong>. So after much searching I found Mylyn 3.0.0 and added <a href=\"http://download.eclipse.org/tools/mylyn/update/e3.3\" rel=\"noreferrer\">another new remote update site</a> to my update manager. Then when I tried to install that, it told me I needed <strong>org.eclipse.ui 3.3.0</strong> or equivalent.</p>\n\n<p>Looking at the configuration details for Aptana, it looks like it is built against eclipse 3.2.2.</p>\n\n<p>Does anyone know if there is a way to upgrade the version of Eclipse Aptana that is built against to 3.3.0? Or if there is some other way to get Subclipse to work with the very newest version of Subversion?</p>\n\n<p>I know this isn't necessarily a \"programming\" question, but I hope it's ok since it's highly relevant to the programming experience.</p>\n",
    "codes": [
      [],
      [],
      [],
      []
    ],
    "votes:": "46",
    "tags": "<eclipse><svn><aptana><subclipse>",
    "AcceptedAnswerId": "62853",
    "answers": [
      {
        "id": "28059",
        "title": "",
        "text": "<p>I used the update url and I installed the JavaHL adapter, the Subclipse project itself <b>and</b> the SVNKit adapter BETA.</p>\n\n<p>After this it worked fine for me, this is for linux platform hope it works for you.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "33670",
        "title": "",
        "text": "<p>if you're not going to be using mylyn just uncheck that dependency. I'm not really familiar with Aptana, but in eclipse you can expand whats being installed and uncheck anything you don't need.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "89",
        "title": "",
        "text": "<p>I've had problems with JavaHL in Eclipse Ganymede, when it worked fine in Eclipse Europa.  I'm not sure how Aptana is different, but try either upgrading JavaHL or switching to the pure-java SVNKit implementation within the Subclipse config.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "62853",
        "title": "",
        "text": "<p>Subclipse does not require Mylyn, but the update site includes a plugin that integrates Mylyn and Subclipse.  This is intended for people that use Mylyn.  In your case, you would want to just de-select Mylyn in the update dialog.</p>\n\n<p>Subclipse also requires Subversion 1.5 and the corresponding version of the JavaHL native libraries.  I have written the start of an FAQ to help people understand JavaHL and how to get it.  See: <a href=\"http://desktop-eclipse.open.collab.net/wiki/JavaHL\" rel=\"noreferrer\">http://desktop-eclipse.open.collab.net/wiki/JavaHL</a></p>\n",
        "votes": "18",
        "tags": "",
        "accepted": true
      }
    ]
  },
  {
    "id:": "80",
    "url": "https://stackoverflow.com/questions/80",
    "title": "SQLStatement.execute() - multiple queries in one statement",
    "text:": "<p>I've written a database generation script in <a href=\"http://en.wikipedia.org/wiki/SQL\" rel=\"noreferrer\">SQL</a> and want to execute it in my <a href=\"http://en.wikipedia.org/wiki/Adobe_Integrated_Runtime\" rel=\"noreferrer\">Adobe AIR</a> application:</p>\n\n<pre><code>Create Table tRole (\n    roleID integer Primary Key\n    ,roleName varchar(40)\n);\nCreate Table tFile (\n    fileID integer Primary Key\n    ,fileName varchar(50)\n    ,fileDescription varchar(500)\n    ,thumbnailID integer\n    ,fileFormatID integer\n    ,categoryID integer\n    ,isFavorite boolean\n    ,dateAdded date\n    ,globalAccessCount integer\n    ,lastAccessTime date\n    ,downloadComplete boolean\n    ,isNew boolean\n    ,isSpotlight boolean\n    ,duration varchar(30)\n);\nCreate Table tCategory (\n    categoryID integer Primary Key\n    ,categoryName varchar(50)\n    ,parent_categoryID integer\n);\n...\n</code></pre>\n\n<p>I execute this in Adobe AIR using the following methods:</p>\n\n<pre><code>public static function RunSqlFromFile(fileName:String):void {\n    var file:File = File.applicationDirectory.resolvePath(fileName);\n    var stream:FileStream = new FileStream();\n    stream.open(file, FileMode.READ)\n    var strSql:String = stream.readUTFBytes(stream.bytesAvailable);\n    NonQuery(strSql);\n}\n\npublic static function NonQuery(strSQL:String):void {\n    var sqlConnection:SQLConnection = new SQLConnection();\n    sqlConnection.open(File.applicationStorageDirectory.resolvePath(DBPATH));\n    var sqlStatement:SQLStatement = new SQLStatement();\n    sqlStatement.text = strSQL;\n    sqlStatement.sqlConnection = sqlConnection;\n    try {\n        sqlStatement.execute();\n    } catch (error:SQLError) {\n        Alert.show(error.toString());\n    }\n}\n</code></pre>\n\n<p>No errors are generated, however only <code>tRole</code> exists. It seems that it only looks at the first query (up to the semicolon- if I remove it, the query fails). Is there a way to call multiple queries in one statement?</p>\n",
    "codes": [
      [],
      [],
      [
        "var strSql:String = stream.readUTFBytes(stream.bytesAvailable);      \nvar i:Number = 0;\nvar strSqlSplit:Array = strSql.split(\";\");\nfor (i = 0; i < strSqlSplit.length; i++){\n    NonQuery(strSqlSplit[i].toString());\n}\n"
      ]
    ],
    "votes:": "48",
    "tags": "<apache-flex><actionscript-3><air>",
    "AcceptedAnswerId": "124",
    "answers": [
      {
        "id": "10008",
        "title": "",
        "text": "<p>The <a href=\"http://en.wikipedia.org/wiki/SQLite\" rel=\"noreferrer\">SQLite</a> API has a function called something like <code>sqlite_prepare</code> which takes <em>one</em> statement and prepares it for execution, essentially parsing the SQL and storing it in memory. This means that the SQL only has to be sent once to the database engine even though the statement is executed many times.</p>\n\n<p>Anyway, a statement is a single SQL query, that's just the rule. The AIR SQL API doesn't allow sending raw SQL to SQLite, only single statements, and the reason is, likely, that AIR uses the <code>sqlite_prepare</code> function when it talks to SQLite.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3770976",
        "title": "",
        "text": "<p>What about making your delimiter something a little more complex like \";\\n\" which would not show up all that often. You just have to ensure when creating the file you have a line return or two in there. I end up putting two \"\\n\\n\" into the creation of my files which works well.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "124",
        "title": "",
        "text": "<p>I wound up using this. It is a kind of a hack, but it actually works pretty well. </p>\n\n<p>The only thing is you have to be very careful with your semicolons. : D</p>\n\n<pre><code>var strSql:String = stream.readUTFBytes(stream.bytesAvailable);      \nvar i:Number = 0;\nvar strSqlSplit:Array = strSql.split(\";\");\nfor (i = 0; i &lt; strSqlSplit.length; i++){\n    NonQuery(strSqlSplit[i].toString());\n}\n</code></pre>\n",
        "votes": "22",
        "tags": "",
        "accepted": true
      }
    ]
  },
  {
    "id:": "85",
    "url": "https://stackoverflow.com/questions/85",
    "title": "Flat file databases",
    "text:": "<p>What are the best practices around creating flat file database structures in PHP?</p>\n\n<p>A lot of more matured PHP flat file frameworks out there which I attempt to implement SQL-like query syntax which is over the top for my purposes in most cases. (I would just use a database at that point).</p>\n\n<p>Are there any elegant tricks out there to get good performance and features with a small code overhead?</p>\n",
    "codes": [
      [
        "./content/YYYYMMDDHHMMSS/\n",
        "/tags  \n/authors  \n/comments  \n",
        "glob(\"content/*/tags/funny\");  \n"
      ],
      [],
      [],
      [
        "- STRUCTURED\nRegular (table, row, column) format.\n[DATABASE]\n/   \\\nTX  TableY\n    \\_____________________________\n    |ROW_0 Colum_0 Colum_1 Colum_2|\n    |ROW_1 Colum_0 Colum_1 Colum_2|\n    |_____________________________|\n- FREE\nMore creative data storing. You can store data in any structure you want for each (free) element, its similar to storing an array with a unique \"Id\".\n[DATABASE]\n/   \\\nEX  ElementY (ID)\n    \\________________\n    |Field_0 Value_0 |\n    |Field_1 Value_1 |\n    |Field_2 Value_2 |\n    |________________|\nrecall [ID]: get_free(\"ElementY\") --> array([Field_0]=>Value_0,[Field_1]=>Value_1...\n- MIXD (Mixed)\nMixed databases can store both free elements and tables.If you add a table to a free db or a free element to a structured db, flat fire will automatically convert FREE or SRCT to MIXD database.\n[DATABASE]\n/   \\\nEX  TY\n"
      ],
      [
        "<?php\n/**\n * Handler for persistent data files\n *\n * @author Ryan McCue <cubegames@gmail.com>\n * @package Lilina\n * @version 1.0\n * @license http://opensource.org/licenses/gpl-license.php GNU Public License\n */\n\n/**\n * Handler for persistent data files\n *\n * @package Lilina\n */\nclass DataHandler {\n    /**\n     * Directory to store data.\n     *\n     * @since 1.0\n     *\n     * @var string\n     */\n    protected $directory;\n\n    /**\n     * Constructor, duh.\n     *\n     * @since 1.0\n     * @uses $directory Holds the data directory, which the constructor sets.\n     *\n     * @param string $directory \n     */\n    public function __construct($directory = null) {\n        if ($directory === null)\n            $directory = get_data_dir();\n\n        if (substr($directory, -1) != '/')\n            $directory .= '/';\n\n        $this->directory = (string) $directory;\n    }\n\n    /**\n     * Prepares filename and content for saving\n     *\n     * @since 1.0\n     * @uses $directory\n     * @uses put()\n     *\n     * @param string $filename Filename to save to\n     * @param string $content Content to save to cache\n     */\n    public function save($filename, $content) {\n        $file = $this->directory . $filename;\n\n        if(!$this->put($file, $content)) {\n            trigger_error(get_class($this) . \" error: Couldn't write to $file\", E_USER_WARNING);\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Saves data to file\n     *\n     * @since 1.0\n     * @uses $directory\n     *\n     * @param string $file Filename to save to\n     * @param string $data Data to save into $file\n     */\n    protected function put($file, $data, $mode = false) {\n        if(file_exists($file) && file_get_contents($file) === $data) {\n            touch($file);\n            return true;\n        }\n\n        if(!$fp = @fopen($file, 'wb')) {\n            return false;\n        }\n\n        fwrite($fp, $data);\n        fclose($fp);\n\n        $this->chmod($file, $mode);\n        return true;\n\n    }\n\n    /**\n     * Change the file permissions\n     *\n     * @since 1.0\n     *\n     * @param string $file Absolute path to file\n     * @param integer $mode Octal mode\n     */\n    protected function chmod($file, $mode = false){\n        if(!$mode)\n            $mode = 0644;\n        return @chmod($file, $mode);\n    }\n\n    /**\n     * Returns the content of the cached file if it is still valid\n     *\n     * @since 1.0\n     * @uses $directory\n     * @uses check() Check if cache file is still valid\n     *\n     * @param string $id Unique ID for content type, used to distinguish between different caches\n     * @return null|string Content of the cached file if valid, otherwise null\n     */\n    public function load($filename) {\n        return $this->get($this->directory . $filename);\n    }\n\n    /**\n     * Returns the content of the file\n     *\n     * @since 1.0\n     * @uses $directory\n     * @uses check() Check if file is valid\n     *\n     * @param string $id Filename to load data from\n     * @return bool|string Content of the file if valid, otherwise null\n     */\n    protected function get($filename) {\n        if(!$this->check($filename))\n            return null;\n\n        return file_get_contents($filename);\n    }\n\n    /**\n     * Check a file for validity\n     *\n     * Basically just a fancy alias for file_exists(), made primarily to be\n     * overriden.\n     *\n     * @since 1.0\n     * @uses $directory\n     *\n     * @param string $id Unique ID for content type, used to distinguish between different caches\n     * @return bool False if the cache doesn't exist or is invalid, otherwise true\n     */\n    protected function check($filename){\n        return file_exists($filename);\n    }\n\n    /**\n     * Delete a file\n     *\n     * @param string $filename Unique ID\n     */\n    public function delete($filename) {\n        return unlink($this->directory . $filename);\n    }\n}\n\n?>\n"
      ],
      [
        "<?php\nfunction varname(&$var) {\n    $oldvalue=$var;\n    $var='AAAAB3NzaC1yc2EAAAABIwAAAQEAqytmUAQKMOj24lAjqKJC2Gyqhbhb+DmB9eDDb8+QcFI+QOySUpYDn884rgKB6EAtoFyOZVMA6HlNj0VxMKAGE+sLTJ40rLTcieGRCeHJ/TI37e66OrjxgB+7tngKdvoG5EF9hnoGc4eTMpVUDdpAK3ykqR1FIclgk0whV7cEn/6K4697zgwwb5R2yva/zuTX+xKRqcZvyaF3Ur0Q8T+gvrAX8ktmpE18MjnA5JuGuZFZGFzQbvzCVdN52nu8i003GEFmzp0Ny57pWClKkAy3Q5P5AR2BCUwk8V0iEX3iu7J+b9pv4LRZBQkDujaAtSiAaeG2cjfzL9xIgWPf+J05IQ==';\n    foreach($GLOBALS as $var_name => $value) {\n        if ($value === 'AAAAB3NzaC1yc2EAAAABIwAAAQEAqytmUAQKMOj24lAjqKJC2Gyqhbhb+DmB9eDDb8+QcFI+QOySUpYDn884rgKB6EAtoFyOZVMA6HlNj0VxMKAGE+sLTJ40rLTcieGRCeHJ/TI37e66OrjxgB+7tngKdvoG5EF9hnoGc4eTMpVUDdpAK3ykqR1FIclgk0whV7cEn/6K4697zgwwb5R2yva/zuTX+xKRqcZvyaF3Ur0Q8T+gvrAX8ktmpE18MjnA5JuGuZFZGFzQbvzCVdN52nu8i003GEFmzp0Ny57pWClKkAy3Q5P5AR2BCUwk8V0iEX3iu7J+b9pv4LRZBQkDujaAtSiAaeG2cjfzL9xIgWPf+J05IQ==')\n        {\n            $var=$oldvalue;\n            return $var_name;\n        }\n    }\n    $var=$oldvalue;\n    return false;\n}\n\nfunction putphp(&$var, $file=false)\n    {\n    $varname=varname($var);\n    if(!$file)\n    {\n        $file=$varname.'.php';\n    }\n    $pathinfo=pathinfo($file);\n    if(file_exists($file))\n    {\n        if(is_dir($file))\n        {\n            $file=$pathinfo['dirname'].'/'.$pathinfo['basename'].'/'.$varname.'.php';\n        }\n    }\n    file_put_contents($file,'<?php'.\"\\n\\$\".$varname.'='.var_export($var, true).\";\\n\");\n    return true;\n}\n"
      ],
      [
        "$user = array(\"name\" => \"dubayou\", \n              \"age\" => 20,\n              \"websites\" => array(\"dubayou.com\",\"willwharton.com\",\"codecream.com\"),\n              \"and_one\" => \"more\");\n",
        "$dir = \"../userdata/\";  //make sure to put it bellow what the server can reach.\nfile_put_contents($dir.$user['name'],serialize($user));\n",
        "function &get_user($name){\n    return unserialize(file_get_contents(\"../userdata/\".$name));\n}\n"
      ],
      [],
      [
        "data|some text|more data\n\nrow 2 data|bla hbalh|more data\n"
      ],
      [],
      [
        "ofaurax|27|male|something|\nanother|24|unknown||\n...\n"
      ]
    ],
    "votes:": "121",
    "tags": "<php><sql><database><flat-file>",
    "AcceptedAnswerId": "154",
    "answers": [
      {
        "id": "87",
        "title": "",
        "text": "<p>One framework I'm considering would be for a blogging platform. Since just about any possible view of data you would want would be sorted by date, I was thinking about this structure:</p>\n\n<p>One directory per content node:</p>\n\n<pre><code>./content/YYYYMMDDHHMMSS/\n</code></pre>\n\n<p>Subdirectories of each node including  </p>\n\n<pre><code>/tags  \n/authors  \n/comments  \n</code></pre>\n\n<p>As well as simple text files in the node directory for pre- and post-rendered content and the like.</p>\n\n<p>This would allow a simple PHP <a href=\"http://us3.php.net/glob\" rel=\"noreferrer\"><code>glob()</code></a> call (and probably a reversal of the result array) to query on just about anything within the content structure:</p>\n\n<pre><code>glob(\"content/*/tags/funny\");  \n</code></pre>\n\n<p>Would return paths including all articles tagged \"funny\".</p>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "13670880",
        "title": "",
        "text": "<p>IMHO, you have two options if you want to avoid homebrewing something:</p>\n\n<ol>\n<li><p><strong>SQLite</strong></p>\n\n<p>If you're familiar with PDO, you can install a PDO driver that supports SQLite.  Never used it, but I have used PDO a ton with MySQL.  I'm going to give this a shot on a current project.</p></li>\n<li><p><strong>XML</strong></p>\n\n<p>Done this many times for relatively small amounts of data.  <a href=\"http://us1.php.net/manual/en/intro.xmlreader.php\" rel=\"noreferrer\">XMLReader</a> is a lightweight, read-forward, cursor-style class.  <a href=\"http://us1.php.net/manual/en/intro.simplexml.php\" rel=\"noreferrer\">SimpleXML</a> makes it simple to read an XML document into an object that you can access just like any other class instance.</p></li>\n</ol>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "111609",
        "title": "",
        "text": "<p>In my opinion, using a \"Flat File Database\" in the sense you're meaning (and the answer you've accepted) isn't neccesarily the best way to go about things. First of all, using <code>serialize()</code> and <code>unserialize()</code> can cause MAJOR headaches if someone gets in and edits the file (they can, in fact, put arbritrary code in your \"database\" to be run each time.)</p>\n\n<p>Personally, I'd say - why not look to the future? There have been so many times that I've had issues because I've been creating my own \"proprietary\" files, and the project has exploded to a point where it needs a database, and I'm thinking \"you know, I wish I'd written this for a database to start with\" - because the refactoring of the code takes way too much time and effort.</p>\n\n<p>From this I've learnt that future proofing my application so that when it gets bigger I don't have to go and spend days refactoring is the way to go forward. How do I do this?</p>\n\n<p>SQLite. It works as a database, uses SQL, and is pretty easy to change over to mySQL (espescially if you're using abstracted classes for database manipulation like I do!)</p>\n\n<p>In fact, espescially with the \"accepted answer\"'s method, it can drastically cut the memory usage of your app (you don't have to load all the \"RECORDS\" into PHP)</p>\n",
        "votes": "21",
        "tags": "",
        "accepted": false
      },
      {
        "id": "16339974",
        "title": "",
        "text": "<p>This one is inspiring as a practical solution:<br>\n<a href=\"https://github.com/mhgolkar/FlatFire\" rel=\"noreferrer\">https://github.com/mhgolkar/FlatFire</a><br>\nIt uses multiple strategies to handling data...<br>\n[Copied from Readme File]</p>\n\n<h3>Free or Structured or Mixed</h3>\n\n<pre><code>- STRUCTURED\nRegular (table, row, column) format.\n[DATABASE]\n/   \\\nTX  TableY\n    \\_____________________________\n    |ROW_0 Colum_0 Colum_1 Colum_2|\n    |ROW_1 Colum_0 Colum_1 Colum_2|\n    |_____________________________|\n- FREE\nMore creative data storing. You can store data in any structure you want for each (free) element, its similar to storing an array with a unique \"Id\".\n[DATABASE]\n/   \\\nEX  ElementY (ID)\n    \\________________\n    |Field_0 Value_0 |\n    |Field_1 Value_1 |\n    |Field_2 Value_2 |\n    |________________|\nrecall [ID]: get_free(\"ElementY\") --&gt; array([Field_0]=&gt;Value_0,[Field_1]=&gt;Value_1...\n- MIXD (Mixed)\nMixed databases can store both free elements and tables.If you add a table to a free db or a free element to a structured db, flat fire will automatically convert FREE or SRCT to MIXD database.\n[DATABASE]\n/   \\\nEX  TY\n</code></pre>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "242850",
        "title": "",
        "text": "<p>Here's the code we use for Lilina:</p>\n\n<pre><code>&lt;?php\n/**\n * Handler for persistent data files\n *\n * @author Ryan McCue &lt;cubegames@gmail.com&gt;\n * @package Lilina\n * @version 1.0\n * @license http://opensource.org/licenses/gpl-license.php GNU Public License\n */\n\n/**\n * Handler for persistent data files\n *\n * @package Lilina\n */\nclass DataHandler {\n    /**\n     * Directory to store data.\n     *\n     * @since 1.0\n     *\n     * @var string\n     */\n    protected $directory;\n\n    /**\n     * Constructor, duh.\n     *\n     * @since 1.0\n     * @uses $directory Holds the data directory, which the constructor sets.\n     *\n     * @param string $directory \n     */\n    public function __construct($directory = null) {\n        if ($directory === null)\n            $directory = get_data_dir();\n\n        if (substr($directory, -1) != '/')\n            $directory .= '/';\n\n        $this-&gt;directory = (string) $directory;\n    }\n\n    /**\n     * Prepares filename and content for saving\n     *\n     * @since 1.0\n     * @uses $directory\n     * @uses put()\n     *\n     * @param string $filename Filename to save to\n     * @param string $content Content to save to cache\n     */\n    public function save($filename, $content) {\n        $file = $this-&gt;directory . $filename;\n\n        if(!$this-&gt;put($file, $content)) {\n            trigger_error(get_class($this) . \" error: Couldn't write to $file\", E_USER_WARNING);\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Saves data to file\n     *\n     * @since 1.0\n     * @uses $directory\n     *\n     * @param string $file Filename to save to\n     * @param string $data Data to save into $file\n     */\n    protected function put($file, $data, $mode = false) {\n        if(file_exists($file) &amp;&amp; file_get_contents($file) === $data) {\n            touch($file);\n            return true;\n        }\n\n        if(!$fp = @fopen($file, 'wb')) {\n            return false;\n        }\n\n        fwrite($fp, $data);\n        fclose($fp);\n\n        $this-&gt;chmod($file, $mode);\n        return true;\n\n    }\n\n    /**\n     * Change the file permissions\n     *\n     * @since 1.0\n     *\n     * @param string $file Absolute path to file\n     * @param integer $mode Octal mode\n     */\n    protected function chmod($file, $mode = false){\n        if(!$mode)\n            $mode = 0644;\n        return @chmod($file, $mode);\n    }\n\n    /**\n     * Returns the content of the cached file if it is still valid\n     *\n     * @since 1.0\n     * @uses $directory\n     * @uses check() Check if cache file is still valid\n     *\n     * @param string $id Unique ID for content type, used to distinguish between different caches\n     * @return null|string Content of the cached file if valid, otherwise null\n     */\n    public function load($filename) {\n        return $this-&gt;get($this-&gt;directory . $filename);\n    }\n\n    /**\n     * Returns the content of the file\n     *\n     * @since 1.0\n     * @uses $directory\n     * @uses check() Check if file is valid\n     *\n     * @param string $id Filename to load data from\n     * @return bool|string Content of the file if valid, otherwise null\n     */\n    protected function get($filename) {\n        if(!$this-&gt;check($filename))\n            return null;\n\n        return file_get_contents($filename);\n    }\n\n    /**\n     * Check a file for validity\n     *\n     * Basically just a fancy alias for file_exists(), made primarily to be\n     * overriden.\n     *\n     * @since 1.0\n     * @uses $directory\n     *\n     * @param string $id Unique ID for content type, used to distinguish between different caches\n     * @return bool False if the cache doesn't exist or is invalid, otherwise true\n     */\n    protected function check($filename){\n        return file_exists($filename);\n    }\n\n    /**\n     * Delete a file\n     *\n     * @param string $filename Unique ID\n     */\n    public function delete($filename) {\n        return unlink($this-&gt;directory . $filename);\n    }\n}\n\n?&gt;\n</code></pre>\n\n<p>It stores each entry as a separate file, which we found is efficient enough for use (no unneeded data is loaded and it's faster to save).</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "13960906",
        "title": "",
        "text": "<p>I have written two simple functions designed to store data in a file. You can judge for yourself if it's useful in this case.\nThe point is to save a php variable (if it's either an array a string or an object) to a file.</p>\n\n<pre><code>&lt;?php\nfunction varname(&amp;$var) {\n    $oldvalue=$var;\n    $var='AAAAB3NzaC1yc2EAAAABIwAAAQEAqytmUAQKMOj24lAjqKJC2Gyqhbhb+DmB9eDDb8+QcFI+QOySUpYDn884rgKB6EAtoFyOZVMA6HlNj0VxMKAGE+sLTJ40rLTcieGRCeHJ/TI37e66OrjxgB+7tngKdvoG5EF9hnoGc4eTMpVUDdpAK3ykqR1FIclgk0whV7cEn/6K4697zgwwb5R2yva/zuTX+xKRqcZvyaF3Ur0Q8T+gvrAX8ktmpE18MjnA5JuGuZFZGFzQbvzCVdN52nu8i003GEFmzp0Ny57pWClKkAy3Q5P5AR2BCUwk8V0iEX3iu7J+b9pv4LRZBQkDujaAtSiAaeG2cjfzL9xIgWPf+J05IQ==';\n    foreach($GLOBALS as $var_name =&gt; $value) {\n        if ($value === 'AAAAB3NzaC1yc2EAAAABIwAAAQEAqytmUAQKMOj24lAjqKJC2Gyqhbhb+DmB9eDDb8+QcFI+QOySUpYDn884rgKB6EAtoFyOZVMA6HlNj0VxMKAGE+sLTJ40rLTcieGRCeHJ/TI37e66OrjxgB+7tngKdvoG5EF9hnoGc4eTMpVUDdpAK3ykqR1FIclgk0whV7cEn/6K4697zgwwb5R2yva/zuTX+xKRqcZvyaF3Ur0Q8T+gvrAX8ktmpE18MjnA5JuGuZFZGFzQbvzCVdN52nu8i003GEFmzp0Ny57pWClKkAy3Q5P5AR2BCUwk8V0iEX3iu7J+b9pv4LRZBQkDujaAtSiAaeG2cjfzL9xIgWPf+J05IQ==')\n        {\n            $var=$oldvalue;\n            return $var_name;\n        }\n    }\n    $var=$oldvalue;\n    return false;\n}\n\nfunction putphp(&amp;$var, $file=false)\n    {\n    $varname=varname($var);\n    if(!$file)\n    {\n        $file=$varname.'.php';\n    }\n    $pathinfo=pathinfo($file);\n    if(file_exists($file))\n    {\n        if(is_dir($file))\n        {\n            $file=$pathinfo['dirname'].'/'.$pathinfo['basename'].'/'.$varname.'.php';\n        }\n    }\n    file_put_contents($file,'&lt;?php'.\"\\n\\$\".$varname.'='.var_export($var, true).\";\\n\");\n    return true;\n}\n</code></pre>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "154",
        "title": "",
        "text": "<p>Well, what is the nature of the flat databases.  Are they large or small.  Is it simple arrays with arrays in them?  if its something simple say userprofiles built as such:</p>\n\n<pre><code>$user = array(\"name\" =&gt; \"dubayou\", \n              \"age\" =&gt; 20,\n              \"websites\" =&gt; array(\"dubayou.com\",\"willwharton.com\",\"codecream.com\"),\n              \"and_one\" =&gt; \"more\");\n</code></pre>\n\n<p>and to save or update the <em>db record</em> for that user.</p>\n\n<pre><code>$dir = \"../userdata/\";  //make sure to put it bellow what the server can reach.\nfile_put_contents($dir.$user['name'],serialize($user));\n</code></pre>\n\n<p>and to load the <em>record</em> for the user</p>\n\n<pre><code>function &amp;get_user($name){\n    return unserialize(file_get_contents(\"../userdata/\".$name));\n}\n</code></pre>\n\n<p>but again this implementation will vary on the application and nature of the database you need.</p>\n",
        "votes": "76",
        "tags": "",
        "accepted": true
      },
      {
        "id": "6454",
        "title": "",
        "text": "<p>You might consider <a href=\"http://www.sqlite.org/\" rel=\"noreferrer\">SQLite</a>. It's almost as simple as flat files, but you do get a SQL engine for querying. It <a href=\"http://ca3.php.net/sqlite\" rel=\"noreferrer\">works well with PHP</a> too.</p>\n",
        "votes": "49",
        "tags": "",
        "accepted": false
      },
      {
        "id": "14149357",
        "title": "",
        "text": "<p>Just pointing out a potential problem with a flat file database with this type of system:</p>\n\n<pre><code>data|some text|more data\n\nrow 2 data|bla hbalh|more data\n</code></pre>\n\n<p>...etc</p>\n\n<p>The problem is that the cell data contains a \"|\" or a \"\\n\" then the data will be lost. Sometimes it would be easier to split by combinations of letters that most people wouldn't use.</p>\n\n<p>For example:</p>\n\n<p>Column splitter: <code>#$% (Shift+345)</code></p>\n\n<p>Row splitter: <code>^&amp;* (Shift+678)</code></p>\n\n<p>Text file: <code>test data#$%blah blah#$%^&amp;*new row#$%new row data 2</code></p>\n\n<p>Then use: <code>explode(\"#$%\", $data); use foreach, the explode again to separate columns</code></p>\n\n<p>Or anything along these lines. Also, I might add that flat file databases are good for systems with small amounts of data (ie. less than 20 rows), but become huge memory hogs for larger databases.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "90542",
        "title": "",
        "text": "<p>If you're going to use a flat file to persist data, use XML to structure the data. PHP has a <a href=\"http://uk.php.net/xml\" rel=\"noreferrer\">built-in XML parser</a>.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "90800",
        "title": "",
        "text": "<p>If you want a human-readable result, you can also use this type of file :</p>\n\n<pre><code>ofaurax|27|male|something|\nanother|24|unknown||\n...\n</code></pre>\n\n<p>This way, you have only one file, you can debug it (and manually fix) easily, you can add fields later (at the end of each line) and the PHP code is simple (for each line, split according to |).</p>\n\n<p>However, the drawbacks is that you should parse the entire file to search something (if you have millions of entry, it's not fine) and you should handle the separator in data (for example if the nick is WaR|ordz).</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "88",
    "url": "https://stackoverflow.com/questions/88",
    "title": "Is gettimeofday() guaranteed to be of microsecond resolution?",
    "text:": "<p>I am porting a game, that was originally written for the Win32 API, to Linux (well, porting the OS X port of the Win32 port to Linux).</p>\n\n<p>I have implemented <code>QueryPerformanceCounter</code> by giving the uSeconds since the process start up:     </p>\n\n<pre><code>BOOL QueryPerformanceCounter(LARGE_INTEGER* performanceCount)\n{\n    gettimeofday(&amp;currentTimeVal, NULL);\n    performanceCount-&gt;QuadPart = (currentTimeVal.tv_sec - startTimeVal.tv_sec);\n    performanceCount-&gt;QuadPart *= (1000 * 1000);\n    performanceCount-&gt;QuadPart += (currentTimeVal.tv_usec - startTimeVal.tv_usec);\n\n    return true;\n}\n</code></pre>\n\n<p>This, coupled with <code>QueryPerformanceFrequency()</code> giving a constant 1000000 as the frequency, works well <b>on my machine</b>, giving me a 64-bit variable that contains <code>uSeconds</code> since the program's start-up.</p>\n\n<p>So <em>is this portable?</em> I don't want to discover it works differently if the kernel was compiled in a certain way or anything like that. I am fine with it being non-portable to something other than Linux, however.</p>\n",
    "codes": [
      [],
      [],
      [
        "11867927879484732\n11867927879692217\nit took this long to call printf: 207485\n",
        "#include <stdio.h>\n#include <stdint.h>\n\ninline uint64_t rdtsc() {\n    uint32_t lo, hi;\n    __asm__ __volatile__ (\n      \"xorl %%eax, %%eax\\n\"\n      \"cpuid\\n\"\n      \"rdtsc\\n\"\n      : \"=a\" (lo), \"=d\" (hi)\n      :\n      : \"%ebx\", \"%ecx\");\n    return (uint64_t)hi << 32 | lo;\n}\n\nmain()\n{\n    unsigned long long x;\n    unsigned long long y;\n    x = rdtsc();\n    printf(\"%lld\\n\",x);\n    y = rdtsc();\n    printf(\"%lld\\n\",y);\n    printf(\"it took this long to call printf: %lld\\n\",y-x);\n}\n"
      ],
      [],
      [],
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "96",
    "tags": "<linux><winapi><visual-c++><unix><timer>",
    "AcceptedAnswerId": "98",
    "answers": [
      {
        "id": "99",
        "title": "",
        "text": "<blockquote>\n  <p>The actual resolution of gettimeofday() depends on the hardware architecture. Intel processors as well as SPARC machines offer high resolution timers that measure microseconds. Other hardware architectures fall back to the system\u2019s timer, which is typically set to 100 Hz. In such cases, the time resolution will be less accurate. </p>\n</blockquote>\n\n<p>I obtained this answer from <a href=\"http://web.archive.org/web/20160711223333/http://www.informit.com/guides/content.aspx?g=cplusplus&amp;seqNum=272\" rel=\"nofollow noreferrer\">High Resolution Time Measurement and Timers, Part I</a></p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "93",
        "title": "",
        "text": "<p>From my experience, and from what I've read across the internet, the answer is \"No,\" it is not guaranteed.  It depends on CPU speed, operating system, flavor of Linux, etc.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "367",
        "title": "",
        "text": "<p><strong>High Resolution, Low Overhead Timing for Intel Processors</strong></p>\n\n<p>If you're on Intel hardware, here's how to read the CPU real-time instruction counter.  It will tell you the number of CPU cycles executed since the processor was booted.  This is probably the finest-grained counter you can get for performance measurement.</p>\n\n<p>Note that this is the number of CPU cycles.  On linux you can get the CPU speed from /proc/cpuinfo and divide to get the number of seconds.  Converting this to a double is quite handy.</p>\n\n<p>When I run this on my box, I get</p>\n\n<pre><code>11867927879484732\n11867927879692217\nit took this long to call printf: 207485\n</code></pre>\n\n<p>Here's the <a href=\"http://cs.smu.ca/~jamuir/rdtscpm1.pdf\" rel=\"noreferrer\">Intel developer's guide</a> that  gives tons of detail.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\ninline uint64_t rdtsc() {\n    uint32_t lo, hi;\n    __asm__ __volatile__ (\n      \"xorl %%eax, %%eax\\n\"\n      \"cpuid\\n\"\n      \"rdtsc\\n\"\n      : \"=a\" (lo), \"=d\" (hi)\n      :\n      : \"%ebx\", \"%ecx\");\n    return (uint64_t)hi &lt;&lt; 32 | lo;\n}\n\nmain()\n{\n    unsigned long long x;\n    unsigned long long y;\n    x = rdtsc();\n    printf(\"%lld\\n\",x);\n    y = rdtsc();\n    printf(\"%lld\\n\",y);\n    printf(\"it took this long to call printf: %lld\\n\",y-x);\n}\n</code></pre>\n",
        "votes": "40",
        "tags": "",
        "accepted": false
      },
      {
        "id": "522",
        "title": "",
        "text": "<blockquote>\n  <p>So it says microseconds explicitly, but says the resolution of the system clock is unspecified. I suppose resolution in this context means how the smallest amount it will ever be incremented?</p>\n</blockquote>\n\n<p>The data structure is defined as having microseconds as a unit of measurement, but that doesn't mean that the clock or operating system is actually capable of measuring that finely.</p>\n\n<p>Like other people have suggested, <code>gettimeofday()</code> is bad because setting the time can cause clock skew and throw off your calculation.  <code>clock_gettime(CLOCK_MONOTONIC)</code> is what you want, and <code>clock_getres()</code> will tell you the precision of your clock.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "14807",
        "title": "",
        "text": "<p>Reading the RDTSC is not reliable in SMP systems, since each CPU maintains their own counter and each counter is not guaranteed to by synchronized with respect to another CPU.</p>\n\n<p>I might suggest trying <strong><code>clock_gettime(CLOCK_REALTIME)</code></strong>. The posix manual indicates that this should be implemented on all compliant systems. It can provide a nanosecond count, but you probably will want to check <strong><code>clock_getres(CLOCK_REALTIME)</code></strong> on your system to see what the actual resolution is.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "98",
        "title": "",
        "text": "<p>Maybe. But you have bigger problems. <code>gettimeofday()</code> can result in incorrect timings if there are processes on your system that change the timer (ie, ntpd). On a \"normal\" linux, though, I believe the resolution of <code>gettimeofday()</code> is 10us. It can jump forward and backward and time, consequently, based on the processes running on your system. This effectively makes the answer to your question no.</p>\n\n<p>You should look into <code>clock_gettime(CLOCK_MONOTONIC)</code> for timing intervals. It suffers from several less issues due to things like multi-core systems and external clock settings.</p>\n\n<p>Also, look into the <code>clock_getres()</code> function.</p>\n",
        "votes": "58",
        "tags": "",
        "accepted": true
      },
      {
        "id": "11211298",
        "title": "",
        "text": "<p><a href=\"https://stackoverflow.com/a/98/\">This answer</a> mentions problems with the clock being adjusted. Both your problems guaranteeing tick units and the problems with the time being adjusted are solved in C++11 with the <code>&lt;chrono&gt;</code> library.</p>\n\n<p>The clock <code>std::chrono::steady_clock</code> is guaranteed not to be adjusted, and furthermore it will advance at a constant rate relative to real time, so technologies like SpeedStep must not affect it.</p>\n\n<p>You can get typesafe units by converting to one of the <code>std::chrono::duration</code> specializations, such as <code>std::chrono::microseconds</code>. With this type there's no ambiguity about the units used by the tick value. However, keep in mind that the clock doesn't necessarily have this resolution. You can convert a duration to attoseconds without actually having a clock that accurate.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "931",
        "title": "",
        "text": "<p>@Bernard:</p>\n\n<blockquote>\n  <p>I have to admit, most of your example went straight over my head. It does compile, and seems to work, though. Is this safe for SMP systems or SpeedStep?</p>\n</blockquote>\n\n<p>That's a good question... I think the code's ok.\nFrom a practical standpoint, we use it in my company every day,\nand we run on a pretty wide array of boxes, everything from 2-8 cores.\nOf course, YMMV, etc, but it seems to be a reliable and low-overhead\n(because it doesn't make a context switch into system-space) method\nof timing.</p>\n\n<p>Generally how it works is:</p>\n\n<ul>\n<li>declare the block of code to be assembler (and volatile, so the\noptimizer will leave it alone).</li>\n<li>execute the CPUID instruction.  In addition to getting some CPU information\n(which we don't do anything with) it synchronizes the CPU's execution buffer\nso that the timings aren't affected by out-of-order execution.</li>\n<li>execute the rdtsc (read timestamp) execution.  This fetches the number of\nmachine cycles executed since the processor was reset.  This is a 64-bit\nvalue, so with current CPU speeds it will wrap around every 194 years or so.\nInterestingly, in the original Pentium reference, they note it wraps around every\n5800 years or so.</li>\n<li>the last couple of lines store the values from the registers into\nthe variables hi and lo, and put that into the 64-bit return value.</li>\n</ul>\n\n<p>Specific notes:</p>\n\n<ul>\n<li><p>out-of-order execution can cause incorrect results, so we execute the\n\"cpuid\" instruction which in addition to giving you some information\nabout the cpu also synchronizes any out-of-order instruction execution.</p></li>\n<li><p>Most OS's synchronize the counters on the CPUs when they start, so\nthe answer is good to within a couple of nano-seconds.</p></li>\n<li><p>The hibernating comment is probably true, but in practice you\nprobably don't care about timings across hibernation boundaries.</p></li>\n<li><p>regarding speedstep: Newer Intel CPUs compensate for the speed\nchanges and returns an adjusted count.  I did a quick scan over\nsome of the boxes on our network and found only one box that\ndidn't have it: a Pentium 3 running some old database server.\n(these are linux boxes, so I checked with: grep constant_tsc /proc/cpuinfo)</p></li>\n<li><p>I'm not sure about the AMD CPUs, we're primarily an Intel shop,\nalthough I know some of our low-level systems gurus did an\nAMD evaluation.</p></li>\n</ul>\n\n<p>Hope this satisfies your curiosity, it's an interesting and (IMHO)\nunder-studied area of programming.  You know when Jeff and Joel were\ntalking about whether or not a programmer should know C?  I was\nshouting at them, \"hey forget that high-level C stuff... assembler\nis what you should learn if you want to know what the computer is\ndoing!\"</p>\n",
        "votes": "18",
        "tags": "",
        "accepted": false
      },
      {
        "id": "14817",
        "title": "",
        "text": "<p>You may be interested in <a href=\"http://juliusdavies.ca/posix_clocks/clock_realtime_linux_faq.html\" rel=\"noreferrer\">Linux FAQ for <code>clock_gettime(CLOCK_REALTIME)</code></a></p>\n",
        "votes": "14",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1290",
        "title": "",
        "text": "<p>Wine is actually using gettimeofday() to implement QueryPerformanceCounter() and it is known to make many Windows games work on Linux and Mac.</p>\n\n<p>Starts <a href=\"http://source.winehq.org/source/dlls/kernel32/cpu.c#L312\" rel=\"noreferrer\">http://source.winehq.org/source/dlls/kernel32/cpu.c#L312</a></p>\n\n<p>leads to <a href=\"http://source.winehq.org/source/dlls/ntdll/time.c#L448\" rel=\"noreferrer\">http://source.winehq.org/source/dlls/ntdll/time.c#L448</a></p>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "90",
    "url": "https://stackoverflow.com/questions/90",
    "title": "How do you branch and merge with TortoiseSVN?",
    "text:": "<p>How do you <a href=\"http://svnbook.red-bean.com/en/1.8/svn.branchmerge.html\" rel=\"noreferrer\">branch and merge</a> with Apache Subversion using the TortoiseSVN client? </p>\n",
    "codes": [
      [],
      [],
      []
    ],
    "votes:": "169",
    "tags": "<svn><tortoisesvn><branch><branching-and-merging>",
    "AcceptedAnswerId": "1466832",
    "answers": [
      {
        "id": "92",
        "title": "",
        "text": "<p><a href=\"http://svnbook.red-bean.com/\" rel=\"noreferrer\">Version Control with Subversion</a></p>\n\n<p>A very good resource for source control in general. Not really TortoiseSVN specific, though.</p>\n",
        "votes": "16",
        "tags": "",
        "accepted": false
      },
      {
        "id": "202317",
        "title": "",
        "text": "<p>You can also try <em><a href=\"http://www.codeproject.com/KB/work/XTortoiseSVN.aspx\" rel=\"nofollow noreferrer\">Version Control for the Standalone Programmer - Part 1</a></em> or perhaps <em><a href=\"http://www.kenegozi.com/Blog/2007/07/30/merging-with-tortoisesvn.aspx\" rel=\"nofollow noreferrer\">Merging with TortoiseSVN</a></em>.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1466832",
        "title": "",
        "text": "<p>My easy click-by-click instructions (<strong>specific to TortoiseSVN</strong>) are in Stack&nbsp;Overflow question <em><a href=\"https://stackoverflow.com/questions/1461922\">What is the simplest way to do branching and merging using TortoiseSVN?</a></em>.</p>\n",
        "votes": "26",
        "tags": "",
        "accepted": true
      }
    ]
  },
  {
    "id:": "104",
    "url": "https://stackoverflow.com/questions/104",
    "title": "Anatomy of a \"Memory Leak\"",
    "text:": "<p>In .NET perspective:</p>\n\n<ul>\n<li>What is a <a href=\"https://en.wikipedia.org/wiki/Memory_leak\" rel=\"noreferrer\">memory leak</a>?</li>\n<li>How can you determine whether your application leaks? What are the effects?</li>\n<li>How can you prevent a memory leak?</li>\n<li>If your application has memory leak, does it go away when the process exits or is killed? Or do memory leaks in your application affect other processes on the system even after process completion?</li>\n<li>And what about unmanaged code accessed via COM Interop and/or P/Invoke?</li>\n</ul>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      [],
      [
        "StreamReader sr;\nusing(sr = new StreamReader(\"somefile.txt\"))\n{\n    //do some stuff\n}\n"
      ],
      [],
      [
        "SomeExternalClass.Changed += new EventHandler(HandleIt);\n",
        ".loadby sos mscorwks\n!dumpheap -stat -type <TypeName>\n"
      ],
      [],
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "175",
    "tags": "<.net><performance><memory-leaks><com-interop>",
    "AcceptedAnswerId": "112",
    "answers": [
      {
        "id": "12433",
        "title": "",
        "text": "<p>I think the \"what is a memory leak\" and \"what are the effects\" questions have been answered well already, but I wanted to add a few more things on the other questions...</p>\n\n<p><strong>How to understand whether your application leaks</strong></p>\n\n<p>One interesting way is to open <em>perfmon</em> and add traces for <em># bytes in all heaps</em> and <em># Gen 2 collections</em> , in each case looking just at your process.  If exercising a particular feature causes the total bytes to increase, and that memory remains allocated after the next Gen 2 collection, you might say that the feature leaks memory.</p>\n\n<p><strong>How to prevent</strong></p>\n\n<p>Other good opinions have been given.  I would just add that perhaps the <em>most commonly overlooked</em> cause of .NET memory leaks is to add event handlers to objects without removing them.  An event handler attached to an object is a form of reference to that object, so will prevent collection even after all other references have gone.  Always remember to detach event handlers (using the <code>-=</code> syntax in C#).</p>\n\n<p><strong>Does the leak go away when the process exits, and what about COM interop?</strong></p>\n\n<p>When your process exits, all memory mapped into its address space is reclaimed by the OS, including any COM objects served from DLLs.  Comparatively rarely, COM objects can be served from separate processes.  In this case, when your process exits, you may still be responsible for memory allocated in any COM server processes that you used.</p>\n",
        "votes": "32",
        "tags": "",
        "accepted": false
      },
      {
        "id": "18543",
        "title": "",
        "text": "<p>I found <a href=\"http://memprofiler.com/\" rel=\"noreferrer\">.Net Memory Profiler</a> a very good help when finding memory leaks in .Net. It's not free like the Microsoft CLR Profiler, but is faster and more to the point in my opinion. A</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "110",
        "title": "",
        "text": "<p>I will concur with Bernard as to in .net what a mem leak would be.</p>\n\n<p>You could profile your application to see its memory use, and determine that if its managing a lot of memory when it should not be you could say it has a leak.</p>\n\n<p>In managed terms I will put my neck on the line to say it does go away once the process is killed/removed.</p>\n\n<p>Unmanaged code is its own beast and if a leak exists within it, it will follow a standard mem. leak definition.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "159",
        "title": "",
        "text": "<p>Strictly speaking, a memory leak is consuming memory that is \"no longer used\" by the program.</p>\n\n<p>\"No longer used\" has more than one meaning, it could mean \"no more reference to it\", that is, totally unrecoverable, or it could mean, referenced, recoverable, unused but the program keeps the references anyway. Only the later applies to .Net for <strong>perfectly managed objects</strong>. However, not all classes are perfect and at some point an underlying unmanaged implementation could leak resources permanently for that process.</p>\n\n<p>In all cases, the application consumes more memory than strictly needed. The sides effects, depending on the ammount leaked, could go from none, to slowdown caused by excessive collection, to a series of memory exceptions and finally a fatal error followed by forced process termination.</p>\n\n<p>You know an application has a memory problem when monitoring shows that more and more memory is allocated to your process <strong>after each garbage collection cycle</strong>. In such case, you are either keeping too much in memory, or some underlying unmanaged implementation is leaking.</p>\n\n<p>For most leaks, resources are recovered when the process is terminated, however some resources are not always recovered in some precise cases, GDI cursor handles are notorious for that. Of course, if you have an interprocess communication mechanism, memory allocated in the other process would not be freed until that process frees it or terminates.</p>\n",
        "votes": "35",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1263",
        "title": "",
        "text": "<p>All memory leaks are resolved by program termination.  </p>\n\n<p>Leak enough memory and the Operating System may decide to resolve the problem on your behalf.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "13312",
        "title": "",
        "text": "<p>Using CLR Profiler from Microsoft <a href=\"http://www.microsoft.com/downloads/details.aspx?familyid=86ce6052-d7f4-4aeb-9b7a-94635beebdda&amp;displaylang=en\" rel=\"noreferrer\">http://www.microsoft.com/downloads/details.aspx?familyid=86ce6052-d7f4-4aeb-9b7a-94635beebdda&amp;displaylang=en</a> is a great way to determine which objects are holding memory, what execution flow leads to the creation of these objects, and also monitoring which objects live where on the heap (fragmentation, LOH, etc.).</p>\n",
        "votes": "16",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2947",
        "title": "",
        "text": "<blockquote>\n  <p>I guess in a managed environment, a\n  leak would be you keeping an\n  unnecessary reference to a large chunk\n  of memory around.</p>\n</blockquote>\n\n<p>Absolutely. Also, not using the .Dispose() method on disposable objects when appropriate can cause mem leaks. The easiest way to do it is with a using block because it automatically executes .Dispose() at the end:</p>\n\n<pre><code>StreamReader sr;\nusing(sr = new StreamReader(\"somefile.txt\"))\n{\n    //do some stuff\n}\n</code></pre>\n\n<p>And if you create a class that is using unmanaged objects, if you're not implementing IDisposable correctly, you could be causing memory leaks for your class's users.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "4702",
        "title": "",
        "text": "<p>Also keep in mind that .NET has two heaps, one being the large object heap. I believe objects of roughly 85k or larger are put on this heap. This heap has a different lifetime rules than the regular heap.</p>\n\n<p>If you are creating large memory structures (Dictionary's or List's) it would prudent to go lookup what the exact rules are.</p>\n\n<p>As far as reclaiming the memory on process termination, unless your running Win98 or it equivalents, everything is released back to the OS on termination. The only exceptions are things that are opened cross-process and another process still has the resource open.</p>\n\n<p>COM Objects can be tricky tho. If you always use the <code>IDispose</code> pattern, you'll be safe. But I've run across a few interop assemblies that implement <code>IDispose</code>. The key here is to call <code>Marshal.ReleaseCOMObject</code> when you're done with it. The COM Objects still use standard COM reference counting.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "30227",
        "title": "",
        "text": "<p>The best explanation of how the garbage collector works is in Jeff Richters <a href=\"https://www.microsoftpressstore.com/store/clr-via-c-sharp-9780735667457\" rel=\"noreferrer\">CLR via C#</a> book, (Ch. 20).  Reading this gives a great grounding for understanding how objects persist.</p>\n\n<p>One of the most common causes of rooting objects accidentally is by hooking up events outisde a class.  If you hook up an external event </p>\n\n<p>e.g.</p>\n\n<pre><code>SomeExternalClass.Changed += new EventHandler(HandleIt);\n</code></pre>\n\n<p>and forget to unhook to it when you dispose, then SomeExternalClass has a ref to your class.</p>\n\n<p>As mentioned above, the <a href=\"http://memprofiler.com\" rel=\"noreferrer\">SciTech memory profiler</a> is excellent at showing you roots of objects you suspect are leaking.  </p>\n\n<p>But there is also a very quick way to check a particular type is just use WnDBG (you can even use this in the VS.NET immediate window while attached):</p>\n\n<pre><code>.loadby sos mscorwks\n!dumpheap -stat -type &lt;TypeName&gt;\n</code></pre>\n\n<p>Now do something that you think will dispose the objects of that type (e.g. close a window).  It's handy here to have a debug button somewhere that will run <code>System.GC.Collect()</code> a couple of times.</p>\n\n<p>Then run <code>!dumpheap -stat -type &lt;TypeName&gt;</code> again.  If the number didn't go down, or didn't go down as much as you expect, then you have a basis for further investigation.\n(I got this tip from a seminar given by <a href=\"http://www.thinktecture.com/staff/ingo\" rel=\"noreferrer\">Ingo Rammer</a>).</p>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "112",
        "title": "",
        "text": "<p>The best explanation I've seen is in Chapter 7 of the free <a href=\"http://codebetter.com/karlseguin/2008/06/25/foundations-of-programming-ebook/\" rel=\"noreferrer\">Foundations of Programming e-book</a>.</p>\n\n<p>Basically, in <strong>.NET</strong> a memory leak occurs when referenced objects are rooted and thus cannot be garbage collected. This occurs accidentally when you hold on to references beyond the intended scope.</p>\n\n<p>You'll know that you have leaks when you start getting OutOfMemoryExceptions or your memory usage goes up beyond what you'd expect (<strong>PerfMon</strong> has nice memory counters). </p>\n\n<p>Understanding <strong>.NET</strong>'s memory model is your best way of avoiding it. Specifically, understanding how the garbage collector works and how references work \u2014 again, I refer you to chapter 7 of the e-book. Also, be mindful of common pitfalls, probably the most common being events. If object <strong>A</strong> is registered to an event on object <strong>B</strong>, then object <strong>A</strong> will stick around until object <strong>B</strong> disappears because <strong>B</strong> holds a reference to <strong>A</strong>. The solution is to unregister your events when you're done. </p>\n\n<p>Of course, a good memory profile will let you see your object graphs and explore the nesting/referencing of your objects to see where references are coming from and what root object is responsible (<a href=\"http://www.red-gate.com/products/ants_memory_profiler/index.htm\" rel=\"noreferrer\">red-gate ants profile</a>, JetBrains dotMemory, <a href=\"http://memprofiler.com/\" rel=\"noreferrer\">memprofiler</a> are really good choices, or you can use the text-only <strong>WinDbg</strong> and <strong>SOS</strong>, but I'd strongly recommend a commercial/visual product unless you're a real guru).</p>\n\n<p>I believe unmanaged code is subject to its typical memory leaks, except that shared references are managed by the garbage collector. I could be wrong about this last point.</p>\n",
        "votes": "111",
        "tags": "",
        "accepted": true
      },
      {
        "id": "25531072",
        "title": "",
        "text": "<p>One definition is: <strong>Unable  to release unreachable memory, which can no longer be allocated to new  process during execution of allocating process. It can mostly be cured by using GC techniques or detected by automated tools.</strong></p>\n\n<p>For more information, please visit <a href=\"http://all-about-java-and-weblogic-server.blogspot.in/2014/01/what-is-memory-leak-in-java.html\" rel=\"nofollow\">http://all-about-java-and-weblogic-server.blogspot.in/2014/01/what-is-memory-leak-in-java.html</a>.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "11766",
        "title": "",
        "text": "<p>If you need to diagnose a memory leak in .NET, check these links:</p>\n\n<p><a href=\"https://web.archive.org/web/20141203155344/http://msdn.microsoft.com/en-us/magazine/cc163833.aspx\" rel=\"noreferrer\">http://msdn.microsoft.com/en-us/magazine/cc163833.aspx</a></p>\n\n<p><a href=\"https://web.archive.org/web/20150102222036/http://msdn.microsoft.com/en-us/magazine/cc164138.aspx\" rel=\"noreferrer\">http://msdn.microsoft.com/en-us/magazine/cc164138.aspx</a></p>\n\n<p>Those articles describe how to create a memory dump of your process and how to analyze it so that you can first determine if your leak is unmanaged or managed, and if it is managed, how to figure out where it is coming from.</p>\n\n<p>Microsoft also has a newer tool to assist with generating crash dumps, to replace ADPlus, called DebugDiag.</p>\n\n<p><a href=\"http://www.microsoft.com/downloads/details.aspx?FamilyID=28bd5941-c458-46f1-b24d-f60151d875a3&amp;displaylang=en\" rel=\"noreferrer\">http://www.microsoft.com/downloads/details.aspx?FamilyID=28bd5941-c458-46f1-b24d-f60151d875a3&amp;displaylang=en</a></p>\n",
        "votes": "19",
        "tags": "",
        "accepted": false
      },
      {
        "id": "37850",
        "title": "",
        "text": "<p>Why do people think that an memory leak in .NET is not the same as any other leak?</p>\n\n<p>A memory leak is when you attach to a resource and do not let it go. You can do this both in managed and in unmanaged coding.</p>\n\n<p>Regarding .NET, and other programming tools, there have been ideas about garbage collecting, and other ways of minimizing situations that will make your application leak.\nBut the best method of preventing memory leaks is that you need to understand your underlying memory model, and how things works, on the platform you are using.</p>\n\n<p>Believing that GC and other magic will clean up your mess is the short way to memory leaks, and will be difficult to find later.</p>\n\n<p>When coding unmanaged, you normally make sure to clean up, you know that the resources you take hold of, will be your responsibility to clean up, not the janitor's.</p>\n\n<p>In .NET on the other hand, a lot of people think that the GC will clean up everything. Well, it does some for you, but you need to make sure that it is so. .NET does wrap lots of things, so you do not always know if you are dealing with a managed or unmanaged resource, and you need to make sure what what you're dealing with.  Handling fonts, GDI resources, active directory, databases etc is typically things you need to look out for.</p>\n\n<blockquote>\n  <p>In managed terms I will put my neck on\n  the line to say it does go away once\n  the process is killed/removed.</p>\n</blockquote>\n\n<p>I see lots of people have this though, and I really hope this will end. You cannot ask the user to terminate your app to clean up your mess!\nTake a look at a browser, that can be IE, FF etc, then open, say, Google Reader, let it stay for some days, and look at what happens. </p>\n\n<p>If you then open another tab in the browser, surf to some site, then close the tab that hosted the other page that made the browser leak, do you think the browser will release the memory? Not so with IE.  On my computer IE will easily eat 1 GiB of memory in a short amount of time (about 3-4 days) if I use Google Reader. Some newspages are even worse.</p>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "161",
        "title": "",
        "text": "<p>I would define memory leaks as an object not freeing up all the memory allocated after it has completed. I have found this can happen in your application if you are using Windows API and COM (i.e. unmanaged code that has a bug in it or is not being managed correctly), in the framework and in third party components. I have also found not tiding up after using certain objects like pens can cause the issue.</p>\n\n<p>I personally have suffered Out of Memory Exceptions which can be caused but are not exclusive to memory leaks in dot net applications. (OOM can also come from pinning see <a href=\"https://blogs.msdn.com/yunjin/archive/2004/01/27/63642.aspx\" rel=\"noreferrer\">Pinning Artical</a>). If you are not getting OOM errors or need to confirm if it is a memory leak causing it then the only way is to profile your application.</p>\n\n<p>I would also try and ensure the following:</p>\n\n<p>a) Everything that implements Idisposable is disposed either using a finally block or the using statement these include brushes, pens etc.(some people argue to set everything to nothing in addition) </p>\n\n<p>b)Anything that has a close method is closed again using finally or the using statement (although I have found using does not always close depending if you declared the object outside the using statement)</p>\n\n<p>c)If you are using unmanaged code/windows API's that these are dealt with correctly after. (some have clean up methods to release resources)</p>\n\n<p>Hope this helps.</p>\n",
        "votes": "20",
        "tags": "",
        "accepted": false
      },
      {
        "id": "107",
        "title": "",
        "text": "<p>I guess in a managed environment, a leak would be you keeping an unnecessary reference to a large chunk of memory around.</p>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "108",
    "url": "https://stackoverflow.com/questions/108",
    "title": "Best Subversion clients for Windows Vista (64bit)",
    "text:": "<p>I've been using <a href=\"https://web.archive.org/web/20200229173754/http://tortoisesvn.tigris.org/\" rel=\"nofollow noreferrer\">TortoiseSVN </a> in a Windows environment for quite some time.  It seems very feature-complete and nicely integrated into the Windows shell, and more importantly, it's fairly painless to teach to colleagues with little or no experience with source control.  <strong>However</strong>, since we have moved to Windows Vista 64bit, Tortoise has been very buggy and has seemed to cause lots of explorer.exe abnormalities and crashes.  This has happened both with older versions of the software and the latest version (1.5.1 build 13563).</p>\n\n<p>I was curious if anyone has suggestions for other Subversion clients that will run on Windows (specifically Vista 64bit).  Developers here use a variety of text editors so using Visual Studio or Dreamweaver for SVN is not ideal.</p>\n\n<p>I have heard great things about <a href=\"http://www.zennaware.com/cornerstone/\" rel=\"nofollow noreferrer\">Cornerstone</a>, and would love something similar for Windows if it exists.</p>\n\n<hr>\n\n<p>I'm correlating the Vista/explorer problems with Tortoise because they normally occur when I'm using the functionality in Tortoise.  Sometimes bringing up the \"merge\" screen will cause the GUI to start acting very strange and eventually hang or crash.</p>\n\n<p>I did not see 1.5.2 -- I'm installing now, maybe that will fix some of my issues.</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "49",
    "tags": "<windows><svn><64-bit>",
    "AcceptedAnswerId": "111",
    "answers": [
      {
        "id": "155",
        "title": "",
        "text": "<p>I used to have lots of Explorer crashes (on 32-bit) caused by Tortoise. They seem to have gone away since I used the Include/Exclude path settings in the \"Icon Overlays\" configuration of TSVN. Constraining icon overlays to specific directories where I keep my source made this much more stable.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "113",
        "title": "",
        "text": "<p>I'll second Diago's answer.  I use TortoiseSVN on Vista x64 pretty heavily.</p>\n\n<p>I did upgrade directly from an older version to 1.5.2 though, and never used 1.5.1.  Have you tried 1.5.2?</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "222115",
        "title": "",
        "text": "<p>Run both 32 and 64 bit clients.... otherwise explorer instances launched from 32bit processes ( including load and  save dialogs) will have no Tortoise menus.</p>\n\n<p>Also upgrade to latest 1.5.3 at time of answer.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "116",
        "title": "",
        "text": "<p>I too get explorer crashes in Vista (I'm not in the 64Bit version though). I'm using Vista Super Saijen (or whatever they are calling the most expensive version). I'm not having any bugs with Tortoise.</p>\n\n<p>My explorer does, however, crash about every other day (sometimes multiple times a day if it's having an \"off\" day). I'm not positive it's being caused by TortoiseSVN though. From what I hear, the explorer just crashes a lot in Vista...</p>\n\n<p>Have you tried uninstalling Tortoise and using Windows for a day or two and seeing if it still crashes? Do you restart your computer at least once a day (It seems the longer I go between restarts, the worse the crashes get)?</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "111",
        "title": "",
        "text": "<p>I have been using the 64Bit version of TortoiseSVN for ages and I have never had issues with it on Windows 64Bit or Vista 64Bit. I am currently not aware of any other similiar SVN clients that do work on Vista. Is it possible the problem could lie within the configuration of TortoiseSVN or even the installation of Vista? Is the problem occurring on Vista native or SP 1?</p>\n",
        "votes": "40",
        "tags": "",
        "accepted": true
      },
      {
        "id": "114",
        "title": "",
        "text": "<p>TortoiseSVN in combination with VisualSVN for Visual Studio.</p>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "960849",
        "title": "",
        "text": "<p>I have Tortoise installed but rarely use it over <a href=\"https://www.smartsvn.com/\" rel=\"nofollow noreferrer\">SmartSVN</a>. It is a Java-based application and so does not look like a native Windows application, but performs very well. There is a free version with reduced functionality, but the paid-for version is not very expensive ($79) and well worth the money. The biggest benefit I find is a real-time view similar to the \"check for modifications\" feature in Tortoise, which auto-refreshes every time the UI gets focus. You can easily see what you've changed across your whole source tree. It also has shell integration, although I can't comment on that feature as I haven't installed it because I already had Tortoise installed.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "412",
        "title": "",
        "text": "<p>Tortoise SVN with Ankhsvn for VS 2005</p>\n\n<p><img src=\"https://i.stack.imgur.com/7pzo0.jpg\" alt=\"\"></p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "123",
    "url": "https://stackoverflow.com/questions/123",
    "title": "Java lib or app to convert CSV to XML file?",
    "text:": "<p>Is there an existing application or library in <em>Java</em> which will allow me to convert a <code>CSV</code> data file to <code>XML</code> file?  </p>\n\n<p>The <code>XML</code> tags would be provided through possibly the first row containing column headings.</p>\n",
    "codes": [
      [],
      [
        "def file1 = new File('c:\\\\temp\\\\ContactData.csv')\ndef file2 = new File('c:\\\\temp\\\\contacts.xml')\n\ndef reader = new FileReader(file1)\ndef writer = new FileWriter(file2)\n\nreader.transformLine(writer) { line ->\n    fields =  line.split(',')\n\n    text = \"\"\"<CLIENTS>\n    <firstname> ${fields[2]} </firstname>\n    <surname> ${fields[1]} </surname>\n    <email> ${fields[9]} </email>\n    <employeenumber> password </employeenumber>\n    <title> ${fields[4]} </title>\n    <phone> ${fields[3]} </phone>\n    </CLIENTS>\"\"\"\n}\n"
      ],
      [],
      [
        "package fr.megiste.test;\n\nimport java.io.FileReader;\nimport java.io.FileWriter;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport au.com.bytecode.opencsv.CSVReader;\n\nimport com.thoughtworks.xstream.XStream;\n\npublic class CsvToXml {     \n\n    public static void main(String[] args) {\n\n        String startFile = \"./startData.csv\";\n        String outFile = \"./outData.xml\";\n\n        try {\n            CSVReader reader = new CSVReader(new FileReader(startFile));\n            String[] line = null;\n\n            String[] header = reader.readNext();\n\n            List out = new ArrayList();\n\n            while((line = reader.readNext())!=null){\n                List<String[]> item = new ArrayList<String[]>();\n                    for (int i = 0; i < header.length; i++) {\n                    String[] keyVal = new String[2];\n                    String string = header[i];\n                    String val = line[i];\n                    keyVal[0] = string;\n                    keyVal[1] = val;\n                    item.add(keyVal);\n                }\n                out.add(item);\n            }\n\n            XStream xstream = new XStream();\n\n            xstream.toXML(out, new FileWriter(outFile,false));\n\n        } catch (Exception e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n    }\n}\n",
        "<list>\n  <list>\n    <string-array>\n      <string>string</string>\n      <string>hello world</string>\n    </string-array>\n    <string-array>\n      <string>float1</string>\n      <string>1.0</string>\n    </string-array>\n    <string-array>\n      <string>float2</string>\n      <string>3.3</string>\n    </string-array>\n    <string-array>\n      <string>integer</string>\n      <string>4</string>\n    </string-array>\n  </list>\n  <list>\n    <string-array>\n      <string>string</string>\n      <string>goodbye world</string>\n    </string-array>\n    <string-array>\n      <string>float1</string>\n      <string>1e9</string>\n    </string-array>\n    <string-array>\n      <string>float2</string>\n      <string>-3.3</string>\n    </string-array>\n    <string-array>\n      <string>integer</string>\n      <string>45</string>\n    </string-array>\n  </list>\n  <list>\n    <string-array>\n      <string>string</string>\n      <string>hello again</string>\n    </string-array>\n    <string-array>\n      <string>float1</string>\n      <string>-1</string>\n    </string-array>\n    <string-array>\n      <string>float2</string>\n      <string>23.33</string>\n    </string-array>\n    <string-array>\n      <string>integer</string>\n      <string>456</string>\n    </string-array>\n  </list>\n  <list>\n    <string-array>\n      <string>string</string>\n      <string>hello world 3</string>\n    </string-array>\n    <string-array>\n      <string>float1</string>\n      <string>1.40</string>\n    </string-array>\n    <string-array>\n      <string>float2</string>\n      <string>34.83</string>\n    </string-array>\n    <string-array>\n      <string>integer</string>\n      <string>4999</string>\n    </string-array>\n  </list>\n  <list>\n    <string-array>\n      <string>string</string>\n      <string>hello 2 world</string>\n    </string-array>\n    <string-array>\n      <string>float1</string>\n      <string>9981.05</string>\n    </string-array>\n    <string-array>\n      <string>float2</string>\n      <string>43.33</string>\n    </string-array>\n    <string-array>\n      <string>integer</string>\n      <string>444</string>\n    </string-array>\n  </list>\n</list>\n"
      ],
      [],
      [],
      [
        "string,float1,float2,integer\nhello world,1.0,3.3,4\ngoodbye world,1e9,-3.3,45\nhello again,-1,23.33,456\nhello world 3,1.40,34.83,4999\nhello 2 world,9981.05,43.33,444\n",
        "#!/usr/bin/env groovy\n\ndef csvdata = []\nnew File(\"test.csv\").eachLine { line ->\n    csvdata << line.split(',')\n}\n\ndef headers = csvdata[0]\ndef dataRows = csvdata[1..-1]\n\ndef xml = new groovy.xml.MarkupBuilder()\n\n// write 'root' element\nxml.root {\n    dataRows.eachWithIndex { dataRow, index ->\n        // write 'entry' element with 'id' attribute\n        entry(id:index+1) {\n            headers.eachWithIndex { heading, i ->\n                // write each heading with associated content\n                \"${heading}\"(dataRow[i])\n            }\n        }\n    }\n}\n",
        "<root>\n  <entry id='1'>\n    <string>hello world</string>\n    <float1>1.0</float1>\n    <float2>3.3</float2>\n    <integer>4</integer>\n  </entry>\n  <entry id='2'>\n    <string>goodbye world</string>\n    <float1>1e9</float1>\n    <float2>-3.3</float2>\n    <integer>45</integer>\n  </entry>\n  <entry id='3'>\n    <string>hello again</string>\n    <float1>-1</float1>\n    <float2>23.33</float2>\n    <integer>456</integer>\n  </entry>\n  <entry id='4'>\n    <string>hello world 3</string>\n    <float1>1.40</float1>\n    <float2>34.83</float2>\n    <integer>4999</integer>\n  </entry>\n  <entry id='5'>\n    <string>hello 2 world</string>\n    <float1>9981.05</float1>\n    <float2>43.33</float2>\n    <integer>444</integer>\n  </entry>\n</root>\n"
      ],
      [],
      [],
      [],
      [],
      [],
      [
        "@FixedLengthRecord()\npublic class Customer {\n    @FieldFixedLength(4)\n    public Integer custId;\n\n    @FieldAlign(alignMode=AlignMode.Right)\n    @FieldFixedLength(20)\n    public String name;\n\n    @FieldFixedLength(3)\n    public Integer rating;\n\n    @FieldTrim(trimMode=TrimMode.Right)\n    @FieldFixedLength(10)\n    @FieldConverter(converter = ConverterKind.Date, \n    format = \"dd-MM-yyyy\")\n    public Date addedDate;\n\n    @FieldFixedLength(3)\n    @FieldOptional\n    public String stockSimbol;  \n}\n",
        "FileHelperEngine<Customer> engine = \n    new FileHelperEngine<Customer>(Customer.class); \nList<Customer> customers = \n    new ArrayList<Customer>();\n\ncustomers = engine.readResource(\n    \"/samples/customers-fixed.txt\");\n"
      ],
      [],
      [
        "BufferedReader reader = new BufferedReader(new InputStreamReader(\n        Csv2Xml.class.getResourceAsStream(\"test.csv\")));\nStringBuilder xml = new StringBuilder();\nString lineBreak = System.getProperty(\"line.separator\");\nString line = null;\nList<String> headers = new ArrayList<String>();\nboolean isHeader = true;\nint count = 0;\nint entryCount = 1;\nxml.append(\"<root>\");\nxml.append(lineBreak);\nwhile ((line = reader.readLine()) != null) {\n    StringTokenizer tokenizer = new StringTokenizer(line, \",\");\n    if (isHeader) {\n        isHeader = false;\n        while (tokenizer.hasMoreTokens()) {\n            headers.add(tokenizer.nextToken());\n        }\n    } else {\n        count = 0;\n        xml.append(\"\\t<entry id=\\\"\");\n        xml.append(entryCount);\n        xml.append(\"\\\">\");\n        xml.append(lineBreak);\n        while (tokenizer.hasMoreTokens()) {\n            xml.append(\"\\t\\t<\");\n            xml.append(headers.get(count));\n            xml.append(\">\");\n            xml.append(tokenizer.nextToken());\n            xml.append(\"</\");\n            xml.append(headers.get(count));\n            xml.append(\">\");\n            xml.append(lineBreak);\n            count++;\n        }\n        xml.append(\"\\t</entry>\");\n        xml.append(lineBreak);\n        entryCount++;\n    }\n}\nxml.append(\"</root>\");\nSystem.out.println(xml.toString());\n",
        "string,float1,float2,integer\nhello world,1.0,3.3,4\ngoodbye world,1e9,-3.3,45\nhello again,-1,23.33,456\nhello world 3,1.40,34.83,4999\nhello 2 world,9981.05,43.33,444\n",
        "<root>\n    <entry id=\"1\">\n        <string>hello world</string>\n        <float1>1.0</float1>\n        <float2>3.3</float2>\n        <integer>4</integer>\n    </entry>\n    <entry id=\"2\">\n        <string>goodbye world</string>\n        <float1>1e9</float1>\n        <float2>-3.3</float2>\n        <integer>45</integer>\n    </entry>\n    <entry id=\"3\">\n        <string>hello again</string>\n        <float1>-1</float1>\n        <float2>23.33</float2>\n        <integer>456</integer>\n    </entry>\n    <entry id=\"4\">\n        <string>hello world 3</string>\n        <float1>1.40</float1>\n        <float2>34.83</float2>\n        <integer>4999</integer>\n    </entry>\n    <entry id=\"5\">\n        <string>hello 2 world</string>\n        <float1>9981.05</float1>\n        <float2>43.33</float2>\n        <integer>444</integer>\n    </entry>\n</root>\n"
      ],
      []
    ],
    "votes:": "114",
    "tags": "<java><xml><csv><data-conversion>",
    "AcceptedAnswerId": "183",
    "answers": [
      {
        "id": "540",
        "title": "",
        "text": "<p>As far as I know, there's no ready-made library to do this for you, but producing a tool capable of translating from CSV to XML should only require you to write a crude CSV parser and hook up JDOM (or your XML Java library of choice) with some glue code.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "161058",
        "title": "",
        "text": "<p>You can do this exceptionally easily using Groovy, and the code is very readable. </p>\n\n<p>Basically, the text variable will be written to <code>contacts.xml</code> for each line in the <code>contactData.csv</code>, and the fields array contains each column.</p>\n\n<pre><code>def file1 = new File('c:\\\\temp\\\\ContactData.csv')\ndef file2 = new File('c:\\\\temp\\\\contacts.xml')\n\ndef reader = new FileReader(file1)\ndef writer = new FileWriter(file2)\n\nreader.transformLine(writer) { line -&gt;\n    fields =  line.split(',')\n\n    text = \"\"\"&lt;CLIENTS&gt;\n    &lt;firstname&gt; ${fields[2]} &lt;/firstname&gt;\n    &lt;surname&gt; ${fields[1]} &lt;/surname&gt;\n    &lt;email&gt; ${fields[9]} &lt;/email&gt;\n    &lt;employeenumber&gt; password &lt;/employeenumber&gt;\n    &lt;title&gt; ${fields[4]} &lt;/title&gt;\n    &lt;phone&gt; ${fields[3]} &lt;/phone&gt;\n    &lt;/CLIENTS&gt;\"\"\"\n}\n</code></pre>\n",
        "votes": "17",
        "tags": "",
        "accepted": false
      },
      {
        "id": "29953381",
        "title": "",
        "text": "<p>Jackson processor family has backends for multiple data formats, not just JSON. This includes both XML (<a href=\"https://github.com/FasterXML/jackson-dataformat-xml\" rel=\"nofollow\">https://github.com/FasterXML/jackson-dataformat-xml</a>) and CSV (<a href=\"https://github.com/FasterXML/jackson-dataformat-csv/\" rel=\"nofollow\">https://github.com/FasterXML/jackson-dataformat-csv/</a>) backends.</p>\n\n<p>Conversion would rely on reading input with CSV backend, write using XML backend. This is easiest to do if you have (or can define) a POJO for per-row (CSV) entries. This is not a strict requirement, as content from CSV may be read \"untyped\" as well (a sequence of <code>String</code> arrays), but requires bit more work on XML output.</p>\n\n<p>For XML side, you would need a wrapper root object to contain array or <code>List</code> of objects to serialize.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "53547",
        "title": "",
        "text": "<p>As the others above, I don't know any one-step way to do that, but if you are ready to use very simple external libraries, I would suggest:</p>\n\n<p><a href=\"http://opencsv.sourceforge.net/\" rel=\"noreferrer\">OpenCsv</a> for parsing CSV (small, simple, reliable and easy to use)</p>\n\n<p><strong>Xstream</strong> to parse/serialize XML (very very easy to use, and creating fully human readable xml)</p>\n\n<p>Using the same sample data as above, code would look like:</p>\n\n<pre><code>package fr.megiste.test;\n\nimport java.io.FileReader;\nimport java.io.FileWriter;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport au.com.bytecode.opencsv.CSVReader;\n\nimport com.thoughtworks.xstream.XStream;\n\npublic class CsvToXml {     \n\n    public static void main(String[] args) {\n\n        String startFile = \"./startData.csv\";\n        String outFile = \"./outData.xml\";\n\n        try {\n            CSVReader reader = new CSVReader(new FileReader(startFile));\n            String[] line = null;\n\n            String[] header = reader.readNext();\n\n            List out = new ArrayList();\n\n            while((line = reader.readNext())!=null){\n                List&lt;String[]&gt; item = new ArrayList&lt;String[]&gt;();\n                    for (int i = 0; i &lt; header.length; i++) {\n                    String[] keyVal = new String[2];\n                    String string = header[i];\n                    String val = line[i];\n                    keyVal[0] = string;\n                    keyVal[1] = val;\n                    item.add(keyVal);\n                }\n                out.add(item);\n            }\n\n            XStream xstream = new XStream();\n\n            xstream.toXML(out, new FileWriter(outFile,false));\n\n        } catch (Exception e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>Producing the following result:\n(Xstream allows very fine tuning of the result...)</p>\n\n<pre><code>&lt;list&gt;\n  &lt;list&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;string&lt;/string&gt;\n      &lt;string&gt;hello world&lt;/string&gt;\n    &lt;/string-array&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;float1&lt;/string&gt;\n      &lt;string&gt;1.0&lt;/string&gt;\n    &lt;/string-array&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;float2&lt;/string&gt;\n      &lt;string&gt;3.3&lt;/string&gt;\n    &lt;/string-array&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;integer&lt;/string&gt;\n      &lt;string&gt;4&lt;/string&gt;\n    &lt;/string-array&gt;\n  &lt;/list&gt;\n  &lt;list&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;string&lt;/string&gt;\n      &lt;string&gt;goodbye world&lt;/string&gt;\n    &lt;/string-array&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;float1&lt;/string&gt;\n      &lt;string&gt;1e9&lt;/string&gt;\n    &lt;/string-array&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;float2&lt;/string&gt;\n      &lt;string&gt;-3.3&lt;/string&gt;\n    &lt;/string-array&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;integer&lt;/string&gt;\n      &lt;string&gt;45&lt;/string&gt;\n    &lt;/string-array&gt;\n  &lt;/list&gt;\n  &lt;list&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;string&lt;/string&gt;\n      &lt;string&gt;hello again&lt;/string&gt;\n    &lt;/string-array&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;float1&lt;/string&gt;\n      &lt;string&gt;-1&lt;/string&gt;\n    &lt;/string-array&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;float2&lt;/string&gt;\n      &lt;string&gt;23.33&lt;/string&gt;\n    &lt;/string-array&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;integer&lt;/string&gt;\n      &lt;string&gt;456&lt;/string&gt;\n    &lt;/string-array&gt;\n  &lt;/list&gt;\n  &lt;list&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;string&lt;/string&gt;\n      &lt;string&gt;hello world 3&lt;/string&gt;\n    &lt;/string-array&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;float1&lt;/string&gt;\n      &lt;string&gt;1.40&lt;/string&gt;\n    &lt;/string-array&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;float2&lt;/string&gt;\n      &lt;string&gt;34.83&lt;/string&gt;\n    &lt;/string-array&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;integer&lt;/string&gt;\n      &lt;string&gt;4999&lt;/string&gt;\n    &lt;/string-array&gt;\n  &lt;/list&gt;\n  &lt;list&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;string&lt;/string&gt;\n      &lt;string&gt;hello 2 world&lt;/string&gt;\n    &lt;/string-array&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;float1&lt;/string&gt;\n      &lt;string&gt;9981.05&lt;/string&gt;\n    &lt;/string-array&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;float2&lt;/string&gt;\n      &lt;string&gt;43.33&lt;/string&gt;\n    &lt;/string-array&gt;\n    &lt;string-array&gt;\n      &lt;string&gt;integer&lt;/string&gt;\n      &lt;string&gt;444&lt;/string&gt;\n    &lt;/string-array&gt;\n  &lt;/list&gt;\n&lt;/list&gt;\n</code></pre>\n",
        "votes": "46",
        "tags": "",
        "accepted": false
      },
      {
        "id": "74018",
        "title": "",
        "text": "<p>For the CSV Part, you may use <a href=\"https://github.com/aburmeis/decs\" rel=\"nofollow noreferrer\">my little open source library</a></p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "155146",
        "title": "",
        "text": "<p>There is also good library <a href=\"http://servingxml.sourceforge.net/\" rel=\"noreferrer\">ServingXML</a> by Daniel Parker, which is able to convert almost any plain text format to XML and back.</p>\n\n<p>The example for your case can be found <a href=\"http://servingxml.sourceforge.net/examples/index.html#d62e305\" rel=\"noreferrer\">here</a>: It uses heading of field in CSV file as the XML element name.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6726",
        "title": "",
        "text": "<p>I know you asked for Java, but this strikes me as a task well suited to a scripting language. Here is a quick (very simple) solution written in Groovy.</p>\n\n<p><strong>test.csv</strong></p>\n\n<pre><code>string,float1,float2,integer\nhello world,1.0,3.3,4\ngoodbye world,1e9,-3.3,45\nhello again,-1,23.33,456\nhello world 3,1.40,34.83,4999\nhello 2 world,9981.05,43.33,444\n</code></pre>\n\n<p><strong>csvtoxml.groovy</strong></p>\n\n<pre><code>#!/usr/bin/env groovy\n\ndef csvdata = []\nnew File(\"test.csv\").eachLine { line -&gt;\n    csvdata &lt;&lt; line.split(',')\n}\n\ndef headers = csvdata[0]\ndef dataRows = csvdata[1..-1]\n\ndef xml = new groovy.xml.MarkupBuilder()\n\n// write 'root' element\nxml.root {\n    dataRows.eachWithIndex { dataRow, index -&gt;\n        // write 'entry' element with 'id' attribute\n        entry(id:index+1) {\n            headers.eachWithIndex { heading, i -&gt;\n                // write each heading with associated content\n                \"${heading}\"(dataRow[i])\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Writes the following XML to stdout:</p>\n\n<pre><code>&lt;root&gt;\n  &lt;entry id='1'&gt;\n    &lt;string&gt;hello world&lt;/string&gt;\n    &lt;float1&gt;1.0&lt;/float1&gt;\n    &lt;float2&gt;3.3&lt;/float2&gt;\n    &lt;integer&gt;4&lt;/integer&gt;\n  &lt;/entry&gt;\n  &lt;entry id='2'&gt;\n    &lt;string&gt;goodbye world&lt;/string&gt;\n    &lt;float1&gt;1e9&lt;/float1&gt;\n    &lt;float2&gt;-3.3&lt;/float2&gt;\n    &lt;integer&gt;45&lt;/integer&gt;\n  &lt;/entry&gt;\n  &lt;entry id='3'&gt;\n    &lt;string&gt;hello again&lt;/string&gt;\n    &lt;float1&gt;-1&lt;/float1&gt;\n    &lt;float2&gt;23.33&lt;/float2&gt;\n    &lt;integer&gt;456&lt;/integer&gt;\n  &lt;/entry&gt;\n  &lt;entry id='4'&gt;\n    &lt;string&gt;hello world 3&lt;/string&gt;\n    &lt;float1&gt;1.40&lt;/float1&gt;\n    &lt;float2&gt;34.83&lt;/float2&gt;\n    &lt;integer&gt;4999&lt;/integer&gt;\n  &lt;/entry&gt;\n  &lt;entry id='5'&gt;\n    &lt;string&gt;hello 2 world&lt;/string&gt;\n    &lt;float1&gt;9981.05&lt;/float1&gt;\n    &lt;float2&gt;43.33&lt;/float2&gt;\n    &lt;integer&gt;444&lt;/integer&gt;\n  &lt;/entry&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>However, the code does very simple parsing (not taking into account quoted or escaped commas) and it does not account for possible absent data.</p>\n",
        "votes": "26",
        "tags": "",
        "accepted": false
      },
      {
        "id": "133",
        "title": "",
        "text": "<p>This may be too basic or limited of a solution, but couldn't you do a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String)\" rel=\"nofollow noreferrer\"><code>String.split()</code></a> on each line of the file, remembering the result array of the first line to generate the XML, and just spit each line's array data out with the proper XML elements padding each iteration of a loop?</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "183",
        "title": "",
        "text": "<p>Maybe this might help: <a href=\"http://jsefa.sourceforge.net/quick-tutorial.html\" rel=\"noreferrer\">JSefa</a></p>\n\n<p>You can read CSV file with this tool and serialize it to XML.</p>\n",
        "votes": "67",
        "tags": "",
        "accepted": true
      },
      {
        "id": "939",
        "title": "",
        "text": "<p>There is nothing I know of that can do this without you at least writing a little bit of code... You will need 2 separate library:</p>\n\n<ul>\n<li>A CSV Parser Framework </li>\n<li>An XML Serialization Framework</li>\n</ul>\n\n<p>The CSV parser I would recommend (unless you want to have a little bit of fun to write your own CSV Parser) is OpenCSV (A SourceForge Project for parsing CSV Data)</p>\n\n<p>The XML Serialization Framework should be something that can scale in case you want to transform large (or huge) CSV file to XML: My recommendation is the Sun Java Streaming XML Parser Framework (See <a href=\"https://sjsxp.java.net/\" rel=\"noreferrer\">here</a>) which allows pull-parsing AND serialization.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "190",
        "title": "",
        "text": "<p>I don't understand why you would want to do this. It sounds almost like cargo cult coding.</p>\n\n<p>Converting a CSV file to XML doesn't add any value. Your program is already reading the CSV file, so arguing that you need XML doesn't work.</p>\n\n<p>On the other hand, reading the CSV file, doing <em>something</em> with the values, and then serializing to XML does make sense (well, as much as using XML can make sense... ;)) but you would supposedly already have a means of serializing to XML.</p>\n",
        "votes": "16",
        "tags": "",
        "accepted": false
      },
      {
        "id": "208799",
        "title": "",
        "text": "<p>You could use <strong>XSLT</strong>.  Google it and you will find a few examples e.g. <a href=\"http://andrewjwelch.com/code/xslt/csv/csv-to-xml_v2.html\" rel=\"noreferrer\">CSV to XML</a>\nIf you use <strong>XSLT</strong> you can then convert the XML to whatever format you want.</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "144768",
        "title": "",
        "text": "<p>I have an opensource framework for working with CSV and flat files in general. Maybe it's worth looking: <a href=\"http://jfilehelpers.com\" rel=\"noreferrer\" title=\"JFileHelpers\">JFileHelpers</a>.</p>\n\n<p>With that toolkit you can write code using beans, like:</p>\n\n<pre><code>@FixedLengthRecord()\npublic class Customer {\n    @FieldFixedLength(4)\n    public Integer custId;\n\n    @FieldAlign(alignMode=AlignMode.Right)\n    @FieldFixedLength(20)\n    public String name;\n\n    @FieldFixedLength(3)\n    public Integer rating;\n\n    @FieldTrim(trimMode=TrimMode.Right)\n    @FieldFixedLength(10)\n    @FieldConverter(converter = ConverterKind.Date, \n    format = \"dd-MM-yyyy\")\n    public Date addedDate;\n\n    @FieldFixedLength(3)\n    @FieldOptional\n    public String stockSimbol;  \n}\n</code></pre>\n\n<p>and then just parse your text files using:</p>\n\n<pre><code>FileHelperEngine&lt;Customer&gt; engine = \n    new FileHelperEngine&lt;Customer&gt;(Customer.class); \nList&lt;Customer&gt; customers = \n    new ArrayList&lt;Customer&gt;();\n\ncustomers = engine.readResource(\n    \"/samples/customers-fixed.txt\");\n</code></pre>\n\n<p>And you'll have a collection of parsed objects.</p>\n\n<p>Hope that helps!</p>\n",
        "votes": "18",
        "tags": "",
        "accepted": false
      },
      {
        "id": "23096745",
        "title": "",
        "text": "<p>I had the same problem and needed an application to convert a CSV file to a XML file for one of my projects, but didn't find anything free and good enough on the net, so I coded my own Java Swing CSVtoXML application.</p>\n\n<p>It's available from my website <a href=\"https://sites.google.com/site/ibrabel/freewares/csvtoxml\" rel=\"nofollow\">HERE</a>. Hope it will help you. </p>\n\n<p>If not, you can easily code your own like I did; The source code is inside the jar file so modify it as you need if it doesn't fill your requirement.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "21413",
        "title": "",
        "text": "<p>This solution does not need any CSV or XML libraries and, I know, it does not handle any illegal characters and encoding issues, but you might be interested in it as well, provided your CSV input does not break the above mentioned rules.</p>\n\n<p><strong>Attention:</strong> You should not use this code unless you know what you do or don't have the chance to use a further library (possible in some bureaucratic projects)... Use a StringBuffer for older Runtime Environments...</p>\n\n<p>So here we go:</p>\n\n<pre><code>BufferedReader reader = new BufferedReader(new InputStreamReader(\n        Csv2Xml.class.getResourceAsStream(\"test.csv\")));\nStringBuilder xml = new StringBuilder();\nString lineBreak = System.getProperty(\"line.separator\");\nString line = null;\nList&lt;String&gt; headers = new ArrayList&lt;String&gt;();\nboolean isHeader = true;\nint count = 0;\nint entryCount = 1;\nxml.append(\"&lt;root&gt;\");\nxml.append(lineBreak);\nwhile ((line = reader.readLine()) != null) {\n    StringTokenizer tokenizer = new StringTokenizer(line, \",\");\n    if (isHeader) {\n        isHeader = false;\n        while (tokenizer.hasMoreTokens()) {\n            headers.add(tokenizer.nextToken());\n        }\n    } else {\n        count = 0;\n        xml.append(\"\\t&lt;entry id=\\\"\");\n        xml.append(entryCount);\n        xml.append(\"\\\"&gt;\");\n        xml.append(lineBreak);\n        while (tokenizer.hasMoreTokens()) {\n            xml.append(\"\\t\\t&lt;\");\n            xml.append(headers.get(count));\n            xml.append(\"&gt;\");\n            xml.append(tokenizer.nextToken());\n            xml.append(\"&lt;/\");\n            xml.append(headers.get(count));\n            xml.append(\"&gt;\");\n            xml.append(lineBreak);\n            count++;\n        }\n        xml.append(\"\\t&lt;/entry&gt;\");\n        xml.append(lineBreak);\n        entryCount++;\n    }\n}\nxml.append(\"&lt;/root&gt;\");\nSystem.out.println(xml.toString());\n</code></pre>\n\n<p>The input test.csv (stolen from another answer on this page):</p>\n\n<pre><code>string,float1,float2,integer\nhello world,1.0,3.3,4\ngoodbye world,1e9,-3.3,45\nhello again,-1,23.33,456\nhello world 3,1.40,34.83,4999\nhello 2 world,9981.05,43.33,444\n</code></pre>\n\n<p>The resulting output:</p>\n\n<pre><code>&lt;root&gt;\n    &lt;entry id=\"1\"&gt;\n        &lt;string&gt;hello world&lt;/string&gt;\n        &lt;float1&gt;1.0&lt;/float1&gt;\n        &lt;float2&gt;3.3&lt;/float2&gt;\n        &lt;integer&gt;4&lt;/integer&gt;\n    &lt;/entry&gt;\n    &lt;entry id=\"2\"&gt;\n        &lt;string&gt;goodbye world&lt;/string&gt;\n        &lt;float1&gt;1e9&lt;/float1&gt;\n        &lt;float2&gt;-3.3&lt;/float2&gt;\n        &lt;integer&gt;45&lt;/integer&gt;\n    &lt;/entry&gt;\n    &lt;entry id=\"3\"&gt;\n        &lt;string&gt;hello again&lt;/string&gt;\n        &lt;float1&gt;-1&lt;/float1&gt;\n        &lt;float2&gt;23.33&lt;/float2&gt;\n        &lt;integer&gt;456&lt;/integer&gt;\n    &lt;/entry&gt;\n    &lt;entry id=\"4\"&gt;\n        &lt;string&gt;hello world 3&lt;/string&gt;\n        &lt;float1&gt;1.40&lt;/float1&gt;\n        &lt;float2&gt;34.83&lt;/float2&gt;\n        &lt;integer&gt;4999&lt;/integer&gt;\n    &lt;/entry&gt;\n    &lt;entry id=\"5\"&gt;\n        &lt;string&gt;hello 2 world&lt;/string&gt;\n        &lt;float1&gt;9981.05&lt;/float1&gt;\n        &lt;float2&gt;43.33&lt;/float2&gt;\n        &lt;integer&gt;444&lt;/integer&gt;\n    &lt;/entry&gt;\n&lt;/root&gt;\n</code></pre>\n",
        "votes": "17",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3455575",
        "title": "",
        "text": "<p>The big difference is that <a href=\"http://jsefa.sourceforge.net/index.html\" rel=\"noreferrer\">JSefa</a> brings in is that it can serialize your java objects to  CSV/XML/etc files and can deserialize back to java objects. And it's driven by annotations which gives you lot of control over the output. </p>\n\n<p>JFileHelpers also looks interesting.</p>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "126",
    "url": "https://stackoverflow.com/questions/126",
    "title": "How would you access Object properties from within an object method?",
    "text:": "<p>What is the \"purist\" or \"correct\" way to access an object's properties from within an object method that is not a getter/setter method?</p>\n\n<p>I know that from outside of the object you should use a getter/setter, but from within would you just do:</p>\n\n<p>Java:</p>\n\n<pre><code>String property = this.property;\n</code></pre>\n\n<p>PHP:</p>\n\n<pre><code>$property = $this-&gt;property;\n</code></pre>\n\n<p>or would you do:</p>\n\n<p>Java:</p>\n\n<pre><code>String property = this.getProperty();\n</code></pre>\n\n<p>PHP:</p>\n\n<pre><code>$property = $this-&gt;getProperty();\n</code></pre>\n\n<p>Forgive me if my Java is a little off, it's been a year since I programmed in Java...</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>It seems people are assuming I am talking about private or protected variables/properties only. When I learned OO I was taught to use getters/setters for every single property even if it was public (and actually I was told never to make any variable/property public). So, I may be starting off from a false assumption from the get go. It appears that people answering this question are maybe saying that you should have public properties and that those don't need getters and setters, which goes against what I was taught, and what I was talking about, although maybe that needs to be discussed as well. That's probably a good topic for a different question though...</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [
        "  doSomethingWithProperty() {\n     doSomethingWith( this.property ) ;\n  }\n",
        "  doSomethingWithProperty( this.daysPerWeek() ) ;\n"
      ],
      [
        "public function getName() {\n    $this->incrementNameCalled();\n    return $this->_getName();\n}\n\nprotected function _getName() {\n    return $this->name;\n}\n",
        "$name = $this->_getName();\n"
      ],
      []
    ],
    "votes:": "95",
    "tags": "<java><php><oop><theory>",
    "AcceptedAnswerId": "127",
    "answers": [
      {
        "id": "142",
        "title": "",
        "text": "<p>Well, it seems with C# 3.0 properties' default implementation, the decision is taken for you; you HAVE to set the property using the (possibly private) property setter.</p>\n\n<p>I personally only use the private member-behind when not doing so would cause the object to fall in an less than desirable state, such as when initializing or when caching/lazy loading is involved.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "14968",
        "title": "",
        "text": "<p>i've found using setters/getters made my code easier to read. I also like the control it gives when other classes use the methods and if i change the data the property will store.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "98244",
        "title": "",
        "text": "<p>I'm fairly surprised at how unanimous the sentiment is that <code>getters</code> and setters are fine and good. I suggest the incendiary article by Allen Holub \"<a href=\"http://www.javaworld.com/javaworld/jw-09-2003/jw-0905-toolbox.html\" rel=\"noreferrer\">Getters And Setters Are Evil</a>\". Granted, the title is for shock value, but the author makes valid points.</p>\n\n<p>Essentially, if you have <code>getters</code> and <code>setters</code> for each and every private field, you are making those fields as good as public. You'd be very hard-pressed to change the type of a private field without ripple effects to every class that calls that <code>getter</code>.</p>\n\n<p>Moreover, from a strictly OO point of view, objects should be responding to messages (methods) that correspond to their (hopefully) single responsibility. The vast majority of <code>getters</code> and <code>setters</code> don't make sense for their constituent objects;<code>Pen.dispenseInkOnto(Surface)</code> makes more sense to me than <code>Pen.getColor()</code>.</p>\n\n<p>Getters and setters also encourage users of the class to ask the object for some data, perform a calculation, and then set some other value in the object, better known as procedural programming. You'd be better served to simply tell the object to do what you were going to in the first place; also known as the <a href=\"http://en.wikipedia.org/wiki/GRASP_%28object-oriented_design%29#Information_Expert\" rel=\"noreferrer\">Information Expert</a> idiom.</p>\n\n<p>Getters and setters, however, are necessary evils at the boundary of layers -- UI, persistence, and so forth. Restricted access to a class's internals, such as C++'s friend keyword, Java's package protected access, .NET's internal access, and the <a href=\"http://moffdub.wordpress.com/2008/09/17/friend-classes-in-java-and-c-sharp/\" rel=\"noreferrer\">Friend Class Pattern</a> can help you reduce the visibility of <code>getters</code> and setters to only those who need them.</p>\n",
        "votes": "25",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3485",
        "title": "",
        "text": "<p>I can be wrong because I'm autodidact, but I NEVER user public properties in my Java classes, they are always private or protected, so that outside code must access by getters/setters. It's better for maintenance / modification purposes. And for inside class code... If getter method is trivial I use the property directly, but I always use the setter methods because I could easily add code to fire events if I wish.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "62045",
        "title": "",
        "text": "<p>I like the answer by <a href=\"https://stackoverflow.com/questions/126/how-would-you-access-object-properties-from-within-an-object-method#132\">cmcculloh</a>, but it seems like the most correct is the answer by <a href=\"https://stackoverflow.com/questions/126/how-would-you-access-object-properties-from-within-an-object-method#127\">Greg Hurlman</a>. Use getter/setters all the time if you started using them from the getgo and/or are used to working with them.</p>\n\n<p>As an aside, I personally find that using getter/setters makes the code easier to read and to debug later on.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2099971",
        "title": "",
        "text": "<p>i would say its better to use the accessor methods even within the object. Here are the points that come to my mind immediately:</p>\n\n<p>1) It should be done in the interest of maintaining consistency with accesses made outside the object.</p>\n\n<p>2) In some cases, these accessor methods could be doing more than just accessing the field; they could be doing some additional processing (its rare though). If this is the case, by accessing the field directly you would missing out that additional processing and your program could go awry if this processing is always to be done during those accesses</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6237699",
        "title": "",
        "text": "<p>I must be missing the point here, why would you use a getter inside an object to access a property of that object?</p>\n\n<p>Taking this to its conclusion the getter should call a getter, which should call a getter.</p>\n\n<p>So I'd say inside an object method access a property directly, especially seeing as calling another method in that object (which will just access the property directly anyway then return it) is just a pointless, wasteful exercise (or have I misunderstood the question).</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "22111",
        "title": "",
        "text": "<p>If I won't edit the property I'll use a <code>get_property()</code> public method unless it's a special occasion such as a MySQLi object inside another object in which case I'll just public the property and refer to it as <code>$obj-&gt;object_property</code>.</p>\n\n<p>Inside the object it's always $this->property for me.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "169",
        "title": "",
        "text": "<p>Personally, I feel like it's important to remain consistent.  If you have getters and setters, use them.  The only time I would access a field directly is when the accessor has a lot of overhead.  It may feel like you're bloating your code unnecessarily, but it can certainly save a whole lot of headache in the future.  The classic example:</p>\n\n<p>Later on, you may desire to change the way that field works.  Maybe it should be calculated on-the-fly or maybe you would like to use a different type for the backing store.  If you are accessing properties directly, a change like that can break an awful lot of code in one swell foop.</p>\n",
        "votes": "42",
        "tags": "",
        "accepted": false
      },
      {
        "id": "14980",
        "title": "",
        "text": "<p>Private fields with public or protected properties.  Access to the values should go through the properties, and be copied to a local variable if they will be used more than once in a method.  If and ONLY if you have the rest of your application so totally tweaked, rocked out, and otherwise optimized to where accessing values by going through their assosciated properties has become a bottleneck (And that will never EVER happen, I guarantee) should you even begin to consider letting anything other than the properties touch their backing variables directly.</p>\n\n<p>.NET developers can use automatic properties to enforce this since you can't even see the backing variables at design time.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "127",
        "title": "",
        "text": "<p>This has religious war potential, but it seems to me that if you're using a getter/setter, you should use it internally as well - using both will lead to maintenance problems down the road (e.g. somebody adds code to a setter that <em>needs</em> to run every time that property is set, and the property is being set internally w/o that setter being called).</p>\n",
        "votes": "63",
        "tags": "",
        "accepted": true
      },
      {
        "id": "128488",
        "title": "",
        "text": "<p>PHP offers a myriad of ways to handle this, including magic methods <code>__get</code> and <code>__set</code>, but I prefer explicit getters and setters. Here's why:</p>\n\n<ol>\n<li>Validation can be placed in setters (and getters for that matter)</li>\n<li>Intellisense works with explicit methods</li>\n<li>No question whether a property is read only, write only or read-write</li>\n<li>Retrieving virtual properties (ie, calculated values) looks the same as regular properties </li>\n<li>You can easily set an object property that is never actually defined anywhere, which then goes undocumented </li>\n</ol>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "157081",
        "title": "",
        "text": "<p>It depends. It's more a style issue than anything else, and there is no hard rule.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "128",
        "title": "",
        "text": "<p>It depends on how the property is used. For example, say you have a student object that has a name property. You could use your Get method to pull the name from the database, if it hasn't been retrieved already. This way you are reducing unnecessary calls to the database.</p>\n\n<p>Now let's say you have a private integer counter in your object that counts the number of times the name has been called. You may want to not use the Get method from inside the object because it would produce an invalid count.</p>\n",
        "votes": "18",
        "tags": "",
        "accepted": false
      },
      {
        "id": "22083",
        "title": "",
        "text": "<p>If by \"purist\" you mean \"most encapsulation\", then I typically declare all my fields as private and then use this.field from within the class itself, but all other classes, including subclasses, access instance state using the getters.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "128396",
        "title": "",
        "text": "<p>The purist OO way is to avoid both and follow the <a href=\"https://en.wikipedia.org/wiki/Law_of_Demeter\" rel=\"nofollow noreferrer\">Law of Demeter</a> by using the <a href=\"http://c2.com/cgi/wiki?TellDontAsk\" rel=\"nofollow noreferrer\">Tell Don't Ask</a> approach.</p>\n\n<p>Instead of getting the value of the object's property, which <a href=\"https://stackoverflow.com/questions/2832017/what-is-the-difference-between-loose-coupling-and-tight-coupling-in-object-orien\">tightly couples</a> the two class, use the object as a parameter e.g.</p>\n\n<pre><code>  doSomethingWithProperty() {\n     doSomethingWith( this.property ) ;\n  }\n</code></pre>\n\n<p>Where the property was a native type, e.g. int, use an access method,  name it for problem domain not the programming domain.</p>\n\n<pre><code>  doSomethingWithProperty( this.daysPerWeek() ) ;\n</code></pre>\n\n<p>These will allow you to maintain encapsulation and any post-conditions or dependent invariants. You can also use the setter method to maintain any pre-conditions or dependent invariants, however don't fall into the trap of naming them setters, go back to the Hollywood Principle for naming when using the idiom.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "139",
        "title": "",
        "text": "<blockquote>\n  <p>Am I just going overboard here?</p>\n</blockquote>\n\n<p>Perhaps ;)</p>\n\n<p>Another approach would be to utilize a private/protected method to actually do the getting (caching/db/etc), and a public wrapper for it that increments the count:</p>\n\n<p>PHP:</p>\n\n<pre><code>public function getName() {\n    $this-&gt;incrementNameCalled();\n    return $this-&gt;_getName();\n}\n\nprotected function _getName() {\n    return $this-&gt;name;\n}\n</code></pre>\n\n<p>and then from within the object itself:</p>\n\n<p>PHP:</p>\n\n<pre><code>$name = $this-&gt;_getName();\n</code></pre>\n\n<p>This way you can still use that first argument for something else (like sending a flag for whether or not to used cached data here perhaps).</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "143",
        "title": "",
        "text": "<p>As stated in some of the comments: Sometimes you should, sometimes you shouldn't. The great part about private variables is that you are able to see all the places they are used when you change something. If your getter/setter does something you need, use it. If it doesn't matter you decide.</p>\n\n<p>The opposite case could be made that if you use the getter/setter and somebody changes the getter/setter they have to analyze all the places the getter and setter is used internally to see if it messes something up.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "129",
    "url": "https://stackoverflow.com/questions/129",
    "title": "How to export data from SQL Server 2005 to MySQL",
    "text:": "<p>I've been banging my head against <code>SQL Server 2005</code> trying to get a lot of data out.  I've been given a database with nearly 300 tables in it and I need to turn this into a MySQL database.  My first call was to use bcp but unfortunately it doesn't produce valid CSV - strings aren't encapsulated, so you can't deal with any row that has a string with a comma in it (or whatever you use as a delimiter) and I would still have to hand write all of the create table statements, as obviously CSV doesn't tell you anything about the data types.</p>\n\n<p>What would be better is if there was some tool that could connect to both SQL Server and MySQL, then do a copy. You lose views, stored procedures, trigger, etc, but it isn't hard to copy a table that only uses base types from one DB to another... is it?</p>\n\n<p>Does anybody know of such a tool?  I don't mind how many assumptions it makes or what simplifications occur, as long as it supports integer, float, datetime and string. I have to do a lot of pruning, normalising, etc. anyway so I don't care about keeping keys, relationships or anything like that, but I need the initial set of data in fast!</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "85",
    "tags": "<mysql><sql-server><csv><sql-server-2005><bcp>",
    "AcceptedAnswerId": "",
    "answers": [
      {
        "id": "141",
        "title": "",
        "text": "<p>Another tool to try would be the SQLMaestro suite - <a href=\"http://www.sqlmaestro.com\" rel=\"noreferrer\">http://www.sqlmaestro.com</a> It is a little tricky nailing down the precise tool, but they have a variety of tools, both free and for purchase that handle a wide variety of tasks for multiple database platforms. I'd suggest trying the Data Wizard tool first for MySQL, since I believe that will have the proper \"import\" tool you need.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "135",
        "title": "",
        "text": "<p>Rolling your own PHP solution will certainly work though I'm not sure if there is a good way to automatically duplicate the schema from one DB to the other (maybe this was your question).</p>\n\n<p>If you are just copying data, and/or you need custom code anyway to convert between modified schemas between the two DB's, I would recommend using PHP 5.2+ and the PDO libraries.  You'll be able to connect using PDO ODBC (and use MSSQL drivers).  I had a lot of problems getting large text fields and multi-byte characters from MSSQL into PHP using other libraries.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "64384",
        "title": "",
        "text": "<p>Using MSSQL Management Studio i've transitioned tables with the MySQL OLE DB.  Right click on your database and go to \"Tasks->Export Data\" from there you can specify a MsSQL OLE DB source, the MySQL OLE DB source and create the column mappings between the two data sources.  </p>\n\n<p>You'll most likely want to setup the database and tables in advance on the MySQL destination (the export will want to create the tables automatically, but this often results in failure). You can quickly create the tables in MySQL using the \"Tasks->Generate Scripts\" by right clicking on the database.  Once your creation scripts are generated you'll need to step through and search/replace for keywords and types that exist in MSSQL to MYSQL. </p>\n\n<p>Of course you could also backup the database like normal and find a utility which will restore the MSSQL backup on MYSQL. I'm not sure if one exists however.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "64304",
        "title": "",
        "text": "<p>SQL Server 2005 \"Standard\", \"Developer\" and \"Enterprise\" editions have <a href=\"http://en.wikipedia.org/wiki/SQL_Server_Integration_Services\" rel=\"noreferrer\">SSIS</a>, which replaced DTS from Sql server 2000. SSIS has a built in connection to it's own DB, and you can find a connection that someone else has written for MySQL. <a href=\"http://jmayo.spaces.live.com/blog/cns!5F243997972597CE!399.entry\" rel=\"noreferrer\">Here</a> is one example. Once you have your connections, you should be able to create an SSIS package that moves data between the two. </p>\n\n<p>I have not had to move data from SQlServer to MySQL, but I imagine that once the MySQl connection is installed, it works the same as moving data between two SQLServer DBs, which is pretty straight forward.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "160",
        "title": "",
        "text": "<p>The best way that I have found is the <a href=\"http://www.mysql.com/products/tools/migration-toolkit/\" rel=\"noreferrer\">MySQL Migration Toolkit</a> provided by MySQL.  I have used it successfully for some large migration projects.</p>\n",
        "votes": "60",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "145",
    "url": "https://stackoverflow.com/questions/145",
    "title": "Compressing / Decompressing Folders & Files",
    "text:": "<p>Does anyone know of a good way to compress or decompress files and folders in C# quickly? Handling large files might be necessary.</p>\n",
    "codes": [
      [
        "public static byte[] Compress(byte[] data)\n{\n    MemoryStream output = new MemoryStream();\n\n    GZipStream gzip = new GZipStream(output, CompressionMode.Compress, true);\n    gzip.Write(data, 0, data.Length);\n    gzip.Close();\n\n    return output.ToArray();\n}\n\npublic static byte[] Decompress(byte[] data)\n{\n    MemoryStream input = new MemoryStream();\n    input.Write(data, 0, data.Length);\n    input.Position = 0;\n\n    GZipStream gzip = new GZipStream(input, CompressionMode.Decompress, true);\n\n    MemoryStream output = new MemoryStream();\n\n    byte[] buff = new byte[64];\n    int read = -1;\n\n    read = gzip.Read(buff, 0, buff.Length);\n\n    while (read > 0)\n    {\n        output.Write(buff, 0, read);\n        read = gzip.Read(buff, 0, buff.Length);\n    }\n\n    gzip.Close();\n\n    return output.ToArray();\n}\n"
      ],
      [],
      [],
      [],
      [
        "public async Task<string> CreateZipFile(string sourceDirectoryPath, string name)\n{\n    var path = HostingEnvironment.MapPath(TempPath) + name;\n    await Task.Run(() =>\n    {\n        if (File.Exists(path)) File.Delete(path);\n        ZipFile.CreateFromDirectory(sourceDirectoryPath, path);\n    });\n    return path;\n}\n",
        "public async Task ExtractZipFile(string filePath, string destinationDirectoryName)\n{\n    await Task.Run(() =>\n    {\n        var archive = ZipFile.Open(filePath, ZipArchiveMode.Read);\n        foreach (var entry in archive.Entries)\n        {\n            entry.ExtractToFile(Path.Combine(destinationDirectoryName, entry.FullName), true);\n        }\n        archive.Dispose();\n    });\n}\n",
        "public async Task ExtractZipFile(Stream zipFile, string destinationDirectoryName)\n{\n    string filePath = HostingEnvironment.MapPath(TempPath) + Utility.GetRandomNumber(1, int.MaxValue);\n    using (FileStream output = new FileStream(filePath, FileMode.Create))\n    {\n        await zipFile.CopyToAsync(output);\n    }\n    await Task.Run(() => ZipFile.ExtractToDirectory(filePath, destinationDirectoryName));\n    await Task.Run(() => File.Delete(filePath));\n}\n"
      ],
      [],
      [],
      [],
      []
    ],
    "votes:": "59",
    "tags": "<c#><.net><file><compression>",
    "AcceptedAnswerId": "",
    "answers": [
      {
        "id": "2142",
        "title": "",
        "text": "<p>The .Net 2.0 framework namespace <code>System.IO.Compression</code> supports GZip and Deflate algorithms. Here are two methods that compress and decompress a byte stream which you can get from your file object. You can substitute <code>GZipStream</code> for <code>DefaultStream</code> in the methods below to use that algorithm. This still leaves the problem of handling files compressed with different algorithms though.</p>\n\n<pre><code>public static byte[] Compress(byte[] data)\n{\n    MemoryStream output = new MemoryStream();\n\n    GZipStream gzip = new GZipStream(output, CompressionMode.Compress, true);\n    gzip.Write(data, 0, data.Length);\n    gzip.Close();\n\n    return output.ToArray();\n}\n\npublic static byte[] Decompress(byte[] data)\n{\n    MemoryStream input = new MemoryStream();\n    input.Write(data, 0, data.Length);\n    input.Position = 0;\n\n    GZipStream gzip = new GZipStream(input, CompressionMode.Decompress, true);\n\n    MemoryStream output = new MemoryStream();\n\n    byte[] buff = new byte[64];\n    int read = -1;\n\n    read = gzip.Read(buff, 0, buff.Length);\n\n    while (read &gt; 0)\n    {\n        output.Write(buff, 0, read);\n        read = gzip.Read(buff, 0, buff.Length);\n    }\n\n    gzip.Close();\n\n    return output.ToArray();\n}\n</code></pre>\n",
        "votes": "27",
        "tags": "",
        "accepted": false
      },
      {
        "id": "165",
        "title": "",
        "text": "<p>You can use a <a href=\"http://sharpdevelop.net/OpenSource/SharpZipLib/\" rel=\"nofollow noreferrer\">3rd-party library such as SharpZip</a> as Tom pointed out.</p>\n\n<p>Another way (without going 3rd-party) is to use the Windows Shell API. You'll need to set a reference to the Microsoft Shell Controls and Automation COM library in your C# project. Gerald Gibson has an example at:</p>\n\n<p><a href=\"http://web.archive.org/web/20130724085455/http://geraldgibson.net/dnn/Home/CZipFileCompression/tabid/148/Default.aspx\" rel=\"nofollow noreferrer\">Internet Archive's copy of the dead page</a></p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "20032943",
        "title": "",
        "text": "<p>My answer would be close your eyes and opt for <a href=\"http://dotnetzip.codeplex.com/\" rel=\"noreferrer\">DotNetZip</a>. It's been tested by a large community.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "151",
        "title": "",
        "text": "<p>I've always used the SharpZip Library.</p>\n\n<p><a href=\"http://sharpdevelop.net/OpenSource/SharpZipLib/Download.aspx\" rel=\"noreferrer\">Here's a link</a></p>\n",
        "votes": "21",
        "tags": "",
        "accepted": false
      },
      {
        "id": "48174631",
        "title": "",
        "text": "<p>You can create zip file with this method:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public async Task&lt;string&gt; CreateZipFile(string sourceDirectoryPath, string name)\n{\n    var path = HostingEnvironment.MapPath(TempPath) + name;\n    await Task.Run(() =&gt;\n    {\n        if (File.Exists(path)) File.Delete(path);\n        ZipFile.CreateFromDirectory(sourceDirectoryPath, path);\n    });\n    return path;\n}\n</code></pre>\n\n<p>and then you can unzip zip file with this methods:</p>\n\n<p>1- This method work with zip file path</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public async Task ExtractZipFile(string filePath, string destinationDirectoryName)\n{\n    await Task.Run(() =&gt;\n    {\n        var archive = ZipFile.Open(filePath, ZipArchiveMode.Read);\n        foreach (var entry in archive.Entries)\n        {\n            entry.ExtractToFile(Path.Combine(destinationDirectoryName, entry.FullName), true);\n        }\n        archive.Dispose();\n    });\n}\n</code></pre>\n\n<p>2- This method work with zip file stream</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>public async Task ExtractZipFile(Stream zipFile, string destinationDirectoryName)\n{\n    string filePath = HostingEnvironment.MapPath(TempPath) + Utility.GetRandomNumber(1, int.MaxValue);\n    using (FileStream output = new FileStream(filePath, FileMode.Create))\n    {\n        await zipFile.CopyToAsync(output);\n    }\n    await Task.Run(() =&gt; ZipFile.ExtractToDirectory(filePath, destinationDirectoryName));\n    await Task.Run(() =&gt; File.Delete(filePath));\n}\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "149",
        "title": "",
        "text": "<p>As of .Net 1.1 the only available method is reaching into the java libraries.</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/archive/msdn-magazine/2003/june/using-jsharp-class-libraries-to-compress-files-and-data-with-csharp\" rel=\"nofollow noreferrer\">Using the Zip Classes in the J# Class Libraries to Compress Files and Data with C#</a></p>\n\n<p>Not sure if this has changed in recent versions.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1716",
        "title": "",
        "text": "<p>This is very easy to do in java, and as stated above you can reach into the java.util.zip libraries from C#.  For references see:</p>\n\n<p><a href=\"http://java.sun.com/j2se/1.4.2/docs/api/java/util/zip/package-summary.html\" rel=\"noreferrer\">java.util.zip javadocs</a>\n<br>\n<a href=\"http://www.devx.com/getHelpOn/10MinuteSolution/20447\" rel=\"noreferrer\">sample code</a></p>\n\n<p>I used this a while ago to do a deep (recursive) zip of a folder structure, but I don't think I ever used the unzipping.  If I'm so motivated I may pull that code out and edit it into here later.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "8438622",
        "title": "",
        "text": "<p>Another good alternative is also <a href=\"http://dotnetzip.codeplex.com/\" rel=\"noreferrer\">DotNetZip</a>.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "10568788",
        "title": "",
        "text": "<p><a href=\"http://www.dotnetperls.com/gzipstream\" rel=\"noreferrer\">GZipStream</a> is a really good utility to use.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "146",
    "url": "https://stackoverflow.com/questions/146",
    "title": "How do I track file downloads",
    "text:": "<p>I have a website that plays mp3s in a flash player. If a user clicks 'play' the flash player automatically downloads an mp3 and starts playing it. </p>\n\n<p>Is there an easy way to track how many times a particular song clip (or any binary file) has been downloaded?</p>\n\n<hr>\n\n<blockquote>\n  <p>Is the play link a link to the actual\n  mp3 file or to some javascript code\n  that pops up a player?</p>\n  \n  <p>If the latter, you can easily add your\n  own logging code in there to track the\n  number of hits to it.</p>\n  \n  <p>If the former, you'll need something\n  that can track the web server log\n  itself and make that distinction. My\n  hosting plan comes with Webalizer,\n  which does this nicely.</p>\n</blockquote>\n\n<p>It's a javascript code so that answers that. </p>\n\n<p>However, it would be nice to know how to track downloads using the other method (without switching hosts).</p>\n",
    "codes": [
      [],
      [
        "$filename = base64_url_decode($_REQUEST['file']);\nheader(\"Cache-Control: public\");\nheader('Content-disposition: attachment; filename='.basename($filename));\nheader(\"Content-Transfer-Encoding: binary\");\nheader('Content-Length: '. filesize($filename));\n\n//  Put either file counting code here. either a db or static files\n\n//\n\nreadfile($filename);  //and spit the user the file\n\n\nfunction base64_url_decode($input) {\n    return base64_decode(strtr($input, '-_,', '+/='));\n}\n",
        "function base64_url_encode($input) {\n     return strtr(base64_encode($input), '+/=', '-_,');\n}\n"
      ],
      [],
      [],
      [],
      [],
      [
        "grep mp3 /var/log/httpd/access_log | wc\n"
      ],
      []
    ],
    "votes:": "79",
    "tags": "<php><apache><logging><download><analytics>",
    "AcceptedAnswerId": "152",
    "answers": [
      {
        "id": "153",
        "title": "",
        "text": "<p>You could even set up an Apache .htaccess directive that converts *.mp3 requests into the querystring dubayou is working with.  It might be an elegant way to keep the direct request and still be able to slipstream log function into the response.</p>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "152",
        "title": "",
        "text": "<p>The funny thing is I wrote a php media gallery for all my music 2 days ago. I had a similar problem.  I'm using <a href=\"http://musicplayer.sourceforge.net/\" rel=\"nofollow noreferrer\">http://musicplayer.sourceforge.net/</a> for the player. And the playlist are built via php. All music request go there a script called xfer.php?file=WHATEVER</p>\n\n<pre><code>$filename = base64_url_decode($_REQUEST['file']);\nheader(\"Cache-Control: public\");\nheader('Content-disposition: attachment; filename='.basename($filename));\nheader(\"Content-Transfer-Encoding: binary\");\nheader('Content-Length: '. filesize($filename));\n\n//  Put either file counting code here. either a db or static files\n\n//\n\nreadfile($filename);  //and spit the user the file\n\n\nfunction base64_url_decode($input) {\n    return base64_decode(strtr($input, '-_,', '+/='));\n}\n</code></pre>\n\n<p>And when you call files use something like:</p>\n\n<pre><code>function base64_url_encode($input) {\n     return strtr(base64_encode($input), '+/=', '-_,');\n}\n</code></pre>\n\n<p><a href=\"http://us.php.net/manual/en/function.base64-encode.php\" rel=\"nofollow noreferrer\">http://us.php.net/manual/en/function.base64-encode.php</a></p>\n\n<p>If you are using some javascript or a flash player (JW player for example) that requires the actual link to be an mp3 file or whatever, you can append the text \"&amp;type=.mp3\" so the final linke becomes something like:\n\"www.example.com/xfer.php?file=34842ffjfjxfh&amp;type=.mp3\". That way it looks like it ends with an mp3 extension without affecting the file link.</p>\n",
        "votes": "44",
        "tags": "",
        "accepted": true
      },
      {
        "id": "148",
        "title": "",
        "text": "<p>Is the play link a link to the actual mp3 file or to some javascript code that pops up a player? </p>\n\n<p>If the latter, you can easily add your own logging code in there to track the number of hits to it.</p>\n\n<p>If the former, you'll need something that can track the web server log itself and make that distinction. My hosting plan comes with webalizer, which does this nicely.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "37722221",
        "title": "",
        "text": "<p>The problem I had with things like AWStats / reading through web server logs  is that large downloads can often be split in data chunks within the logs. This makes reconciling the exact number of downloads quite hard.</p>\n\n<p>I'd suggest the Google Analytics <a href=\"https://developers.google.com/analytics/devguides/collection/analyticsjs/events\" rel=\"nofollow\">Event Tracking</a>, as this will register once per click on a download link.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "44446",
        "title": "",
        "text": "<p>Is there a database for your music library? If there is any server code that runs when downloading the mp3 then you can add extra code there to increment the play count. You could also have javascript make a second request to increment the play count, but this could lead to people/robots falsely incrementing counts.</p>\n\n<p>I used to work for an internet-radio site and we used separate tables to track the time every song was played. Our streams were powered by a perl script running icecast, so we triggered a database request every time a new track started playing. Then to compute the play count we would run a query to count how many times a song's id was in the play log.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "158",
        "title": "",
        "text": "<p>Use your httpd log files. Install <a href=\"http://awstats.sourceforge.net/\" rel=\"noreferrer\">http://awstats.sourceforge.net/</a></p>\n",
        "votes": "28",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1507462",
        "title": "",
        "text": "<p>Use bash:</p>\n\n<pre><code>grep mp3 /var/log/httpd/access_log | wc\n</code></pre>\n",
        "votes": "25",
        "tags": "",
        "accepted": false
      },
      {
        "id": "195266",
        "title": "",
        "text": "<p>If your song / binary file was served by apache, you can easily grep the access_log to find out the number of downloads. A simple post-logrotate script can grep the logs and maintain your count statistics in a db.\nThis has the performance advantage by not being in your live request code path. Doing non-critical things like stats offline is a good idea to scale your website to large number of users.</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "163",
    "url": "https://stackoverflow.com/questions/163",
    "title": "How do I sync the SVN revision number with my ASP.NET web site?",
    "text:": "<p>Stack Overflow has a subversion version number at the bottom:</p>\n\n<blockquote>\n  <p>svn revision: 679</p>\n</blockquote>\n\n<p>I want to use such automatic versioning with my <code>.NET Web Site/Application</code>, Windows Forms, WPD projects/solutions.</p>\n\n<p>How do I implement this?</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      [
        "$Id:$\n",
        "<div id=\"svnrevision\">svn revision: $Id:$</div>\n"
      ],
      []
    ],
    "votes:": "92",
    "tags": "<.net><asp.net><svn><versioning>",
    "AcceptedAnswerId": "170",
    "answers": [
      {
        "id": "65747",
        "title": "",
        "text": "<p>@Balloon\nIf you are using TortoiseSVN, you can use the packaged <a href=\"http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-subwcrev.html\" rel=\"noreferrer\">SubWCRev</a> program. It queries a working copy and tells you just the highest revision number. Admittedly, this seems to be a client-side approach to a server-side problem, but since it's a nice command line program, you should be able to capture its output for use fairly easily.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "9391",
        "title": "",
        "text": "<p><code>$rev</code> and others like it are revisions for the individual files, so they won't change unless the file changes. The number on the webpage is (most likely, I'm assuming here) the svn revision number for the whole project. That is different than the file revisions, which others have been pointing to.</p>\n\n<p>In this case I assume that CCNET is pulling the revision number of the project and rewriting a part of the webpage with that number. Any CI solution should be able to do this, set this up myself with CCNET and Teamcity (although not webpages, but automatic versioning of deployment/assembly versions).</p>\n\n<p>In order for you to do this, use a CI solution that supports it, or use your build process (MSbuild/Nant) to store that version and write it to the files before \"deploying\" it.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "13258",
        "title": "",
        "text": "<p>We do this with <a href=\"http://www.codeplex.com/xunit\" rel=\"nofollow noreferrer\">xUnit.net</a> for our automated builds. We use <code>CruiseControl.net</code> (and are trying out TeamCity). The MSBuild task that we run for continuous integration automatically changes the build number for us, so the resulting build ZIP file contains a properly versioned set of DLLs and EXEs.</p>\n\n<p>Our <a href=\"http://www.codeplex.com/xunit/SourceControl/FileView.aspx?itemId=115610&amp;changeSetId=20735\" rel=\"nofollow noreferrer\">MSBuild file</a> contains a UsingTask reference for a DLL which does regular expression replacements: (you're welcome to use this DLL, as it's covered by the MS-PL license as well)</p>\n\n<pre>\n  &lt;UsingTask\n     AssemblyFile=\"3rdParty\\CodePlex.MSBuildTasks.dll\"\n     TaskName=\"CodePlex.MSBuildTasks.RegexReplace\"/&gt;\n</pre>\n\n<p>Next, we extract the build number, which is provided automatically by the CI system. You could also get your source control provider to provide the source revision number if you want, but we found the build # in the CI system was more useful, because not only can see the integration results by the CI build number, that also provides a link back to the changeset(s) which were included in the build.</p>\n\n<pre>\n &lt;!-- Cascading attempts to find a build number -->\n\n &lt;PropertyGroup Condition=\"'$(BuildNumber)' == ''\">\n   &lt;BuildNumber>$(BUILD_NUMBER)&lt;/BuildNumber>\n &lt;/PropertyGroup>\n &lt;PropertyGroup Condition=\"'$(BuildNumber)' == ''\">\n   &lt;BuildNumber>$(ccnetlabel)&lt;/BuildNumber>\n &lt;/PropertyGroup>\n &lt;PropertyGroup Condition=\"'$(BuildNumber)' == ''\">\n   &lt;BuildNumber>0&lt;/BuildNumber>\n &lt;/PropertyGroup>\n</pre>\n\n<p>(We try BUILD_NUMBER, which is from TeamCity, then ccnetlabel, which is from CC.net, and if neither is present, we default to 0, so that we can test the automated build script manually.)</p>\n\n<p>Next, we have a task which sets the build number into a GlobalAssemblyInfo.cs file that we link into all of our projects:</p>\n\n<pre>\n &lt;Target Name=\"SetVersionNumber\">\n   &lt;RegexReplace\n       Pattern='AssemblyVersion\\(\"(\\d+\\.\\d+\\.\\d+)\\.\\d+\"\\)'\n       Replacement='AssemblyVersion(\"$1.$(BuildNumber)\")'\n       Files='GlobalAssemblyInfo.cs'/>\n   &lt;Exec Command=\"attrib -r xunit.installer\\App.manifest\"/>\n &lt;/Target>\n</pre>\n\n<p>This find the AssemblyVersion attribute, and replaces the a.b.c.d version number with a.b.c.BuildNumber. We will usually leave the source checked into the tree with the first three parts of the builder number fixed, and the fourth at zero (f.e., today it's 1.0.2.0).</p>\n\n<p>In your build process, make sure the SetVersionNumber task precedes your build task. At the end, we use our Zip task to zip up the build results so that we have a history of the binaries for every automated build.</p>\n",
        "votes": "26",
        "tags": "",
        "accepted": false
      },
      {
        "id": "374153",
        "title": "",
        "text": "<p>If you're using <code>ASP.Net MVC</code> (as StackOverflow does), I've written an <a href=\"http://www.fatlemon.co.uk/2008/12/automatic-svn-revision-numbering-in-aspnet-mvc/\" rel=\"nofollow noreferrer\" title=\"Automatic SVN revision numbering in ASP.Net MVC - www.fatlemon.co.uk\">easy to follow 3-step guide on how to automatically get and display the latest SVN revision</a>.  The guide was inspired by thinking to myself about this very question!  :o)</p>\n",
        "votes": "17",
        "tags": "",
        "accepted": false
      },
      {
        "id": "157243",
        "title": "",
        "text": "<p>To add to @BradWilson's answer: <em>\"You could also get your source control provider to provide the source revision number if you want\"</em></p>\n\n<p>To connect Subversion and MSBuild:\n<a href=\"http://msbuildtasks.tigris.org/\" rel=\"nofollow noreferrer\">MSBuild Community Tasks Project</a> </p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "166",
        "title": "",
        "text": "<p>You can do it by adding the following anywhere in your code </p>\n\n<pre><code>$Id:$\n</code></pre>\n\n<p>So for example @Jeff did:</p>\n\n<pre><code>&lt;div id=\"svnrevision\"&gt;svn revision: $Id:$&lt;/div&gt;\n</code></pre>\n\n<p>and when checked in the server replaced $Id:$ with the current revision number.  I also <a href=\"http://www.compuphase.com/svnrev.htm\" rel=\"nofollow noreferrer\">found this reference</a>.</p>\n\n<p>There is also <strong>$Date:$</strong>, <strong>$Rev:$</strong>, <strong>$Revision:$</strong></p>\n",
        "votes": "31",
        "tags": "",
        "accepted": false
      },
      {
        "id": "170",
        "title": "",
        "text": "<p>Looks like Jeff is using <a href=\"https://web.archive.org/web/20090130045625/http://confluence.public.thoughtworks.org/display/CCNET/What+is+CruiseControl.NET\" rel=\"nofollow noreferrer\">CruiseControl.NET</a> based on some leafing through the podcast transcripts. This seems to have automated deployment capabilities from source control to production. Might this be where the insertion is happening?</p>\n",
        "votes": "31",
        "tags": "",
        "accepted": true
      }
    ]
  },
  {
    "id:": "164",
    "url": "https://stackoverflow.com/questions/164",
    "title": "Embedding Windows Media Player for all browsers",
    "text:": "<p>We are using <a href=\"http://en.wikipedia.org/wiki/Windows_Media_Video\" rel=\"noreferrer\">WMV</a> videos on an internal site, and we are embedding them into web sites. This works quite well on Internet Explorer, but not on Firefox. I've found ways to make it work in Firefox, but then it stops working in Internet Explorer.</p>\n\n<p>We do not want to use Silverlight just yet, especially since we cannot be sure that all clients will be running Windows XP with Windows Media Player installed. </p>\n\n<p>Is there some sort of Universal Code that embeds WMP into both Internet Explorer and Firefox, or do we need to implement some user-agent-detection and deliver different HTML for different browsers?</p>\n",
    "codes": [
      [
        "        <object id=\"MediaPlayer1\" width=\"690\" height=\"500\" classid=\"CLSID:22D6F312-B0F6-11D0-94AB-0080C74C7E95\"\n            codebase=\"http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701\"\n            standby=\"Loading Microsoft\u00ae Windows\u00ae Media Player components...\" type=\"application/x-oleobject\"\n            >\n            <param name=\"FileName\" value='<%= GetSource() %>' />\n            <param name=\"AutoStart\" value=\"True\" />\n            <param name=\"DefaultFrame\" value=\"mainFrame\" />\n            <param name=\"ShowStatusBar\" value=\"0\" />\n            <param name=\"ShowPositionControls\" value=\"0\" />\n            <param name=\"showcontrols\" value=\"0\" />\n            <param name=\"ShowAudioControls\" value=\"0\" />\n            <param name=\"ShowTracker\" value=\"0\" />\n            <param name=\"EnablePositionControls\" value=\"0\" />\n\n\n            <!-- BEGIN PLUG-IN HTML FOR FIREFOX-->\n            <embed  type=\"application/x-mplayer2\" pluginspage=\"http://www.microsoft.com/Windows/MediaPlayer/\"\n                src='<%= GetSource() %>' align=\"middle\" width=\"600\" height=\"500\" defaultframe=\"rightFrame\"\n                 id=\"MediaPlayer2\" />\n",
        "    function playVideo() {\n        try{\n                if(-1 != navigator.userAgent.indexOf(\"MSIE\"))\n                {\n                        var obj = document.getElementById(\"MediaPlayer1\");\n                            obj.Play();\n\n                }\n                else\n                {\n                            var player = document.getElementById(\"MediaPlayer2\");\n                            player.controls.play();\n\n                }\n             }  \n        catch(error) {\n            alert(error)\n        } \n\n\n        }\n"
      ],
      [
        "<script type=\"text/javascript\">\n    function generateWindowsMediaPlayer(\n        holderId,   // String\n        height,     // Number\n        width,      // Number\n        videoUrl    // String\n        // you can declare more arguments for more flexibility\n        ) {\n        var holder = document.getElementById(holderId);\n\n        var player = '<object ';\n        player += 'height=\"' + height.toString() + '\" ';\n        player += 'width=\"' + width.toString() + '\" ';\n\n        videoUrl = encodeURI(videoUrl); // Encode for special characters\n\n        if (navigator.userAgent.indexOf(\"MSIE\") < 0) {\n            // Chrome, Firefox, Opera, Safari\n            //player += 'type=\"application/x-ms-wmp\" '; //Old Edition\n            player += 'type=\"video/x-ms-wmp\" '; //New Edition, suggested by MNRSullivan (Read Comments)\n            player += 'data=\"' + videoUrl + '\" >';\n        }\n        else {\n            // Internet Explorer\n            player += 'classid=\"clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6\" >';\n            player += '<param name=\"url\" value=\"' + videoUrl + '\" />';\n        }\n\n        player += '<param name=\"autoStart\" value=\"false\" />';\n        player += '<param name=\"playCount\" value=\"1\" />';\n        player += '</object>';\n\n        holder.innerHTML = player;\n    }\n</script>\n",
        "<div id='wmpHolder'></div>\n\n<script type=\"text/javascript\">        \n    window.addEventListener('load', generateWindowsMediaPlayer('wmpHolder', 240, 320, 'http://mysite.com/path/video.ext'));\n</script>\n"
      ],
      [],
      [
        "<![if !IE]>\n<p> Firefox only code</p>\n<![endif]>\n\n<!--[if IE]>\n<p>Internet Explorer only code</p>\n<![endif]-->\n"
      ],
      [],
      [
        "<object id=\"mediaplayer\" classid=\"clsid:22d6f312-b0f6-11d0-94ab-0080c74c7e95\" codebase=\"http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#version=5,1,52,701\" standby=\"loading microsoft windows media player components...\" type=\"application/x-oleobject\" width=\"320\" height=\"310\">\n<param name=\"filename\" value=\"./test.wmv\">\n     <param name=\"animationatstart\" value=\"true\">\n     <param name=\"transparentatstart\" value=\"true\">\n     <param name=\"autostart\" value=\"true\">\n     <param name=\"showcontrols\" value=\"true\">\n     <param name=\"ShowStatusBar\" value=\"true\">\n     <param name=\"windowlessvideo\" value=\"true\">\n     <embed src=\"./test.wmv\" autostart=\"true\" showcontrols=\"true\" showstatusbar=\"1\" bgcolor=\"white\" width=\"320\" height=\"310\">\n</object>\n"
      ],
      [
        "<object classid=\"CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6\" \n  id=\"player\" width=\"320\" height=\"260\">\n  <param name=\"url\" \n    value=\"http://www.sarahsnotecards.com/catalunyalive/fishstore.wmv\" />\n  <param name=\"src\" \n    value=\"http://www.sarahsnotecards.com/catalunyalive/fishstore.wmv\" />\n  <param name=\"showcontrols\" value=\"true\" />\n  <param name=\"autostart\" value=\"true\" />\n  <!--[if !IE]>-->\n  <object type=\"video/x-ms-wmv\" \n    data=\"http://www.sarahsnotecards.com/catalunyalive/fishstore.wmv\" \n    width=\"320\" height=\"260\">\n    <param name=\"src\" \n      value=\"http://www.sarahsnotecards.com/catalunyalive/fishstore.wmv\" />\n    <param name=\"autostart\" value=\"true\" />\n    <param name=\"controller\" value=\"true\" />\n  </object>\n  <!--<![endif]-->\n</object>\n"
      ],
      [],
      [
        "ffmpeg -i input.avi output.flv\n"
      ]
    ],
    "votes:": "61",
    "tags": "<windows><embed><media>",
    "AcceptedAnswerId": "699",
    "answers": [
      {
        "id": "1227988",
        "title": "",
        "text": "<p>Use the following. It works in Firefox and Internet Explorer.</p>\n\n<pre><code>        &lt;object id=\"MediaPlayer1\" width=\"690\" height=\"500\" classid=\"CLSID:22D6F312-B0F6-11D0-94AB-0080C74C7E95\"\n            codebase=\"http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701\"\n            standby=\"Loading Microsoft\u00ae Windows\u00ae Media Player components...\" type=\"application/x-oleobject\"\n            &gt;\n            &lt;param name=\"FileName\" value='&lt;%= GetSource() %&gt;' /&gt;\n            &lt;param name=\"AutoStart\" value=\"True\" /&gt;\n            &lt;param name=\"DefaultFrame\" value=\"mainFrame\" /&gt;\n            &lt;param name=\"ShowStatusBar\" value=\"0\" /&gt;\n            &lt;param name=\"ShowPositionControls\" value=\"0\" /&gt;\n            &lt;param name=\"showcontrols\" value=\"0\" /&gt;\n            &lt;param name=\"ShowAudioControls\" value=\"0\" /&gt;\n            &lt;param name=\"ShowTracker\" value=\"0\" /&gt;\n            &lt;param name=\"EnablePositionControls\" value=\"0\" /&gt;\n\n\n            &lt;!-- BEGIN PLUG-IN HTML FOR FIREFOX--&gt;\n            &lt;embed  type=\"application/x-mplayer2\" pluginspage=\"http://www.microsoft.com/Windows/MediaPlayer/\"\n                src='&lt;%= GetSource() %&gt;' align=\"middle\" width=\"600\" height=\"500\" defaultframe=\"rightFrame\"\n                 id=\"MediaPlayer2\" /&gt;\n</code></pre>\n\n<p>And in JavaScript,</p>\n\n<pre><code>    function playVideo() {\n        try{\n                if(-1 != navigator.userAgent.indexOf(\"MSIE\"))\n                {\n                        var obj = document.getElementById(\"MediaPlayer1\");\n                            obj.Play();\n\n                }\n                else\n                {\n                            var player = document.getElementById(\"MediaPlayer2\");\n                            player.controls.play();\n\n                }\n             }  \n        catch(error) {\n            alert(error)\n        } \n\n\n        }\n</code></pre>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "16966864",
        "title": "",
        "text": "<p>I found a good article about <a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/dd562847.aspx\" rel=\"nofollow\">using the WMP with Firefox</a> on MSDN.</p>\n\n<p>Based on MSDN's article and after doing some trials and errors, I found using JavaScript is better than using conditional comments or nested \"EMBED/OBJECT\" tags.</p>\n\n<p>I made a JS function that generate WMP object based on given arguments:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    function generateWindowsMediaPlayer(\n        holderId,   // String\n        height,     // Number\n        width,      // Number\n        videoUrl    // String\n        // you can declare more arguments for more flexibility\n        ) {\n        var holder = document.getElementById(holderId);\n\n        var player = '&lt;object ';\n        player += 'height=\"' + height.toString() + '\" ';\n        player += 'width=\"' + width.toString() + '\" ';\n\n        videoUrl = encodeURI(videoUrl); // Encode for special characters\n\n        if (navigator.userAgent.indexOf(\"MSIE\") &lt; 0) {\n            // Chrome, Firefox, Opera, Safari\n            //player += 'type=\"application/x-ms-wmp\" '; //Old Edition\n            player += 'type=\"video/x-ms-wmp\" '; //New Edition, suggested by MNRSullivan (Read Comments)\n            player += 'data=\"' + videoUrl + '\" &gt;';\n        }\n        else {\n            // Internet Explorer\n            player += 'classid=\"clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6\" &gt;';\n            player += '&lt;param name=\"url\" value=\"' + videoUrl + '\" /&gt;';\n        }\n\n        player += '&lt;param name=\"autoStart\" value=\"false\" /&gt;';\n        player += '&lt;param name=\"playCount\" value=\"1\" /&gt;';\n        player += '&lt;/object&gt;';\n\n        holder.innerHTML = player;\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>Then I used that function by writing some markups and inline JS like these:</p>\n\n<pre><code>&lt;div id='wmpHolder'&gt;&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;        \n    window.addEventListener('load', generateWindowsMediaPlayer('wmpHolder', 240, 320, 'http://mysite.com/path/video.ext'));\n&lt;/script&gt;\n</code></pre>\n\n<p>You can use <strong><em>jQuery.ready</em></strong> instead of <strong><em>window load event</em></strong> to making the codes more backward-compatible and cross-browser.</p>\n\n<p>I tested the codes over IE 9-10, Chrome 27, Firefox 21, Opera 12 and Safari 5, on Windows 7/8.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "278953",
        "title": "",
        "text": "<p>Elizabeth Castro has an interesting article on this problem: <a href=\"http://www.alistapart.com/articles/byebyeembed/\" rel=\"noreferrer\">Bye Bye Embed</a>.  Worth a read on how she attacked this problem, as well as handling QuickTime content.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "167",
        "title": "",
        "text": "<p>You could use conditional comments to get IE and Firefox to do different things</p>\n\n<pre><code>&lt;![if !IE]&gt;\n&lt;p&gt; Firefox only code&lt;/p&gt;\n&lt;![endif]&gt;\n\n&lt;!--[if IE]&gt;\n&lt;p&gt;Internet Explorer only code&lt;/p&gt;\n&lt;![endif]--&gt;\n</code></pre>\n\n<p>The browsers themselves will ignore code that isn't meant for them to read.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6230",
        "title": "",
        "text": "<p>May I suggest the <a href=\"http://malsup.com/jquery/media/\" rel=\"noreferrer\">jQuery Media Plugin</a>? Provides embed code for all kinds of video, not just WMV and does browser detection, keeping all that messy switch/case statements out of your templates.</p>\n",
        "votes": "20",
        "tags": "",
        "accepted": false
      },
      {
        "id": "699",
        "title": "",
        "text": "<p>The following works for me in Firefox and Internet Explorer:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;object id=\"mediaplayer\" classid=\"clsid:22d6f312-b0f6-11d0-94ab-0080c74c7e95\" codebase=\"http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#version=5,1,52,701\" standby=\"loading microsoft windows media player components...\" type=\"application/x-oleobject\" width=\"320\" height=\"310\"&gt;\n&lt;param name=\"filename\" value=\"./test.wmv\"&gt;\n     &lt;param name=\"animationatstart\" value=\"true\"&gt;\n     &lt;param name=\"transparentatstart\" value=\"true\"&gt;\n     &lt;param name=\"autostart\" value=\"true\"&gt;\n     &lt;param name=\"showcontrols\" value=\"true\"&gt;\n     &lt;param name=\"ShowStatusBar\" value=\"true\"&gt;\n     &lt;param name=\"windowlessvideo\" value=\"true\"&gt;\n     &lt;embed src=\"./test.wmv\" autostart=\"true\" showcontrols=\"true\" showstatusbar=\"1\" bgcolor=\"white\" width=\"320\" height=\"310\"&gt;\n&lt;/object&gt;\n</code></pre>\n",
        "votes": "47",
        "tags": "",
        "accepted": true
      },
      {
        "id": "1689995",
        "title": "",
        "text": "<p>I have found something that Actually works in both FireFox and IE, on Elizabeth Castro's site (thanks to the link on this site) - I have tried all other versions here, but could not make them work in both the browsers</p>\n\n<pre><code>&lt;object classid=\"CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6\" \n  id=\"player\" width=\"320\" height=\"260\"&gt;\n  &lt;param name=\"url\" \n    value=\"http://www.sarahsnotecards.com/catalunyalive/fishstore.wmv\" /&gt;\n  &lt;param name=\"src\" \n    value=\"http://www.sarahsnotecards.com/catalunyalive/fishstore.wmv\" /&gt;\n  &lt;param name=\"showcontrols\" value=\"true\" /&gt;\n  &lt;param name=\"autostart\" value=\"true\" /&gt;\n  &lt;!--[if !IE]&gt;--&gt;\n  &lt;object type=\"video/x-ms-wmv\" \n    data=\"http://www.sarahsnotecards.com/catalunyalive/fishstore.wmv\" \n    width=\"320\" height=\"260\"&gt;\n    &lt;param name=\"src\" \n      value=\"http://www.sarahsnotecards.com/catalunyalive/fishstore.wmv\" /&gt;\n    &lt;param name=\"autostart\" value=\"true\" /&gt;\n    &lt;param name=\"controller\" value=\"true\" /&gt;\n  &lt;/object&gt;\n  &lt;!--&lt;![endif]--&gt;\n&lt;/object&gt;\n</code></pre>\n\n<p>Check her site out: <a href=\"http://www.alistapart.com/articles/byebyeembed/\" rel=\"nofollow noreferrer\">http://www.alistapart.com/articles/byebyeembed/</a> and the version with the classid in the initial object tag</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "407",
        "title": "",
        "text": "<p><s>The best way to deploy video on the web is using Flash - it's much easier to embed cleanly into a web page and will play on more or less any browser and platform combination. The only reason to use Windows Media Player is if you're streaming content and you need extraordinarily strong digital rights management, and even then providers are now starting to use Flash even for these. See BBC's iPlayer for a superb example.</p>\n\n<p>I would suggest that you switch to Flash even for internal use. You never know who is going to need to access it in the future, and this will give you the best possible future compatibility.</s></p>\n\n<p>EDIT - March 20 2013. \nInteresting how these old questions resurface from time to time! How different the world is today and how dated this all seems. I would not recommend a Flash only route today by any means - best practice these days would probably be to use HTML 5 to embed H264 encoded video, with a Flash fallback as described here: <a href=\"http://diveintohtml5.info/video.html\" rel=\"noreferrer\">http://diveintohtml5.info/video.html</a></p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "971",
        "title": "",
        "text": "<p>Encoding flash video is actually very easy with ffmpeg.  You can use one command to convert from just about any video format, ffmpeg is smart enough to figure the rest out, and it'll use every processor on your machine.  Invoking it is easy:</p>\n\n<pre><code>ffmpeg -i input.avi output.flv\n</code></pre>\n\n<p>ffmpeg will guess at the bitrate you want, but if you'd like to specify one, you can use the -b option, so <code>-b 500000</code> is 500kbps for example.  There's a ton of options of course, but I generally get good results without much tinkering.  This is a good place to start if you're looking for more options: <a href=\"http://ffmpeg.mplayerhq.hu/ffmpeg-doc.html#SEC9\" rel=\"nofollow noreferrer\">video options</a>.</p>\n\n<p>You don't need a special web server to show flash video.  I've done just fine by simply pushing .flv files up to a standard web server, and linking to them with a good swf player, like <a href=\"http://flowplayer.org/\" rel=\"nofollow noreferrer\">flowplayer</a>.</p>\n\n<p>WMVs are fine if you can be sure that all of your users will always use [a recent, up to date version of] Windows only, but even then, Flash is often a better fit for the web.  The player is even extremely skinnable and can be controlled with javascript.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "173",
    "url": "https://stackoverflow.com/questions/173",
    "title": "Versioning SQL Server database",
    "text:": "<p>I want to get my databases under version control.  Does anyone have any advice or recommended articles to get me started?</p>\n\n<p>I'll always want to have at least <em>some</em> data in there (as <a href=\"https://stackoverflow.com/users/80/alumb\">alumb</a> mentions: user types and administrators).  I'll also often want a large collection of generated test data for performance measurements.</p>\n",
    "codes": [
      [
        "IF ISNULL(OBJECT_ID('last_run_sysversions'), 0) <> 0 DROP TABLE last_run_sysversions\nCREATE TABLE last_run_sysversions (\n    name varchar(128), \n    id int, base_schema_ver int,\n    schema_ver int,\n    type char(2)\n)\n",
        "IF ISNULL(OBJECT_ID('tempdb.dbo.#tmp'), 0) <> 0 DROP TABLE #tmp\nCREATE TABLE #tmp (\n    name varchar(128), \n    id int, base_schema_ver int,\n    schema_ver int,\n    type char(2)\n)\n\nSET NOCOUNT ON\n\n-- Insert the values from the end of the last run into #tmp\nINSERT #tmp (name, id, base_schema_ver, schema_ver, type) \nSELECT name, id, base_schema_ver, schema_ver, type FROM last_run_sysversions\n\nDELETE last_run_sysversions\nINSERT last_run_sysversions (name, id, base_schema_ver, schema_ver, type)\nSELECT name, id, base_schema_ver, schema_ver, type FROM sysobjects\n\n-- This next bit lists all differences to scripts.\nSET NOCOUNT OFF\n\n--Renamed.\nSELECT 'renamed' AS ChangeType, t.name, o.name AS extra_info, 1 AS Priority\nFROM sysobjects o INNER JOIN #tmp t ON o.id = t.id\nWHERE o.name <> t.name /*COLLATE*/\nAND o.type IN ('TR', 'P' ,'U' ,'V')\nUNION \n\n--Changed (using alter)\nSELECT 'changed' AS ChangeType, o.name /*COLLATE*/, \n       'altered' AS extra_info, 2 AS Priority\nFROM sysobjects o INNER JOIN #tmp t ON o.id = t.id \nWHERE (\n   o.base_schema_ver <> t.base_schema_ver\nOR o.schema_ver      <> t.schema_ver\n)\nAND  o.type IN ('TR', 'P' ,'U' ,'V')\nAND  o.name NOT IN ( SELECT oi.name \n         FROM sysobjects oi INNER JOIN #tmp ti ON oi.id = ti.id\n         WHERE oi.name <> ti.name /*COLLATE*/\n         AND oi.type IN ('TR', 'P' ,'U' ,'V')) \nUNION\n\n--Changed (actually dropped and recreated [but not renamed])\nSELECT 'changed' AS ChangeType, t.name, 'dropped' AS extra_info, 2 AS Priority\nFROM #tmp t\nWHERE    t.name IN ( SELECT ti.name /*COLLATE*/ FROM #tmp ti\n         WHERE NOT EXISTS (SELECT * FROM sysobjects oi\n                           WHERE oi.id = ti.id))\nAND  t.name IN ( SELECT oi.name /*COLLATE*/ FROM sysobjects oi\n         WHERE NOT EXISTS (SELECT * FROM #tmp ti\n                           WHERE oi.id = ti.id)\n         AND   oi.type  IN ('TR', 'P' ,'U' ,'V'))\nUNION\n\n--Deleted\nSELECT 'deleted' AS ChangeType, t.name, '' AS extra_info, 0 AS Priority\nFROM #tmp t\nWHERE NOT EXISTS (SELECT * FROM sysobjects o\n                  WHERE o.id = t.id)\nAND t.name NOT IN (  SELECT oi.name /*COLLATE*/ FROM sysobjects oi\n         WHERE NOT EXISTS (SELECT * FROM #tmp ti\n                           WHERE oi.id = ti.id)\n         AND   oi.type  IN ('TR', 'P' ,'U' ,'V'))\nUNION\n\n--Added\nSELECT 'added' AS ChangeType, o.name /*COLLATE*/, '' AS extra_info, 4 AS Priority\nFROM sysobjects o\nWHERE NOT EXISTS (SELECT * FROM #tmp t\n                  WHERE o.id = t.id)\nAND      o.type  IN ('TR', 'P' ,'U' ,'V')\nAND  o.name NOT IN ( SELECT ti.name /*COLLATE*/ FROM #tmp ti\n         WHERE NOT EXISTS (SELECT * FROM sysobjects oi\n                           WHERE oi.id = ti.id))\nORDER BY Priority ASC\n"
      ],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [
        "create table VersionHistory (\n    Version int primary key,\n    UpgradeStart datetime not null,\n    UpgradeEnd datetime\n    );\n"
      ],
      [],
      [],
      [],
      [],
      [],
      [],
      [
        "  <Relationship RelationshipID=\"1\" InternalName=\"Manager\"/>\n  <Relationship RelationshipID=\"2\" InternalName=\"Delegate\"/>\n  etc.\n"
      ],
      [],
      [],
      []
    ],
    "votes:": "317",
    "tags": "<sql-server><database><svn><version-control>",
    "AcceptedAnswerId": "516",
    "answers": [
      {
        "id": "126936",
        "title": "",
        "text": "<p>To make the dump to a source code control system that little bit faster, you can see which objects have changed since last time by using the version information in sysobjects.</p>\n\n<p><strong>Setup:</strong> Create a table in each database you want to check incrementally to hold the version information from the last time you checked it (empty on the first run). Clear this table if you want to re-scan your whole data structure.</p>\n\n<pre><code>IF ISNULL(OBJECT_ID('last_run_sysversions'), 0) &lt;&gt; 0 DROP TABLE last_run_sysversions\nCREATE TABLE last_run_sysversions (\n    name varchar(128), \n    id int, base_schema_ver int,\n    schema_ver int,\n    type char(2)\n)\n</code></pre>\n\n<p><strong>Normal running mode:</strong> You can take the results from this sql, and generate sql scripts for just the ones you're interested in, and put them into a source control of your choice.</p>\n\n<pre><code>IF ISNULL(OBJECT_ID('tempdb.dbo.#tmp'), 0) &lt;&gt; 0 DROP TABLE #tmp\nCREATE TABLE #tmp (\n    name varchar(128), \n    id int, base_schema_ver int,\n    schema_ver int,\n    type char(2)\n)\n\nSET NOCOUNT ON\n\n-- Insert the values from the end of the last run into #tmp\nINSERT #tmp (name, id, base_schema_ver, schema_ver, type) \nSELECT name, id, base_schema_ver, schema_ver, type FROM last_run_sysversions\n\nDELETE last_run_sysversions\nINSERT last_run_sysversions (name, id, base_schema_ver, schema_ver, type)\nSELECT name, id, base_schema_ver, schema_ver, type FROM sysobjects\n\n-- This next bit lists all differences to scripts.\nSET NOCOUNT OFF\n\n--Renamed.\nSELECT 'renamed' AS ChangeType, t.name, o.name AS extra_info, 1 AS Priority\nFROM sysobjects o INNER JOIN #tmp t ON o.id = t.id\nWHERE o.name &lt;&gt; t.name /*COLLATE*/\nAND o.type IN ('TR', 'P' ,'U' ,'V')\nUNION \n\n--Changed (using alter)\nSELECT 'changed' AS ChangeType, o.name /*COLLATE*/, \n       'altered' AS extra_info, 2 AS Priority\nFROM sysobjects o INNER JOIN #tmp t ON o.id = t.id \nWHERE (\n   o.base_schema_ver &lt;&gt; t.base_schema_ver\nOR o.schema_ver      &lt;&gt; t.schema_ver\n)\nAND  o.type IN ('TR', 'P' ,'U' ,'V')\nAND  o.name NOT IN ( SELECT oi.name \n         FROM sysobjects oi INNER JOIN #tmp ti ON oi.id = ti.id\n         WHERE oi.name &lt;&gt; ti.name /*COLLATE*/\n         AND oi.type IN ('TR', 'P' ,'U' ,'V')) \nUNION\n\n--Changed (actually dropped and recreated [but not renamed])\nSELECT 'changed' AS ChangeType, t.name, 'dropped' AS extra_info, 2 AS Priority\nFROM #tmp t\nWHERE    t.name IN ( SELECT ti.name /*COLLATE*/ FROM #tmp ti\n         WHERE NOT EXISTS (SELECT * FROM sysobjects oi\n                           WHERE oi.id = ti.id))\nAND  t.name IN ( SELECT oi.name /*COLLATE*/ FROM sysobjects oi\n         WHERE NOT EXISTS (SELECT * FROM #tmp ti\n                           WHERE oi.id = ti.id)\n         AND   oi.type  IN ('TR', 'P' ,'U' ,'V'))\nUNION\n\n--Deleted\nSELECT 'deleted' AS ChangeType, t.name, '' AS extra_info, 0 AS Priority\nFROM #tmp t\nWHERE NOT EXISTS (SELECT * FROM sysobjects o\n                  WHERE o.id = t.id)\nAND t.name NOT IN (  SELECT oi.name /*COLLATE*/ FROM sysobjects oi\n         WHERE NOT EXISTS (SELECT * FROM #tmp ti\n                           WHERE oi.id = ti.id)\n         AND   oi.type  IN ('TR', 'P' ,'U' ,'V'))\nUNION\n\n--Added\nSELECT 'added' AS ChangeType, o.name /*COLLATE*/, '' AS extra_info, 4 AS Priority\nFROM sysobjects o\nWHERE NOT EXISTS (SELECT * FROM #tmp t\n                  WHERE o.id = t.id)\nAND      o.type  IN ('TR', 'P' ,'U' ,'V')\nAND  o.name NOT IN ( SELECT ti.name /*COLLATE*/ FROM #tmp ti\n         WHERE NOT EXISTS (SELECT * FROM sysobjects oi\n                           WHERE oi.id = ti.id))\nORDER BY Priority ASC\n</code></pre>\n\n<p><strong>Note:</strong> If you use a non-standard collation in any of your databases, you will need to replace <code>/* COLLATE */</code> with your database collation. i.e. <code>COLLATE Latin1_General_CI_AI</code></p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "870412",
        "title": "",
        "text": "<p>I'm also using a version in the database stored via the database extended properties family of procedures. My application has scripts for each version step (ie. move from 1.1 to 1.2). When deployed, it looks at the current version and then runs the scripts one by one until it reaches the last app version. There is no script that has the straight 'final' version, even deploy on a clean DB does the deploy via a series of upgrade steps.</p>\n\n<p>Now what I like to add is that I've seen two days ago a presentation on the MS campus about the new and upcoming VS DB edition. The presentation was focused specifically on this topic and I was blown out of the water. You should definitely check it out, the new facilities are focused on keeping schema definition in T-SQL scripts (CREATEs), a runtime delta engine to compare deployment schema with defined schema and doing the delta ALTERs and integration with source code integration, up to and including MSBUILD continuous integration for automated build drops. The drop will contain a new file type, the .dbschema files, that can be taken to the deployment site and a command line tool can do the actual 'deltas' and run the deployment.\nI have a blog entry on this topic with links to the VSDE downloads, you should check them out: <a href=\"http://rusanu.com/2009/05/15/version-control-and-your-database/\" rel=\"noreferrer\">http://rusanu.com/2009/05/15/version-control-and-your-database/</a></p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1664083",
        "title": "",
        "text": "<p>Check out DBGhost <a href=\"http://www.innovartis.co.uk/\" rel=\"nofollow noreferrer\">http://www.innovartis.co.uk/</a>. I have used in an automated fashion for 2 years now and it works great. It allows our DB builds to happen much like a Java or C build happens, except for the database. You know what I mean.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "521",
        "title": "",
        "text": "<p>You didn't mention any specifics about your target environment or constraints, so this may not be entirely applicable... but if you're looking for a way to effectively track an evolving DB schema and aren't adverse to the idea of using Ruby, ActiveRecord's migrations are right up your alley.</p>\n\n<p>Migrations programatically define database transformations using a Ruby DSL; each transformation can be applied or (usually) rolled back, allowing you to jump to a different version of your DB schema at any given point in time. The file defining these transformations can be checked into version control like any other piece of source code.</p>\n\n<p>Because migrations are a part of <a href=\"http://ar.rubyonrails.com/\" rel=\"noreferrer\">ActiveRecord</a>, they typically find use in full-stack Rails apps; however, you can use ActiveRecord independent of Rails with minimal effort. See <a href=\"http://rails.aizatto.com/2007/05/27/activerecord-migrations-without-rails/\" rel=\"noreferrer\">here</a> for a more detailed treatment of using AR's migrations outside of Rails.</p>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1238100",
        "title": "",
        "text": "<p>In my experience the solution is twofold:</p>\n\n<ol>\n<li><p>You need to handle changes to the development database that are done by multiple developers during development.</p></li>\n<li><p>You need to handle database upgrades in customers sites.</p></li>\n</ol>\n\n<p>In order to handle #1 you'll need a strong database diff/merge tool. The best tool should be able to perform automatic merge as much as possible while allowing you to resolve unhandled conflicts manually. </p>\n\n<p>The perfect tool should handle merge operations by using a 3-way merge algorithm that brings into account the changes that were made in the THEIRS database and the MINE database, relative to the BASE database.</p>\n\n<p>I wrote a commercial tool that provides manual merge support for SQLite databases and I'm currently adding support for 3-way merge algorithm for SQLite. Check it out at <a href=\"http://www.sqlitecompare.com\" rel=\"nofollow noreferrer\">http://www.sqlitecompare.com</a></p>\n\n<p>In order to handle #2 you will need an upgrade framework in place. </p>\n\n<p>The basic idea is to develop an automatic upgrade framework that knows how to upgrade from an existing SQL schema to the newer SQL schema and can build an upgrade path for every existing DB installation. </p>\n\n<p>Check out my article on the subject in <a href=\"http://www.codeproject.com/KB/database/sqlite_upgrade.aspx\" rel=\"nofollow noreferrer\">http://www.codeproject.com/KB/database/sqlite_upgrade.aspx</a> to get a general idea of what I'm talking about. </p>\n\n<p>Good Luck</p>\n\n<p>Liron Levi</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "4088",
        "title": "",
        "text": "<p>You could also look at a migrations solution.  These allow you to specify your database schema in C# code, and roll your database version up and down using MSBuild.</p>\n\n<p>I'm currently using <a href=\"https://dbup.github.io/\" rel=\"noreferrer\">DbUp</a>, and it's been working well.</p>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "204180",
        "title": "",
        "text": "<p>+1 for everyone who's recommended the RedGate tools, with an additional recommendation and a caveat.</p>\n\n<p>SqlCompare also has a decently documented API: so you can, for instance, write a console app which syncs your source controlled scripts folder with a CI integration testing database on checkin, so that when someone checks in a change to the schema from their scripts folder it's automatically deployed along with the matching application code change. This helps close the gap with developers who are forgetful about propagating changes in their local db up to a shared development DB (about half of us, I think :) ).</p>\n\n<p>A caveat is that with a scripted solution or otherwise, the RedGate tools are sufficiently smooth that it's easy to forget about SQL realities underlying the abstraction. If you rename all the columns in a table, SqlCompare has no way to map the old columns to the new columns and will drop all the data in the table. It will generate warnings but I've seen people click past that. There's a general point here worth making, I think, that you can only automate DB versioning and upgrade so far - the abstractions are very leaky.</p>\n",
        "votes": "19",
        "tags": "",
        "accepted": false
      },
      {
        "id": "27508",
        "title": "",
        "text": "<p>Red Gate's SQL Compare product not only allows you to do object-level comparisons, and generate change scripts from that, but it also allows you to export your database objects into a folder hierarchy organized by object type, with one [objectname].sql creation script per object in these directories.  The object-type hierarchy is like this:</p>\n\n<p>\\Functions<br>\n\\Security<br>\n\\Security\\Roles<br>\n\\Security\\Schemas<br>\n\\Security\\Users<br>\n\\Stored Procedures<br>\n\\Tables  </p>\n\n<p>If you dump your scripts to the same root directory after you make changes, you can use this to update your SVN repo, and keep a running history of each object individually.</p>\n",
        "votes": "45",
        "tags": "",
        "accepted": false
      },
      {
        "id": "75083",
        "title": "",
        "text": "<p>A while ago I found a VB bas module that used DMO and VSS objects to get an entire db scripted off and into VSS.  I turned it into a VB Script and posted it <a href=\"http://glossopian.co.uk/pmwiki.php?n=Main.DBtoVSS\" rel=\"noreferrer\">here</a>. You could easily take out the VSS calls and use the DMO stuff to generate all the scripts, and then call SVN from the same batch file that calls the VBScript to check them in?</p>\n\n<p>Dave J</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3156406",
        "title": "",
        "text": "<p>Here at Red Gate we offer a tool, <a href=\"http://www.red-gate.com/products/SQL_Source_Control/index.htm\" rel=\"nofollow noreferrer\">SQL Source Control</a>, which uses SQL Compare technology to link your database with a TFS or SVN repository. This tool integrates into SSMS and lets you work as you would normally, except it now lets you commit the objects.</p>\n\n<p>For a migrations-based approach (more suited for automated deployments), we offer <a href=\"http://www.red-gate.com/products/sql-development/readyroll/\" rel=\"nofollow noreferrer\">SQL Change Automation</a> (formerly called ReadyRoll), which creates and manages a set of incremental scripts as a Visual Studio project.</p>\n\n<p>In SQL Source Control it is possible to specify static data tables. These are stored in source control as INSERT statements.</p>\n\n<p>If you're talking about test data, we'd recommend that you either generate test data with a tool or via a post-deployment script you define, or you simply restore a production backup to the dev environment.</p>\n",
        "votes": "26",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5108862",
        "title": "",
        "text": "<p>I agree with ESV answer and for that exact reason I started a little project a while back to help maintain database updates in a very simple file which could then be maintained a long side out source code. It allows easy updates to developers as well as UAT and Production. The tool works on but Sql Server and MySql.</p>\n\n<p>Some project features:</p>\n\n<ul>\n<li>Allows schema changes</li>\n<li>Allows value tree population</li>\n<li>Allows separate test data inserts for eg. UAT</li>\n<li>Allows option for rollback (not automated)</li>\n<li>Maintains support for SQL server and Mysql</li>\n<li>Has the ability to import your existing database into version control with one simple command(sql server only ... still working on mysql)</li>\n</ul>\n\n<p>The code is hosted on google code. Please check out Google code for some more information</p>\n\n<p><a href=\"http://code.google.com/p/databaseversioncontrol/\" rel=\"noreferrer\">http://code.google.com/p/databaseversioncontrol/</a></p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "75330",
        "title": "",
        "text": "<p>You might want to look at Liquibase (<a href=\"http://www.liquibase.org/\" rel=\"noreferrer\">http://www.liquibase.org/</a>). Even if you don't use the tool itself it handles the concepts of database change management or refactoring pretty well.</p>\n",
        "votes": "21",
        "tags": "",
        "accepted": false
      },
      {
        "id": "125655",
        "title": "",
        "text": "<p>It is a good approach to save database scripts into version control with change scripts so that you can upgrade any one database you have. Also you might want to save schemas for different versions so that you can create a full database without having to apply all the change scripts. Handling the scripts should be automated so that you don't have to do manual work.</p>\n\n<p>I think its important to have a separate database for every developer and not use a shared database. That way the developers can create test cases and development phases independently from other developers.</p>\n\n<p>The automating tool should have means for handling database metadata, which tells what databases are in what state of development and which tables contain version controllable data and so on.</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5336",
        "title": "",
        "text": "<p>If you have a small database and you want to version the entire thing, <a href=\"http://weblogs.asp.net/jgalloway/archive/2006/10/28/Batch-files-to-check-SQL-2005-_2800_MDF_2900_-files-in-and-out-of-Subversion-source-control.aspx\" rel=\"noreferrer\">this batch script</a> might help. It detaches, compresses, and checks a MSSQL database MDF file in to Subversion.</p>\n\n<p>If you mostly want to version your schema and just have a small amount of reference data, you can possibly use <a href=\"http://blog.wekeroad.com/blog/subsonic-using-migrations/\" rel=\"noreferrer\">SubSonic Migrations</a> to handle that. The benefit there is that you can easily migrate up or down to any specific version.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5322",
        "title": "",
        "text": "<p>We use <a href=\"http://www.innovartis.co.uk/\" rel=\"noreferrer\">DBGhost</a> to manage our SQL database. Then you put your scripts to build a new database in your version control, and it'll either build a new database, or upgrade any existing database to the schema in version control. That way you don't have to worry about creating change scripts (although you can still do that, if for example you want to change the data type of a column and need to convert data).</p>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "599",
        "title": "",
        "text": "<p>The typical solution is to dump the database as necessary and backup those files.</p>\n\n<p>Depending on your development platform, there may be opensource plugins available. Rolling your own code to do it is usually fairly trivial.</p>\n\n<p>Note: You may want to backup the database dump instead of putting it into version control.  The files can get huge fast in version control, and cause your entire source control system to become slow (I'm recalling a CVS horror story at the moment).</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5122171",
        "title": "",
        "text": "<p>With VS 2010, use the Database project.</p>\n\n<ol>\n<li>Script out your database </li>\n<li>Make changes to scripts or directly on\nyour db server </li>\n<li>Sync up using Data >\n    Schema Compare</li>\n</ol>\n\n<p>Makes a perfect DB versioning solution, and makes syncing DB's a breeze. </p>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "4096",
        "title": "",
        "text": "<p>We don't store the database schema, we store the changes to the database.  What we do is store the schema changes so that we build a change script for any version of the database and apply it to our customer's databases.  I wrote an database utility app that gets distributed with our main application that can read that script and know which updates need to be applied.  It also has enough smarts to refresh views and stored procedures as needed.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "516",
        "title": "",
        "text": "<p>Martin Fowler wrote my favorite article on the subject, <a href=\"http://martinfowler.com/articles/evodb.html\" rel=\"noreferrer\">http://martinfowler.com/articles/evodb.html</a>.  I choose not to put schema dumps in under version control as <em>alumb</em> and others suggest because I want an easy way to upgrade my production database.</p>\n\n<p>For a web application where I'll have a single production database instance, I use two techniques:</p>\n\n<h1>Database Upgrade Scripts</h1>\n\n<p>A sequence database upgrade scripts that contain the DDL necessary to move the schema from version N to N+1.  (These go in your version control system.)  A _version_history_ table, something like</p>\n\n<pre><code>create table VersionHistory (\n    Version int primary key,\n    UpgradeStart datetime not null,\n    UpgradeEnd datetime\n    );\n</code></pre>\n\n<p>gets a new entry every time an upgrade script runs which corresponds to the new version.</p>\n\n<p>This ensures that it's easy to see what version of the database schema exists and that database upgrade scripts are run only once.  Again, these are <strong>not</strong> database dumps.  Rather, each script represents the <strong>changes</strong> necessary to move from one version to the next.  They're the script that you apply to your production database to \"upgrade\" it.</p>\n\n<h1>Developer Sandbox Synchronization</h1>\n\n<ol>\n<li>A script to backup, sanitize, and shrink a production database.  Run this after each upgrade to the production DB.</li>\n<li>A script to restore (and tweak, if necessary) the backup on a developer's workstation.  Each developer runs this script after each upgrade to the production DB.</li>\n</ol>\n\n<p><em>A caveat: My automated tests run against a schema-correct but empty database, so this advice will not perfectly suit your needs.</em></p>\n",
        "votes": "182",
        "tags": "",
        "accepted": true
      },
      {
        "id": "3775063",
        "title": "",
        "text": "<p>I wrote this app a while ago, <a href=\"http://sqlschemasourcectrl.codeplex.com/\" rel=\"noreferrer\">http://sqlschemasourcectrl.codeplex.com/</a> which will scan your MSFT SQL db's as often as you want and automatically dump your objects (tables, views, procs, functions, sql settings) into SVN. Works like a charm. I use it with Unfuddle (which allows me to get alerts on checkins)</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "31001490",
        "title": "",
        "text": "<p>Its a very old question, however many are trying to solve this even now. All they have to do is to research about Visual Studio Database Projects. Without this, any database development looks very feeble. From code organization to deployment to versioning, it simplifies everything.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "41573374",
        "title": "",
        "text": "<p>I would suggest using comparison tools to improvise a version control system for your database. A good alternative are <a href=\"http://www.xsql.com/products/sql_server_schema_compare/?utm_source=pragmatic&amp;utm_medium=articles&amp;utm_campaign=xsql\" rel=\"nofollow noreferrer\">xSQL Schema Compare</a> and <a href=\"http://www.xsql.com/products/sql_server_data_compare/?utm_source=pragmatic&amp;utm_medium=articles&amp;utm_campaign=xsql\" rel=\"nofollow noreferrer\">xSQL Data Compare</a>. </p>\n\n<p>Now, if your goal is to have only the database's schema under version control you can simply use xSQL Schema Compare to generate xSQL Snapshots of the schema and add these files in your version control. Than, to revert or update to a specific version just compare the current version of the database with the snapshot for the destination version. </p>\n\n<p>Alas, if you want to have the data under version control as well, you can use xSQL Data Compare to generate change scripts for you database and add the .sql files in your version control. You could then execute these scripts to revert / update to any version you want. Keep in mind that for the 'revert' functionality you need to generate change scripts that when executed will make Version 3 the same as Version 2 and for the 'update' functionality, you need to generate change scripts that do the opposite. </p>\n\n<p>Lastly, with some basic batch programming skills you can automate the whole process by using the command line versions of xSQL Schema Compare and xSQL Data Compare</p>\n\n<p>Disclaimer: I'm affiliated to xSQL.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1092187",
        "title": "",
        "text": "<p>Every database should be under source-code control.  What is lacking is a tool to automatically script all database objects - and \"configuration data\" - to file, which then can be added to any source control system.  If you are using SQL Server, then my solution is here : <a href=\"http://dbsourcetools.codeplex.com/\" rel=\"noreferrer\">http://dbsourcetools.codeplex.com/</a> .  Have fun.\n- Nathan.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "872240",
        "title": "",
        "text": "<p>It's simple.</p>\n\n<ol>\n<li><p>When the base project is ready then you must create full database script. This script is commited to SVN. It is first version.</p></li>\n<li><p>After that all developers creates change scripts (ALTER..., new tables, sprocs, etc).</p></li>\n<li><p>When you need current version then you should execute all new change scripts.</p></li>\n<li><p>When app is released to production then you go back to 1 (but then it will be successive version of course).</p></li>\n</ol>\n\n<p>Nant will help you to execute those change scripts. :)</p>\n\n<p>And remember. Everything works fine when there is discipline. Every time when database change is commited then corresponding functions in code are commited too.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "195",
        "title": "",
        "text": "<p>This is one of the \"hard problems\" surrounding development. As far as I know there are no perfect solutions. </p>\n\n<p>If you only need to store the database structure and not the data you can export the database as SQL queries. (in Enterprise Manager: Right click on database -> Generate SQL script. I recommend setting the \"create one file per object\" on the options tab) You can then commit these text files to svn and make use of svn's diff and logging functions. </p>\n\n<p>I have this tied together with a Batch script that takes a couple parameters and sets up the database. I also added some additional queries that enter default data like user types and the admin user. (If you want more info on this, post something and I can put the script somewhere accessible)</p>\n\n<p>If you need to keep all of the data as well, I recommend keeping a back up of the database and using Redgate (<a href=\"http://www.red-gate.com/\" rel=\"noreferrer\">http://www.red-gate.com/</a>) products to do the comparisons. They don't come cheap, but they are worth every penny.</p>\n",
        "votes": "39",
        "tags": "",
        "accepted": false
      },
      {
        "id": "125609",
        "title": "",
        "text": "<p>Because our app has to work across multiple RDBMSs, we store our schema definition in version control using the database-neutral <a href=\"http://db.apache.org/torque/\" rel=\"noreferrer\">Torque</a> format (XML). We also version-control the reference data for our database in XML format as follows (where \"Relationship\" is one of the reference tables):</p>\n\n<pre><code>  &lt;Relationship RelationshipID=\"1\" InternalName=\"Manager\"/&gt;\n  &lt;Relationship RelationshipID=\"2\" InternalName=\"Delegate\"/&gt;\n  etc.\n</code></pre>\n\n<p>We then use home-grown tools to generate the schema upgrade and reference data upgrade scripts that are required to go from version X of the database to version X + 1.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "22917",
        "title": "",
        "text": "<p>We just started using Team Foundation Server.  If your database is medium sized, then visual studio has some nice project integrations with built in compare, data compare, database refactoring tools, database testing framework, and even data generation tools.</p>\n\n<p>But, that model doesn't fit very large or third party databases (that encrypt objects) very well.  So, what we've done is to store only our customized objects.  Visual Studio / Team foundation server works very well for that.</p>\n\n<p><a href=\"http://blogs.msdn.com/gertd/\" rel=\"noreferrer\">TFS Database chief arch. blog</a></p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/tfs2008/default.aspx\" rel=\"noreferrer\">MS TFS site</a></p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "31024342",
        "title": "",
        "text": "<p>First, you must choose the version control system that is right for you: </p>\n\n<ul>\n<li><p>Centralized Version Control system - a standard system where users check out/check in before/after they work on files, and the files are being kept in a single central server</p></li>\n<li><p>Distributed Version Control system - a system where the repository is being cloned, and each clone is actually the full backup of the repository, so if any server crashes, then any cloned repository can be used to restore it\nAfter choosing the right system for your needs, you'll need to setup the repository which is the core of every version control system\nAll this is explained in the following article: <a href=\"http://solutioncenter.apexsql.com/sql-server-source-control-part-i-understanding-source-control-basics/\" rel=\"noreferrer\">http://solutioncenter.apexsql.com/sql-server-source-control-part-i-understanding-source-control-basics/</a></p></li>\n</ul>\n\n<p>After setting up a repository, and in case of a central version control system a working folder, you can read <a href=\"http://solutioncenter.apexsql.com/sql-server-source-control-part-ii-integration/\" rel=\"noreferrer\" title=\"this article\">this article</a>. It shows how to setup source control in a development environment using: </p>\n\n<ul>\n<li><p>SQL Server Management Studio via the MSSCCI provider, </p></li>\n<li><p>Visual Studio and SQL Server Data Tools</p></li>\n<li>A 3rd party tool ApexSQL Source Control</li>\n</ul>\n",
        "votes": "38",
        "tags": "",
        "accepted": false
      },
      {
        "id": "187617",
        "title": "",
        "text": "<p>We had the need to version our SQL database after we migrated to an x64 platform and our old version broke with the migration.  We wrote a C# application which used SQLDMO to map out all of the SQL objects to a folder:</p>\n\n<pre>\n                Root\n                    ServerName\n                       DatabaseName\n                          Schema Objects\n                             Database Triggers*\n                                .ddltrigger.sql\n                             Functions\n                                ..function.sql\n                             Security\n                                Roles\n                                   Application Roles\n                                      .approle.sql\n                                   Database Roles\n                                      .role.sql\n                                Schemas*\n                                   .schema.sql\n                                Users\n                                   .user.sql\n                             Storage\n                                Full Text Catalogs*\n                                   .fulltext.sql\n                             Stored Procedures\n                                ..proc.sql\n                             Synonyms*\n                                .synonym.sql\n                             Tables\n                                ..table.sql\n                                Constraints\n                                   ...chkconst.sql\n                                   ...defconst.sql\n                                Indexes\n                                   ...index.sql\n                                Keys\n                                   ...fkey.sql\n                                   ...pkey.sql\n                                   ...ukey.sql\n                                Triggers\n                                   ...trigger.sql\n                             Types\n                                User-defined Data Types\n                                   ..uddt.sql\n                                XML Schema Collections*\n                                   ..xmlschema.sql\n                             Views\n                                ..view.sql\n                                Indexes\n                                   ...index.sql\n                                Triggers\n                                   ...trigger.sql\n</pre>\n\n<p>The application would then compare the newly written version to the version stored in SVN and if there were differences it would update SVN.\nWe determined that running the process once a night was sufficient since we do not make that many changes to SQL.  It allows us to track changes to all the objects we care about plus it allows us to rebuild our full schema in the event of a serious problem.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "174",
    "url": "https://stackoverflow.com/questions/174",
    "title": "How do I print an HTML document from a web service?",
    "text:": "<p>I want to print HTML from a C# web service.  The web browser control is overkill, and does not function well in a service environment, nor does it function well on a system with very tight security constraints.  Is there any sort of free <code>.NET</code> library that will support the printing of a basic HTML page?  Here is the code I have so far, which does not run properly.</p>\n\n<pre><code>public void PrintThing(string document)\n{\n    if (Thread.CurrentThread.GetApartmentState() != ApartmentState.STA)\n    {\n        Thread thread =\n            new Thread((ThreadStart) delegate { PrintDocument(document); });\n        thread.SetApartmentState(ApartmentState.STA);\n        thread.Start();\n    }\n    else\n    {\n        PrintDocument(document);\n    }\n}\n\nprotected void PrintDocument(string document)\n{\n    WebBrowser browser = new WebBrowser();\n    browser.DocumentText = document;\n    while (browser.ReadyState != WebBrowserReadyState.Complete)\n    {\n        Application.DoEvents();\n    }\n    browser.Print();\n}\n</code></pre>\n\n<p>This works fine when called from UI-type threads, but nothing happens when called from a service-type thread.  Changing <code>Print()</code> to <code>ShowPrintPreviewDialog()</code> yields the following IE script error:</p>\n\n<blockquote>\n  <p><strong>Error:</strong> <code>dialogArguments.___IE_PrintType</code> is null or not an object. </p>\n  \n  <p>URL: <code>res://ieframe.dll/preview.dlg</code></p>\n</blockquote>\n\n<p>And a small empty print preview dialog appears.</p>\n",
    "codes": [
      [
        "using (Process printProcess = new Process())\n{\n    string systemPath = Environment.GetFolderPath(Environment.SpecialFolder.System);\n    printProcess.StartInfo.FileName = systemPath + @\"\\rundll32.exe\";\n    printProcess.StartInfo.Arguments = systemPath + @\"\\mshtml.dll,PrintHTML \"\"\" + fileToPrint + @\"\"\"\";\n    printProcess.Start();\n}\n"
      ],
      [],
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "77",
    "tags": "<c#><html><web-services><printing>",
    "AcceptedAnswerId": "",
    "answers": [
      {
        "id": "768",
        "title": "",
        "text": "<p>You can print from the command line using the following:</p>\n\n<blockquote>\n  <p>rundll32.exe\n  %WINDIR%\\System32\\mshtml.dll,PrintHTML\n  \"%1\"</p>\n</blockquote>\n\n<p>Where %1 is the file path of the HTML file to be printed.</p>\n\n<p>If you don't need to print from memory (or can afford to write to the disk in a temp file) you can use:</p>\n\n<pre><code>using (Process printProcess = new Process())\n{\n    string systemPath = Environment.GetFolderPath(Environment.SpecialFolder.System);\n    printProcess.StartInfo.FileName = systemPath + @\"\\rundll32.exe\";\n    printProcess.StartInfo.Arguments = systemPath + @\"\\mshtml.dll,PrintHTML \"\"\" + fileToPrint + @\"\"\"\";\n    printProcess.Start();\n}\n</code></pre>\n\n<p>N.B. This only works on Windows 2000 and above I think.</p>\n",
        "votes": "32",
        "tags": "",
        "accepted": false
      },
      {
        "id": "57838787",
        "title": "",
        "text": "<p>I tool that works very well for me is HiQPdf.  <a href=\"https://www.hiqpdf.com/\" rel=\"nofollow noreferrer\">https://www.hiqpdf.com/</a></p>\n\n<p>The price is reasonable (starts at $245) and it can render HTML to a PDF and also manage the printing of the PDF files directly.</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "108827",
        "title": "",
        "text": "<p>I don't know the specific tools, but there are some utilities that record / replay clicks. In other words, you could automate the \"click\" on the print dialog.  (I know this is a hack, but when all else fails...)</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1008517",
        "title": "",
        "text": "<p>Maybe this will help. <a href=\"http://www.codeproject.com/KB/printing/printhml.aspx\" rel=\"nofollow noreferrer\">http://www.codeproject.com/KB/printing/printhml.aspx</a>\nAlso not sure what thread you are trying to access the browser control from, but it needs to be STA</p>\n\n<p>Note - The project referred to in the link does allow you to navigate to a page and perform a print without showing the print dialog.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "11970128",
        "title": "",
        "text": "<p>Easy! Split your problem into two simpler parts:</p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/a/5635643/284795\">render the HTML to PDF</a></li>\n<li>print the PDF (<a href=\"http://blog.kowalczyk.info/software/sumatrapdf/manual.html#manual-cmd-line\" rel=\"nofollow noreferrer\">SumatraPDF</a>)</li>\n</ol>\n\n<blockquote>\n  <ul>\n  <li><code>-print-to-default $file.pdf</code>    prints a PDF file on a default printer  </li>\n  <li><code>-print-to $printer_name $file.pdf</code>  prints a PDF on a given printer</li>\n  </ul>\n</blockquote>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "290",
        "title": "",
        "text": "<p>I know that Visual Studio itself (at least in 2003 version) references the IE dll directly to render the \"Design View\".</p>\n\n<p>It may be worth looking into that.</p>\n\n<p>Otherwise, I can't think of anything beyond the Web Browser control.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2624191",
        "title": "",
        "text": "<p>If you've got it in the budget (~$3000), check out <a href=\"http://www.princexml.com\" rel=\"nofollow noreferrer\">PrinceXML</a>.</p>\n\n<p>It will render HTML into a PDF, functions well in a service environment, and supports advanced features such as not breaking a page in the middle of a table cell (which a lot of browsers don't currently support). </p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "175",
    "url": "https://stackoverflow.com/questions/175",
    "title": "Annotating YouTube videos programmatically",
    "text:": "<p>I want to be able to display a normal YouTube video with overlaid annotations, consisting of coloured rectangles for each frame. The only requirement is that this should be done programmatically. </p>\n\n<p>YouTube has annotations now, but require you to use their front end to create them by hand. I want to be able to generate them. What's the best way of doing this?</p>\n\n<p>Some ideas:</p>\n\n<blockquote>\n  <ol>\n  <li>Build your own Flash player (ew?)</li>\n  <li>Somehow draw over the YouTube Flash player. Will this work?</li>\n  <li>Reverse engineer &amp; hijack YouTube's annotation system. Either messing with the local files or redirecting its attempt to download\n  the annotations. (using Greasemonkey? Firefox plugin?)</li>\n  </ol>\n</blockquote>\n\n<p>Idea that doesn't count: </p>\n\n<blockquote>\n  <p>download the video</p>\n</blockquote>\n",
    "codes": [
      [],
      [],
      [
        "  <script type=\"text/javascript\">\n\n    var params = { allowScriptAccess: \"always\" };\n    var atts = { id: \"myytplayer\", wmode: \"transparent\" };\n    swfobject.embedSWF(\"http://www.youtube.com/v/VIDEO_ID&enablejsapi=1&playerapiid=ytplayer\", \n                       \"ytapiplayer\", \"425\", \"356\", \"8\", null, null, params, atts);\n\n  </script>\n"
      ]
    ],
    "votes:": "50",
    "tags": "<youtube><reverse-engineering>",
    "AcceptedAnswerId": "",
    "answers": [
      {
        "id": "7157",
        "title": "",
        "text": "<p>The player itself has a <a href=\"http://code.google.com/apis/youtube/js_api_reference.html\" rel=\"nofollow noreferrer\">Javascript API</a> that might be useful for syncing the video if you choose to make your own <code>annotation-thingamajig</code>.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "106818",
        "title": "",
        "text": "<p>Joe Berkovitz has written a sample application called <code>ReviewTube</code> which \"Allows users to create time-based subtitles for any YouTube video, a la closed captioning. These captions become publicly accessible, and visitors to the site can browse the set of videos with captions. Think of it as a \u201csubtitle graffiti wall\u201d for YouTube!\"</p>\n\n<p>The app is the example used to demonstrate the MVCS framework/approach for building Flex applications.</p>\n\n<p><a href=\"http://www.joeberkovitz.com/blog/reviewtube/\" rel=\"nofollow noreferrer\">http://www.joeberkovitz.com/blog/reviewtube/</a></p>\n\n<p>Not sure if this will help with the colored rectangles and whatnot, but it's a decent place to start.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "65659",
        "title": "",
        "text": "<p>YouTube provides an <a href=\"http://code.google.com/apis/youtube/flash_api_reference.html\" rel=\"noreferrer\">ActionScript API</a>.</p>\n\n<p>Using this, you could load the videos into Flash using their API and then have your Flash app create the annotations on a layer above the video. </p>\n\n<p>Or, alternatively, if you want to stay away from creating something in Flash, using YouTube's JavaScript API you could draw HTML DIVs over the YouTube player on your web page. Just remember when you embed the player to have <code>WMODE=\"transparent\"</code> in the params list. </p>\n\n<p>So using the example from YouTube:</p>\n\n<pre><code>  &lt;script type=\"text/javascript\"&gt;\n\n    var params = { allowScriptAccess: \"always\" };\n    var atts = { id: \"myytplayer\", wmode: \"transparent\" };\n    swfobject.embedSWF(\"http://www.youtube.com/v/VIDEO_ID&amp;enablejsapi=1&amp;playerapiid=ytplayer\", \n                       \"ytapiplayer\", \"425\", \"356\", \"8\", null, null, params, atts);\n\n  &lt;/script&gt;\n</code></pre>\n\n<p>And then you should be able to draw your annotations over the YouTube movie using CSS/DHTML. </p>\n",
        "votes": "18",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "176",
    "url": "https://stackoverflow.com/questions/176",
    "title": "error_log per Virtual Host?",
    "text:": "<p>On one Linux Server running Apache and PHP 5, we have multiple Virtual Hosts with separate log files. We cannot seem to separate the php <code>error_log</code> between virtual hosts.</p>\n\n<p>Overriding this setting in the <code>&lt;Location&gt;</code> of the <code>httpd.conf</code> does not seem to do anything.</p>\n\n<p>Is there a way to have separate php <code>error_logs</code> for each Virtual Host?</p>\n",
    "codes": [
      [
        "<VirtualHost *>\n  ServerName thecontrolist.localhost\n  ServerAlias thecontrolist.localhost\n  DocumentRoot \"/xampp/htdocs/thecontrolist\"\n  <Directory \"/xampp/htdocs/thecontrolist\">\n    Options +Indexes +Includes +FollowSymLinks +MultiViews\n    AllowOverride All\n    Require local\n  </Directory>\n</VirtualHost>\n"
      ],
      [
        "<VirtualHost myvhost:80>\n    ServerAdmin webmaster@dummy-host.example.com\n    DocumentRoot /opt/web\n    ServerName myvhost\n    ErrorLog logs/myvhost-error_log\n    CustomLog logs/myvhost-access_log common\n</VirtualHost>\n"
      ],
      [
        "php_admin_value error_log \"/var/www/vhosts/example.com/error_log\"\n"
      ],
      [
        "<VirtualHost *:80>\n    ServerName example.com\n    DocumentRoot /var/www/domains/example.com/html\n    ErrorLog /var/www/domains/example.com/apache.error.log\n    CustomLog /var/www/domains/example.com/apache.access.log common\n    php_flag log_errors on\n    php_flag display_errors on\n    php_value error_reporting 2147483647\n    php_value error_log /var/www/domains/example.com/php.error.log\n</VirtualHost>\n"
      ],
      [],
      [
        "php_value error_log \"/var/log/php_log\" \n"
      ],
      [],
      [
        "    <VirtualHost myvhost:80>\n       php_value error_log \"/var/log/httpd/vhost_php_error_log\"\n    </Virtual Host>\n"
      ],
      [
        "php_value error_log \"/var/log/httpd/vhost_php_error_log\"\n"
      ],
      [],
      [
        "<VirtualHost IP:Port>\n   # Stuff,\n   # More Stuff,\n   ErrorLog /path/where/you/want/the/error.log\n</VirtualHost>\n"
      ]
    ],
    "votes:": "112",
    "tags": "<linux><apache><virtualhost>",
    "AcceptedAnswerId": "207",
    "answers": [
      {
        "id": "50618440",
        "title": "",
        "text": "<p>Create Simple VirtualHost:</p>\n\n<p>example hostname:- <code>thecontrolist.localhost</code></p>\n\n<ol>\n<li><p>C:\\Windows\\System32\\drivers\\etc</p>\n\n<p><code>127.0.0.1 thecontrolist.localhost</code>    in hosts file </p></li>\n<li><p>C:\\xampp\\apache\\conf\\extra\\httpd-vhosts.conf </p>\n\n<pre><code>&lt;VirtualHost *&gt;\n  ServerName thecontrolist.localhost\n  ServerAlias thecontrolist.localhost\n  DocumentRoot \"/xampp/htdocs/thecontrolist\"\n  &lt;Directory \"/xampp/htdocs/thecontrolist\"&gt;\n    Options +Indexes +Includes +FollowSymLinks +MultiViews\n    AllowOverride All\n    Require local\n  &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre></li>\n<li><p>Don't Forget to restart Your apache. \nfor more <a href=\"https://wiki.apache.org/httpd/ExampleVhosts\" rel=\"nofollow noreferrer\">check</a> this link</p></li>\n</ol>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6568",
        "title": "",
        "text": "<p>My Apache had something like this in httpd.conf. Just change the ErrorLog and CustomLog settings </p>\n\n<pre><code>&lt;VirtualHost myvhost:80&gt;\n    ServerAdmin webmaster@dummy-host.example.com\n    DocumentRoot /opt/web\n    ServerName myvhost\n    ErrorLog logs/myvhost-error_log\n    CustomLog logs/myvhost-access_log common\n&lt;/VirtualHost&gt;\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "297",
        "title": "",
        "text": "<p>I usually just specify this in an <code>.htaccess</code> file <em>or</em> the <code>vhost.conf</code> on the domain I'm working on. Add this to one of these files:</p>\n\n<pre><code>php_admin_value error_log \"/var/www/vhosts/example.com/error_log\"\n</code></pre>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3576664",
        "title": "",
        "text": "<p>If somebody comes looking it should look like this:</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n    ServerName example.com\n    DocumentRoot /var/www/domains/example.com/html\n    ErrorLog /var/www/domains/example.com/apache.error.log\n    CustomLog /var/www/domains/example.com/apache.access.log common\n    php_flag log_errors on\n    php_flag display_errors on\n    php_value error_reporting 2147483647\n    php_value error_log /var/www/domains/example.com/php.error.log\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>This is for development only since <code>display_error</code> is turned on. You will notice that the Apache error log is separate from the PHP error log. The good stuff is in <code>php.error.log</code>.</p>\n\n<p>Take a look here for the <code>error_reporting</code> key <a href=\"http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting\" rel=\"noreferrer\">http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting</a></p>\n",
        "votes": "140",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2569128",
        "title": "",
        "text": "<p>Don't set <code>error_log</code> to where your <code>syslog</code> stuff goes, <code>eg /var/log/apache2</code>, because they errors will get intercepted by <code>ErrorLog</code>. Instead, create a <code>subdir</code> in your <em>project folder</em> for logs and do <code>php_value</code> <code>error_log \"/path/to/project/logs\"</code>. This goes for both <code>.htaccess</code> <em>files and vhosts</em>. Also make sure you put <code>php_flag</code> <code>log_errors</code> on</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "118222",
        "title": "",
        "text": "<p>Yes, you can try,</p>\n\n<pre><code>php_value error_log \"/var/log/php_log\" \n</code></pre>\n\n<p>in <code>.htaccess</code> or you can have users use <code>ini_set()</code> in the beginning of their scripts if they want to have logging.</p>\n\n<p>Another option would be to enable scripts to default to the <code>php.ini</code> in the folder with the script, then go to the user/host's root folder, then to the server's root, or something similar. This would allow hosts to add their own <code>php.ini</code> values and their own <code>error_log</code> locations.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "236",
        "title": "",
        "text": "<p>The default behaviour is for error_log() to output to the Apache error log.  If this isn't happening check your php.ini settings for the error_log directive - leave it unset to use the Apache log file for the current vhost.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "118200",
        "title": "",
        "text": "<p>You could try:</p>\n\n<pre><code>    &lt;VirtualHost myvhost:80&gt;\n       php_value error_log \"/var/log/httpd/vhost_php_error_log\"\n    &lt;/Virtual Host&gt;\n</code></pre>\n\n<p>But i'm not sure if is going to work. I tried on my sites with no success.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1077264",
        "title": "",
        "text": "<pre><code>php_value error_log \"/var/log/httpd/vhost_php_error_log\"\n</code></pre>\n\n<p>It works for me, but I have to change the permission of the log file.</p>\n\n<p>or Apache will write the log to the its <code>error_log</code>.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "34044",
        "title": "",
        "text": "<p>Have you tried adding the <code>php_value error_log '/path/to/php_error_log</code> to your VirtualHost configuration?</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "207",
        "title": "",
        "text": "<p>To set the <em>Apache</em> (<em>not the PHP</em>) log, the easiest way to do this would be to do:</p>\n\n<pre><code>&lt;VirtualHost IP:Port&gt;\n   # Stuff,\n   # More Stuff,\n   ErrorLog /path/where/you/want/the/error.log\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>If there is no leading \"/\" it is assumed to be relative.</p>\n\n<p><a href=\"http://httpd.apache.org/docs/1.3/mod/core.html#errorlog\" rel=\"noreferrer\">Apache Error Log Page</a></p>\n",
        "votes": "87",
        "tags": "",
        "accepted": true
      }
    ]
  },
  {
    "id:": "180",
    "url": "https://stackoverflow.com/questions/180",
    "title": "Function for creating color wheels",
    "text:": "<p>This is something I've pseudo-solved many times and have never quite found a solution for.</p>\n\n<p>The problem is to come up with a way to generate <code>N</code> colors, that are as distinguishable as possible where <code>N</code> is a parameter.</p>\n",
    "codes": [
      [],
      [],
      [
        "//colors entered as 0-255 [R, G, B]\ncolors = []; //holds final colors to be used\nrand = new Random();\n\n//assumes n is less than 16,777,216\nrandomGen(int n){\n   while (len(colors) < n){\n      //generate a random number between 0,255 for each color\n      newRed = rand.next(256);\n      newGreen = rand.next(256);\n      newBlue = rand.next(256);\n      temp = [newRed, newGreen, newBlue];\n      //only adds new colors to the array\n      if temp not in colors {\n         colors.append(temp);\n      }\n   }\n}\n",
        "for item in color{\n   itemSq = (item[0]^2 + item[1]^2 + item[2]^2])^(.5);\n   tempSq = (temp[0]^2 + temp[1]^2 + temp[2]^2])^(.5);\n   dist = itemSq - tempSq;\n   dist = abs(dist);\n}\n//NUMBER can be your chosen distance apart.\nif dist < NUMBER and temp not in colors {\n   colors.append(temp);\n}\n"
      ],
      [
        "n = 10\n"
      ],
      [
        "class cColorPicker\n{\npublic:\n    void Pick( vector<DWORD>&v_picked_cols, int count, int bright = 50 );\nprivate:\n    DWORD HSL2RGB( int h, int s, int v );\n    unsigned char ToRGB1(float rm1, float rm2, float rh);\n};\n/**\n\n  Evenly allocate RGB colors around HSL color wheel\n\n  @param[out] v_picked_cols  a vector of colors in RGB format\n  @param[in]  count   number of colors required\n  @param[in]  bright  0 is all black, 100 is all white, defaults to 50\n\n  based on Fig 3 of http://epub.wu-wien.ac.at/dyn/virlib/wp/eng/mediate/epub-wu-01_c87.pdf?ID=epub-wu-01_c87\n\n*/\n\nvoid cColorPicker::Pick( vector<DWORD>&v_picked_cols, int count, int bright )\n{\n    v_picked_cols.clear();\n    for( int k_hue = 0; k_hue < 360; k_hue += 360/count )\n        v_picked_cols.push_back( HSL2RGB( k_hue, 100, bright ) );\n}\n/**\n\n  Convert HSL to RGB\n\n  based on http://www.codeguru.com/code/legacy/gdi/colorapp_src.zip\n\n*/\n\nDWORD cColorPicker::HSL2RGB( int h, int s, int l )\n{\n    DWORD ret = 0;\n    unsigned char r,g,b;\n\n    float saturation = s / 100.0f;\n    float luminance = l / 100.f;\n    float hue = (float)h;\n\n    if (saturation == 0.0) \n    {\n      r = g = b = unsigned char(luminance * 255.0);\n    }\n    else\n    {\n      float rm1, rm2;\n\n      if (luminance <= 0.5f) rm2 = luminance + luminance * saturation;  \n      else                     rm2 = luminance + saturation - luminance * saturation;\n      rm1 = 2.0f * luminance - rm2;   \n      r   = ToRGB1(rm1, rm2, hue + 120.0f);   \n      g = ToRGB1(rm1, rm2, hue);\n      b  = ToRGB1(rm1, rm2, hue - 120.0f);\n    }\n\n    ret = ((DWORD)(((BYTE)(r)|((WORD)((BYTE)(g))<<8))|(((DWORD)(BYTE)(b))<<16)));\n\n    return ret;\n}\n\n\nunsigned char cColorPicker::ToRGB1(float rm1, float rm2, float rh)\n{\n  if      (rh > 360.0f) rh -= 360.0f;\n  else if (rh <   0.0f) rh += 360.0f;\n\n  if      (rh <  60.0f) rm1 = rm1 + (rm2 - rm1) * rh / 60.0f;   \n  else if (rh < 180.0f) rm1 = rm2;\n  else if (rh < 240.0f) rm1 = rm1 + (rm2 - rm1) * (240.0f - rh) / 60.0f;      \n\n  return static_cast<unsigned char>(rm1 * 255);\n}\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    vector<DWORD> myCols;\n    cColorPicker colpick;\n    colpick.Pick( myCols, 20 );\n    for( int k = 0; k < (int)myCols.size(); k++ )\n        printf(\"%d: %d %d %d\\n\", k+1,\n        ( myCols[k] & 0xFF0000 ) >>16,\n        ( myCols[k] & 0xFF00 ) >>8,\n        ( myCols[k] & 0xFF ) );\n\n    return 0;\n}\n"
      ],
      [],
      [],
      [
        "function random_color($i = null, $n = 10, $sat = .5, $br = .7) {\n    $i = is_null($i) ? mt_rand(0,$n) : $i;\n    $rgb = hsv2rgb(array($i*(360/$n), $sat, $br));\n    for ($i=0 ; $i<=2 ; $i++) \n        $rgb[$i] = dechex(ceil($rgb[$i]));\n    return implode('', $rgb);\n}\n\nfunction hsv2rgb($c) { \n    list($h,$s,$v)=$c; \n    if ($s==0) \n        return array($v,$v,$v); \n    else { \n        $h=($h%=360)/60; \n        $i=floor($h); \n        $f=$h-$i; \n        $q[0]=$q[1]=$v*(1-$s); \n        $q[2]=$v*(1-$s*(1-$f)); \n        $q[3]=$q[4]=$v; \n        $q[5]=$v*(1-$s*$f); \n        return(array($q[($i+4)%6]*255,$q[($i+2)%6]*255,$q[$i%6]*255)); //[1] \n    } \n}\n"
      ]
    ],
    "votes:": "70",
    "tags": "<algorithm><language-agnostic><colors><color-space>",
    "AcceptedAnswerId": "539",
    "answers": [
      {
        "id": "59760",
        "title": "",
        "text": "<p>It would be best to find colors maximally distant in a \"perceptually uniform\" colorspace, e.g. CIELAB (using Euclidean distance between L*, a*, b* coordinates as your distance metric) and then converting to the colorspace of your choice.  Perceptual uniformity is achieved by tweaking the colorspace to approximate the non-linearities in the human visual system.</p>\n",
        "votes": "18",
        "tags": "",
        "accepted": false
      },
      {
        "id": "93908",
        "title": "",
        "text": "<p>Some related resources:</p>\n\n<p><a href=\"http://colorbrewer.org\" rel=\"noreferrer\">ColorBrewer</a> - Sets of colours designed to be maximally distinguishable for use on maps.</p>\n\n<p><a href=\"http://epub.wu-wien.ac.at/dyn/openURL?id=oai:epub.wu-wien.ac.at:epub-wu-01_c87\" rel=\"noreferrer\">Escaping RGBland: Selecting Colors for Statistical Graphics</a> - A technical report describing a set of algorithms for generating good (i.e. maximally distinguishable) colour sets in the hcl colour space.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "199",
        "title": "",
        "text": "<p>I've read somewhere the human eye can't distinguish between less than 4 values apart. so This is something to keep in mind. The following algorithm does not compensate for this.</p>\n\n<p>I'm not sure this is exactly what you want, but this is one way to randomly generate non-repeating color values:</p>\n\n<p>(beware, inconsistent pseudo-code ahead)</p>\n\n<pre><code>//colors entered as 0-255 [R, G, B]\ncolors = []; //holds final colors to be used\nrand = new Random();\n\n//assumes n is less than 16,777,216\nrandomGen(int n){\n   while (len(colors) &lt; n){\n      //generate a random number between 0,255 for each color\n      newRed = rand.next(256);\n      newGreen = rand.next(256);\n      newBlue = rand.next(256);\n      temp = [newRed, newGreen, newBlue];\n      //only adds new colors to the array\n      if temp not in colors {\n         colors.append(temp);\n      }\n   }\n}\n</code></pre>\n\n<p>One way you could optimize this for better visibility would be to compare the distance between each new color and all the colors in the array:</p>\n\n<pre><code>for item in color{\n   itemSq = (item[0]^2 + item[1]^2 + item[2]^2])^(.5);\n   tempSq = (temp[0]^2 + temp[1]^2 + temp[2]^2])^(.5);\n   dist = itemSq - tempSq;\n   dist = abs(dist);\n}\n//NUMBER can be your chosen distance apart.\nif dist &lt; NUMBER and temp not in colors {\n   colors.append(temp);\n}\n</code></pre>\n\n<p>But this approach would significantly slow down your algorithm.</p>\n\n<p>Another way would be to scrap the randomness and systematically go through every 4 values and add a color to an array in the above example.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "539",
        "title": "",
        "text": "<p>My first thought on this is \"how to generate N vectors in a space that maximize distance from each other.\"</p>\n\n<p>You can see that the RGB (or any other scale you use that forms a basis in color space) are just vectors. Take a look at <a href=\"http://mathworld.wolfram.com/topics/RandomPointPicking.html\" rel=\"nofollow noreferrer\">Random Point Picking</a>. Once you have a set of vectors that are maximized apart, you can save them in a hash table or something for later, and just perform random rotations on them to get all the colors you desire that are maximally apart from each other!</p>\n\n<p>Thinking about this problem more, it would be better to map the colors in a linear manner, possibly (0,0,0) \u2192 (255,255,255) lexicographically, and then distribute them evenly.</p>\n\n<p>I really don't know how well this will work, but it should since, let us say:</p>\n\n<pre><code>n = 10\n</code></pre>\n\n<p>we know we have 16777216 colors (256^3).</p>\n\n<p>We can use <a href=\"https://stackoverflow.com/questions/561/using-combinations-of-sets-as-test-data#794\">Buckles Algorithm 515</a> to find the lexicographically indexed color.<img src=\"https://i.stack.imgur.com/gEuCs.gif\" alt=\"\\frac {\\binom {256^3} {3}} {n} * i\">. You'll probably have to edit the algorithm to avoid overflow and probably add some minor speed improvements.</p>\n",
        "votes": "26",
        "tags": "",
        "accepted": true
      },
      {
        "id": "143966",
        "title": "",
        "text": "<p>Here is some code to allocate RGB colors evenly around a HSL color wheel of specified luminosity.</p>\n\n<pre><code>class cColorPicker\n{\npublic:\n    void Pick( vector&lt;DWORD&gt;&amp;v_picked_cols, int count, int bright = 50 );\nprivate:\n    DWORD HSL2RGB( int h, int s, int v );\n    unsigned char ToRGB1(float rm1, float rm2, float rh);\n};\n/**\n\n  Evenly allocate RGB colors around HSL color wheel\n\n  @param[out] v_picked_cols  a vector of colors in RGB format\n  @param[in]  count   number of colors required\n  @param[in]  bright  0 is all black, 100 is all white, defaults to 50\n\n  based on Fig 3 of http://epub.wu-wien.ac.at/dyn/virlib/wp/eng/mediate/epub-wu-01_c87.pdf?ID=epub-wu-01_c87\n\n*/\n\nvoid cColorPicker::Pick( vector&lt;DWORD&gt;&amp;v_picked_cols, int count, int bright )\n{\n    v_picked_cols.clear();\n    for( int k_hue = 0; k_hue &lt; 360; k_hue += 360/count )\n        v_picked_cols.push_back( HSL2RGB( k_hue, 100, bright ) );\n}\n/**\n\n  Convert HSL to RGB\n\n  based on http://www.codeguru.com/code/legacy/gdi/colorapp_src.zip\n\n*/\n\nDWORD cColorPicker::HSL2RGB( int h, int s, int l )\n{\n    DWORD ret = 0;\n    unsigned char r,g,b;\n\n    float saturation = s / 100.0f;\n    float luminance = l / 100.f;\n    float hue = (float)h;\n\n    if (saturation == 0.0) \n    {\n      r = g = b = unsigned char(luminance * 255.0);\n    }\n    else\n    {\n      float rm1, rm2;\n\n      if (luminance &lt;= 0.5f) rm2 = luminance + luminance * saturation;  \n      else                     rm2 = luminance + saturation - luminance * saturation;\n      rm1 = 2.0f * luminance - rm2;   \n      r   = ToRGB1(rm1, rm2, hue + 120.0f);   \n      g = ToRGB1(rm1, rm2, hue);\n      b  = ToRGB1(rm1, rm2, hue - 120.0f);\n    }\n\n    ret = ((DWORD)(((BYTE)(r)|((WORD)((BYTE)(g))&lt;&lt;8))|(((DWORD)(BYTE)(b))&lt;&lt;16)));\n\n    return ret;\n}\n\n\nunsigned char cColorPicker::ToRGB1(float rm1, float rm2, float rh)\n{\n  if      (rh &gt; 360.0f) rh -= 360.0f;\n  else if (rh &lt;   0.0f) rh += 360.0f;\n\n  if      (rh &lt;  60.0f) rm1 = rm1 + (rm2 - rm1) * rh / 60.0f;   \n  else if (rh &lt; 180.0f) rm1 = rm2;\n  else if (rh &lt; 240.0f) rm1 = rm1 + (rm2 - rm1) * (240.0f - rh) / 60.0f;      \n\n  return static_cast&lt;unsigned char&gt;(rm1 * 255);\n}\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    vector&lt;DWORD&gt; myCols;\n    cColorPicker colpick;\n    colpick.Pick( myCols, 20 );\n    for( int k = 0; k &lt; (int)myCols.size(); k++ )\n        printf(\"%d: %d %d %d\\n\", k+1,\n        ( myCols[k] &amp; 0xFF0000 ) &gt;&gt;16,\n        ( myCols[k] &amp; 0xFF00 ) &gt;&gt;8,\n        ( myCols[k] &amp; 0xFF ) );\n\n    return 0;\n}\n</code></pre>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "529",
        "title": "",
        "text": "<p>Isn't it also a factor which order you set up the colors?</p>\n\n<p>Like if you use Dillie-Os idea you need to mix the colors as much as possible. \n0 64 128 256 is from one to the next. but 0 256 64 128 in a wheel would be more \"apart\"</p>\n\n<p>Does this make sense?</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "21634390",
        "title": "",
        "text": "<p>To achieve \"most distinguishable\" we need to use a perceptual color space like Lab (or any other perceptually linear color space) and not RGB. Also, we can quantize this space to reduce the size of the space.</p>\n\n<p>Generate the full 3D space with all possible quantized entries and run the K-means algorithm with <code>k=N</code>. The resulting centers/ \"means\" should be approximately most distinguishabl from each other. </p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7815745",
        "title": "",
        "text": "<p>I know this an old post but I found it while looking for a PHP solution to the topic and finally came with a simple solution:</p>\n\n<pre><code>function random_color($i = null, $n = 10, $sat = .5, $br = .7) {\n    $i = is_null($i) ? mt_rand(0,$n) : $i;\n    $rgb = hsv2rgb(array($i*(360/$n), $sat, $br));\n    for ($i=0 ; $i&lt;=2 ; $i++) \n        $rgb[$i] = dechex(ceil($rgb[$i]));\n    return implode('', $rgb);\n}\n\nfunction hsv2rgb($c) { \n    list($h,$s,$v)=$c; \n    if ($s==0) \n        return array($v,$v,$v); \n    else { \n        $h=($h%=360)/60; \n        $i=floor($h); \n        $f=$h-$i; \n        $q[0]=$q[1]=$v*(1-$s); \n        $q[2]=$v*(1-$s*(1-$f)); \n        $q[3]=$q[4]=$v; \n        $q[5]=$v*(1-$s*$f); \n        return(array($q[($i+4)%6]*255,$q[($i+2)%6]*255,$q[$i%6]*255)); //[1] \n    } \n}\n</code></pre>\n\n<p>So just call the random_color() function where $i identifies the color, $n the number of possible colors, $sat the saturation and $br the brightness.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "192",
    "url": "https://stackoverflow.com/questions/192",
    "title": "Floating Point Number parsing: Is there a Catch All algorithm?",
    "text:": "<p>One of the fun parts of multi-cultural programming is number formats.</p>\n\n<ul>\n<li>Americans use 10,000.50</li>\n<li>Germans use 10.000,50</li>\n<li>French use 10 000,50</li>\n</ul>\n\n<p>My first approach would be to take the string, parse it backwards until I encounter a separator and use this as my decimal separator. There is an obvious flaw with that: 10.000 would be interpreted as 10.</p>\n\n<p>Another approach: if the string contains 2 different non-numeric characters, use the last one as the decimal separator and discard the others. If I only have one, check if it occurs more than once and discards it if it does. If it only appears once, check if it has 3 digits after it. If yes, discard it, otherwise, use it as decimal separator.</p>\n\n<p>The obvious \"best solution\" would be to detect the User's culture or Browser, but that does not work if you have a Frenchman using an en-US Windows/Browser.</p>\n\n<p>Does the .net Framework contain some mythical black magic floating point parser that is better than <code>Double.(Try)Parse()</code> in trying to auto-detect the number format?</p>\n",
    "codes": [
      [
        "double d = double.Parse(\"100.20\", CultureInfo.CurrentCulture);\n//  -- OR --\ndouble d = double.Parse(\"100.20\", CultureInfo.CurrentUICulture);\n"
      ],
      [],
      [
        "double d = Double.Parse(\"5,000.00\", NumberStyles.Any, CultureInfo.InvariantCulture);\n"
      ],
      []
    ],
    "votes:": "63",
    "tags": "<c#><.net><asp.net><internationalization><globalization>",
    "AcceptedAnswerId": "258",
    "answers": [
      {
        "id": "210",
        "title": "",
        "text": "<p>I don't know the ASP.NET side of the problem but .NET has a pretty powerful class: <a href=\"https://docs.microsoft.com/dotnet/api/system.globalization.cultureinfo\" rel=\"nofollow noreferrer\">System.Globalization.CultureInfo</a>. You can use the following code to parse a string containing a double value:</p>\n\n<pre><code>double d = double.Parse(\"100.20\", CultureInfo.CurrentCulture);\n//  -- OR --\ndouble d = double.Parse(\"100.20\", CultureInfo.CurrentUICulture);\n</code></pre>\n\n<p>If ASP.NET somehow (i.e. using HTTP Request headers) passes current user's CultureInfo to either CultureInfo.CurrentCulture or CultureInfo.CurrentUICulture, these will work fine.</p>\n",
        "votes": "26",
        "tags": "",
        "accepted": false
      },
      {
        "id": "258",
        "title": "",
        "text": "<p>I think the best you can do in this case is to take their input and then show them what you think they meant. If they disagree, show them the format you're expecting and get them to enter it again.</p>\n",
        "votes": "29",
        "tags": "",
        "accepted": true
      },
      {
        "id": "212",
        "title": "",
        "text": "<p>You can't please everyone.  If I enter ten as 10.000, and someone enters ten thousand as 10.000, you cannot handle that without some knowledge of the culture of the input.  Detect the culture somehow (browser, system setting - what is the use case?  ASP?  Internal app, or open to the world?), or provide an example of the expected formatting, and use the most lenient parser you can.  Probably something like:</p>\n\n<pre><code>double d = Double.Parse(\"5,000.00\", NumberStyles.Any, CultureInfo.InvariantCulture);\n</code></pre>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "430",
        "title": "",
        "text": "<p>The difference between 12.345 in French and English is a factor of 1000. If you supply an expected range where max &lt; 1000*min, you can easily guess. </p>\n\n<p>Take for example the height of a person (including babies and children) in mm.</p>\n\n<p>By using a range of 200-3000, an input of 1.800 or 1,800 can unambiguously be interpreted as 1 meter and 80 centimeters, whereas an input of 912.300 or 912,300 can unambiguously be interpreted as 91 centimeters and 2.3 millimeters.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "194",
    "url": "https://stackoverflow.com/questions/194",
    "title": "Upgrading SQL Server 6.5",
    "text:": "<p>Yes, I know.  The existence of a running copy of <code>SQL Server 6.5</code> in 2008 is absurd.</p>\n\n<p>That stipulated, what is the best way to migrate from <code>6.5</code> to <code>2005</code>?  Is there any direct path?  Most of the documentation I've found deals with upgrading <code>6.5</code> to <code>7</code>.</p>\n\n<p>Should I forget about the native <code>SQL Server</code> upgrade utilities, script out all of the objects and data, and try to recreate from scratch?</p>\n\n<p>I was going to attempt the upgrade this weekend, but server issues pushed it back till next.  So, any ideas would be welcomed during the course of the week.</p>\n\n<p><em>Update.  This is how I ended up doing it:</em></p>\n\n<ul>\n<li>Back up the database in question and Master on <code>6.5</code>.</li>\n<li>Execute <code>SQL Server 2000</code>'s <code>instcat.sql</code> against <code>6.5</code>'s Master.  This allows <code>SQL Server 2000</code>'s OLEDB provider to connect to <code>6.5</code>.</li>\n<li>Use <code>SQL Server 2000</code>'s standalone <code>\"Import and Export Data\"</code> to create a DTS package, using <code>OLEDB</code> to connect to 6.5.  This successfully copied all <code>6.5</code>'s tables to a new <code>2005</code> database (also using <code>OLEDB</code>).</li>\n<li>Use <code>6.5</code>'s Enterprise Manager to script out all of the database's indexes and triggers to a .sql file.</li>\n<li>Execute that .sql file against the new copy of the database, in 2005's Management Studio.</li>\n<li>Use 6.5's Enterprise Manager to script out all of the stored procedures.</li>\n<li>Execute that <code>.sql</code> file against the <code>2005</code> database.  Several dozen sprocs had issues making them incompatible with <code>2005</code>.  Mainly <code>non-ANSI joins</code> and <code>quoted identifier issues</code>.</li>\n<li>Corrected all of those issues and re-executed the <code>.sql</code> file.</li>\n<li>Recreated the <code>6.5</code>'s logins in <code>2005</code> and gave them appropriate permissions.</li>\n</ul>\n\n<p>There was a bit of rinse/repeat when correcting the stored procedures (there were hundreds of them to correct), but the upgrade went great otherwise.</p>\n\n<p>Being able to use Management Studio instead of <code>Query Analyzer</code> and <code>Enterprise Manager 6.5</code> is such an amazing difference.  A few report queries that took 20-30 seconds on the <code>6.5 database</code> are now running in 1-2 seconds, without any modification, new indexes, or anything.  I didn't expect that kind of immediate improvement.</p>\n",
    "codes": [
      [],
      [],
      [],
      []
    ],
    "votes:": "35",
    "tags": "<sql-server><migration>",
    "AcceptedAnswerId": "197",
    "answers": [
      {
        "id": "895",
        "title": "",
        "text": "<p>I am by no means authoritative, but I believe the only supported path is from 6.5 to 7. Certainly that would be the most sane route, then I believe you can migrate from 7 directly to 2005 pretty painlessly.</p>\n\n<p>As for scripting out all the objects - I would advise against it as you will inevitably miss something (unless your database is truly trivial).</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "950",
        "title": "",
        "text": "<p>You can upgrade 6.5 to SQL Server 2000.  You may have an easier time getting a hold of SQL Server or the 2000 version of the MSDE.  Microsoft has a page on <a href=\"http://www.microsoft.com/technet/prodtechnol/sql/2000/deploy/sqlugrd.mspx#EQFAC\" rel=\"nofollow noreferrer\">going from 6.5 to 2000</a>.  Once you have the database in 2000 format, SQL Server 2005 will have no trouble upgrading it to the 2005 format.  </p>\n\n<p>If you don't have SQL Server 2000, you can <a href=\"http://www.microsoft.com/downloads/details.aspx?familyid=413744D1-A0BC-479F-BAFA-E4B278EB9147&amp;displaylang=en\" rel=\"nofollow noreferrer\">download the MSDE 2000</a> version directly from Microsoft.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "908",
        "title": "",
        "text": "<p>If you can find a professional or some other super-enterprise version of Visual Studio 6.0 - it came with a copy of <a href=\"http://en.wikipedia.org/wiki/MSDE\" rel=\"nofollow noreferrer\">MSDE</a> (Basically the predecessor to SQL Express). I believe MSDE 2000 is still available as a free download from Microsoft, but I don't know if you can migrate directly from 6.5 to 2000.</p>\n\n<p>I think in concept, you won't likely face any danger. Years of practice however tell me that you will always miss some object, permission, or other database item that won't manifest itself immediately. If you can script out the entire dump, the better. As you will be less likely to miss something - and if you do miss something, it can be easily added to the script and fixed. I would avoid any manual steps (other than hitting the enter key once) like the plague.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "197",
        "title": "",
        "text": "<p>Hey, I'm still stuck in that camp too. The third party application we have to support is FINALLY going to 2K5, so we're almost out of the wood. But I feel your pain 8^D</p>\n\n<p>That said, from everything I heard from our DBA, the key is to convert the database to 8.0 format first, and then go to 2005. I believe they used the built in migration/upgrade tools for this. There are some big steps between 6.5 and 8.0 that are better solved there than going from 6.5 to 2005 directly.</p>\n\n<p>Your BIGGEST pain, if you didn't know already, is that DTS is gone in favor of SSIS. There is a shell type module that will run your existing DTS packages, but you're going to want to manually recreate them all in SSIS. Ease of this will depend on the complexity of the packages themselves, but I've done a few at work so far and they've been pretty smooth.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": true
      }
    ]
  },
  {
    "id:": "227",
    "url": "https://stackoverflow.com/questions/227",
    "title": "What's the best way to generate a tag cloud from an array using h1 through h6 for sizing?",
    "text:": "<p>I have the following arrays:</p>\n\n<pre><code>$artist = array(\"the roots\", \"michael jackson\", \"billy idol\", \"more\", \"and more\", \"and_YET_MORE\");\n$count = array(5, 3, 9, 1, 1, 3);\n</code></pre>\n\n<p>I want to generate a tag cloud that will have artists with a higher number in <code>$count</code> enclosed in <code>h6</code> tags and the lowest enclosed <code>h1</code> tags.</p>\n",
    "codes": [
      [],
      [
        "db_query('SELECT COUNT(*) AS count, id, name FROM ... ORDER BY count DESC');\n\n$steps = 6;\n$tags = array();\n$min = 1e9;\n$max = -1e9;\n\nwhile ($tag = db_fetch_object($result)) {\n    $tag->number_of_posts = $tag->count; #sets the amount of items a certain tag has attached to it\n    $tag->count = log($tag->count);\n    $min = min($min, $tag->count);\n    $max = max($max, $tag->count);\n    $tags[$tag->tid] = $tag;\n}\n// Note: we need to ensure the range is slightly too large to make sure even\n// the largest element is rounded down.\n$range = max(.01, $max - $min) * 1.0001;\n\nforeach ($tags as $key => $value) {\n    $tags[$key]->weight = 1 + floor($steps * ($value->count - $min) / $range);\n}\n",
        "foreach ($tags as $tag) {\n    $output .= \"<h$tag->weight>$tag->name</h$tag->weight>\"\n}\n"
      ],
      [
        "public function getAllForTagCloud($fontSizes = 10)\n{\n    $sql = sprintf(\"SELECT count(tag) as tagcount,tag,slug, \n    floor((count(*) * %d )/(select max(t) from \n        (select count(tag) as t from magazine_tag group by tag) t)::numeric(6,2)) \n         as ranking \n         from magazine_tag mt group by tag,slug\", $fontSizes);\n\n    $q = Doctrine_Manager::getInstance()->getCurrentConnection();\n    return $q->execute($sql);\n}\n",
        "<?php foreach ($allTags as $tag): ?>\n    <span class=\"<?php echo 'tagrank'.$tag['ranking'] ?>\">\n        <?php echo sprintf('<a rel=\"tag\" href=\"/search/by/tag/%s\">%s</a>', \n            $tag['slug'], $tag['tag']\n        ); ?>\n    </span>\n<?php endforeach; ?>\n",
        "/* put your size of choice */\n.tagrank1{font-size: 0.3em;}\n.tagrank2{font-size: 0.4em;}\n.tagrank3{font-size: 0.5em;} \n/* go on till tagrank10 */\n",
        "-- minimum tag count is 8 --\n\nHAVING count(tag) > 7\n"
      ],
      [
        "def tag_cloud (strings, counts)\n    max = counts.max\n    strings.map { |a| \"<span style='font-size:#{((counts[strings.index(a)] * 4.0)/max).ceil}em'>#{a}</span> \"  }\nend\n",
        "<%= tag_cloud($artists, $counts) %>\n",
        "<span style='font-size:3em'>the roots</span>\n<span style='font-size:2em'>michael jackson</span> \n<span style='font-size:4em'>billy idol</span> \n<span style='font-size:1em'>more</span> \n<span style='font-size:1em'>and more</span> \n<span style='font-size:2em'>and_YET_MORE</span> \n"
      ],
      [
        "$artist = array(\"the roots\",\"michael jackson\",\"billy idol\",\"more\",\"and more\",\"and_YET_MORE\");\n$count = array(5,3,9,1,1,3);\n$highest = max($count);\nfor (int $x = 0; $x < count($artist); $x++)\n{\n    $normalized = $count[$x] / $highest;\n    $heading = ceil($normalized * 6); // 6 heading types\n    echo \"<h\".$heading.\">\".$artist[$x].\"</h\".$heading.\">\";\n}\n"
      ],
      [
        "<div id=\"tags\">\n    <div class=\"title\">Popular Searches</div>\n    <?php\n        // Snippet taken from [prism-perfect.net]\n\n        include \"/path/to/public_html/search/settings/database.php\";\n        include \"/path/to/public_html/search/settings/conf.php\";\n\n        $query = \"SELECT query AS tag, COUNT(*) AS quantity\n        FROM sphider_query_log\n        WHERE results > 0\n        GROUP BY query\n        ORDER BY query ASC\n        LIMIT 10\";\n\n        $result = mysql_query($query) or die(mysql_error());\n\n        while ($row = mysql_fetch_array($result)) {\n\n            $tags[$row['tag']] = $row['quantity'];\n        }\n\n        // change these font sizes if you will\n        $max_size = 30; // max font size in %\n        $min_size = 11; // min font size in %\n\n        // get the largest and smallest array values\n        $max_qty = max(array_values($tags));\n        $min_qty = min(array_values($tags));\n\n        // find the range of values\n        $spread = $max_qty - $min_qty;\n        if (0 == $spread) { // we don't want to divide by zero\n            $spread = 1;\n        }\n\n        // determine the font-size increment\n        // this is the increase per tag quantity (times used)\n        $step = ($max_size - $min_size)/($spread);\n\n        // loop through our tag array\n        foreach ($tags as $key => $value) {\n\n            // calculate CSS font-size\n            // find the $value in excess of $min_qty\n            // multiply by the font-size increment ($size)\n            // and add the $min_size set above\n            $size = $min_size + (($value - $min_qty) * $step);\n            // uncomment if you want sizes in whole %:\n            // $size = ceil($size);\n\n            // you'll need to put the link destination in place of the /search/search.php...\n            // (assuming your tag links to some sort of details page)\n            echo '<a href=\"/search/search.php?query='.$key.'&search=1\" style=\"font-size: '.$size.'px\"';\n            // perhaps adjust this title attribute for the things that are tagged\n            echo ' title=\"'.$value.' things tagged with '.$key.'\"';\n            echo '>'.$key.'</a> ';\n            // notice the space at the end of the link\n        }\n    ?>\n</div>\n"
      ],
      [
        "$artist = array(\"the roots\",\"michael jackson\",\"billy idol\",\"more\",\"and more\",\"and_YET_MORE\");\n$count = array(5,3,9,1,1,3);\n$highest = max($count);\nfor ($x = 0; $x < count($artist); $x++) {\n    $normalized =  ($highest - $count[$x]+1) / $highest;\n    $heading = ceil($normalized * 6); // 6 heading types\n    echo \"<h$heading>{$artist[$x]}</h$heading>\";\n}\n"
      ],
      [
        "<?php\n$input= array(\"vba\",\"macros\",\"excel\",\"outlook\",\"powerpoint\",\"access\",\"database\",\"interview questions\",\"sendkeys\",\"word\",\"excel projects\",\"visual basic projects\",\"excel vba\",\"macro\",\"excel visual basic\",\"tutorial\",\"programming\",\"learn macros\",\"vba examples\");\n\n$rand_tags = array_rand($input, 5);\nfor ($x = 0; $x <= 4; $x++) {\n    $size = rand ( 1 , 4 );\n    echo \"<font size='$size'>\" . $input[$rand_tags[$x]] . \" \" . \"</font>\";\n}\n\necho \"<br>\";\n$rand_tags = array_rand($input, 7);\nfor ($x = 0; $x <= 6; $x++) {\n    $size = rand ( 1 , 4 );\n    echo \"<font size='$size'>\" . $input[$rand_tags[$x]] . \" \" . \"</font>\";\n}\n\necho \"<br>\";\n$rand_tags = array_rand($input, 5);\nfor ($x = 0; $x <= 4; $x++) {\n    $size = rand ( 1 , 4 );\n    echo \"<font size='$size'>\" . $input[$rand_tags[$x]] . \" \" . \"</font>\";\n}\n?>\n"
      ]
    ],
    "votes:": "74",
    "tags": "<php><arrays><tag-cloud>",
    "AcceptedAnswerId": "2943318",
    "answers": [
      {
        "id": "676",
        "title": "",
        "text": "<p>Perhaps this is a little academic and off topic but <code>hX</code> tags are probably not the best choice for a tag cloud for reasons of document structure and all that sort of thing.</p>\n\n<p>Maybe <code>span</code>s or an <code>ol</code> with appropriate class attributes (plus some CSS)?</p>\n",
        "votes": "24",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2943318",
        "title": "",
        "text": "<p>You will want to add a logarithmic function to it too. (taken from tagadelic, my Drupal module to create tag clouds <a href=\"http://drupal.org/project/tagadelic\" rel=\"noreferrer\">http://drupal.org/project/tagadelic</a>):</p>\n\n<pre><code>db_query('SELECT COUNT(*) AS count, id, name FROM ... ORDER BY count DESC');\n\n$steps = 6;\n$tags = array();\n$min = 1e9;\n$max = -1e9;\n\nwhile ($tag = db_fetch_object($result)) {\n    $tag-&gt;number_of_posts = $tag-&gt;count; #sets the amount of items a certain tag has attached to it\n    $tag-&gt;count = log($tag-&gt;count);\n    $min = min($min, $tag-&gt;count);\n    $max = max($max, $tag-&gt;count);\n    $tags[$tag-&gt;tid] = $tag;\n}\n// Note: we need to ensure the range is slightly too large to make sure even\n// the largest element is rounded down.\n$range = max(.01, $max - $min) * 1.0001;\n\nforeach ($tags as $key =&gt; $value) {\n    $tags[$key]-&gt;weight = 1 + floor($steps * ($value-&gt;count - $min) / $range);\n}\n</code></pre>\n\n<p>Then in your view or template:</p>\n\n<pre><code>foreach ($tags as $tag) {\n    $output .= \"&lt;h$tag-&gt;weight&gt;$tag-&gt;name&lt;/h$tag-&gt;weight&gt;\"\n}\n</code></pre>\n",
        "votes": "41",
        "tags": "",
        "accepted": true
      },
      {
        "id": "3249162",
        "title": "",
        "text": "<p>This method is for <code>SQL/PostgreSQL</code> fanatics. It does the entire job in the database, and it prints text with \"slugified\" link. It uses Doctrine <code>ORM</code> just for the sql call, I'm not using objects. \nSuppose we have 10 sizes:</p>\n\n<pre><code>public function getAllForTagCloud($fontSizes = 10)\n{\n    $sql = sprintf(\"SELECT count(tag) as tagcount,tag,slug, \n    floor((count(*) * %d )/(select max(t) from \n        (select count(tag) as t from magazine_tag group by tag) t)::numeric(6,2)) \n         as ranking \n         from magazine_tag mt group by tag,slug\", $fontSizes);\n\n    $q = Doctrine_Manager::getInstance()-&gt;getCurrentConnection();\n    return $q-&gt;execute($sql);\n}\n</code></pre>\n\n<p>then you print them with some CSS class, from .tagranking10 (the best) to .tagranking1 (the worst):</p>\n\n<pre><code>&lt;?php foreach ($allTags as $tag): ?&gt;\n    &lt;span class=\"&lt;?php echo 'tagrank'.$tag['ranking'] ?&gt;\"&gt;\n        &lt;?php echo sprintf('&lt;a rel=\"tag\" href=\"/search/by/tag/%s\"&gt;%s&lt;/a&gt;', \n            $tag['slug'], $tag['tag']\n        ); ?&gt;\n    &lt;/span&gt;\n&lt;?php endforeach; ?&gt;\n</code></pre>\n\n<p>and this is the <code>CSS</code>:</p>\n\n<pre><code>/* put your size of choice */\n.tagrank1{font-size: 0.3em;}\n.tagrank2{font-size: 0.4em;}\n.tagrank3{font-size: 0.5em;} \n/* go on till tagrank10 */\n</code></pre>\n\n<p>This method displays all tags. If you have a lot of them, you probably don't want your tag cloud to become a <em>tag storm</em>. In that case you would append an <code>HAVING TO</code> clause to your SQL query:</p>\n\n<pre><code>-- minimum tag count is 8 --\n\nHAVING count(tag) &gt; 7\n</code></pre>\n\n<p>That's all</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "164758",
        "title": "",
        "text": "<p>As a helper in Rails:</p>\n\n<pre><code>def tag_cloud (strings, counts)\n    max = counts.max\n    strings.map { |a| \"&lt;span style='font-size:#{((counts[strings.index(a)] * 4.0)/max).ceil}em'&gt;#{a}&lt;/span&gt; \"  }\nend\n</code></pre>\n\n<p>Call this from the view:</p>\n\n<pre><code>&lt;%= tag_cloud($artists, $counts) %&gt;\n</code></pre>\n\n<p>This outputs <code>&lt;span style='font-size:_em'&gt;</code> elements in an array that will be converted to a string in the view to ultimately render like so:</p>\n\n<pre><code>&lt;span style='font-size:3em'&gt;the roots&lt;/span&gt;\n&lt;span style='font-size:2em'&gt;michael jackson&lt;/span&gt; \n&lt;span style='font-size:4em'&gt;billy idol&lt;/span&gt; \n&lt;span style='font-size:1em'&gt;more&lt;/span&gt; \n&lt;span style='font-size:1em'&gt;and more&lt;/span&gt; \n&lt;span style='font-size:2em'&gt;and_YET_MORE&lt;/span&gt; \n</code></pre>\n\n<p>It would be better to have a <code>class</code> attribute and reference the classes in a style sheet as mentioned by Brendan above.  Much better than using <code>h1-h6</code> semantically and there's less style baggage with a <code>&lt;span&gt;</code>.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "253",
        "title": "",
        "text": "<p>Off the top of my head...</p>\n\n<pre><code>$artist = array(\"the roots\",\"michael jackson\",\"billy idol\",\"more\",\"and more\",\"and_YET_MORE\");\n$count = array(5,3,9,1,1,3);\n$highest = max($count);\nfor (int $x = 0; $x &lt; count($artist); $x++)\n{\n    $normalized = $count[$x] / $highest;\n    $heading = ceil($normalized * 6); // 6 heading types\n    echo \"&lt;h\".$heading.\"&gt;\".$artist[$x].\"&lt;/h\".$heading.\"&gt;\";\n}\n</code></pre>\n",
        "votes": "30",
        "tags": "",
        "accepted": false
      },
      {
        "id": "87863",
        "title": "",
        "text": "<p>Have used this snippet for a while, credit is prism-perfect.net. Doesn't use H tags though</p>\n\n<pre><code>&lt;div id=\"tags\"&gt;\n    &lt;div class=\"title\"&gt;Popular Searches&lt;/div&gt;\n    &lt;?php\n        // Snippet taken from [prism-perfect.net]\n\n        include \"/path/to/public_html/search/settings/database.php\";\n        include \"/path/to/public_html/search/settings/conf.php\";\n\n        $query = \"SELECT query AS tag, COUNT(*) AS quantity\n        FROM sphider_query_log\n        WHERE results &gt; 0\n        GROUP BY query\n        ORDER BY query ASC\n        LIMIT 10\";\n\n        $result = mysql_query($query) or die(mysql_error());\n\n        while ($row = mysql_fetch_array($result)) {\n\n            $tags[$row['tag']] = $row['quantity'];\n        }\n\n        // change these font sizes if you will\n        $max_size = 30; // max font size in %\n        $min_size = 11; // min font size in %\n\n        // get the largest and smallest array values\n        $max_qty = max(array_values($tags));\n        $min_qty = min(array_values($tags));\n\n        // find the range of values\n        $spread = $max_qty - $min_qty;\n        if (0 == $spread) { // we don't want to divide by zero\n            $spread = 1;\n        }\n\n        // determine the font-size increment\n        // this is the increase per tag quantity (times used)\n        $step = ($max_size - $min_size)/($spread);\n\n        // loop through our tag array\n        foreach ($tags as $key =&gt; $value) {\n\n            // calculate CSS font-size\n            // find the $value in excess of $min_qty\n            // multiply by the font-size increment ($size)\n            // and add the $min_size set above\n            $size = $min_size + (($value - $min_qty) * $step);\n            // uncomment if you want sizes in whole %:\n            // $size = ceil($size);\n\n            // you'll need to put the link destination in place of the /search/search.php...\n            // (assuming your tag links to some sort of details page)\n            echo '&lt;a href=\"/search/search.php?query='.$key.'&amp;search=1\" style=\"font-size: '.$size.'px\"';\n            // perhaps adjust this title attribute for the things that are tagged\n            echo ' title=\"'.$value.' things tagged with '.$key.'\"';\n            echo '&gt;'.$key.'&lt;/a&gt; ';\n            // notice the space at the end of the link\n        }\n    ?&gt;\n&lt;/div&gt;\n</code></pre>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "274",
        "title": "",
        "text": "<p>@Ryan</p>\n\n<p>That's correct but it actually makes the tags with the least number, larger.  This code has been tested:</p>\n\n<pre><code>$artist = array(\"the roots\",\"michael jackson\",\"billy idol\",\"more\",\"and more\",\"and_YET_MORE\");\n$count = array(5,3,9,1,1,3);\n$highest = max($count);\nfor ($x = 0; $x &lt; count($artist); $x++) {\n    $normalized =  ($highest - $count[$x]+1) / $highest;\n    $heading = ceil($normalized * 6); // 6 heading types\n    echo \"&lt;h$heading&gt;{$artist[$x]}&lt;/h$heading&gt;\";\n}\n</code></pre>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "41906389",
        "title": "",
        "text": "<p>I know its very old post. posting my view as it may help someone in future.</p>\n\n<p>Here is the tagcloud I used in my website <a href=\"http://www.vbausefulcodes.in/\" rel=\"nofollow noreferrer\">http://www.vbausefulcodes.in/</a></p>\n\n<pre><code>&lt;?php\n$input= array(\"vba\",\"macros\",\"excel\",\"outlook\",\"powerpoint\",\"access\",\"database\",\"interview questions\",\"sendkeys\",\"word\",\"excel projects\",\"visual basic projects\",\"excel vba\",\"macro\",\"excel visual basic\",\"tutorial\",\"programming\",\"learn macros\",\"vba examples\");\n\n$rand_tags = array_rand($input, 5);\nfor ($x = 0; $x &lt;= 4; $x++) {\n    $size = rand ( 1 , 4 );\n    echo \"&lt;font size='$size'&gt;\" . $input[$rand_tags[$x]] . \" \" . \"&lt;/font&gt;\";\n}\n\necho \"&lt;br&gt;\";\n$rand_tags = array_rand($input, 7);\nfor ($x = 0; $x &lt;= 6; $x++) {\n    $size = rand ( 1 , 4 );\n    echo \"&lt;font size='$size'&gt;\" . $input[$rand_tags[$x]] . \" \" . \"&lt;/font&gt;\";\n}\n\necho \"&lt;br&gt;\";\n$rand_tags = array_rand($input, 5);\nfor ($x = 0; $x &lt;= 4; $x++) {\n    $size = rand ( 1 , 4 );\n    echo \"&lt;font size='$size'&gt;\" . $input[$rand_tags[$x]] . \" \" . \"&lt;/font&gt;\";\n}\n?&gt;\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "231",
    "url": "https://stackoverflow.com/questions/231",
    "title": "Register Windows program with the mailto protocol programmatically",
    "text:": "<p>How do I make it so <code>mailto:</code> links will be registered with my program?</p>\n\n<p>How would I then handle that event in my program?</p>\n\n<p>Most of the solutions I found from a quick Google search are how to do this manually, but I need to do this automatically for users of my program if they click a button, such as \"set as default email client\".</p>\n\n<h1>Edit:</h1>\n\n<p>Removed reference to Delphi, because the answer is independent of your language.</p>\n",
    "codes": [
      [],
      [],
      [
        "<a href=\"mailto:user@example.com\">Email me</a>\n"
      ]
    ],
    "votes:": "37",
    "tags": "<windows><mailto>",
    "AcceptedAnswerId": "1812",
    "answers": [
      {
        "id": "233",
        "title": "",
        "text": "<p>From what I've seen, there are a few registry keys that set the default mail client. One of them being:</p>\n\n<p>System Key: <code>[HKEY_CLASSES_ROOT\\mailto\\shell\\open\\command]</code></p>\n\n<p>Value Name: <code>(Default)</code></p>\n\n<p>Data Type: <code>REG_SZ</code> (String Value)</p>\n\n<p>Value Data: <code>Mail program command-line</code>. </p>\n\n<p>I'm not familar with <code>Delphi 7</code>, but I'm sure there are some <em>registry editing libraries</em> in there that you could use to modify this value.</p>\n\n<p>Some places list more than this <em>key</em>, others just this key, so you may need to test a little bit to find the proper one(s).</p>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "235",
        "title": "",
        "text": "<p>Here is the official Microsoft Solution to programmatically change the default mail client. It's Visual Basic, but I hope the concept is clear from this:</p>\n\n<p><a href=\"http://support.microsoft.com/kb/299853\" rel=\"nofollow noreferrer\">http://support.microsoft.com/kb/299853</a></p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1812",
        "title": "",
        "text": "<p><em>@Dillie-O: Your answer put me in the right direction (I should have expected it to just be a registry change) and I got this working. But I'm going to mark this as the answer because I'm going to put some additional information that I found while working on this.</em>  </p>\n\n<p>The solution to this question really doesn't matter what programming language you're using, as long as there's some way to modify Windows registry settings.</p>\n\n<p>Finally, here's the answer:</p>\n\n<ul>\n<li>To associate a program with the mailto protocol for <strong>all users</strong> on a computer, change the HKEY_CLASSES_ROOT\\mailto\\shell\\open\\command Default value to:<br>\n\"<em>Your program's executable</em>\" \"%1\"</li>\n<li>To <a href=\"http://windowsxp.mvps.org/permail.htm\" rel=\"noreferrer\">associate a program with the mailto protocol for the <strong>current user</strong></a>, change the HKEY_CURRENT_USER\\Software\\Classes\\mailto\\shell\\open\\command Default value to:<br>\n\"<em>Your program's executable</em>\" \"%1\"</li>\n</ul>\n\n<p>The %1 will be replaced with the entire mailto URL. For example, given the link:</p>\n\n<pre><code>&lt;a href=\"mailto:user@example.com\"&gt;Email me&lt;/a&gt;\n</code></pre>\n\n<p>The following will be executed:<br>\n\"<em>Your program's executable</em>\" \"mailto:user@example.com\"</p>\n\n<p>Update (via comment by shellscape):<br>\nAs of Windows 8, this method no longer works as expected. Win8 enforces the following key: HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associati\u200c\u200bons\\URLAssociations\\\u200c\u200bMAILTO\\UserChoice for which the ProgID of the selected app is hashed and can't be forged. It's a royal PITA</p>\n",
        "votes": "19",
        "tags": "",
        "accepted": true
      }
    ]
  },
  {
    "id:": "234",
    "url": "https://stackoverflow.com/questions/234",
    "title": "SQL Server 2005 implementation of MySQL REPLACE INTO?",
    "text:": "<p>MySQL has this incredibly useful yet proprietary <code>REPLACE INTO</code> SQL Command. </p>\n\n<p>Can this easily be emulated in SQL Server 2005?</p>\n\n<p>Starting a new Transaction, doing a <code>Select()</code> and then either <code>UPDATE</code> or <code>INSERT</code> and <code>COMMIT</code> is always a little bit of a pain, especially when doing it in the application and therefore always keeping 2 versions of the statement.</p>\n\n<p>I wonder if there is an easy and <strong>universal</strong> way to implement such a function into SQL Server 2005?</p>\n",
    "codes": [
      [
        "update t\nset hitCount = hitCount + 1\nwhere pk = @id\n\nif @@rowcount < 1 \nbegin \n   begin tran\n      update t with (serializable)\n      set hitCount = hitCount + 1\n      where pk = @id\n      if @@rowcount = 0\n      begin\n         insert t (pk, hitCount)\n         values (@id,1)\n      end\n   commit tran\nend\n"
      ],
      [
        "IF EXISTS (SELECT * FROM [Table] WHERE Id = X)\n   UPDATE [Table] SET...\nELSE\n   INSERT INTO [Table]\n"
      ],
      [
        "--try an update\nupdate tablename \nset field1 = 'new value',\n    field2 = 'different value',\n    ...\nwhere idfield = 7\n\n--insert if failed\nif @@rowcount = 0 and @@error = 0\n    insert into tablename \n           ( idfield, field1, field2, ... )\n    values ( 7, 'value one', 'another value', ... )\n",
        "merge tablename as target\nusing (values ('new value', 'different value'))\n    as source (field1, field2)\n    on target.idfield = 7\nwhen matched then\n    update\n    set field1 = source.field1,\n        field2 = source.field2,\n        ...\nwhen not matched then\n    insert ( idfield, field1, field2, ... )\n    values ( 7,  source.field1, source.field2, ... )\n"
      ],
      []
    ],
    "votes:": "85",
    "tags": "<mysql><sql-server><sql-server-2005>",
    "AcceptedAnswerId": "12202",
    "answers": [
      {
        "id": "112313",
        "title": "",
        "text": "<p>I wrote a <a href=\"http://www.samsaffron.com/blog/archive/2007/04/04/14.aspx\" rel=\"noreferrer\">blog post about this issue</a>. </p>\n\n<p>The bottom line is that if you want cheap updates ... and you want to be safe for concurrent usage. try: </p>\n\n<pre><code>update t\nset hitCount = hitCount + 1\nwhere pk = @id\n\nif @@rowcount &lt; 1 \nbegin \n   begin tran\n      update t with (serializable)\n      set hitCount = hitCount + 1\n      where pk = @id\n      if @@rowcount = 0\n      begin\n         insert t (pk, hitCount)\n         values (@id,1)\n      end\n   commit tran\nend\n</code></pre>\n\n<p>This way you have 1 operation for updates and a max of 3 operations for inserts. so, if you are generally updating this is a safe cheap option. </p>\n\n<p>I would also be very careful not to use anything that is unsafe for concurrent usage. Its really easy to get primary key violations or duplicate rows in production. </p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "243",
        "title": "",
        "text": "<p>What the upsert/merge is doing is something to the effect of...</p>\n\n<pre><code>IF EXISTS (SELECT * FROM [Table] WHERE Id = X)\n   UPDATE [Table] SET...\nELSE\n   INSERT INTO [Table]\n</code></pre>\n\n<p>So hopefully the combination of those articles and this pseudo code can get things moving.</p>\n",
        "votes": "17",
        "tags": "",
        "accepted": false
      },
      {
        "id": "12202",
        "title": "",
        "text": "<p>This is something that annoys me about MSSQL (<a href=\"http://bizvprog.blogspot.com/2008/04/annoying-fundamental-flaw-with-sql.html\" rel=\"noreferrer\">rant on my blog</a>). I wish MSSQL supported <code>upsert</code>. </p>\n\n<p>@Dillie-O's code is a good way in older SQL versions (+1 vote), but it still is basically two IO operations (the <code>exists</code> and then the <code>update</code> or <code>insert</code>)</p>\n\n<p>There's a slightly better way on <a href=\"https://stackoverflow.com/questions/13540/insert-update-stored-proc-on-sql-server\">this post</a>, basically:</p>\n\n<pre><code>--try an update\nupdate tablename \nset field1 = 'new value',\n    field2 = 'different value',\n    ...\nwhere idfield = 7\n\n--insert if failed\nif @@rowcount = 0 and @@error = 0\n    insert into tablename \n           ( idfield, field1, field2, ... )\n    values ( 7, 'value one', 'another value', ... )\n</code></pre>\n\n<p>This reduces it to one IO operations if it's an update, or two if an insert. </p>\n\n<p>MS Sql2008 introduces <code>merge</code> from the SQL:2003 standard:</p>\n\n<pre><code>merge tablename as target\nusing (values ('new value', 'different value'))\n    as source (field1, field2)\n    on target.idfield = 7\nwhen matched then\n    update\n    set field1 = source.field1,\n        field2 = source.field2,\n        ...\nwhen not matched then\n    insert ( idfield, field1, field2, ... )\n    values ( 7,  source.field1, source.field2, ... )\n</code></pre>\n\n<p>Now it's really just one IO operation, but awful code :-(</p>\n",
        "votes": "60",
        "tags": "",
        "accepted": true
      },
      {
        "id": "238",
        "title": "",
        "text": "<p>The functionality you're looking for is traditionally called an UPSERT. Atleast knowing what it's called might help you find what you're looking for.</p>\n\n<p>I don't think SQL Server 2005 has any great ways of doing this. 2008 introduces the MERGE statement that can be used to accomplish this as shown in: <a href=\"http://www.databasejournal.com/features/mssql/article.php/3739131\" rel=\"noreferrer\">http://www.databasejournal.com/features/mssql/article.php/3739131</a> or <a href=\"http://blogs.conchango.com/davidportas/archive/2007/11/14/SQL-Server-2008-MERGE.aspx\" rel=\"noreferrer\">http://blogs.conchango.com/davidportas/archive/2007/11/14/SQL-Server-2008-MERGE.aspx</a></p>\n\n<p>Merge was available in the beta of 2005, but they removed it out in the final release.</p>\n",
        "votes": "21",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "246",
    "url": "https://stackoverflow.com/questions/246",
    "title": "Create a SQLite database based on an XSD Data Set",
    "text:": "<p>Does anybody know if there is a way to create an SQLite database based on an XSD <code>DataSet</code>? In the past, I've just used a basic SQLite manager, but I want to fuse things a bit more with my <code>.NET</code> development if possible.</p>\n",
    "codes": [
      [],
      [],
      []
    ],
    "votes:": "38",
    "tags": "<.net><database><sqlite>",
    "AcceptedAnswerId": "176741",
    "answers": [
      {
        "id": "1420",
        "title": "",
        "text": "<p>I'm sure you could write a small app that takes an XSD file and parses it into a SQL script. I've never seen code out there to do it though, but that's not saying it doesn't exist.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "35807",
        "title": "",
        "text": "<p>Perhaps you could use an XSL transformation to convert the XSD into SQL table definitions. Likewise, I can't find any prior examples of this, but I'd have thought it would be possible.</p>\n\n<p>I'd imagine a generic XSLT for XSD->SQL, once written, could be applied to any such scenario (and would be cross-platform too). Perhaps somebody has done this before...</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "176741",
        "title": "",
        "text": "<p>I suspect in the general case this is hard; XML Schema allows for some quite bizarre type constructions.  I'm not sure how you would do substitution groups, or extensions to restrictions of types for example.</p>\n\n<p>However it should be possible to knock something together quite quickly (especially mapping from the classes in System.Xml.Schema) that works for 90% of schemas (i.e. sequence and choice elements with a few simple data types).</p>\n",
        "votes": "18",
        "tags": "",
        "accepted": true
      }
    ]
  },
  {
    "id:": "260",
    "url": "https://stackoverflow.com/questions/260",
    "title": "Adding scripting functionality to .NET applications",
    "text:": "<p>I have a little game written in C#. It uses a database as back-end. It's \na <a href=\"http://en.wikipedia.org/wiki/Collectible_card_game\" rel=\"nofollow noreferrer\">trading card game</a>, and I wanted to implement the function of the cards as a script.</p>\n\n<p>What I mean is that I essentially have an interface, <code>ICard</code>, which a card class implements (<code>public class Card056: ICard</code>) and which contains a function that is called by the game.</p>\n\n<p>Now, to make the thing maintainable/moddable, I would like to have the class for each card as source code in the database and essentially compile it on first use. So when I have to add/change a card, I'll just add it to the database and tell my application to refresh, without needing any assembly deployment (especially since we would be talking about 1 assembly per card which means hundreds of assemblies).</p>\n\n<p>Is that possible? Register a class from a source file and then instantiate it, etc.</p>\n\n<pre><code>ICard Cards[current] = new MyGame.CardLibrary.Card056();\nCards[current].OnEnterPlay(ref currentGameState);\n</code></pre>\n\n<p>The language is C# but extra bonus if it's possible to write the script in any .NET language.</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "74",
    "tags": "<c#><.net><scripting><compiler-construction>",
    "AcceptedAnswerId": "307",
    "answers": [
      {
        "id": "11527418",
        "title": "",
        "text": "<p>I'm using LuaInterface1.3 + Lua 5.0 for a NET&nbsp;1.1 application.</p>\n\n<p>The issue with Boo is that every time you parse/compile/eval your code on the fly, it creates a set of boo classes so you will get memory leaks.</p>\n\n<p>Lua in the other hand, does not do that, so it's very very stable and works wonderful (I can pass objects from C# to Lua and backwards).</p>\n\n<p>So far I haven't put it in PROD yet, but seems very promising.</p>\n\n<p><strong>I did have memory leaks issues in PROD using LuaInterface + Lua 5.0</strong>, therefore I used Lua 5.2 and linked directly into C# with DllImport. <strong>The memory leaks were inside the LuaInterface library.</strong></p>\n\n<p>Lua 5.2: from <a href=\"http://luabinaries.sourceforge.net\" rel=\"nofollow noreferrer\">http://luabinaries.sourceforge.net</a> and <a href=\"http://sourceforge.net/projects/luabinaries/files/5.2/Windows%20Libraries/Dynamic/lua-5.2_Win32_dll7_lib.zip/download\" rel=\"nofollow noreferrer\">http://sourceforge.net/projects/luabinaries/files/5.2/Windows%20Libraries/Dynamic/lua-5.2_Win32_dll7_lib.zip/download</a></p>\n\n<p>Once I did this, all my memory leaks were gone and the application was very stable.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "359",
        "title": "",
        "text": "<p>You could use any of the DLR languages, which provide a way to really easily host your own scripting platform. However, you don't have to use a scripting language for this. You could use C# and compile it with the C# code provider. As long as you load it in its own AppDomain, you can load and unload it to your heart's content.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "269",
        "title": "",
        "text": "<p>Yes, I thought about that, but I soon figured out that another Domain-Specific-Language (DSL) would be a bit too much.</p>\n\n<p>Essentially, they need to interact with my gamestate in possibly unpredictable ways. For example, a card could have a rule \"When this cards enter play, all your undead minions gain +3 attack against flying enemies, except when the enemy is blessed\". As trading card games are turn based, the GameState Manager will fire OnStageX events and let the cards modify other cards or the GameState in whatever way the card needs.</p>\n\n<p>If I try to create a DSL, I have to implement a rather large feature set and possibly constantly update it, which shifts the maintenance work to another part without actually removing it.</p>\n\n<p>That's why I wanted to stay with a \"real\" .NET language to essentially be able to just fire the event and let the card manipulate the gamestate in whatever way (within the limits of the code access security).</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3637",
        "title": "",
        "text": "<p>If you don't want to use the DLR you can <a href=\"http://docs.codehaus.org/display/BOO/Boo+as+an+embedded+scripting+language\" rel=\"nofollow noreferrer\">use Boo (which has an interpreter)</a> or you could consider <a href=\"https://archive.codeplex.com/?p=scriptdotnet\" rel=\"nofollow noreferrer\">the Script.NET (S#) project on CodePlex</a>. With the Boo solution you can choose between compiled scripts or using the interpreter, and Boo makes a nice scripting language, has a flexible syntax and an extensible language via its open compiler architecture. Script.NET looks nice too, though, and you could easily extend that language as well as its an open source project and uses a very friendly Compiler Generator (<a href=\"https://github.com/IronyProject/\" rel=\"nofollow noreferrer\">Irony.net</a>).</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "307",
        "title": "",
        "text": "<p><a href=\"https://www.codeproject.com/Articles/8656/C-Script-The-Missing-Puzzle-Piece\" rel=\"nofollow noreferrer\">Oleg Shilo's C# Script solution (at The Code Project</a>) really is a great introduction to providing script abilities in your application.</p>\n\n<p>A different approach would be to consider a language that is specifically built for scripting, such as <a href=\"https://en.wikipedia.org/wiki/IronRuby\" rel=\"nofollow noreferrer\">IronRuby</a>, <a href=\"https://en.wikipedia.org/wiki/IronPython\" rel=\"nofollow noreferrer\">IronPython</a>, or <a href=\"https://en.wikipedia.org/wiki/Lua_%28programming_language%29\" rel=\"nofollow noreferrer\">Lua</a>.</p>\n\n<p>IronPython and IronRuby are both available today.</p>\n\n<p>For a guide to embedding IronPython read\n<a href=\"https://blogs.msdn.microsoft.com/jmstall/2005/09/01/how-to-embed-ironpython-script-support-in-your-existing-app-in-10-easy-steps/\" rel=\"nofollow noreferrer\">How to embed IronPython script support in your existing app in 10 easy steps</a>.</p>\n\n<p>Lua is a scripting language commonly used in games. There is a Lua compiler for .NET, available from CodePlex -- <a href=\"http://www.codeplex.com/Nua\" rel=\"nofollow noreferrer\">http://www.codeplex.com/Nua</a></p>\n\n<p>That codebase is a great read if you want to learn about building a compiler in .NET.</p>\n\n<p>A different angle altogether is to try <a href=\"https://en.wikipedia.org/wiki/PowerShell\" rel=\"nofollow noreferrer\">PowerShell</a>. There are numerous examples of embedding PowerShell into an application -- here's a thorough project on the topic: \n<a href=\"http://code.msdn.microsoft.com/PowerShellTunnel/Wiki/View.aspx?title=PowerShellTunnel%20Reference\" rel=\"nofollow noreferrer\" title=\"PowerShell Tunnel\">Powershell Tunnel</a></p>\n",
        "votes": "43",
        "tags": "",
        "accepted": true
      },
      {
        "id": "4289753",
        "title": "",
        "text": "<p>The next version of .NET (5.0?) has had a lot of talk about opening the \"compiler as a service\" which would make things like direct script evaluation possible.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "79013",
        "title": "",
        "text": "<p>I'd suggest using <a href=\"http://luaforge.net/projects/luainterface/\" rel=\"noreferrer\">LuaInterface</a> as it has fully implemented Lua where it appears that Nua is not complete and likely does not implement some very useful functionality (coroutines, etc).</p>\n\n<p>If you want to use some of the outside prepacked Lua modules, I'd suggest using something along the lines of 1.5.x as opposed to the 2.x series that builds fully managed code and cannot expose the necessary C API.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "344",
        "title": "",
        "text": "<p>You might be able to use IronRuby for that. </p>\n\n<p>Otherwise I'd suggest you have a directory where you place precompiled assemblies. Then you could have a reference in the DB to the assembly and class, and use reflection to load the proper assemblies at runtime.</p>\n\n<p>If you really want to compile at run-time you could use the CodeDOM, then you could use reflection to load the dynamic assembly. <a href=\"https://docs.microsoft.com/dotnet/api/microsoft.csharp.csharpcodeprovider\" rel=\"nofollow noreferrer\">Microsoft documentation article which might help</a>.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7217",
        "title": "",
        "text": "<p>The main application that my division sells does something very similar to provide client customisations (which means that I can't post any source). We have a C# application that loads dynamic VB.NET scripts (although any .NET language could be easily supported - VB was chosen because the customisation team came from an ASP background).</p>\n\n<p>Using .NET's CodeDom we compile the scripts from the database, using the VB <code>CodeDomProvider</code> (annoyingly it defaults to .NET 2, if you want to support 3.5 features you need to pass a dictionary with \"CompilerVersion\" = \"v3.5\" to its constructor). Use the <code>CodeDomProvider.CompileAssemblyFromSource</code> method to compile it (you can pass settings to force it to compile in memory only.</p>\n\n<p>This would result in hundreds of assemblies in memory, but you could put all the dynamic classes' code together into a single assembly, and recompile the whole lot when any change. This has the advantage that you could add a flag to compile on disk with a <a href=\"http://en.wikipedia.org/wiki/Program_database\" rel=\"nofollow noreferrer\">PDB</a> for when you're testing, allowing you to debug through the dynamic code.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "263",
    "url": "https://stackoverflow.com/questions/263",
    "title": "GTK implementation of MessageBox",
    "text:": "<p>I have been trying to implement Win32's <code>MessageBox</code> using GTK. The app using SDL/OpenGL, so this isn't a GTK app. </p>\n\n<p>I handle the initialization (<code>gtk_init</code>) sort of stuff inside the <code>MessageBox</code> function as follows:</p>\n\n<pre><code>int MessageBox(HWND hwnd, const char* text, const char* caption, UINT type)\n{\n    GtkWidget *window = NULL;\n    GtkWidget *dialog = NULL;\n\n    gtk_init(&amp;gtkArgc, &amp;gtkArgv);\n    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);\n    g_signal_connect(G_OBJECT(window), \"delete_event\", G_CALLBACK(delete_event), NULL);\n    g_signal_connect(G_OBJECT(window), \"destroy\", G_CALLBACK(destroy), NULL);\n    // gcallback calls gtk_main_quit()\n    gtk_init_add((GtkFunction)gcallback, NULL);\n\n    if (type &amp; MB_YESNO) {\n        dialog = gtk_message_dialog_new(GTK_WINDOW(window), GTK_DIALOG_DESTROY_WITH_PARENT, GTK_MESSAGE_QUESTION, GTK_BUTTONS_YES_NO, text);\n    } else {\n        dialog = gtk_message_dialog_new(GTK_WINDOW(window), GTK_DIALOG_DESTROY_WITH_PARENT, GTK_MESSAGE_INFO, GTK_BUTTONS_OK, text);\n    }\n\n    gtk_window_set_title(GTK_WINDOW(dialog), caption);\n    gint result = gtk_dialog_run(GTK_DIALOG(dialog));\n\n    gtk_main();\n\n    gtk_widget_destroy(dialog);\n\n    if (type &amp; MB_YESNO) {\n        switch (result) {\n        default:\n        case GTK_RESPONSE_DELETE_EVENT:\n        case GTK_RESPONSE_NO:\n            return IDNO;\n            break;\n        case GTK_RESPONSE_YES:\n            return IDYES;\n            break;\n        }\n    }\n\n    return IDOK;\n} \n</code></pre>\n\n<p>Now, I am by no means an experienced GTK programmer, and I realize that I'm probably doing something horribly wrong.</p>\n\n<p>However, my problem is that the last dialog popped up with this function stays around until the process exits. Any ideas?</p>\n",
    "codes": [
      [
        "int MessageBox(HWND hwnd, const char* text, const char* caption, UINT type)\n{\n    GtkWidget *dialog ;\n\n    /* Instead of 0, use GTK_DIALOG_MODAL to get a modal dialog box */\n\n    if (type & MB_YESNO)\n        dialog = gtk_message_dialog_new(NULL, 0, GTK_MESSAGE_QUESTION, GTK_BUTTONS_YES_NO, text );\n    else\n        dialog = gtk_message_dialog_new(NULL, 0, GTK_MESSAGE_INFO, GTK_BUTTONS_OK, text );\n\n\n    gtk_window_set_title(GTK_WINDOW(dialog), caption);\n    gint result = gtk_dialog_run(GTK_DIALOG(dialog));\n    gtk_widget_destroy( GTK_WIDGET(dialog) );\n\n    if (type & MB_YESNO)\n    {\n        switch (result)\n        {\n        default:\n        case GTK_RESPONSE_DELETE_EVENT:\n        case GTK_RESPONSE_NO:\n            return IDNO;\n        case GTK_RESPONSE_YES:\n            return IDYES;\n        }\n        return IDOK;\n    } \n}\n"
      ],
      [
        "typedef struct {\n    int type;\n    int result;\n} DialogData;\n\nstatic gboolean\ndisplay_dialog(gpointer user_data)\n{\n    DialogData *dialog_data = user_data;\n    GtkWidget *dialog;\n\n    if (dialog_data->type & MB_YESNO)\n        dialog = gtk_message_dialog_new(...);\n    else\n        dialog = gtk_message_dialog_new(...);\n\n    // Set title, etc.\n\n    dialog_data->result = gtk_dialog_run(...);\n\n    gtk_main_quit();  // Quits the main loop run in MessageBox()\n\n    return FALSE;\n}\n\nint MessageBox(...)\n{\n    DialogData dialog_data;\n\n    dialog_data.type = type;\n\n    gtk_idle_add(display_dialog, &dialog_data);\n\n    gtk_main();\n\n    // Do stuff based on dialog_data.result\n}\n"
      ],
      [
        "window = gtk_window_new(GTK_WINDOW_TOPLEVEL);\ng_signal_connect(G_OBJECT(window), \"delete_event\", G_CALLBACK(delete_event), NULL);\ng_signal_connect(G_OBJECT(window), \"destroy\", G_CALLBACK(destroy), NULL);\n"
      ]
    ],
    "votes:": "35",
    "tags": "<c><linux><gtk><x11>",
    "AcceptedAnswerId": "607",
    "answers": [
      {
        "id": "2959398",
        "title": "",
        "text": "<p>To manage a dialog box with GTK+, use a GtkDialog and <a href=\"http://library.gnome.org/devel/gtk/stable/GtkDialog.html#gtk-dialog-run\" rel=\"noreferrer\">gtk_dialog_run()</a> instead of managing a window and a main loop by yourself.</p>\n\n<p><strong>EDIT / ADDENDUM :</strong></p>\n\n<p>What I mean is \"just use\" : I don't understand why you create a windows you never use and a main loop which seems useless (at least from the piece of code you posted). You can write something as short as :</p>\n\n<pre><code>int MessageBox(HWND hwnd, const char* text, const char* caption, UINT type)\n{\n    GtkWidget *dialog ;\n\n    /* Instead of 0, use GTK_DIALOG_MODAL to get a modal dialog box */\n\n    if (type &amp; MB_YESNO)\n        dialog = gtk_message_dialog_new(NULL, 0, GTK_MESSAGE_QUESTION, GTK_BUTTONS_YES_NO, text );\n    else\n        dialog = gtk_message_dialog_new(NULL, 0, GTK_MESSAGE_INFO, GTK_BUTTONS_OK, text );\n\n\n    gtk_window_set_title(GTK_WINDOW(dialog), caption);\n    gint result = gtk_dialog_run(GTK_DIALOG(dialog));\n    gtk_widget_destroy( GTK_WIDGET(dialog) );\n\n    if (type &amp; MB_YESNO)\n    {\n        switch (result)\n        {\n        default:\n        case GTK_RESPONSE_DELETE_EVENT:\n        case GTK_RESPONSE_NO:\n            return IDNO;\n        case GTK_RESPONSE_YES:\n            return IDYES;\n        }\n        return IDOK;\n    } \n}\n</code></pre>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "607",
        "title": "",
        "text": "<p>Hmm, ok.  I'd suggest code like this, then:</p>\n\n<pre><code>typedef struct {\n    int type;\n    int result;\n} DialogData;\n\nstatic gboolean\ndisplay_dialog(gpointer user_data)\n{\n    DialogData *dialog_data = user_data;\n    GtkWidget *dialog;\n\n    if (dialog_data-&gt;type &amp; MB_YESNO)\n        dialog = gtk_message_dialog_new(...);\n    else\n        dialog = gtk_message_dialog_new(...);\n\n    // Set title, etc.\n\n    dialog_data-&gt;result = gtk_dialog_run(...);\n\n    gtk_main_quit();  // Quits the main loop run in MessageBox()\n\n    return FALSE;\n}\n\nint MessageBox(...)\n{\n    DialogData dialog_data;\n\n    dialog_data.type = type;\n\n    gtk_idle_add(display_dialog, &amp;dialog_data);\n\n    gtk_main();\n\n    // Do stuff based on dialog_data.result\n}\n</code></pre>\n\n<p>The struct is because you need to pass around a couple pieces of data.  The <code>gtk_idle_add()</code> call adds a method to be run when the main loop is running and idle, and the <code>FALSE</code> return value from the <code>display_dialog()</code> call means that it's only run once.  After we get the result from the dialog, we quit the main loop.  That'll cause the <code>gtk_main()</code> in your main <code>MessageBox()</code> method to return, and you'll be able to access the result from there.</p>\n\n<p>Hope this helps!</p>\n",
        "votes": "20",
        "tags": "",
        "accepted": true
      },
      {
        "id": "537",
        "title": "",
        "text": "<p>A few things:</p>\n\n<p>You are creating (and not using) an unnecessary toplevel window, named <code>window</code>.  You can just delete these lines:</p>\n\n<pre><code>window = gtk_window_new(GTK_WINDOW_TOPLEVEL);\ng_signal_connect(G_OBJECT(window), \"delete_event\", G_CALLBACK(delete_event), NULL);\ng_signal_connect(G_OBJECT(window), \"destroy\", G_CALLBACK(destroy), NULL);\n</code></pre>\n\n<p>Also, the flow doesn't seem quite right.  <code>gtk_main()</code> starts the GTK main loop, which blocks until something exits it.  <code>gtk_dialog_run()</code> also starts a main loop, but it exits as soon as one of the buttons is clicked.</p>\n\n<p>I think it might be enough for you to remove the <code>gtk_init_add()</code> and <code>gtk_main()</code> calls, and simply deal with the return value.  Also the <code>gtk_widget_destroy()</code> call is unnecessary, as the dialog window is automatically destroyed when gtk_dialog_run() returns.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "264",
    "url": "https://stackoverflow.com/questions/264",
    "title": "BerkeleyDB Concurrency",
    "text:": "<ul>\n<li>What's the optimal level of concurrency that the C++ implementation of BerkeleyDB can reasonably support?</li>\n<li>How many threads can I have hammering away at the DB before throughput starts to suffer because of resource contention?</li>\n</ul>\n\n<p>I've read the manual and know how to set the number of locks, lockers, database page size, etc. but I'd just like some advice from someone who has real-world experience with BDB concurrency.</p>\n\n<p>My application is pretty simple, I'll be doing gets and puts of records that are about 1KB each. No cursors, no deleting.</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "34",
    "tags": "<c++><berkeley-db>",
    "AcceptedAnswerId": "",
    "answers": [
      {
        "id": "667",
        "title": "",
        "text": "<p>It depends on what kind of application you are building. Create a representative test scenario, and start hammering away. Then you will know the definitive answer.</p>\n\n<p>Besides your use case, it also depends on CPU, memory, front-side bus, operating system, cache settings, etcetera.</p>\n\n<p>Seriously, just test your own scenario.</p>\n\n<p>If you need some numbers (that actually may mean nothing in your scenario):</p>\n\n<ul>\n<li><a href=\"http://www.oracle.com/technology/products/berkeley-db/pdf/berkeley-db-perf.pdf\" rel=\"noreferrer\">Oracle Berkeley DB: \nPerformance Metrics and \nBenchmarks</a></li>\n<li><a href=\"http://staff.rcost.unisannio.it/visaggio/berkleyDB.pdf\" rel=\"noreferrer\">Performance Metrics \n&amp; Benchmarks:<br>\nBerkeley DB</a></li>\n</ul>\n",
        "votes": "14",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1071",
        "title": "",
        "text": "<p>What I did when working against a database of unknown performance was to measure turnaround time on my queries.  I kept upping the thread count until turn-around time dropped, and dropping the thread count until turn-around time improved (well, it was processes in my environment, but whatever).  </p>\n\n<p>There were moving averages and all sorts of metrics involved, but the take-away lesson was: just adapt to how things are working at the moment.  You never know when the DBAs will improve performance or hardware will be upgraded, or perhaps another process will come along to load down the system while you're running.  So adapt.</p>\n\n<p>Oh, and another thing: avoid process switches if you can - batch things up.</p>\n\n<hr>\n\n<p>Oh, I should make this clear: this all happened at run time, not during development.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "199163",
        "title": "",
        "text": "<p>I strongly agree with Daan's point: create a test program, and make sure the way in which it accesses data mimics as closely as possible the patterns you expect your application to have. This is extremely important with BDB because different access patterns yield very different throughput.</p>\n\n<p>Other than that, these are general factors I found to be of major impact on throughput:</p>\n\n<ol>\n<li><p>Access method (which in your case i guess is BTREE).</p></li>\n<li><p>Level of persistency with which you configured DBD (for example, in my case the 'DB_TXN_WRITE_NOSYNC' environment flag improved write performance by an order of magnitude, but it compromises persistency) </p></li>\n<li><p>Does the working set fit in cache?</p></li>\n<li><p>Number of Reads Vs. Writes.</p></li>\n<li><p>How spread out your access is (remember that BTREE has a page level locking - so accessing different pages with different threads is a big advantage).</p></li>\n<li><p>Access pattern - meanig how likely are threads to lock one another, or even deadlock, and what is your deadlock resolution policy (this one may be a killer).</p></li>\n<li><p>Hardware (disk &amp; memory for cache).</p></li>\n</ol>\n\n<p>This amounts to the following point:\nScaling a solution based on DBD so that it offers greater concurrency has two key ways of going about it; either minimize the number of locks in your design or add more hardware.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "74831",
        "title": "",
        "text": "<p>The way I understand things, Samba created <a href=\"http://sourceforge.net/projects/tdb/\" rel=\"nofollow noreferrer\">tdb</a> to allow \"multiple concurrent <em>writers</em>\" for any particular database file.  So if your workload has multiple writers your performance may be bad (as in, the Samba project chose to write its own system, apparently because it wasn't happy with Berkeley DB's performance in this case).</p>\n\n<p>On the other hand, if your workload has lots of readers, then the question is how well your operating system handles multiple readers.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "530",
        "title": "",
        "text": "<p>Doesn't this depend on the hardware as well as number of threads and stuff?</p>\n\n<p>I would make a simple test and run it with increasing amounts of threads hammering and see what seems best.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "265",
    "url": "https://stackoverflow.com/questions/265",
    "title": "Best Practice: Collaborative Environment, Bin Directory, SVN",
    "text:": "<p>What are the best practices for checking in BIN directories in a collaborative development environment using SVN?  Should project level references be excluded from checkin?  Is it easier to just add all bin directories?</p>\n\n<p>I develop a lot of DotNetNuke sites and it seems that in a multi-developer environment, it's always a huge task to get the environment setup correctly.</p>\n\n<p>The ultimate goal (of course) is to have a new developer checkout the trunk from SVN, restore the DNN database and have it all just 'work'...</p>\n",
    "codes": [
      [],
      [],
      [],
      [
        "-Project\n--Project.sln\n--References\n---StructureMap.dll\n---NUnit.dll\n---System.Web.Mvc.dll\n--Project.Web\n---Project.Web.Proj\n---Project.Web.Proj files\n--Project\n---Project.Proj\n---Project.Proj files\n"
      ],
      []
    ],
    "votes:": "33",
    "tags": "<svn><collaboration>",
    "AcceptedAnswerId": "266",
    "answers": [
      {
        "id": "56480",
        "title": "",
        "text": "<p><a href=\"http://www.codeplex.com/treesurgeon\" rel=\"nofollow noreferrer\">Tree Surgeon</a> is a great tool which creates an empty .NET development tree.  It has been tweaked over years of use and implements lots of best practices.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "268",
        "title": "",
        "text": "<p>Is this a .Net specific question?</p>\n\n<p>Generally the best practice is to not check in anything which is built automatically from files that are already in SCM.  All of that is ideally created as part of your automatic build process.</p>\n\n<p>If the <code>bin</code> directory you're referring to contains third-party binaries, rather than a build of your project, ignore (downvote?) this advice.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "10428",
        "title": "",
        "text": "<p>We follow the practice of using a vendor directory which contains all vendor specific headers and binaries.  The goal is that anybody should be able to build the product just by checking it out and running some top level build script.  </p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "266",
        "title": "",
        "text": "<p>Any assemblies that are expected to be in the GAC should stay in the GAC. This includes System.web.dll or any other 3rd party dll that you'll deploy to the GAC in production. This means a new developer would have to install these assemblies.</p>\n\n<p>All other 3rd party assemblies should be references through a relative path. My typical structure is:</p>\n\n<pre><code>-Project\n--Project.sln\n--References\n---StructureMap.dll\n---NUnit.dll\n---System.Web.Mvc.dll\n--Project.Web\n---Project.Web.Proj\n---Project.Web.Proj files\n--Project\n---Project.Proj\n---Project.Proj files\n</code></pre>\n\n<p>Project.Web and Project reference the assemblies in the root/References folder relatively. These .dlls are checked into subversion.</p>\n\n<p>Aside from that, */bin  */bin/* obj  should be in your global ignore path.</p>\n\n<p>With this setup, all references to assemblies are either through the GAC (so should work across all computers), or relative to each project within your solution.</p>\n",
        "votes": "20",
        "tags": "",
        "accepted": true
      },
      {
        "id": "532",
        "title": "",
        "text": "<p>Maven helps quite a lot with this problem when I'm coding java. We commit the pom.xml to the scs and the maven repository contains all our dependencies.\nFor me that seems like a nice way to do it.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "289",
    "url": "https://stackoverflow.com/questions/289",
    "title": "How do you sort a dictionary by value?",
    "text:": "<p>I often have to sort a dictionary, consisting of keys &amp; values, by value. For example, I have a hash of words and respective frequencies, that I want to order by frequency.</p>\n\n<p>There is a <code>SortedList</code> which is good for a single value (say frequency), that I want to map it back to the word.</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/f7fta44c.aspx\" rel=\"noreferrer\">SortedDictionary</a> orders by key, not value. Some resort to a <a href=\"http://www.codeproject.com/KB/recipes/lookupcollection.aspx\" rel=\"noreferrer\">custom class</a>, but is there a cleaner way?</p>\n",
    "codes": [
      [
        "var dict = new SortedDictionary<string, int>();\n// ToDo: populate dict\n\nvar output = dict.OrderBy(e => e.Value).Select(e => new {frequency = e.Value, word = e.Key}).ToList();\n\nforeach (var entry in output)\n{\n    Console.WriteLine(\"frequency:{0}, word: {1}\",entry.frequency,entry.word);\n}\n"
      ],
      [
        "var x = (from c in dict orderby c.Value.Order ascending select c).ToDictionary(c => c.Key, c=>c.Value);\n"
      ],
      [
        "   Dictionary<int, int> dict = new Dictionary<int, int>();\n   dict.Add(21,1041);\n   dict.Add(213, 1021);\n   dict.Add(45, 1081);\n   dict.Add(54, 1091);\n   dict.Add(3425, 1061);\n   sict.Add(768, 1011);\n",
        "        Dictionary<int, int> dctTemp = new Dictionary<int, int>();\n\n        foreach (KeyValuePair<int, int> pair in dict.OrderBy(key => key.Value))\n        {\n            dctTemp .Add(pair.Key, pair.Value);\n        }\n"
      ],
      [
        "using System.Linq.Enumerable;\n...\nList<KeyValuePair<string, string>> myList = aDictionary.ToList();\n\nmyList.Sort(\n    delegate(KeyValuePair<string, string> pair1,\n    KeyValuePair<string, string> pair2)\n    {\n        return pair1.Value.CompareTo(pair2.Value);\n    }\n);\n",
        "var myList = aDictionary.ToList();\n\nmyList.Sort((pair1,pair2) => pair1.Value.CompareTo(pair2.Value));\n"
      ],
      [
        "dict = dict.OrderBy(x => x.Value).ToDictionary(x => x.Key, x => x.Value);\n"
      ],
      [
        "var ordered = dict.OrderBy(x => x.Value);\n"
      ],
      [
        "Dim MyDictionary As SortedDictionary(Of String, MyDictionaryEntry)\n\nMyDictionaryListView.ItemsSource = MyDictionary.Values.OrderByDescending(Function(entry) entry.MyValue)\n\nPublic Class MyDictionaryEntry ' Need Property for GridViewColumn DisplayMemberBinding\n    Public Property MyString As String\n    Public Property MyValue As Integer\nEnd Class\n",
        "<ListView Name=\"MyDictionaryListView\">\n    <ListView.View>\n        <GridView>\n            <GridViewColumn DisplayMemberBinding=\"{Binding Path=MyString}\" Header=\"MyStringColumnName\"></GridViewColumn>\n            <GridViewColumn DisplayMemberBinding=\"{Binding Path=MyValue}\" Header=\"MyValueColumnName\"></GridViewColumn>\n         </GridView>\n    </ListView.View>\n</ListView>\n"
      ],
      [
        "//Sorts sections according to the key value stored on \"sections\" unsorted dictionary, which is passed as a constructor argument\nSystem.Collections.Generic.SortedDictionary<int, string> sortedSections = null;\nif (sections != null)\n{\n    sortedSections = new SortedDictionary<int, string>(sections);\n}\n"
      ],
      [
        "Dictionary<string, string> dic= new Dictionary<string, string>();\nvar ordered = dic.OrderBy(x => x.Value);\nreturn ordered.ToDictionary(t => t.Key, t => t.Value);\n"
      ],
      [
        "var dictionary = new Dictionary<string, int> { { \"c\", 3 }, { \"a\", 1 }, { \"b\", 2 } };\ndictionary.OrderBy(x => x.Value)\n  .ForEach(x => Console.WriteLine(\"{0}={1}\", x.Key,x.Value));\n"
      ],
      [
        "var dict = new Bijection<Key, Value>(new Dictionary<Key,Value>(), \n                               new SortedDictionary<Value,Key>());\n"
      ],
      [
        "var items = new Dictionary<string, int>();\nitems.Add(\"cat\", 0);\nitems.Add(\"dog\", 20);\nitems.Add(\"bear\", 100);\nitems.Add(\"lion\", 50);\n\n// Call OrderBy method here on each item and provide them the ids.\nforeach (var item in items.OrderBy(k => k.Key))\n{\n    Console.WriteLine(item);// items are in sorted order\n}\n",
        "var sortedDictByOrder = items.OrderBy(v => v.Value);\n",
        "var sortedKeys = from pair in dictName\n            orderby pair.Value ascending\n            select pair;\n"
      ],
      [
        "foreach (KeyValuePair<string,int> item in keywordCounts.OrderBy(key=> key.Value))\n{ \n    // do something with item.Key and item.Value\n}\n"
      ],
      [
        "Dictionary<string, int> counts = new Dictionary<string, int>();\ncounts.Add(\"one\", 1);\ncounts.Add(\"four\", 4);\ncounts.Add(\"two\", 2);\ncounts.Add(\"three\", 3);\n",
        "foreach (KeyValuePair<string, int> kvp in counts.OrderByDescending(key => key.Value))\n{\n// some processing logic for each item if you want.\n}\n",
        "foreach (KeyValuePair<string, int> kvp in counts.OrderBy(key => key.Value))\n{\n// some processing logic for each item if you want.\n}\n"
      ],
      [
        "Dictionary<string, string> s = new Dictionary<string, string>();\ns.Add(\"1\", \"a Item\");\ns.Add(\"2\", \"c Item\");\ns.Add(\"3\", \"b Item\");\n\nList<KeyValuePair<string, string>> myList = new List<KeyValuePair<string, string>>(s);\nmyList.Sort(\n    delegate(KeyValuePair<string, string> firstPair,\n    KeyValuePair<string, string> nextPair)\n    {\n        return firstPair.Value.CompareTo(nextPair.Value);\n    }\n);\n"
      ],
      [
        "Dictionary<string, int> myDict = new Dictionary<string, int>();\nmyDict.Add(\"one\", 1);\nmyDict.Add(\"four\", 4);\nmyDict.Add(\"two\", 2);\nmyDict.Add(\"three\", 3);\n\nvar sortedDict = from entry in myDict orderby entry.Value ascending select entry;\n"
      ],
      [
        "Dictionary <<string, string>> ShareUserNewCopy = \n       ShareUserCopy.OrderBy(x => x.Value).ToDictionary(pair => pair.Key,\n                                                        pair => pair.Value);                                          \n"
      ],
      []
    ],
    "votes:": "799",
    "tags": "<c#><.net><sorting><dictionary>",
    "AcceptedAnswerId": "298",
    "answers": [
      {
        "id": "13854099",
        "title": "",
        "text": "<p>You do not sort entries in the Dictionary. Dictionary class in .NET is implemented as a hashtable - this data structure is not sortable by definition.</p>\n\n<p>If you need to be able to iterate over your collection (by key) - you need to use SortedDictionary, which is implemented as a Binary Search Tree.</p>\n\n<p>In your case, however the source structure is irrelevant, because it is sorted by a different field. You would still need to sort it by frequency and put it in a new collection sorted by the relevant field (frequency). So in this collection the frequencies are keys and words are values. Since many words can have the same frequency (and you are going to use it as a key) you cannot use neither Dictionary nor SortedDictionary (they require unique keys). This leaves you with a SortedList.</p>\n\n<p>I don't understand why you insist on maintaining a link to the original item in your main/first dictionary. </p>\n\n<p>If the objects in your collection had a more complex structure (more fields) and you needed to be able to efficiently access/sort them using several different fields as keys - You would probably need a custom data structure that would consist of the main storage that supports O(1) insertion and removal (LinkedList) and several indexing structures - Dictionaries/SortedDictionaries/SortedLists. These indexes would use one of the fields from your complex class as a key and a pointer/reference to the LinkedListNode in the LinkedList as a value.</p>\n\n<p>You would need to coordinate insertions and removals to keep your indexes in sync with the main collection (LinkedList) and removals would be pretty expensive I'd think.\nThis is similar to how database indexes work - they are fantastic for lookups but they become a burden when you need to perform many insetions and deletions.</p>\n\n<p>All of the above is only justified if you are going to do some look-up heavy processing. If you only need to output them once sorted by frequency then you could just produce a list of (anonymous) tuples:</p>\n\n<pre><code>var dict = new SortedDictionary&lt;string, int&gt;();\n// ToDo: populate dict\n\nvar output = dict.OrderBy(e =&gt; e.Value).Select(e =&gt; new {frequency = e.Value, word = e.Key}).ToList();\n\nforeach (var entry in output)\n{\n    Console.WriteLine(\"frequency:{0}, word: {1}\",entry.frequency,entry.word);\n}\n</code></pre>\n",
        "votes": "21",
        "tags": "",
        "accepted": false
      },
      {
        "id": "23975034",
        "title": "",
        "text": "<p>Given you have a dictionary you can sort them directly on values using below one liner:</p>\n\n<pre><code>var x = (from c in dict orderby c.Value.Order ascending select c).ToDictionary(c =&gt; c.Key, c=&gt;c.Value);\n</code></pre>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "28275964",
        "title": "",
        "text": "<p>Suppose we have a dictionary as </p>\n\n<pre><code>   Dictionary&lt;int, int&gt; dict = new Dictionary&lt;int, int&gt;();\n   dict.Add(21,1041);\n   dict.Add(213, 1021);\n   dict.Add(45, 1081);\n   dict.Add(54, 1091);\n   dict.Add(3425, 1061);\n   sict.Add(768, 1011);\n</code></pre>\n\n<p>1) you can use <strong><code>temporary dictionary to store values as</code></strong> :</p>\n\n<pre><code>        Dictionary&lt;int, int&gt; dctTemp = new Dictionary&lt;int, int&gt;();\n\n        foreach (KeyValuePair&lt;int, int&gt; pair in dict.OrderBy(key =&gt; key.Value))\n        {\n            dctTemp .Add(pair.Key, pair.Value);\n        }\n</code></pre>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "298",
        "title": "",
        "text": "<p>Use:</p>\n\n<pre><code>using System.Linq.Enumerable;\n...\nList&lt;KeyValuePair&lt;string, string&gt;&gt; myList = aDictionary.ToList();\n\nmyList.Sort(\n    delegate(KeyValuePair&lt;string, string&gt; pair1,\n    KeyValuePair&lt;string, string&gt; pair2)\n    {\n        return pair1.Value.CompareTo(pair2.Value);\n    }\n);\n</code></pre>\n\n<p>Since you're targeting .NET 2.0 or above, you can simplify this into lambda syntax -- it's equivalent, but shorter. If you're targeting .NET 2.0 you can only use this syntax if you're using the compiler from Visual&nbsp;Studio&nbsp;2008 (or above).</p>\n\n<pre><code>var myList = aDictionary.ToList();\n\nmyList.Sort((pair1,pair2) =&gt; pair1.Value.CompareTo(pair2.Value));\n</code></pre>\n",
        "votes": "523",
        "tags": "",
        "accepted": true
      },
      {
        "id": "6438343",
        "title": "",
        "text": "<p>You can sort a Dictionary by value and save it back to itself (so that when you foreach over it the values come out in order):</p>\n\n<pre><code>dict = dict.OrderBy(x =&gt; x.Value).ToDictionary(x =&gt; x.Key, x =&gt; x.Value);\n</code></pre>\n\n<p>Sure, it may not be correct, but it works.</p>\n",
        "votes": "185",
        "tags": "",
        "accepted": false
      },
      {
        "id": "4157151",
        "title": "",
        "text": "<pre><code>var ordered = dict.OrderBy(x =&gt; x.Value);\n</code></pre>\n",
        "votes": "254",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2697521",
        "title": "",
        "text": "<p>Sorting a <code>SortedDictionary</code> list to bind into a <code>ListView</code> control using VB.NET:</p>\n\n<pre><code>Dim MyDictionary As SortedDictionary(Of String, MyDictionaryEntry)\n\nMyDictionaryListView.ItemsSource = MyDictionary.Values.OrderByDescending(Function(entry) entry.MyValue)\n\nPublic Class MyDictionaryEntry ' Need Property for GridViewColumn DisplayMemberBinding\n    Public Property MyString As String\n    Public Property MyValue As Integer\nEnd Class\n</code></pre>\n\n<p>XAML:</p>\n\n<pre><code>&lt;ListView Name=\"MyDictionaryListView\"&gt;\n    &lt;ListView.View&gt;\n        &lt;GridView&gt;\n            &lt;GridViewColumn DisplayMemberBinding=\"{Binding Path=MyString}\" Header=\"MyStringColumnName\"&gt;&lt;/GridViewColumn&gt;\n            &lt;GridViewColumn DisplayMemberBinding=\"{Binding Path=MyValue}\" Header=\"MyValueColumnName\"&gt;&lt;/GridViewColumn&gt;\n         &lt;/GridView&gt;\n    &lt;/ListView.View&gt;\n&lt;/ListView&gt;\n</code></pre>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2569558",
        "title": "",
        "text": "<p>The easiest way to get a sorted Dictionary is to use the built in <code>SortedDictionary</code> class:</p>\n\n<pre><code>//Sorts sections according to the key value stored on \"sections\" unsorted dictionary, which is passed as a constructor argument\nSystem.Collections.Generic.SortedDictionary&lt;int, string&gt; sortedSections = null;\nif (sections != null)\n{\n    sortedSections = new SortedDictionary&lt;int, string&gt;(sections);\n}\n</code></pre>\n\n<p><code>sortedSections</code> will contains the sorted version of <code>sections</code></p>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "31514791",
        "title": "",
        "text": "<pre><code>Dictionary&lt;string, string&gt; dic= new Dictionary&lt;string, string&gt;();\nvar ordered = dic.OrderBy(x =&gt; x.Value);\nreturn ordered.ToDictionary(t =&gt; t.Key, t =&gt; t.Value);\n</code></pre>\n",
        "votes": "19",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3148631",
        "title": "",
        "text": "<p>Or for fun you could use some LINQ extension goodness:</p>\n\n<pre><code>var dictionary = new Dictionary&lt;string, int&gt; { { \"c\", 3 }, { \"a\", 1 }, { \"b\", 2 } };\ndictionary.OrderBy(x =&gt; x.Value)\n  .ForEach(x =&gt; Console.WriteLine(\"{0}={1}\", x.Key,x.Value));\n</code></pre>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "35645695",
        "title": "",
        "text": "<p>The other answers are good, if all you want is to have a \"temporary\" list sorted by Value. However, if you want to have a dictionary sorted by <code>Key</code> that <em>automatically synchronizes</em> with another dictionary that is sorted by <code>Value</code>, you could use the <a href=\"http://ecsharp.net/doc/code/classLoyc_1_1Collections_1_1Bijection.html\" rel=\"nofollow noreferrer\"><code>Bijection&lt;K1, K2&gt;</code> class</a>.</p>\n\n<p><code>Bijection&lt;K1, K2&gt;</code> allows you to initialize the collection with two existing dictionaries, so if you want one of them to be unsorted, and you want the other one to be sorted, you could create your bijection with code like</p>\n\n<pre><code>var dict = new Bijection&lt;Key, Value&gt;(new Dictionary&lt;Key,Value&gt;(), \n                               new SortedDictionary&lt;Value,Key&gt;());\n</code></pre>\n\n<p>You can use <code>dict</code> like any normal dictionary (it implements <code>IDictionary&lt;K, V&gt;</code>), and then call <code>dict.Inverse</code> to get the \"inverse\" dictionary which is sorted by <code>Value</code>.</p>\n\n<p><code>Bijection&lt;K1, K2&gt;</code> is part of <a href=\"http://core.loyc.net/\" rel=\"nofollow noreferrer\">Loyc.Collections.dll</a>, but if you want, you could simply copy the <a href=\"https://github.com/qwertie/Loyc/blob/master/Core/Loyc.Collections/Other/Bijection.cs\" rel=\"nofollow noreferrer\">source code</a> into your own project.</p>\n\n<p><strong>Note</strong>: In case there are multiple keys with the same value, you can't use <code>Bijection</code>, but you could manually synchronize between an ordinary <code>Dictionary&lt;Key,Value&gt;</code> and a <a href=\"http://loyc.net/doc/code/classLoyc_1_1Collections_1_1BMultiMap_3_01K_00_01V_01_4.html\" rel=\"nofollow noreferrer\"><code>BMultiMap&lt;Value,Key&gt;</code></a>.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "54885808",
        "title": "",
        "text": "<p>Actually in C#, Dictionaries dint have sort() methods,\nas you are more interested in sort by values,\nyou cant get values until you provide them key,\nin short, you need to iterate through them,\nusing LINQ's Order By,</p>\n\n<pre><code>var items = new Dictionary&lt;string, int&gt;();\nitems.Add(\"cat\", 0);\nitems.Add(\"dog\", 20);\nitems.Add(\"bear\", 100);\nitems.Add(\"lion\", 50);\n\n// Call OrderBy method here on each item and provide them the ids.\nforeach (var item in items.OrderBy(k =&gt; k.Key))\n{\n    Console.WriteLine(item);// items are in sorted order\n}\n</code></pre>\n\n<p>you can do one trick,</p>\n\n<pre><code>var sortedDictByOrder = items.OrderBy(v =&gt; v.Value);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>var sortedKeys = from pair in dictName\n            orderby pair.Value ascending\n            select pair;\n</code></pre>\n\n<p>its also depend on what kind of values you are storing,<br>\nis it single (like string, int) or multiple (like List, Array, user defined class),<br>\nif single you can make list of it then apply sort.<br>\nif user defined class,\nthen that class must implement IComparable,<br>\n<code>ClassName: IComparable&lt;ClassName&gt;</code> and override <code>compareTo(ClassName c)</code>\nas they are more faster than LINQ, and more object oriented.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "291",
        "title": "",
        "text": "<p>Looking around, and using some C# 3.0 features we can do this:</p>\n\n<pre><code>foreach (KeyValuePair&lt;string,int&gt; item in keywordCounts.OrderBy(key=&gt; key.Value))\n{ \n    // do something with item.Key and item.Value\n}\n</code></pre>\n\n<p>This is the cleanest way I've seen and is similar to the Ruby way of handling hashes.</p>\n",
        "votes": "166",
        "tags": "",
        "accepted": false
      },
      {
        "id": "61875551",
        "title": "",
        "text": "<p>Required namespace : <code>using System.Linq;</code></p>\n\n<pre><code>Dictionary&lt;string, int&gt; counts = new Dictionary&lt;string, int&gt;();\ncounts.Add(\"one\", 1);\ncounts.Add(\"four\", 4);\ncounts.Add(\"two\", 2);\ncounts.Add(\"three\", 3);\n</code></pre>\n\n<p>Order by desc :</p>\n\n<pre><code>foreach (KeyValuePair&lt;string, int&gt; kvp in counts.OrderByDescending(key =&gt; key.Value))\n{\n// some processing logic for each item if you want.\n}\n</code></pre>\n\n<p>Order by Asc :</p>\n\n<pre><code>foreach (KeyValuePair&lt;string, int&gt; kvp in counts.OrderBy(key =&gt; key.Value))\n{\n// some processing logic for each item if you want.\n}\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "292",
        "title": "",
        "text": "<p>On a high level, you have no other choice than to walk through the whole Dictionary and look at each value.</p>\n\n<p>Maybe this helps:\n<a href=\"http://bytes.com/forum/thread563638.html\" rel=\"nofollow noreferrer\">http://bytes.com/forum/thread563638.html</a>\nCopy/Pasting from John Timney:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>Dictionary&lt;string, string&gt; s = new Dictionary&lt;string, string&gt;();\ns.Add(\"1\", \"a Item\");\ns.Add(\"2\", \"c Item\");\ns.Add(\"3\", \"b Item\");\n\nList&lt;KeyValuePair&lt;string, string&gt;&gt; myList = new List&lt;KeyValuePair&lt;string, string&gt;&gt;(s);\nmyList.Sort(\n    delegate(KeyValuePair&lt;string, string&gt; firstPair,\n    KeyValuePair&lt;string, string&gt; nextPair)\n    {\n        return firstPair.Value.CompareTo(nextPair.Value);\n    }\n);\n</code></pre>\n",
        "votes": "63",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1332",
        "title": "",
        "text": "<p>Use LINQ:</p>\n\n<pre><code>Dictionary&lt;string, int&gt; myDict = new Dictionary&lt;string, int&gt;();\nmyDict.Add(\"one\", 1);\nmyDict.Add(\"four\", 4);\nmyDict.Add(\"two\", 2);\nmyDict.Add(\"three\", 3);\n\nvar sortedDict = from entry in myDict orderby entry.Value ascending select entry;\n</code></pre>\n\n<p>This would also allow for great flexibility in that you can select the top 10, 20 10%, etc. Or if you are using your word frequency index for <code>type-ahead</code>, you could also include <code>StartsWith</code> clause as well.</p>\n",
        "votes": "525",
        "tags": "",
        "accepted": false
      },
      {
        "id": "11630804",
        "title": "",
        "text": "<p>You can sort the Dictionary by value and get the result in dictionary using the code below:</p>\n\n<pre><code>Dictionary &lt;&lt;string, string&gt;&gt; ShareUserNewCopy = \n       ShareUserCopy.OrderBy(x =&gt; x.Value).ToDictionary(pair =&gt; pair.Key,\n                                                        pair =&gt; pair.Value);                                          \n</code></pre>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "382462",
        "title": "",
        "text": "<p>You'd never be able to sort a dictionary anyway.  They are not actually ordered.  The guarantees for a dictionary are that the key and value collections are iterable, and values can be retrieved by index or key, but there is no guarantee of any particular order.  Hence you would need to get the name value pair into a list.</p>\n",
        "votes": "31",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "308",
    "url": "https://stackoverflow.com/questions/308",
    "title": "Is there a version control system for database structure changes?",
    "text:": "<p>I often run into the following problem.</p>\n\n<p>I work on some changes to a project that require new tables or columns in the database. I make the database modifications and continue my work. Usually, I remember to write down the changes so that they can be replicated on the live system. However, I don't always remember what I've changed and I don't always remember to write it down.</p>\n\n<p>So, I make a push to the live system and get a big, obvious error that there is no <code>NewColumnX</code>, ugh.</p>\n\n<p>Regardless of the fact that this may not be the best practice for this situation, is there a version control system for databases? I don't care about the specific database technology. I just want to know if one exists. If it happens to work with MS SQL Server, then great.</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [
        "<createTable tableName=\"USER\"> \n   <column name=\"firstname\" type=\"varchar(255)\"/>\n</createTable>\n"
      ],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [
        "CREATE TABLE Config\n(\n    cfg_tag VARCHAR(50),\n    cfg_value VARCHAR(100)\n);\n\nINSERT INTO Config(cfg_tag, cfg_value) VALUES\n( 'db_version', '$Revision: $'),\n( 'db_revision', '$Revision: $');\n",
        "UPDATE Config SET cfg_value='$Revision: $' WHERE cfg_tag='db_revision';\n"
      ],
      []
    ],
    "votes:": "123",
    "tags": "<sql><database><oracle><version-control>",
    "AcceptedAnswerId": "360",
    "answers": [
      {
        "id": "36780",
        "title": "",
        "text": "<p>Have your initial create table statements in version controller, then add alter table statements, but never edit files, just more alter files ideally named sequentially, or even as a \"change set\", so you can find all the changes for a particular deployment. </p>\n\n<p>The hardiest part that I can see, is tracking dependencies, eg, for a particular deployment table B might need to be updated before table A.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "37567",
        "title": "",
        "text": "<p>In the absence of a VCS for table changes I've been logging them in a wiki. At least then I can see when and why it was changed. It's far from perfect as not everyone is doing it and we have multiple product versions in use, but better than nothing.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "36256",
        "title": "",
        "text": "<p>I write my db release scripts in parallel with coding, and keep the release scripts in a project specific section in SS. If I make a change to the code that requires a db change, then I update the release script at the same time.\nPrior to release, I run the release script on a clean dev db (copied structure wise from production) and do my final testing on it.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "27602289",
        "title": "",
        "text": "<p>You can use <a href=\"http://msdn.microsoft.com/en-gb/data/tools.aspx\" rel=\"nofollow\">Microsoft SQL Server Data Tools</a> in visual studio to generate scripts for database objects as part of a SQL Server Project. You can then add the scripts to source control using the source control integration that is built into visual studio. Also, SQL Server Projects allow you verify the database objects using a compiler and generate deployment scripts to update an existing database or create a new one.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "360",
        "title": "",
        "text": "<p>In Ruby on Rails, there's a concept of a <a href=\"http://wiki.rubyonrails.org/rails/pages/UnderstandingMigrations\" rel=\"noreferrer\">migration</a> -- a quick script to change the database.</p>\n\n<p>You generate a migration file, which has rules to increase the db version (such as adding a column) and rules to downgrade the version (such as removing a column). Each migration is numbered, and a table keeps track of your current db version.</p>\n\n<p>To <em>migrate up</em>, you run a command called \"db:migrate\" which looks at your version and applies the needed scripts. You can migrate down in a similar way.</p>\n\n<p>The migration scripts themselves are kept in a version control system -- whenever you change the database you check in a new script, and any developer can apply it to bring their local db to the latest version.</p>\n",
        "votes": "65",
        "tags": "",
        "accepted": true
      },
      {
        "id": "310",
        "title": "",
        "text": "<p>Most database engines should support dumping your database into a file. I know MySQL does, anyway. This will just be a text file, so you could submit that to Subversion, or whatever you use. It'd be easy to run a diff on the files too.</p>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "55134",
        "title": "",
        "text": "<p>If you're using SQL Server it would be hard to beat Data Dude (aka the Database Edition of Visual Studio).  Once you get the hang of it, doing a schema compare between your source controlled version of the database and the version in production is a breeze. And with a click you can generate your diff DDL.</p>\n\n<p>There's an instructional <a href=\"http://msdn.microsoft.com/en-us/vsts2008/cc659682.aspx\" rel=\"noreferrer\">video</a> on MSDN that's very helpful.</p>\n\n<p>I know about DBMS_METADATA and Toad, but if someone could come up with a Data Dude for Oracle then life would be really sweet.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "84735",
        "title": "",
        "text": "<p>PLSQL Developer, a tool from All Arround Automations, has a plugin for repositories that works OK ( but not great) with Visual Source Safe.</p>\n\n<blockquote>\n  <p>From the web: </p>\n  \n  <blockquote>\n    <p>The Version Control Plug-In provides a tight integration between the PL/SQL Developer IDE >>and any Version Control System that supports the Microsoft SCC Interface Specification. >>This includes most popular Version Control Systems such as Microsoft Visual SourceSafe, >>Merant PVCS and MKS Source Integrity.</p>\n  </blockquote>\n</blockquote>\n\n<p><a href=\"http://www.allroundautomations.com/plsvcs.html\" rel=\"noreferrer\">http://www.allroundautomations.com/plsvcs.html</a></p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2035928",
        "title": "",
        "text": "<p>Schema Compare for Oracle is a tool specifically designed to migrate changes from our Oracle database to another. Please visit the URL below for the download link, where you will be able to use the software for a fully functional trial.</p>\n\n<p><a href=\"http://www.red-gate.com/Products/schema_compare_for_oracle/index.htm\" rel=\"nofollow noreferrer\">http://www.red-gate.com/Products/schema_compare_for_oracle/index.htm</a></p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "918903",
        "title": "",
        "text": "<p>I highly recommend <a href=\"http://www.sqldelta.com/deltasqlserver.html\" rel=\"noreferrer\">SQL delta</a>. I just use it to generate the diff scripts when i'm done coding my feature and check those scripts into my source control tool (Mercurial :))</p>\n\n<p>They have both an SQL server &amp; Oracle version.</p>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3220892",
        "title": "",
        "text": "<p>I wonder that no one mentioned the open source tool <a href=\"http://www.liquibase.org/\" rel=\"noreferrer\">liquibase</a> which is Java based and should work for nearly every database which supports jdbc. Compared to rails it uses xml instead ruby to perform the schema changes. Although I dislike xml for domain specific languages the very cool advantage of xml is that liquibase knows how to roll back certain operations like </p>\n\n<pre><code>&lt;createTable tableName=\"USER\"&gt; \n   &lt;column name=\"firstname\" type=\"varchar(255)\"/&gt;\n&lt;/createTable&gt;\n</code></pre>\n\n<p>So you don't need to handle this of your own</p>\n\n<p>Pure sql statements or data imports are also supported.</p>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "38419",
        "title": "",
        "text": "<p>Take a look at the oracle package DBMS_METADATA. </p>\n\n<p>In particular, the following methods are particularly useful: </p>\n\n<ul>\n<li><code>DBMS_METADATA.GET_DDL</code></li>\n<li><code>DBMS_METADATA.SET_TRANSFORM_PARAM</code></li>\n<li><code>DBMS_METADATA.GET_GRANTED_DDL</code></li>\n</ul>\n\n<p>Once you are familiar with how they work (pretty self explanatory) you can write a simple script to dump the results of those methods into text files that can be put under source control.  Good luck!</p>\n\n<p>Not sure if there is something this simple for MSSQL.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "140953",
        "title": "",
        "text": "<p>I'd recommend one of two approaches. First, invest in <a href=\"http://www.sybase.com/products/modelingdevelopment/powerdesigner\" rel=\"nofollow noreferrer\">PowerDesigner</a> from Sybase. Enterprise Edition. It allows you to design Physical datamodels, and a whole lot more. But it comes with a repository that allows you to check in your models. Each new check in can be a new version, it can compare any version to any other version and even to what is in your database at that time. It will then present a list of every difference and ask which should be migrated\u2026 and then it builds the script to do it. It\u2019s not cheap but it\u2019s a bargain at twice the price and it\u2019s ROI is about 6 months.</p>\n\n<p>The other idea is to turn on DDL auditing (works in Oracle). This will create a table with every change you make. If you query the changes from the timestamp you last moved your database changes to prod to right now, you\u2019ll have an ordered list of everything you\u2019ve done. A few where clauses to eliminate zero-sum changes like create table foo; followed by drop table foo; and you can EASILY build a mod script. Why keep the changes in a wiki, that\u2019s double the work. Let the database track them for you.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6626232",
        "title": "",
        "text": "<p>Redgate has a product called <a href=\"http://www.red-gate.com/products/sql-development/sql-source-control/\" rel=\"noreferrer\">SQL Source Control</a>. It integrates with TFS, SVN, SourceGear Vault, Vault Pro, Mercurial, Perforce, and Git.</p>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "85938",
        "title": "",
        "text": "<p><a href=\"http://www.embarcadero.com/products/erstudio/\" rel=\"noreferrer\">ER Studio</a> allows you to reverse your database schema into the tool and you can then compare it to live databases.  </p>\n\n<p>Example:  Reverse your development schema into ER Studio -- compare it to production and it will list all of the differences.  It can script the changes or just push them through automatically.</p>\n\n<p>Once you have a schema in ER Studio, you can either save the creation script or save it as a proprietary binary and save it in version control.  If you ever want to go back to a past version of the scheme, just check it out and push it to your db platform.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "63685",
        "title": "",
        "text": "<p>I've done this off and on for years -- managing (or trying to manage) schema versions.  The best approaches depend on the tools you have.  If you can get the Quest Software tool \"Schema Manager\" you'll be in good shape.  Oracle has its own, inferior tool that is also called \"Schema Manager\" (confusing much?) that I don't recommend.</p>\n\n<p>Without an automated tool (see other comments here about Data Dude) then you'll be using scripts and DDL files directly.  Pick an approach, document it, and follow it rigorously.  I like having the ability to re-create the database at any given moment, so I prefer to have a full DDL export of the entire database (if I'm the DBA), or of the developer schema (if I'm in product-development mode).</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "141057",
        "title": "",
        "text": "<p>We've used <a href=\"http://msdn.microsoft.com/en-us/vsts2008/products/bb933747.aspx\" rel=\"nofollow noreferrer\">MS Team System Database Edition</a> with pretty good success.  It integrates with TFS version control and Visual Studio more-or-less seamlessly and allows us to manages stored procs, views, etc., easily.  Conflict resolution can be a pain, but version history is complete once it's done.  Thereafter, migrations to QA and production are extremely simple.</p>\n\n<p>It's fair to say that it's a version 1.0 product, though, and is not without a few issues.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "116552",
        "title": "",
        "text": "<p>Two book recommendations: \"Refactoring Databases\" by Ambler and Sadalage and \"Agile Database Techniques\" by Ambler.</p>\n\n<p>Someone mentioned Rails Migrations. I think they work great, even outside of Rails applications. I used them on an ASP application with SQL Server which we were in the process of moving to Rails. You check the migration scripts themselves into the VCS. \nHere's <a href=\"http://pragdave.blogs.pragprog.com/pragdave/2006/07/migrations_outs.html\" rel=\"nofollow noreferrer\">a post by Pragmatic Dave Thomas</a> on the subject.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3220981",
        "title": "",
        "text": "<p><a href=\"http://mybatis.org/\" rel=\"noreferrer\">MyBatis</a> (formerly iBatis) has a <a href=\"http://mybatis.org/java.html\" rel=\"noreferrer\">schema migration</a>, tool for use on the command line. It is written in java though can be used with any project.</p>\n\n<blockquote>\n  <p>To achieve a good database change management practice, we need to identify a few key goals.\n  Thus, the MyBatis Schema Migration System (or MyBatis Migrations for short) seeks to:</p>\n</blockquote>\n\n<ul>\n<li>Work with any database, new or existing</li>\n<li>Leverage the source control system (e.g. Subversion)</li>\n<li>Enable concurrent developers or teams to work independently</li>\n<li>Allow conflicts very visible and easily manageable</li>\n<li>Allow for forward and backward migration (evolve, devolve respectively)</li>\n<li>Make the current status of the database easily accessible and comprehensible</li>\n<li>Enable migrations despite access privileges or bureaucracy</li>\n<li>Work with any methodology</li>\n<li>Encourages good, consistent practices</li>\n</ul>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "363",
        "title": "",
        "text": "<p>There's a PHP5 \"database migration framework\" called Ruckusing. I haven't used it, but the <a href=\"http://code.google.com/p/ruckusing/wiki/CompleteExamples\" rel=\"noreferrer\">examples</a> show the idea, if you use the language to create the database as and when needed, you only have to track source files.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "141765",
        "title": "",
        "text": "<p>I'm a bit old-school, in that I use source files for creating the database.  There are actually 2 files - project-database.sql and project-updates.sql - the first for the schema and persistant data, and the second for modifications.  Of course, both are under source control.</p>\n\n<p>When the database changes, I first update the main schema in project-database.sql, then copy the relevant info to the project-updates.sql, for instance ALTER TABLE statements.\nI can then apply the updates to the development database, test, iterate until done well.\nThen, check in files, test again, and apply to production.</p>\n\n<p>Also, I usually have a table in the db - Config - such as:</p>\n\n<p><strong>SQL</strong></p>\n\n<pre><code>CREATE TABLE Config\n(\n    cfg_tag VARCHAR(50),\n    cfg_value VARCHAR(100)\n);\n\nINSERT INTO Config(cfg_tag, cfg_value) VALUES\n( 'db_version', '$Revision: $'),\n( 'db_revision', '$Revision: $');\n</code></pre>\n\n<p>Then, I add the following to the update section:</p>\n\n<pre><code>UPDATE Config SET cfg_value='$Revision: $' WHERE cfg_tag='db_revision';\n</code></pre>\n\n<p>The <code>db_version</code> only gets changed when the database is recreated, and the <code>db_revision</code> gives me an indication how far the db is off the baseline.</p>\n\n<p>I could keep the updates in their own separate files, but I chose to mash them all together and use cut&amp;paste to extract relevant sections.  A bit more housekeeping is in order, i.e., remove ':' from $Revision 1.1 $ to freeze them.</p>\n",
        "votes": "30",
        "tags": "",
        "accepted": false
      },
      {
        "id": "356",
        "title": "",
        "text": "<p>For Oracle, I use <a href=\"http://www.toadsoft.com/\" rel=\"noreferrer\">Toad</a>, which can dump a schema to a number of discrete files (e.g., one file per table).  I have some scripts that manage this collection in Perforce, but I think it should be easily doable in just about any revision control system.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "328",
    "url": "https://stackoverflow.com/questions/328",
    "title": "PHP Session Security",
    "text:": "<p>What are some guidelines for maintaining responsible session security with PHP?  There's information all over the web and it's about time it all landed in one place!</p>\n",
    "codes": [
      [
        "if ($_SESSION['user_agent'] != $_SERVER['HTTP_USER_AGENT']\n    || $_SESSION['user_ip'] != $_SERVER['REMOTE_ADDR'])\n{\n    //Something fishy is going on here?\n}\n"
      ],
      [
        "$username = $_POST[\"username\"];\n",
        "$username = filter_input(INPUT_POST, 'username', FILTER_SANITIZE_STRING);\n",
        "$username = filter_input(INPUT_POST, 'username');\n"
      ],
      [],
      [],
      [],
      [],
      [],
      [],
      [
        "$_SESSION['fingerprint'] = md5($_SERVER['HTTP_USER_AGENT'] . PHRASE . $_SERVER['REMOTE_ADDR']);\n",
        "session_start();\nif ($_SESSION['fingerprint'] != md5($_SERVER['HTTP_USER_AGENT'] . PHRASE . $_SERVER['REMOTE_ADDR'])) {       \n    session_destroy();\n    header('Location: http://website login page/');\n    exit();     \n}\n"
      ],
      [],
      [],
      [],
      [
        "session.cookie_httponly = 1\nchange session name from default PHPSESSID\n",
        "X-XSS-Protection    1\n"
      ]
    ],
    "votes:": "125",
    "tags": "<security><php>",
    "AcceptedAnswerId": "7488",
    "answers": [
      {
        "id": "1611",
        "title": "",
        "text": "<p>I would check both IP and User Agent to see if they change</p>\n\n<pre><code>if ($_SESSION['user_agent'] != $_SERVER['HTTP_USER_AGENT']\n    || $_SESSION['user_ip'] != $_SERVER['REMOTE_ADDR'])\n{\n    //Something fishy is going on here?\n}\n</code></pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "331",
        "title": "",
        "text": "<p>I think one of the major problems (which is being addressed in PHP 6) is register_globals. Right now one of the standard methods used to avoid <code>register_globals</code> is to use the <code>$_REQUEST</code>, <code>$_GET</code> or <code>$_POST</code> arrays.</p>\n\n<p>The \"correct\" way to do it (as of 5.2, although it's a little buggy there, but stable as of 6, which is coming soon) is through <a href=\"http://us.php.net/filter\" rel=\"nofollow noreferrer\">filters</a>.</p>\n\n<p>So instead of:</p>\n\n<pre><code>$username = $_POST[\"username\"];\n</code></pre>\n\n<p>you would do:</p>\n\n<pre><code>$username = filter_input(INPUT_POST, 'username', FILTER_SANITIZE_STRING);\n</code></pre>\n\n<p>or even just:</p>\n\n<pre><code>$username = filter_input(INPUT_POST, 'username');\n</code></pre>\n",
        "votes": "16",
        "tags": "",
        "accepted": false
      },
      {
        "id": "14938",
        "title": "",
        "text": "<p>You need to be sure the session data are safe. By looking at your php.ini or using phpinfo() you can find you session settings. _session.save_path_ tells you where they are saved.</p>\n\n<p>Check the permission of the folder and of its parents. It shouldn't be public (/tmp) or be accessible by other websites on your shared server.</p>\n\n<p>Assuming you still want to use php session, You can set php to use an other folder by changing _session.save_path_ or save the data in the database by changing _session.save_handler_ .</p>\n\n<p>You might be able to set _session.save_path_ in your php.ini (some providers allow it) or for apache + mod_php, in a .htaccess file in your site root folder:\n<code>php_value session.save_path \"/home/example.com/html/session\"</code>. You can also set it at run time with _session_save_path()_ .</p>\n\n<p>Check <a href=\"http://shiflett.org/articles/storing-sessions-in-a-database\" rel=\"nofollow noreferrer\">Chris Shiflett's tutorial</a> or <a href=\"http://framework.zend.com/manual/en/zend.session.savehandler.dbtable.html\" rel=\"nofollow noreferrer\">Zend_Session_SaveHandler_DbTable</a> to set and alternative session handler.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "616969",
        "title": "",
        "text": "<p><a href=\"http://www.acros.si/papers/session_fixation.pdf\" rel=\"nofollow noreferrer\">This session fixation paper</a> has very good pointers where attack may come. See also <a href=\"http://en.wikipedia.org/wiki/Session_fixation\" rel=\"nofollow noreferrer\">session fixation page at Wikipedia</a>.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6585",
        "title": "",
        "text": "<p>If you you use <a href=\"http://www.php.net/manual/en/function.session-set-save-handler.php\" rel=\"nofollow noreferrer\">session_set_save_handler()</a> you can set your own session handler. For example you could store your sessions in the database. Refer to the php.net comments for examples of a database session handler.</p>\n\n<p>DB sessions are also good if you have multiple servers otherwise if you are using file based sessions you would need to make sure that each webserver had access to the same filesystem to read/write the sessions.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "335",
        "title": "",
        "text": "<p>This is pretty trivial and obvious, but be sure to <a href=\"http://www.php.net/session_destroy\" rel=\"nofollow noreferrer\">session_destroy</a> after every use. This can be difficult to implement if the user does not log out explicitly, so a timer can be set to do this.</p>\n\n<p>Here is a good <a href=\"http://www.elated.com/articles/javascript-timers-with-settimeout-and-setinterval/\" rel=\"nofollow noreferrer\">tutorial</a> on setTimer() and clearTimer().</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7488",
        "title": "",
        "text": "<p>There are a couple of things to do in order to keep your session secure:</p>\n\n<ol>\n<li>Use SSL when authenticating users or performing sensitive operations.</li>\n<li>Regenerate the session id whenever the security level changes (such as logging in). You can even regenerate the session id every request if you wish.</li>\n<li>Have sessions time out</li>\n<li>Don't use register globals</li>\n<li>Store authentication details on the server. That is, don't send details such as username in the cookie.</li>\n<li>Check the <code>$_SERVER['HTTP_USER_AGENT']</code>. This adds a small barrier to session hijacking. You can also check the IP address. But this causes problems for users that have changing IP address due to load balancing on multiple internet connections etc (which is the case in our environment here).</li>\n<li>Lock down access to the sessions on the file system or use custom session handling</li>\n<li>For sensitive operations consider requiring logged in users to provide their authenication details again</li>\n</ol>\n",
        "votes": "90",
        "tags": "",
        "accepted": true
      },
      {
        "id": "681",
        "title": "",
        "text": "<p>The main problem with PHP sessions and security (besides session hijacking) comes with what environment you are in. By default PHP stores the session data in a file in the OS's temp directory. Without any special thought or planning this is a world readable directory so all of your session information is public to anyone with access to the server.</p>\n\n<p>As for maintaining sessions over multiple servers. At that point it would be better to switch PHP to user handled sessions where it calls your provided functions to CRUD (create, read, update, delete) the session data. At that point you could store the session information in a database or memcache like solution so that all application servers have access to the data.</p>\n\n<p>Storing your own sessions may also be advantageous if you are on a shared server because it will let you store it in the database which you often times have more control over then the filesystem.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6754508",
        "title": "",
        "text": "<p>I set my sessions up like this-</p>\n\n<p>on the log in page:</p>\n\n<pre><code>$_SESSION['fingerprint'] = md5($_SERVER['HTTP_USER_AGENT'] . PHRASE . $_SERVER['REMOTE_ADDR']);\n</code></pre>\n\n<p>(phrase defined on a config page)</p>\n\n<p>then on the header that is throughout the rest of the site:</p>\n\n<pre><code>session_start();\nif ($_SESSION['fingerprint'] != md5($_SERVER['HTTP_USER_AGENT'] . PHRASE . $_SERVER['REMOTE_ADDR'])) {       \n    session_destroy();\n    header('Location: http://website login page/');\n    exit();     \n}\n</code></pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2586332",
        "title": "",
        "text": "<p>My two (or more) cents:</p>\n\n<ul>\n<li>Trust no one</li>\n<li>Filter input, escape output (cookie, session data are your input too)</li>\n<li>Avoid XSS (keep your HTML well formed, take a look at <a href=\"http://phptal.org\">PHPTAL</a> or <a href=\"http://htmlpurifier.org/\">HTMLPurifier</a>)</li>\n<li><a href=\"http://en.wikipedia.org/wiki/Defense_in_Depth_%28computing%29\">Defense in depth</a></li>\n<li>Do not expose data</li>\n</ul>\n\n<p>There is a tiny but good book on this topic: <a href=\"http://phpsecurity.org/\">Essential PHP Security by Chris Shiflett</a>.</p>\n\n<p><a href=\"http://shiflett.org/images/essential-php-security-small.png\">Essential PHP Security http://shiflett.org/images/essential-php-security-small.png</a></p>\n\n<p>On the home page of the book you will find some interesting code examples and sample chapters.</p>\n\n<p>You may use technique mentioned above (IP &amp; UserAgent), described here: <a href=\"http://devzone.zend.com/article/11906\">How to avoid identity theft</a></p>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "329",
        "title": "",
        "text": "<p>One guideline is to call <a href=\"http://www.php.net/session_regenerate_id\" rel=\"nofollow noreferrer\">session_regenerate_id</a> every time a session's security level changes.  This helps prevent session hijacking.</p>\n",
        "votes": "16",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3965",
        "title": "",
        "text": "<p>Using IP address isn't really the best idea in my experience. For example; my office has two IP addresses that get used depending on load and we constantly run into issues using IP addresses. </p>\n\n<p>Instead, I've opted for storing the sessions in a separate database for the domains on my servers. This way no one on the file system has access to that session info. This was really helpful with phpBB before 3.0 (they've since fixed this) but it's still a good idea  I think.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7748887",
        "title": "",
        "text": "<h1>php.ini</h1>\n\n<pre><code>session.cookie_httponly = 1\nchange session name from default PHPSESSID\n</code></pre>\n\n<h1>eq Apache add header:</h1>\n\n<pre><code>X-XSS-Protection    1\n</code></pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "330",
    "url": "https://stackoverflow.com/questions/330",
    "title": "Should I use nested classes in this case?",
    "text:": "<p>I am working on a collection of classes used for video playback and recording. I have one main class which acts like the public interface, with methods like <code>play()</code>, <code>stop()</code>, <code>pause()</code>, <code>record()</code> etc... Then I have workhorse classes which do the video decoding and video encoding. </p>\n\n<p>I just learned about the existence of nested classes in C++, and I'm curious to know what programmers think about using them. I am a little wary and not really sure what the benefits/drawbacks are, but they seem (according to the book I'm reading) to be used in cases such as mine.</p>\n\n<p>The book suggests that in a scenario like mine, a good solution would be to nest the workhorse classes inside the interface class, so there are no separate files for classes the client is not meant to use, and to avoid any possible naming conflicts? I don't know about these justifications. Nested classes are a new concept to me. Just want to see what programmers think about the issue.</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "54",
    "tags": "<c++><oop><class><nested-class>",
    "AcceptedAnswerId": "332",
    "answers": [
      {
        "id": "123101",
        "title": "",
        "text": "<p>Another thing to keep in mind is whether you ever envision different implementations of your work functions (such as decoding and encoding). In that case, you would definitely want an abstract base class with different concrete classes which implement the functions. It would not really be appropriate to nest a separate subclass for each type of implementation.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2023",
        "title": "",
        "text": "<p>sounds like a case where you could use the <a href=\"http://en.wikipedia.org/wiki/Strategy_pattern\" rel=\"nofollow noreferrer\">strategy pattern</a></p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "109887",
        "title": "",
        "text": "<p>We hit an issue with a semi-old Sun C++ compiler and visibility of nested classes which behavior changed in the standard.  This is not a reason to not do your nested class, of course, just something to be aware of if you plan on compiling your software on lots of platforms including old compilers.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "70727",
        "title": "",
        "text": "<p>Sometimes it's appropriate to hide the implementation classes from the user -- in these cases it's better to put them in an foo_internal.h than inside the public class definition. That way, readers of your foo.h will not see what you'd prefer they not be troubled with, but you can still write tests against each of the concrete implementations of your interface.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "136881",
        "title": "",
        "text": "<p>Well, if you use pointers to your workhorse classes in your Interface class and don't expose them as parameters or return types in your interface methods, you will not need to include the definitions for those work horses in your interface header file (you just forward declare them instead). That way, users of your interface will not need to know about the classes in the background. </p>\n\n<p>You definitely don't need to nest classes for this. In fact, separate class files will actually make your code a lot more readable and easier to manage as your project grows. it will also help you later on if you need to subclass (say for different content/codec types).</p>\n\n<p>Here's more information on the <a href=\"http://www.apibook.com/Chapter_3.pdf\" rel=\"nofollow noreferrer\">PIMPL pattern</a> (section 3.1.1).</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2019",
        "title": "",
        "text": "<p>One way of deciding whether or not to use nested classes is to think whether or not this class plays a supporting role or it's own part.</p>\n\n<p>If it exists solely for the purpose of helping another class then I generally make it a nested class. There are a whole load of caveats to that, some of which seem contradictory but it all comes down to experience and gut-feeling.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "332",
        "title": "",
        "text": "<p>I would be a bit reluctant to use nested classes here.  What if you created an abstract base class for a \"multimedia driver\" to handle the back-end stuff (workhorse), and a separate class for the front-end work?  The front-end class could take a pointer/reference to an implemented driver class (for the appropriate media type and situation) and perform the abstract operations on the workhorse structure.</p>\n\n<p>My philosophy would be to go ahead and make both structures accessible to the client in a polished way, just under the assumption they would be used in tandem.</p>\n\n<p>I would reference something like a <a href=\"http://qt-project.org/doc/qt-4.8/qtextdocument.html\" rel=\"noreferrer\">QTextDocument</a> in Qt.  You provide a direct interface to the bare metal data handling, but pass the authority along to an object like a QTextEdit to do the manipulation.</p>\n",
        "votes": "29",
        "tags": "",
        "accepted": true
      },
      {
        "id": "93509",
        "title": "",
        "text": "<p>You should use an inner class only when you cannot implement it as a separate class using the would-be outer class' public interface.  Inner classes increase the size, complexity, and responsibility of a class so they should be used sparingly.</p>\n\n<p>Your encoder/decoder class sounds like it better fits the <a href=\"http://en.wikipedia.org/wiki/Strategy_pattern\" rel=\"nofollow noreferrer\">Strategy Pattern</a></p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "107530",
        "title": "",
        "text": "<p>One reason to avoid nested classes is if you ever intend to wrap the code with swig (<a href=\"http://www.swig.org\" rel=\"nofollow noreferrer\">http://www.swig.org</a>) for use with other languages. Swig currently has problems with nested classes, so interfacing with libraries that expose any nested classes becomes a real pain.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "82288",
        "title": "",
        "text": "<p>You would use a nested class to create a (small) helper class that's required to implement the main class. Or for example, to define an interface (a class with abstract methods).</p>\n\n<p>In this case, the main disadvantage of nested classes is that this makes it harder to re-use them. Perhaps you'd like to use your VideoDecoder class in another project. If you make it a nested class of VideoPlayer, you can't do this in an elegant way.</p>\n\n<p>Instead, put the other classes in separate .h/.cpp files, which you can then use in your VideoPlayer class. The client of VideoPlayer now only needs to include the file that declares VideoPlayer, and still doesn't need to know about how you implemented it.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "336",
    "url": "https://stackoverflow.com/questions/336",
    "title": "When to use unsigned values over signed ones?",
    "text:": "<p>When is it appropriate to use an unsigned variable over a signed one? What about in a <code>for</code> loop?</p>\n\n<p>I hear a lot of opinions about this and I wanted to see if there was anything resembling a consensus. </p>\n\n<pre><code>for (unsigned int i = 0; i &lt; someThing.length(); i++) {  \n    SomeThing var = someThing.at(i);  \n    // You get the idea.  \n}\n</code></pre>\n\n<p>I know Java doesn't have unsigned values, and that must have been a concious decision on <a href=\"https://en.wikipedia.org/wiki/Sun_Microsystems\" rel=\"noreferrer\">Sun Microsystems</a>' part. </p>\n",
    "codes": [
      [],
      [],
      [
        "#declare BIT1 (unsigned int 1)\n#declare BIT32 (unsigned int reallybignumber)\n"
      ],
      [],
      []
    ],
    "votes:": "80",
    "tags": "<language-agnostic><types>",
    "AcceptedAnswerId": "339",
    "answers": [
      {
        "id": "278817",
        "title": "",
        "text": "<p>I would think that if your business case dictates that a negative number is invalid, you would <em>want</em> to have an error shown or thrown.    </p>\n\n<p>With that in mind, I only just recently found out about unsigned integers while working on a project processing data in a binary file and storing the data into a database. I was purposely \"corrupting\" the binary data, and ended up getting negative values instead of an expected error.  I found that even though the value converted, the value was not valid for my business case.<br>\nMy program did not error, and I ended up getting wrong data into the database. It would have been better if I had used <code>uint</code> and had the program fail.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "339",
        "title": "",
        "text": "<p>I was glad to find <a href=\"http://coding.derkeiler.com/Archive/C_CPP/comp.lang.c/2004-02/1382.html\" rel=\"noreferrer\">a good conversation</a> on this subject, as I hadn't really given it much thought before.</p>\n\n<p>In summary, signed is a good general choice - even when you're dead sure all the numbers are positive - if you're going to do arithmetic on the variable (like in a typical for loop case).  </p>\n\n<p>If you're going to do bitwise things like masks, unsigned starts to make more sense.  Or, if you're desperate to get that extra positive range by taking advantage of the sign bit.</p>\n\n<p>Personally, I like signed because I don't trust myself to stay consistent and avoid mixing the two types (like the article warns against).</p>\n",
        "votes": "69",
        "tags": "",
        "accepted": true
      },
      {
        "id": "347",
        "title": "",
        "text": "<p>In your example above, when 'i' will always be positive and a higher range would be beneficial, unsigned would be useful. Like if you're using 'declare' statements, such as: </p>\n\n<pre><code>#declare BIT1 (unsigned int 1)\n#declare BIT32 (unsigned int reallybignumber)\n</code></pre>\n\n<p>Especially when these values will never change.</p>\n\n<p>However, if you're doing an accounting program where the people are irresponsible with their money and are constantly in the red, you will most definitely want to use 'signed'.</p>\n\n<p>I do agree with saint though that a good rule of thumb is to use signed, which C actually defaults to, so you're covered.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "354",
        "title": "",
        "text": "<p><code>size_t</code> is often a good choice for this, or <code>size_type</code> if you're using an STL class.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1226",
        "title": "",
        "text": "<p>C and C++ compilers will generate a warning when you compare signed and unsigned types; in your example code, you couldn't make your loop variable unsigned and have the compiler generate code without warnings (assuming said warnings were turned on).</p>\n\n<p>Naturally, you're compiling with warnings turned all the way up, right?</p>\n\n<p>And, have you considered compiling with \"treat warnings as errors\" to take it that one step further?</p>\n\n<p>The downside with using signed numbers is that there's a temptation to overload them so that, for example, the values 0->n are the menu selection, and -1 means nothing's selected - rather than creating a class that has two variables, one to indicate if something is selected and another to store what that selection is.  Before you know it, you're testing for negative one all over the place and the compiler is complaining about how you're wanting to compare the menu selection against the number of menu selections you have - but that's dangerous because they're different types.  So don't do that.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "337",
    "url": "https://stackoverflow.com/questions/337",
    "title": "XML Processing in Python",
    "text:": "<p>I am about to build a piece of a project that will need to construct and post an XML document to a web service and I'd like to do it in Python, as a means to expand my skills in it.  </p>\n\n<p>Unfortunately, whilst I know the XML model fairly well in .NET, I'm uncertain what the pros and cons are of the XML models in Python.  </p>\n\n<p>Anyone have experience doing XML processing in Python? Where would you suggest I start? The XML files I'll be building will be fairly simple.</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [
        ">>> from lxml.builder import E\n\n>>> html = page = (\n...   E.html(       # create an Element called \"html\"\n...     E.head(\n...       E.title(\"This is a sample document\")\n...     ),\n...     E.body(\n...       E.h1(\"Hello!\"),\n...       E.p(\"This is a paragraph with \", E.b(\"bold\"), \" text in it!\"),\n...       E.p(\"This is another paragraph, with a\", \"\\n      \",\n...         E.a(\"link\", href=\"http://www.python.org\"), \".\"),\n...       E.p(\"Here are some reserved characters: <spam&egg>.\"),\n...     )\n...   )\n... )\n\n>>> print(etree.tostring(page, pretty_print=True))\n<html>\n  <head>\n    <title>This is a sample document</title>\n  </head>\n  <body>\n    <h1>Hello!</h1>\n    <p>This is a paragraph with <b>bold</b> text in it!</p>\n    <p>This is another paragraph, with a\n      <a href=\"http://www.python.org\">link</a>.</p>\n    <p>Here are some reserved characters: &lt;spam&amp;egg&gt;.</p>\n  </body>\n</html>\n",
        "from lxml import etree\nfrom lxml.builder import E\nlst = [\"alfa\", \"beta\", \"gama\"]\nxml = E.root(*[E.record(itm) for itm in lst])\netree.tostring(xml, pretty_print=True)\n",
        "<root>\n  <record>alfa</record>\n  <record>beta</record>\n  <record>gama</record>\n</root>\n"
      ]
    ],
    "votes:": "76",
    "tags": "<python><xml>",
    "AcceptedAnswerId": "342",
    "answers": [
      {
        "id": "123307",
        "title": "",
        "text": "<p>I've used ElementTree for several projects and recommend it. </p>\n\n<p>It's pythonic, comes 'in the box' with Python 2.5, including the c version cElementTree (xml.etree.cElementTree) which is 20 times faster than the pure Python version, and is very easy to use.</p>\n\n<p>lxml has some perfomance advantages, but they are uneven and you should check the benchmarks first for your use case.</p>\n\n<p>As I understand it, ElementTree code can easily be ported to lxml. </p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "525",
        "title": "",
        "text": "<p>Since you mentioned that you'll be building \"fairly simple\" XML, the <a href=\"http://www.python.org/doc/current/lib/module-xml.dom.minidom.html\" rel=\"noreferrer\">minidom module</a> (part of the Python Standard Library) will likely suit your needs. If you have any experience with the DOM representation of XML, you should find the API quite straight forward.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "342",
        "title": "",
        "text": "<p>Personally, I've played with several of the built-in options on an XML-heavy project and have settled on <a href=\"http://docs.python.org/lib/module-xml.dom.pulldom.html\" rel=\"noreferrer\">pulldom</a> as the best choice for less complex documents.</p>\n\n<p>Especially for small simple stuff, I like the event-driven theory of parsing rather than setting up a whole slew of callbacks for a relatively simple structure.  <a href=\"http://www.prescod.net/python/pulldom.html\" rel=\"noreferrer\">Here is a good quick discussion of how to use the API</a>.</p>\n\n<p>What I like: you can handle the parsing in a <code>for</code> loop rather than using callbacks.  You also delay full parsing (the \"pull\" part) and only get additional detail when you call <code>expandNode()</code>.  This satisfies my general requirement for \"responsible\" efficiency without sacrificing ease of use and simplicity.</p>\n",
        "votes": "32",
        "tags": "",
        "accepted": true
      },
      {
        "id": "199213",
        "title": "",
        "text": "<p>If you're going to be building SOAP messages, check out <a href=\"http://trac.optio.webfactional.com/\" rel=\"nofollow noreferrer\">soaplib</a>. It uses ElementTree under the hood, but it provides a much cleaner interface for serializing and deserializing messages.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "69772",
        "title": "",
        "text": "<p>I assume that the .Net-way of processing XML builds on some version of MSXML and in that case I assume that using for example minidom would make you feel somewhat at home. However, if it is simple processing you are doing any library will probably do. </p>\n\n<p>I also prefer working with ElementTree when dealing with xml in Python, it is a very neat library. </p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "13832269",
        "title": "",
        "text": "<p>I strongly recommend <code>SAX - Simple API for XML</code> - implementation in the Python libraries. They are fairly easy to setup and process large <code>XML</code> by even driven <code>API</code>, as discussed by previous posters here, and have low memory footprint unlike validating <code>DOM</code> style <code>XML</code> parsers.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "635",
        "title": "",
        "text": "<p>I write a SOAP server that receives XML requests and creates XML responses.  (Unfortunately, it's not my project, so it's closed source, but that's another problem).</p>\n\n<p>It turned out for me that creating (SOAP) XML documents is fairly simple if you have a data structure that \"fits\" the schema.</p>\n\n<p>I keep the envelope since the response envelope is (almost) the same as the request envelope.  Then, since my data structure is a (possibly nested) dictionary, I create a string that turns this dictionary into &lt;key>value&lt;/key> items.  </p>\n\n<p>This is a task that recursion makes simple, and I end up with the right structure.  This is all done in python code and is currently fast enough for production use.</p>\n\n<p>You can also (relatively) easily build lists as well, although depending upon your client, you may hit problems unless you give length hints.</p>\n\n<p>For me, this was much simpler, since a dictionary is a much easier way of working than some custom class.  For the books, generating XML is much easier than parsing!</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "202259",
        "title": "",
        "text": "<p>It depends a bit on how complicated the document needs to be.</p>\n\n<p>I've used minidom a lot for writing XML, but that's usually been just reading documents, making some simple transformations, and writing them back out. That worked well enough until I needed the ability to order element attributes (to satisfy an ancient application that doesn't parse XML properly). At that point I gave up and wrote the XML myself.</p>\n\n<p>If you're only working on simple documents, then doing it yourself can be quicker and simpler than learning a framework. If you can conceivably write the XML by hand, then you can probably code it by hand as well (just remember to properly escape special characters, and use <code>str.encode(codec, errors=\"xmlcharrefreplace\")</code>). Apart from these snafus, XML is regular enough that you don't <em>need</em> a special library to write it. If the document is too complicated to write by hand, then you should probably look into one of the frameworks already mentioned. At no point should you need to write a general XML writer.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "471",
        "title": "",
        "text": "<p><a href=\"http://effbot.org/zone/element-index.htm\" rel=\"noreferrer\">ElementTree</a> has a nice pythony API.  I think it's even shipped as part of python 2.5</p>\n\n<p>It's in pure python and as I say, pretty nice, but if you wind up needing more performance, then <a href=\"http://codespeak.net/lxml/\" rel=\"noreferrer\">lxml</a> exposes the same API and uses libxml2 under the hood.  You can theoretically just swap it in when you discover you need it.</p>\n",
        "votes": "31",
        "tags": "",
        "accepted": false
      },
      {
        "id": "69410",
        "title": "",
        "text": "<p>There are 3 major ways of dealing with XML, in general: dom, sax, and xpath. The dom model is good if you can afford to load your entire xml file into memory at once, and you don't mind dealing with data structures, and you are looking at much/most of the model. The sax model is great if you only care about a few tags, and/or you are dealing with big files and can process them sequentially. The xpath model is a little bit of each -- you can pick and choose paths to the data elements you need, but it requires more libraries to use.</p>\n\n<p>If you want straightforward and packaged with Python, minidom is your answer, but it's pretty lame, and the documentation is \"here's docs on dom, go figure it out\". It's really annoying.</p>\n\n<p>Personally, I like cElementTree, which is a faster (c-based) implementation of ElementTree, which is a dom-like model.</p>\n\n<p>I've used sax systems, and in many ways they're more \"pythonic\" in their feel, but I usually end up creating state-based systems to handle them, and that way lies madness (and bugs).</p>\n\n<p>I say go with minidom if you like research, or ElementTree if you want good code that works well.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7954780",
        "title": "",
        "text": "<p>You can also try <a href=\"https://github.com/stchris/untangle\" rel=\"noreferrer\">untangle</a> to parse simple XML documents.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "23143835",
        "title": "",
        "text": "<h1>For serious work with XML in Python use lxml</h1>\n\n<p>Python comes with ElementTree built-in library, but lxml extends it in terms of speed and functionality (schema validation, sax parsing, XPath, various sorts of iterators and many other features).</p>\n\n<p>You have to install it, but in many places, it is already assumed to be part of standard equipment (e.g. Google AppEngine does not allow C-based Python packages, but makes an exception for lxml, pyyaml, and few others).</p>\n\n<h1>Building XML documents with E-factory (from lxml)</h1>\n\n<p>Your question is about building XML document.</p>\n\n<p>With lxml there are many methods and it took me a while to find the one, which seems to be easy to use and also easy to read.</p>\n\n<p>Sample code from <a href=\"http://lxml.de/tutorial.html#the-e-factory\" rel=\"nofollow noreferrer\">lxml doc on using E-factory</a> (slightly simplified):</p>\n\n<hr>\n\n<p>The E-factory provides a simple and compact syntax for generating XML and HTML:</p>\n\n<pre><code>&gt;&gt;&gt; from lxml.builder import E\n\n&gt;&gt;&gt; html = page = (\n...   E.html(       # create an Element called \"html\"\n...     E.head(\n...       E.title(\"This is a sample document\")\n...     ),\n...     E.body(\n...       E.h1(\"Hello!\"),\n...       E.p(\"This is a paragraph with \", E.b(\"bold\"), \" text in it!\"),\n...       E.p(\"This is another paragraph, with a\", \"\\n      \",\n...         E.a(\"link\", href=\"http://www.python.org\"), \".\"),\n...       E.p(\"Here are some reserved characters: &lt;spam&amp;egg&gt;.\"),\n...     )\n...   )\n... )\n\n&gt;&gt;&gt; print(etree.tostring(page, pretty_print=True))\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;This is a sample document&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Hello!&lt;/h1&gt;\n    &lt;p&gt;This is a paragraph with &lt;b&gt;bold&lt;/b&gt; text in it!&lt;/p&gt;\n    &lt;p&gt;This is another paragraph, with a\n      &lt;a href=\"http://www.python.org\"&gt;link&lt;/a&gt;.&lt;/p&gt;\n    &lt;p&gt;Here are some reserved characters: &amp;lt;spam&amp;amp;egg&amp;gt;.&lt;/p&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<hr>\n\n<p>I appreciate on E-factory it following things</p>\n\n<h3>Code reads almost as the resulting XML document</h3>\n\n<p>Readability counts. </p>\n\n<h3>Allows creation of any XML content</h3>\n\n<p>Supports stuff like:</p>\n\n<ul>\n<li>use of namespaces</li>\n<li>starting and ending text nodes within one element</li>\n<li>functions formatting attribute content (see func CLASS in <a href=\"http://lxml.de/tutorial.html#the-e-factory\" rel=\"nofollow noreferrer\">full lxml sample</a>)</li>\n</ul>\n\n<h3>Allows very readable constructs with lists</h3>\n\n<p>e.g.:</p>\n\n<pre><code>from lxml import etree\nfrom lxml.builder import E\nlst = [\"alfa\", \"beta\", \"gama\"]\nxml = E.root(*[E.record(itm) for itm in lst])\netree.tostring(xml, pretty_print=True)\n</code></pre>\n\n<p>resulting in:</p>\n\n<pre><code>&lt;root&gt;\n  &lt;record&gt;alfa&lt;/record&gt;\n  &lt;record&gt;beta&lt;/record&gt;\n  &lt;record&gt;gama&lt;/record&gt;\n&lt;/root&gt;\n</code></pre>\n\n<h2>Conclusions</h2>\n\n<p>I highly recommend reading lxml tutorial - it is very well written and will give you many more reasons to use this powerful library.</p>\n\n<p>The only disadvantage of lxml is, that it must be compiled. See <a href=\"https://stackoverflow.com/a/23141779/346478\">SO answer for more tips</a> how to install lxml from wheel format package within a fraction of a second.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "361",
    "url": "https://stackoverflow.com/questions/361",
    "title": "Generate list of all possible permutations of a string",
    "text:": "<p>How would I go about generating a list of all possible permutations of a string between x and y characters in length, containing a variable list of characters.</p>\n\n<p>Any language would work, but it should be portable.</p>\n",
    "codes": [
      [
        "perms = {}\ndef perm(input_string):\n    global perms\n    if input_string in perms:\n        return perms[input_string] # This will send a list of all permutations\n    elif len(input_string) == 2:\n        perms[input_string] = [input_string, input_string[-1] + input_string [-2]]\n        return perms[input_string]\n    else:\n        perms[input_string] = []\n        for index in range(0, len(input_string)):\n            new_string = input_string[0:index] + input_string[index +1:]\n            perm(new_string)\n            for entries in perms[new_string]:\n                perms[input_string].append(input_string[index] + entries)\n    return perms[input_string]\n"
      ],
      [],
      [
        "public static int totalPermutationsCount = 0;\n    public static void main(String[] args) {\n\n        Scanner sc = new Scanner(System.in);\n        System.out.println(\"input string : \");\n        String inputString = sc.nextLine();\n        System.out.println(\"given input String ==> \"+inputString+ \" :: length is = \"+inputString.length());\n        findPermuationsOfString(-1, inputString);\n        System.out.println(\"**************************************\");\n        System.out.println(\"total permutation strings ==> \"+totalPermutationsCount);\n    }\n\n\n    public  static void findPermuationsOfString(int fixedIndex, String inputString) {\n        int currentIndex = fixedIndex +1;\n\n        for (int i = currentIndex; i < inputString.length(); i++) {\n            //swap elements and call the findPermuationsOfString()\n\n            char[] carr = inputString.toCharArray();\n            char tmp = carr[currentIndex];\n            carr[currentIndex] = carr[i];\n            carr[i] = tmp;\n            inputString =  new String(carr);\n\n            //System.out.println(\"chat At : current String ==> \"+inputString.charAt(currentIndex));\n            if(currentIndex == inputString.length()-1) {\n                totalPermutationsCount++;\n                System.out.println(\"permuation string ==> \"+inputString);\n            } else {\n                //System.out.println(\"in else block>>>>\");\n                findPermuationsOfString(currentIndex, inputString);\n                 char[] rarr = inputString.toCharArray();\n                    char rtmp = carr[i];\n                    carr[i] = carr[currentIndex];\n                    carr[currentIndex] = rtmp;\n                    inputString =  new String(carr);\n            }\n        }\n    }\n"
      ],
      [
        "//call it as permut(\"\",str);\n\npublic void permut(String str1,String str2){\n    if(str2.length() != 0){\n        char ch = str2.charAt(0);\n        for(int i = 0; i <= str1.length();i++)\n            permut(str1.substring(0,i) + ch + str1.substring(i,str1.length()),\n                     str2.substring(1,str2.length()));\n    }else{\n    System.out.println(str1);\n    }\n}\n",
        "//call it as permut(\"\",str);\n\npublic void permut(String str1,String str2){\n   if(str2.length() > 1){\n       char ch = str2.charAt(0);\n       for(int i = 0; i <= str1.length();i++)\n          permut(str1.substring(0,i) + ch + str1.substring(i,str1.length()),\n                 str2.substring(1,str2.length()));\n   }else{\n    char ch = str2.charAt(0);\n    for(int i = 0; i <= str1.length();i++)\n        System.out.println(str1.substring(0,i) + ch +    str1.substring(i,str1.length()),\n                 str2.substring(1,str2.length()));\n   }\n}\n"
      ],
      [
        "public static String insertCharAt(String s, int index, char c) {\n        StringBuffer sb = new StringBuffer(s);\n        StringBuffer sbb = sb.insert(index, c);\n        return sbb.toString();\n}\n\npublic static ArrayList<String> getPerm(String s, int index) {\n        ArrayList<String> perm = new ArrayList<String>();\n\n        if (index == s.length()-1) {\n            perm.add(String.valueOf(s.charAt(index)));\n            return perm;\n        }\n\n        ArrayList<String> p = getPerm(s, index+1);\n        char c = s.charAt(index);\n\n        for(String pp : p) {\n            for (int idx=0; idx<pp.length()+1; idx++) {\n                String ss = insertCharAt(pp, idx, c);\n                perm.add(ss);\n            }\n        }\n\n        return perm;    \n}\n\npublic static void testGetPerm(String s) {\n        ArrayList<String> perm = getPerm(s,0);\n        System.out.println(s+\" --> total permutation are :: \"+perm.size());\n        System.out.println(perm.toString());\n}\n"
      ],
      [
        "def gen( x,y,list): #to generate all strings inserting y at different positions\nlist = []\nlist.append( y+x )\nfor i in range( len(x) ):\n    list.append( func(x,0,i) + y + func(x,i+1,len(x)-1) )\nreturn list \n\ndef func( x,i,j ): #returns x[i..j]\nz = '' \nfor i in range(i,j+1):\n    z = z+x[i]\nreturn z \n\ndef perm( x , length , list ): #perm function\nif length == 1 : # base case\n    list.append( x[len(x)-1] )\n    return list \nelse:\n    lists = perm( x , length-1 ,list )\n    lists_temp = lists #temporarily storing the list \n    lists = []\n    for i in range( len(lists_temp) ) :\n        list_temp = gen(lists_temp[i],x[length-2],lists)\n        lists += list_temp \n    return lists\n"
      ],
      [
        "list = originalString.split('')\nindex = (0,0)\nlist = [\"\"]\nfor iteration n in 1 to y:\n  index = (index[1], len(list))\n  for string s in list.subset(index[0] to end):\n    for character c in originalString:\n      list.add(s + c)\n"
      ],
      [],
      [
        "public class GeneratePermutations {\n    public static void main(String[] args) {\n        int lower = Integer.parseInt(args[0]);\n        int upper = Integer.parseInt(args[1]);\n\n        if (upper < lower || upper == 0 || lower == 0) {\n            System.exit(0);\n        }\n\n        for (int length = lower; length <= upper; length++) {\n            generate(length, \"\");\n        }\n    }\n\n    private static void generate(int length, String partial) {\n        if (length <= 0) {\n            System.out.println(partial);\n        } else {\n            for (char c = 'a'; c <= 'z'; c++) {\n                generate(length - 1, partial + c);\n            }\n        }\n    }\n}\n"
      ],
      [
        "def permutation(str)\n  posibilities = []\n  str.split('').each do |char|\n    if posibilities.size == 0\n      posibilities[0] = char.downcase\n      posibilities[1] = char.upcase\n    else\n      posibilities_count = posibilities.length\n      posibilities = posibilities + posibilities\n      posibilities_count.times do |i|\n        posibilities[i] += char.downcase\n        posibilities[i+posibilities_count] += char.upcase\n      end\n    end\n  end\n  posibilities\nend\n"
      ],
      [
        "str = \"a\"\n100_000_000.times {puts str.next!}\n"
      ],
      [
        "public class permute {\n\n    static void permute(int level, String permuted,\n                    boolean used[], String original) {\n        int length = original.length();\n        if (level == length) {\n            System.out.println(permuted);\n        } else {\n            for (int i = 0; i < length; i++) {\n                if (!used[i]) {\n                    used[i] = true;\n                    permute(level + 1, permuted + original.charAt(i),\n                       used, original);\n                    used[i] = false;\n                }\n            }\n        }\n    }\n\n    public static void main(String[] args) {\n        String s = \"hello\";\n        boolean used[] = {false, false, false, false, false};\n        permute(0, \"\", used, s);\n    }\n}\n"
      ],
      [],
      [
        "public ArrayList CalculateWordPermutations(string[] letters, ArrayList words, int index)\n        {\n            bool finished = true;\n            ArrayList newWords = new ArrayList();\n            if (words.Count == 0)\n            {\n                foreach (string letter in letters)\n                {\n                    words.Add(letter);\n                }\n            }\n\n            for(int j=index; j<words.Count; j++)\n            {\n                string word = (string)words[j];\n                for(int i =0; i<letters.Length; i++)\n                {\n                    if(!word.Contains(letters[i]))\n                    {\n                        finished = false;\n                        string newWord = (string)word.Clone();\n                        newWord += letters[i];\n                        newWords.Add(newWord);\n                    }\n                }\n            }\n\n            foreach (string newWord in newWords)\n            {   \n                words.Add(newWord);\n            }\n\n            if(finished  == false)\n            {\n                CalculateWordPermutations(letters, words, words.Count - newWords.Count);\n            }\n            return words;\n        }\n",
        "string[] letters = new string[]{\"a\",\"b\",\"c\"};\nArrayList words = CalculateWordPermutations(letters, new ArrayList(), 0);\n"
      ],
      [
        "#include <stdio.h>\n#include <string.h>\n\nvoid swap(char *a, char *b) {\n    char temp;\n    temp = *a;\n    *a = *b;\n    *b = temp;\n}\n\nvoid print(char *a, int i, int n) {\n    int j;\n    if(i == n) {\n        printf(\"%s\\n\", a);\n    } else {\n        for(j = i; j <= n; j++) {\n            swap(a + i, a + j);\n            print(a, i + 1, n);\n            swap(a + i, a + j);\n        }\n    }\n}\n\nint main(void) {\n    char a[100];\n    gets(a);\n    print(a, 0, strlen(a) - 1);\n    return 0;\n}\n"
      ],
      [
        "my @result = (\"a\" .. \"zzzz\");\n"
      ],
      [
        "public List<string> Permutations(char[] chars)\n    {\n        List<string> words = new List<string>();\n        words.Add(chars[0].ToString());\n        for (int i = 1; i < chars.Length; ++i)\n        {\n            int currLen = words.Count;\n            for (int j = 0; j < currLen; ++j)\n            {\n                var w = words[j];\n                for (int k = 0; k <= w.Length; ++k)\n                {\n                    var nstr = w.Insert(k, chars[i].ToString());\n                    if (k == 0)\n                        words[j] = nstr;\n                    else\n                        words.Add(nstr);\n                }\n            }\n        }\n        return words;\n    }\n"
      ],
      [
        "public class AllPermutationsOfString {\npublic static void stringPermutations(String newstring, String remaining) {\n    if(remaining.length()==0)\n        System.out.println(newstring);\n\n    for(int i=0; i<remaining.length(); i++) {\n        String newRemaining = remaining.replaceFirst(remaining.charAt(i)+\"\", \"\");\n        stringPermutations(newstring+remaining.charAt(i), newRemaining);\n    }\n}\n\npublic static void main(String[] args) {\n    String string = \"abc\";\n    AllPermutationsOfString.stringPermutations(\"\", string); \n}\n"
      ],
      [
        "import java.util.*;\n\npublic class all_subsets {\n    public static void main(String[] args) {\n        String a = \"abcd\";\n        for(String s: all_perm(a)) {\n            System.out.println(s);\n        }\n    }\n\n    public static Set<String> concat(String c, Set<String> lst) {\n        HashSet<String> ret_set = new HashSet<String>();\n        for(String s: lst) {\n            ret_set.add(c+s);\n        }\n        return ret_set;\n    }\n\n    public static HashSet<String> all_perm(String a) {\n        HashSet<String> set = new HashSet<String>();\n        if(a.length() == 1) {\n            set.add(a);\n        } else {\n            for(int i=0; i<a.length(); i++) {\n                set.addAll(concat(a.charAt(i)+\"\", all_perm(a.substring(0, i)+a.substring(i+1, a.length()))));\n            }\n        }\n        return set;\n    }\n}\n"
      ],
      [
        "void permute(const char *s, char *out, int *used, int len, int lev)\n{\n    if (len == lev) {\n        out[lev] = '\\0';\n        puts(out);\n        return;\n    }\n\n    int i;\n    for (i = 0; i < len; ++i) {\n        if (! used[i])\n            continue;\n\n        used[i] = 1;\n        out[lev] = s[i];\n        permute(s, out, used, len, lev + 1);\n        used[i] = 0;\n    }\n    return;\n}\n"
      ],
      [
        "def generate_permutations(chars = 4) :\n\n#modify if in need!\n    allowed_chars = [\n        '0',\n        '1',\n    ]\n\n    status = []\n    for tmp in range(chars) :\n        status.append(0)\n\n    last_char = len(allowed_chars)\n\n    rows = []\n    for x in xrange(last_char ** chars) :\n        rows.append(\"\")\n        for y in range(chars - 1 , -1, -1) :\n            key = status[y]\n            rows[x] = allowed_chars[key] + rows[x]\n\n        for pos in range(chars - 1, -1, -1) :\n            if(status[pos] == last_char - 1) :\n                status[pos] = 0\n            else :\n                status[pos] += 1\n                break;\n\n    return rows\n\nimport sys\n\n\nprint generate_permutations()\n"
      ],
      [
        "#include <string>\n#include <iostream>\n\ntemplate<typename Consume>\nvoid permutations(std::string s, Consume consume, std::size_t start = 0) {\n    if (start == s.length()) consume(s);\n    for (std::size_t i = start; i < s.length(); i++) {\n        std::swap(s[start], s[i]);\n        permutations(s, consume, start + 1);\n    }\n}\n\nint main(void) {\n    std::string s = \"abcd\";\n    permutations(s, [](std::string s) {\n        std::cout << s << std::endl;\n    });\n}\n"
      ],
      [
        "(defun perms (x y original-string)\n  (loop with all = (list \"\")\n        with current-array = (list \"\")\n        for iteration from 1 to y\n        do (loop with next-array = nil\n                 for string in current-array\n                 do (loop for c across original-string\n                          for value = (concatenate 'string string (string c))\n                          do (push value next-array)\n                             (push value all))\n                    (setf current-array (reverse next-array)))\n        finally (return (nreverse (delete-if #'(lambda (el) (< (length el) x)) all)))))\n",
        "(defun perms (x y original-string)\n  (loop repeat y\n        collect (loop for string in (or (car (last sets)) (list \"\"))\n                      append (loop for c across original-string\n                                   collect (concatenate 'string string (string c)))) into sets\n        finally (return (loop for set in sets\n                              append (loop for el in set when (>= (length el) x) collect el)))))\n"
      ],
      [
        "int main (int argc, char * const argv[]) {\n        string s = \"sarp\";\n        bool used [4];\n        permute(0, \"\", used, s);\n}\n\nvoid permute(int level, string permuted, bool used [], string &original) {\n    int length = original.length();\n\n    if(level == length) { // permutation complete, display\n        cout << permuted << endl;\n    } else {\n        for(int i=0; i<length; i++) { // try to add an unused character\n            if(!used[i]) {\n                used[i] = true;\n                permute(level+1, original[i] + permuted, used, original); // find the permutations starting with this string\n                used[i] = false;\n            }\n        }\n}\n"
      ],
      [],
      [
        "Option Explicit\n\nFunction NextPerm(Perm() As Long, Stack() As Long, Level As Long) As Boolean\nDim N As Long\nIf Level = 2 Then\n    Swap Perm(1), Perm(2)\n    Level = 3\nElse\n    While Stack(Level) = Level - 1\n        Stack(Level) = 0\n        If Level = UBound(Stack) Then Exit Function\n        Level = Level + 1\n    Wend\n    Stack(Level) = Stack(Level) + 1\n    If Level And 1 Then N = 1 Else N = Stack(Level)\n    Swap Perm(N), Perm(Level)\n    Level = 2\nEnd If\nNextPerm = True\nEnd Function\n\nSub Swap(A As Long, B As Long)\nA = A Xor B\nB = A Xor B\nA = A Xor B\nEnd Sub\n\n'This is just for testing.\nPrivate Sub Form_Paint()\nConst Max = 8\nDim A(1 To Max) As Long, I As Long\nDim S(3 To Max) As Long, J As Long\nDim Test As New Collection, T As String\nFor I = 1 To UBound(A)\n    A(I) = I\nNext\nCls\nScaleLeft = 0\nJ = 2\nDo\n    If CurrentY + TextHeight(\"0\") > ScaleHeight Then\n        ScaleLeft = ScaleLeft - TextWidth(\" 0 \") * (UBound(A) + 1)\n        CurrentY = 0\n        CurrentX = 0\n    End If\n    T = vbNullString\n    For I = 1 To UBound(A)\n        Print A(I);\n        T = T & Hex(A(I))\n    Next\n    Print\n    Test.Add Null, T\nLoop While NextPerm(A, S, J)\nJ = 1\nFor I = 2 To UBound(A)\n    J = J * I\nNext\nIf J <> Test.Count Then Stop\nEnd Sub\n"
      ],
      [
        "public static void main(String[] args) {\n\n    for (String str : permStr(\"ABBB\")){\n        System.out.println(str);\n    }\n}\n\nstatic Vector<String> permStr(String str){\n\n    if (str.length() == 1){\n        Vector<String> ret = new Vector<String>();\n        ret.add(str);\n        return ret;\n    }\n\n    char start = str.charAt(0);\n    Vector<String> endStrs = permStr(str.substring(1));\n    Vector<String> newEndStrs = new Vector<String>();\n    for (String endStr : endStrs){\n        for (int j = 0; j <= endStr.length(); j++){\n            if (endStr.substring(0, j).endsWith(String.valueOf(start)))\n                break;\n            newEndStrs.add(endStr.substring(0, j) + String.valueOf(start) + endStr.substring(j));\n        }\n    }\n    return newEndStrs;\n}\n"
      ],
      [
        "def nextPermutation(perm):\n    k0 = None\n    for i in range(len(perm)-1):\n        if perm[i]<perm[i+1]:\n            k0=i\n    if k0 == None:\n        return None\n\n    l0 = k0+1\n    for i in range(k0+1, len(perm)):\n        if perm[k0] < perm[i]:\n            l0 = i\n\n    perm[k0], perm[l0] = perm[l0], perm[k0]\n    perm[k0+1:] = reversed(perm[k0+1:])\n    return perm\n\nperm=list(\"12345\")\nwhile perm:\n    print perm\n    perm = nextPermutation(perm)\n"
      ],
      [
        "from itertools import permutations\ns = 'ABCDEF'\np = [''.join(x) for x in permutations(s)]\n"
      ],
      [
        "function oxe_perm(src, depth, index)\n{\n    var perm = src.slice();     // duplicates src.\n    perm = perm.split(\"\");\n    perm[depth] = src[index];\n    perm[index] = src[depth];\n    perm = perm.join(\"\");\n    return perm;\n}\n\nfunction oxe_permutations(src)\n{\n    out = new Array();\n\n    out.push(src);\n\n    for (depth = 0; depth < src.length; depth++) {\n        var numInPreviousPass = out.length;\n        for (var m = 0; m < numInPreviousPass; ++m) {\n            for (var n = depth + 1; n < src.length; ++n) {\n                out.push(oxe_perm(out[m], depth, n));\n            }\n        }\n    }\n\n    return out;\n}\n"
      ],
      [
        "    static public IEnumerable<string> permute(string word)\n    {\n        if (word.Length > 1)\n        {\n\n            char character = word[0];\n            foreach (string subPermute in permute(word.Substring(1)))\n            {\n\n                for (int index = 0; index <= subPermute.Length; index++)\n                {\n                    string pre = subPermute.Substring(0, index);\n                    string post = subPermute.Substring(index);\n\n                    if (post.Contains(character))\n                            continue;                       \n\n                    yield return pre + character + post;\n                }\n\n            }\n        }\n        else\n        {\n            yield return word;\n        }\n    }\n"
      ],
      [
        "public static StringBuilder[] permutations(String s) {\n        if (s.length() == 0)\n            return null;\n        int length = fact(s.length());\n        StringBuilder[] sb = new StringBuilder[length];\n        for (int i = 0; i < length; i++) {\n            sb[i] = new StringBuilder();\n        }\n        for (int i = 0; i < s.length(); i++) {\n            char ch = s.charAt(i);\n            int times = length / (i + 1);\n            for (int j = 0; j < times; j++) {\n                for (int k = 0; k < length / times; k++) {\n                    sb[j * length / times + k].insert(k, ch);\n                }\n            }\n        }\n        return sb;\n    }\n"
      ],
      [
        "def perms(x, y, possible_characters)\n  all = [\"\"]\n  current_array = all.clone\n  1.upto(y) { |iteration|\n    next_array = []\n    current_array.each { |string|\n      possible_characters.each { |c|\n        value = string + c\n        next_array.insert next_array.length, value\n        all.insert all.length, value\n      }\n    }\n    current_array = next_array\n  }\n  all.delete_if { |string| string.length < x }\nend\n"
      ],
      [
        "class String\n  def each_char_with_index\n    0.upto(size - 1) do |index|\n      yield(self[index..index], index)\n    end\n  end\n  def remove_char_at(index)\n    return self[1..-1] if index == 0\n    self[0..(index-1)] + self[(index+1)..-1]\n  end\nend\n\ndef permute(str, prefix = '')\n  if str.size == 0\n    puts prefix\n    return\n  end\n  str.each_char_with_index do |char, index|\n    permute(str.remove_char_at(index), prefix + char)\n  end\nend\n\n# example\n# permute(\"abc\")\n"
      ]
    ],
    "votes:": "158",
    "tags": "<string><language-agnostic><cross-platform>",
    "AcceptedAnswerId": "362",
    "answers": [
      {
        "id": "17480974",
        "title": "",
        "text": "<p>A recursive solution in python. The good thing about this code is that it exports a dictionary, with keys as strings and all possible permutations as values. All possible string lengths are included, so in effect, you are creating a superset.</p>\n\n<p>If you only require the final permutations, you can delete other keys from the dictionary.</p>\n\n<p>In this code, the dictionary of permutations is global.</p>\n\n<p>At the base case, I store the value as both possibilities in a list. <code>perms['ab'] = ['ab','ba']</code>.</p>\n\n<p>For higher string lengths, the function refers to lower string lengths and incorporates the previously calculated permutations.</p>\n\n<p>The function does two things:</p>\n\n<ul>\n<li>calls itself with a smaller string</li>\n<li>returns a list of permutations of a particular string if already available. If returned to itself, these will be used to append to the character and create newer permutations.</li>\n</ul>\n\n<p>Expensive for memory. </p>\n\n<pre><code>perms = {}\ndef perm(input_string):\n    global perms\n    if input_string in perms:\n        return perms[input_string] # This will send a list of all permutations\n    elif len(input_string) == 2:\n        perms[input_string] = [input_string, input_string[-1] + input_string [-2]]\n        return perms[input_string]\n    else:\n        perms[input_string] = []\n        for index in range(0, len(input_string)):\n            new_string = input_string[0:index] + input_string[index +1:]\n            perm(new_string)\n            for entries in perms[new_string]:\n                perms[input_string].append(input_string[index] + entries)\n    return perms[input_string]\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "21765529",
        "title": "",
        "text": "<p>Here is a link that describes how to print permutations of a string. \n<a href=\"http://nipun-linuxtips.blogspot.in/2012/11/print-all-permutations-of-characters-in.html\" rel=\"nofollow\">http://nipun-linuxtips.blogspot.in/2012/11/print-all-permutations-of-characters-in.html</a></p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "37639997",
        "title": "",
        "text": "<p>code written for java language :</p>\n\n<p>package namo.algorithms;</p>\n\n<p>import java.util.Scanner;</p>\n\n<p>public class Permuations {  </p>\n\n<pre><code>public static int totalPermutationsCount = 0;\n    public static void main(String[] args) {\n\n        Scanner sc = new Scanner(System.in);\n        System.out.println(\"input string : \");\n        String inputString = sc.nextLine();\n        System.out.println(\"given input String ==&gt; \"+inputString+ \" :: length is = \"+inputString.length());\n        findPermuationsOfString(-1, inputString);\n        System.out.println(\"**************************************\");\n        System.out.println(\"total permutation strings ==&gt; \"+totalPermutationsCount);\n    }\n\n\n    public  static void findPermuationsOfString(int fixedIndex, String inputString) {\n        int currentIndex = fixedIndex +1;\n\n        for (int i = currentIndex; i &lt; inputString.length(); i++) {\n            //swap elements and call the findPermuationsOfString()\n\n            char[] carr = inputString.toCharArray();\n            char tmp = carr[currentIndex];\n            carr[currentIndex] = carr[i];\n            carr[i] = tmp;\n            inputString =  new String(carr);\n\n            //System.out.println(\"chat At : current String ==&gt; \"+inputString.charAt(currentIndex));\n            if(currentIndex == inputString.length()-1) {\n                totalPermutationsCount++;\n                System.out.println(\"permuation string ==&gt; \"+inputString);\n            } else {\n                //System.out.println(\"in else block&gt;&gt;&gt;&gt;\");\n                findPermuationsOfString(currentIndex, inputString);\n                 char[] rarr = inputString.toCharArray();\n                    char rtmp = carr[i];\n                    carr[i] = carr[currentIndex];\n                    carr[currentIndex] = rtmp;\n                    inputString =  new String(carr);\n            }\n        }\n    }\n</code></pre>\n\n<p>}</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "17182840",
        "title": "",
        "text": "<p>The following Java recursion prints all permutations of a given string:</p>\n\n<pre><code>//call it as permut(\"\",str);\n\npublic void permut(String str1,String str2){\n    if(str2.length() != 0){\n        char ch = str2.charAt(0);\n        for(int i = 0; i &lt;= str1.length();i++)\n            permut(str1.substring(0,i) + ch + str1.substring(i,str1.length()),\n                     str2.substring(1,str2.length()));\n    }else{\n    System.out.println(str1);\n    }\n}\n</code></pre>\n\n<p>Following is the updated version of above \"permut\" method which makes n! (n factorial) less recursive calls compared to the above method</p>\n\n<pre><code>//call it as permut(\"\",str);\n\npublic void permut(String str1,String str2){\n   if(str2.length() &gt; 1){\n       char ch = str2.charAt(0);\n       for(int i = 0; i &lt;= str1.length();i++)\n          permut(str1.substring(0,i) + ch + str1.substring(i,str1.length()),\n                 str2.substring(1,str2.length()));\n   }else{\n    char ch = str2.charAt(0);\n    for(int i = 0; i &lt;= str1.length();i++)\n        System.out.println(str1.substring(0,i) + ch +    str1.substring(i,str1.length()),\n                 str2.substring(1,str2.length()));\n   }\n}\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "42061222",
        "title": "",
        "text": "<p>The possible string permutations can be computed using recursive function. Below is one of the possible solution.</p>\n\n<pre><code>public static String insertCharAt(String s, int index, char c) {\n        StringBuffer sb = new StringBuffer(s);\n        StringBuffer sbb = sb.insert(index, c);\n        return sbb.toString();\n}\n\npublic static ArrayList&lt;String&gt; getPerm(String s, int index) {\n        ArrayList&lt;String&gt; perm = new ArrayList&lt;String&gt;();\n\n        if (index == s.length()-1) {\n            perm.add(String.valueOf(s.charAt(index)));\n            return perm;\n        }\n\n        ArrayList&lt;String&gt; p = getPerm(s, index+1);\n        char c = s.charAt(index);\n\n        for(String pp : p) {\n            for (int idx=0; idx&lt;pp.length()+1; idx++) {\n                String ss = insertCharAt(pp, idx, c);\n                perm.add(ss);\n            }\n        }\n\n        return perm;    \n}\n\npublic static void testGetPerm(String s) {\n        ArrayList&lt;String&gt; perm = getPerm(s,0);\n        System.out.println(s+\" --&gt; total permutation are :: \"+perm.size());\n        System.out.println(perm.toString());\n}\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "18387484",
        "title": "",
        "text": "<pre><code>def gen( x,y,list): #to generate all strings inserting y at different positions\nlist = []\nlist.append( y+x )\nfor i in range( len(x) ):\n    list.append( func(x,0,i) + y + func(x,i+1,len(x)-1) )\nreturn list \n\ndef func( x,i,j ): #returns x[i..j]\nz = '' \nfor i in range(i,j+1):\n    z = z+x[i]\nreturn z \n\ndef perm( x , length , list ): #perm function\nif length == 1 : # base case\n    list.append( x[len(x)-1] )\n    return list \nelse:\n    lists = perm( x , length-1 ,list )\n    lists_temp = lists #temporarily storing the list \n    lists = []\n    for i in range( len(lists_temp) ) :\n        list_temp = gen(lists_temp[i],x[length-2],lists)\n        lists += list_temp \n    return lists\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "362",
        "title": "",
        "text": "<p>There are several ways to do this. Common methods use recursion, memoization, or dynamic programming. The basic idea is that you produce a list of all strings of length 1, then in each iteration, for all strings produced in the last iteration, add that string concatenated with each character in the string individually. (the variable index in the code below keeps track of the start of the last and the next iteration)</p>\n\n<p>Some pseudocode:</p>\n\n<pre><code>list = originalString.split('')\nindex = (0,0)\nlist = [\"\"]\nfor iteration n in 1 to y:\n  index = (index[1], len(list))\n  for string s in list.subset(index[0] to end):\n    for character c in originalString:\n      list.add(s + c)\n</code></pre>\n\n<p>you'd then need to remove all strings less than x in length, they'll be the first (x-1) * len(originalString) entries in the list.</p>\n",
        "votes": "73",
        "tags": "",
        "accepted": true
      },
      {
        "id": "291127",
        "title": "",
        "text": "<p>You might look at \"<a href=\"http://applied-math.org/subset.pdf\" rel=\"noreferrer\">Efficiently Enumerating the Subsets of a Set</a>\", which describes an algorithm to do part of what you want - quickly generate all subsets of N characters from length x to y.  It contains an implementation in C.  </p>\n\n<p>For each subset, you'd still have to generate all the permutations.  For instance if you wanted 3 characters from \"abcde\", this algorithm would give you \"abc\",\"abd\", \"abe\"...\nbut you'd have to permute each one to get \"acb\", \"bac\", \"bca\", etc.</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "388",
        "title": "",
        "text": "<p>I'm not sure why you would want to do this in the first place. The resulting set for any moderately large values of x and y will be huge, and will grow exponentially as x and/or y get bigger. </p>\n\n<p>Lets say your set of possible characters is the 26 lowercase letters of the alphabet, and you ask your application to generate all permutations where length = 5. Assuming you don't run out of memory you'll get 11,881,376 (i.e. 26 to the power of 5) strings back. Bump that length up to 6, and you'll get 308,915,776 strings back. These numbers get painfully large, very quickly.</p>\n\n<p>Here's a solution I put together in Java. You'll need to provide two runtime arguments (corresponding to x and y). Have fun.</p>\n\n<pre><code>public class GeneratePermutations {\n    public static void main(String[] args) {\n        int lower = Integer.parseInt(args[0]);\n        int upper = Integer.parseInt(args[1]);\n\n        if (upper &lt; lower || upper == 0 || lower == 0) {\n            System.exit(0);\n        }\n\n        for (int length = lower; length &lt;= upper; length++) {\n            generate(length, \"\");\n        }\n    }\n\n    private static void generate(int length, String partial) {\n        if (length &lt;= 0) {\n            System.out.println(partial);\n        } else {\n            for (char c = 'a'; c &lt;= 'z'; c++) {\n                generate(length - 1, partial + c);\n            }\n        }\n    }\n}\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "21298759",
        "title": "",
        "text": "<pre><code>def permutation(str)\n  posibilities = []\n  str.split('').each do |char|\n    if posibilities.size == 0\n      posibilities[0] = char.downcase\n      posibilities[1] = char.upcase\n    else\n      posibilities_count = posibilities.length\n      posibilities = posibilities + posibilities\n      posibilities_count.times do |i|\n        posibilities[i] += char.downcase\n        posibilities[i+posibilities_count] += char.upcase\n      end\n    end\n  end\n  posibilities\nend\n</code></pre>\n\n<p>Here is my take on a non recursive version</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "64961",
        "title": "",
        "text": "<p>In ruby:</p>\n\n<pre><code>str = \"a\"\n100_000_000.times {puts str.next!}\n</code></pre>\n\n<p>It is quite fast, but it is going to take some time =). Of course, you can start at \"aaaaaaaa\" if the short strings aren't interesting to you.</p>\n\n<p>I might have misinterpreted the actual question though - in one of the posts it sounded as if you just needed a bruteforce library of strings, but in the main question it sounds like you need to permutate a particular string.</p>\n\n<p>Your problem is somewhat similar to this one: <a href=\"http://beust.com/weblog/archives/000491.html\" rel=\"nofollow noreferrer\">http://beust.com/weblog/archives/000491.html</a> (list all integers in which none of the digits repeat themselves, which resulted in a whole lot of languages solving it, with the ocaml guy using permutations, and some java guy using yet another solution).</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2575419",
        "title": "",
        "text": "<p>Some working Java code based on <a href=\"https://stackoverflow.com/questions/361/generate-list-of-all-possible-permutations-of-a-string/147211#147211\">Sarp's answer</a>:</p>\n\n<pre><code>public class permute {\n\n    static void permute(int level, String permuted,\n                    boolean used[], String original) {\n        int length = original.length();\n        if (level == length) {\n            System.out.println(permuted);\n        } else {\n            for (int i = 0; i &lt; length; i++) {\n                if (!used[i]) {\n                    used[i] = true;\n                    permute(level + 1, permuted + original.charAt(i),\n                       used, original);\n                    used[i] = false;\n                }\n            }\n        }\n    }\n\n    public static void main(String[] args) {\n        String s = \"hello\";\n        boolean used[] = {false, false, false, false, false};\n        permute(0, \"\", used, s);\n    }\n}\n</code></pre>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1910",
        "title": "",
        "text": "<p>You are going to get a lot of strings, that's for sure...</p>\n\n<p><img src=\"https://www.codecogs.com/eq.latex?%5Csum_%7Bi=x%7D%5Ey%20%7B%20%5Cfrac%7Br!%7D%7B%7B(r-i)%7D!%7D%20%7D\" alt=\"\\sum_{i=x}^y{\\frac{r!}{{(r-i)}!}}\"><br>\nWhere x and y is how you define them and r is the number of characters we are selecting from --if I am understanding you correctly. You should definitely generate these as needed and not get sloppy and say, generate a powerset and then filter the length of strings.</p>\n\n<p>The following definitely isn't the best way to generate these, but it's an interesting aside, none-the-less.</p>\n\n<p>Knuth (volume 4, fascicle 2, 7.2.1.3) tells us that (s,t)-combination is equivalent to s+1 things taken t at a time with repetition -- an (s,t)-combination is notation used by Knuth that is equal to <img src=\"https://www.codecogs.com/eq.latex?%7Bt%20%5Cchoose%20%7Bs+t%7D%7D\" alt=\"{t \\choose {s+t}\">. We can figure this out by first generating each (s,t)-combination in binary form (so, of length (s+t)) and counting the number of 0's to the left of each 1.</p>\n\n<p>10001000011101 --> becomes the permutation: {0, 3, 4, 4, 4, 1}</p>\n",
        "votes": "26",
        "tags": "",
        "accepted": false
      },
      {
        "id": "217209",
        "title": "",
        "text": "<p>Here is a simple word C# recursive solution:</p>\n\n<p><strong>Method:</strong></p>\n\n<pre><code>public ArrayList CalculateWordPermutations(string[] letters, ArrayList words, int index)\n        {\n            bool finished = true;\n            ArrayList newWords = new ArrayList();\n            if (words.Count == 0)\n            {\n                foreach (string letter in letters)\n                {\n                    words.Add(letter);\n                }\n            }\n\n            for(int j=index; j&lt;words.Count; j++)\n            {\n                string word = (string)words[j];\n                for(int i =0; i&lt;letters.Length; i++)\n                {\n                    if(!word.Contains(letters[i]))\n                    {\n                        finished = false;\n                        string newWord = (string)word.Clone();\n                        newWord += letters[i];\n                        newWords.Add(newWord);\n                    }\n                }\n            }\n\n            foreach (string newWord in newWords)\n            {   \n                words.Add(newWord);\n            }\n\n            if(finished  == false)\n            {\n                CalculateWordPermutations(letters, words, words.Count - newWords.Count);\n            }\n            return words;\n        }\n</code></pre>\n\n<p><strong>Calling:</strong></p>\n\n<pre><code>string[] letters = new string[]{\"a\",\"b\",\"c\"};\nArrayList words = CalculateWordPermutations(letters, new ArrayList(), 0);\n</code></pre>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "8808091",
        "title": "",
        "text": "<p>It's better to use backtracking</p>\n\n\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid swap(char *a, char *b) {\n    char temp;\n    temp = *a;\n    *a = *b;\n    *b = temp;\n}\n\nvoid print(char *a, int i, int n) {\n    int j;\n    if(i == n) {\n        printf(\"%s\\n\", a);\n    } else {\n        for(j = i; j &lt;= n; j++) {\n            swap(a + i, a + j);\n            print(a, i + 1, n);\n            swap(a + i, a + j);\n        }\n    }\n}\n\nint main(void) {\n    char a[100];\n    gets(a);\n    print(a, 0, strlen(a) - 1);\n    return 0;\n}\n</code></pre>\n",
        "votes": "39",
        "tags": "",
        "accepted": false
      },
      {
        "id": "550628",
        "title": "",
        "text": "<p>In Perl, if you want to restrict yourself to the lowercase alphabet, you can do this:</p>\n\n<pre><code>my @result = (\"a\" .. \"zzzz\");\n</code></pre>\n\n<p>This gives all possible strings between 1 and 4 characters using lowercase characters. For uppercase, change <code>\"a\"</code> to <code>\"A\"</code> and <code>\"zzzz\"</code> to <code>\"ZZZZ\"</code>.</p>\n\n<p>For mixed-case it gets much harder, and probably not doable with one of Perl's builtin operators like that.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "11672570",
        "title": "",
        "text": "<p>c# iterative:</p>\n\n<pre><code>public List&lt;string&gt; Permutations(char[] chars)\n    {\n        List&lt;string&gt; words = new List&lt;string&gt;();\n        words.Add(chars[0].ToString());\n        for (int i = 1; i &lt; chars.Length; ++i)\n        {\n            int currLen = words.Count;\n            for (int j = 0; j &lt; currLen; ++j)\n            {\n                var w = words[j];\n                for (int k = 0; k &lt;= w.Length; ++k)\n                {\n                    var nstr = w.Insert(k, chars[i].ToString());\n                    if (k == 0)\n                        words[j] = nstr;\n                    else\n                        words.Add(nstr);\n                }\n            }\n        }\n        return words;\n    }\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "19461362",
        "title": "",
        "text": "<p>Recursive Solution with driver <code>main()</code> method.</p>\n\n<pre><code>public class AllPermutationsOfString {\npublic static void stringPermutations(String newstring, String remaining) {\n    if(remaining.length()==0)\n        System.out.println(newstring);\n\n    for(int i=0; i&lt;remaining.length(); i++) {\n        String newRemaining = remaining.replaceFirst(remaining.charAt(i)+\"\", \"\");\n        stringPermutations(newstring+remaining.charAt(i), newRemaining);\n    }\n}\n\npublic static void main(String[] args) {\n    String string = \"abc\";\n    AllPermutationsOfString.stringPermutations(\"\", string); \n}\n</code></pre>\n\n<p>}</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "4010695",
        "title": "",
        "text": "<pre><code>import java.util.*;\n\npublic class all_subsets {\n    public static void main(String[] args) {\n        String a = \"abcd\";\n        for(String s: all_perm(a)) {\n            System.out.println(s);\n        }\n    }\n\n    public static Set&lt;String&gt; concat(String c, Set&lt;String&gt; lst) {\n        HashSet&lt;String&gt; ret_set = new HashSet&lt;String&gt;();\n        for(String s: lst) {\n            ret_set.add(c+s);\n        }\n        return ret_set;\n    }\n\n    public static HashSet&lt;String&gt; all_perm(String a) {\n        HashSet&lt;String&gt; set = new HashSet&lt;String&gt;();\n        if(a.length() == 1) {\n            set.add(a);\n        } else {\n            for(int i=0; i&lt;a.length(); i++) {\n                set.addAll(concat(a.charAt(i)+\"\", all_perm(a.substring(0, i)+a.substring(i+1, a.length()))));\n            }\n        }\n        return set;\n    }\n}\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "4927100",
        "title": "",
        "text": "<p>... and here is the C version:</p>\n\n<pre><code>void permute(const char *s, char *out, int *used, int len, int lev)\n{\n    if (len == lev) {\n        out[lev] = '\\0';\n        puts(out);\n        return;\n    }\n\n    int i;\n    for (i = 0; i &lt; len; ++i) {\n        if (! used[i])\n            continue;\n\n        used[i] = 1;\n        out[lev] = s[i];\n        permute(s, out, used, len, lev + 1);\n        used[i] = 0;\n    }\n    return;\n}\n</code></pre>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6140144",
        "title": "",
        "text": "<p>This code in python, when called with <code>allowed_characters</code> set to <code>[0,1]</code> and 4 character max, would generate 2^4 results:</p>\n\n<p><code>['0000', '0001', '0010', '0011', '0100', '0101', '0110', '0111', '1000', '1001', '1010', '1011', '1100', '1101', '1110', '1111']</code></p>\n\n<pre><code>def generate_permutations(chars = 4) :\n\n#modify if in need!\n    allowed_chars = [\n        '0',\n        '1',\n    ]\n\n    status = []\n    for tmp in range(chars) :\n        status.append(0)\n\n    last_char = len(allowed_chars)\n\n    rows = []\n    for x in xrange(last_char ** chars) :\n        rows.append(\"\")\n        for y in range(chars - 1 , -1, -1) :\n            key = status[y]\n            rows[x] = allowed_chars[key] + rows[x]\n\n        for pos in range(chars - 1, -1, -1) :\n            if(status[pos] == last_char - 1) :\n                status[pos] = 0\n            else :\n                status[pos] += 1\n                break;\n\n    return rows\n\nimport sys\n\n\nprint generate_permutations()\n</code></pre>\n\n<p>Hope this is of use to you. Works with any character, not only numbers</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "20993674",
        "title": "",
        "text": "<p>There are a lot of good answers here. I also suggest a very simple recursive solution in C++.</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;typename Consume&gt;\nvoid permutations(std::string s, Consume consume, std::size_t start = 0) {\n    if (start == s.length()) consume(s);\n    for (std::size_t i = start; i &lt; s.length(); i++) {\n        std::swap(s[start], s[i]);\n        permutations(s, consume, start + 1);\n    }\n}\n\nint main(void) {\n    std::string s = \"abcd\";\n    permutations(s, [](std::string s) {\n        std::cout &lt;&lt; s &lt;&lt; std::endl;\n    });\n}\n</code></pre>\n\n<p><strong>Note</strong>: strings with repeated characters will not produce unique permutations.</p>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "69559",
        "title": "",
        "text": "<p>This is a translation of Mike's Ruby version, into Common Lisp:</p>\n\n<pre><code>(defun perms (x y original-string)\n  (loop with all = (list \"\")\n        with current-array = (list \"\")\n        for iteration from 1 to y\n        do (loop with next-array = nil\n                 for string in current-array\n                 do (loop for c across original-string\n                          for value = (concatenate 'string string (string c))\n                          do (push value next-array)\n                             (push value all))\n                    (setf current-array (reverse next-array)))\n        finally (return (nreverse (delete-if #'(lambda (el) (&lt; (length el) x)) all)))))\n</code></pre>\n\n<p>And another version, slightly shorter and using more loop facility features:</p>\n\n<pre><code>(defun perms (x y original-string)\n  (loop repeat y\n        collect (loop for string in (or (car (last sets)) (list \"\"))\n                      append (loop for c across original-string\n                                   collect (concatenate 'string string (string c)))) into sets\n        finally (return (loop for set in sets\n                              append (loop for el in set when (&gt;= (length el) x) collect el)))))\n</code></pre>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "147211",
        "title": "",
        "text": "<p>Recursive solution in C++    </p>\n\n<pre><code>int main (int argc, char * const argv[]) {\n        string s = \"sarp\";\n        bool used [4];\n        permute(0, \"\", used, s);\n}\n\nvoid permute(int level, string permuted, bool used [], string &amp;original) {\n    int length = original.length();\n\n    if(level == length) { // permutation complete, display\n        cout &lt;&lt; permuted &lt;&lt; endl;\n    } else {\n        for(int i=0; i&lt;length; i++) { // try to add an unused character\n            if(!used[i]) {\n                used[i] = true;\n                permute(level+1, original[i] + permuted, used, original); // find the permutations starting with this string\n                used[i] = false;\n            }\n        }\n}\n</code></pre>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "69612",
        "title": "",
        "text": "<p>Though this doesn't answer your question exactly, here's one way to generate every permutation of the letters from a number of strings of the same length: eg, if your words were \"coffee\", \"joomla\" and \"moodle\", you can expect output like \"coodle\", \"joodee\", \"joffle\", etc.</p>\n\n<p>Basically, the number of combinations is the (number of words) to the power of (number of letters per word). So, choose a random number between 0 and the number of combinations - 1, convert that number to base (number of words), then use each digit of that number as the indicator for which word to take the next letter from.</p>\n\n<p>eg: in the above example. 3 words, 6 letters = 729 combinations. Choose a random number: 465. Convert to base 3: 122020. Take the first letter from word 1, 2nd from word 2, 3rd from word 2, 4th from word 0... and you get... \"joofle\".</p>\n\n<p>If you wanted all the permutations, just loop from 0 to 728. Of course, if you're just choosing one random value, a much <strike>simpler</strike> less-confusing way would be to loop over the letters. This method lets you avoid recursion, should you want all the permutations, plus it makes you look like you know Maths<sup>(tm)</sup>!</p>\n\n<p>If the number of combinations is excessive, you can break it up into a series of smaller words and concatenate them at the end.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7625511",
        "title": "",
        "text": "<p>I needed this today, and although the answers already given pointed me in the right direction, they weren't quite what I wanted.</p>\n\n<p>Here's an implementation using Heap's method. The length of the array must be at least 3 and for practical considerations not be bigger than 10 or so, depending on what you want to do, patience and clock speed.</p>\n\n<p>Before you enter your loop, initialise <code>Perm(1 To N)</code> with the first permutation, <code>Stack(3 To N)</code> with zeroes*, and <code>Level</code> with <code>2</code>**. At the end of the loop call <code>NextPerm</code>,  which will return false when we're done.</p>\n\n<p>* VB will do that for you.</p>\n\n<p>** You can change NextPerm a little to make this unnecessary, but it's clearer like this.</p>\n\n<pre class=\"lang-vb prettyprint-override\"><code>Option Explicit\n\nFunction NextPerm(Perm() As Long, Stack() As Long, Level As Long) As Boolean\nDim N As Long\nIf Level = 2 Then\n    Swap Perm(1), Perm(2)\n    Level = 3\nElse\n    While Stack(Level) = Level - 1\n        Stack(Level) = 0\n        If Level = UBound(Stack) Then Exit Function\n        Level = Level + 1\n    Wend\n    Stack(Level) = Stack(Level) + 1\n    If Level And 1 Then N = 1 Else N = Stack(Level)\n    Swap Perm(N), Perm(Level)\n    Level = 2\nEnd If\nNextPerm = True\nEnd Function\n\nSub Swap(A As Long, B As Long)\nA = A Xor B\nB = A Xor B\nA = A Xor B\nEnd Sub\n\n'This is just for testing.\nPrivate Sub Form_Paint()\nConst Max = 8\nDim A(1 To Max) As Long, I As Long\nDim S(3 To Max) As Long, J As Long\nDim Test As New Collection, T As String\nFor I = 1 To UBound(A)\n    A(I) = I\nNext\nCls\nScaleLeft = 0\nJ = 2\nDo\n    If CurrentY + TextHeight(\"0\") &gt; ScaleHeight Then\n        ScaleLeft = ScaleLeft - TextWidth(\" 0 \") * (UBound(A) + 1)\n        CurrentY = 0\n        CurrentX = 0\n    End If\n    T = vbNullString\n    For I = 1 To UBound(A)\n        Print A(I);\n        T = T &amp; Hex(A(I))\n    Next\n    Print\n    Test.Add Null, T\nLoop While NextPerm(A, S, J)\nJ = 1\nFor I = 2 To UBound(A)\n    J = J * I\nNext\nIf J &lt;&gt; Test.Count Then Stop\nEnd Sub\n</code></pre>\n\n<p>Other methods are described by various authors. Knuth describes two, one gives lexical order, but is complex and slow, the other is known as the method of plain changes. Jie Gao and Dianjun Wang also wrote an interesting paper.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5082432",
        "title": "",
        "text": "<blockquote>\n  <p>permute (ABC) -> A.perm(BC) -> A.perm[B.perm(C)] -> A.perm[(<strong>*B</strong><em>C), (C</em><strong>B*</strong>)] -> [(<strong>*A</strong><em>BC), (B</em><strong>A</strong><em>C), (BC</em><strong>A*</strong>), (<strong>*A</strong><em>CB), (C</em><strong>A</strong><em>B), (CB</em><strong>A*</strong>)]\n  To remove duplicates when inserting each alphabet check to see if previous string ends with the same alphabet (why? -exercise)</p>\n</blockquote>\n\n<pre><code>public static void main(String[] args) {\n\n    for (String str : permStr(\"ABBB\")){\n        System.out.println(str);\n    }\n}\n\nstatic Vector&lt;String&gt; permStr(String str){\n\n    if (str.length() == 1){\n        Vector&lt;String&gt; ret = new Vector&lt;String&gt;();\n        ret.add(str);\n        return ret;\n    }\n\n    char start = str.charAt(0);\n    Vector&lt;String&gt; endStrs = permStr(str.substring(1));\n    Vector&lt;String&gt; newEndStrs = new Vector&lt;String&gt;();\n    for (String endStr : endStrs){\n        for (int j = 0; j &lt;= endStr.length(); j++){\n            if (endStr.substring(0, j).endsWith(String.valueOf(start)))\n                break;\n            newEndStrs.add(endStr.substring(0, j) + String.valueOf(start) + endStr.substring(j));\n        }\n    }\n    return newEndStrs;\n}\n</code></pre>\n\n<p>Prints all permutations sans duplicates</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "4134431",
        "title": "",
        "text": "<p>Non recursive solution according to Knuth, Python example:  </p>\n\n<pre><code>def nextPermutation(perm):\n    k0 = None\n    for i in range(len(perm)-1):\n        if perm[i]&lt;perm[i+1]:\n            k0=i\n    if k0 == None:\n        return None\n\n    l0 = k0+1\n    for i in range(k0+1, len(perm)):\n        if perm[k0] &lt; perm[i]:\n            l0 = i\n\n    perm[k0], perm[l0] = perm[l0], perm[k0]\n    perm[k0+1:] = reversed(perm[k0+1:])\n    return perm\n\nperm=list(\"12345\")\nwhile perm:\n    print perm\n    perm = nextPermutation(perm)\n</code></pre>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "24720609",
        "title": "",
        "text": "<p>The pythonic solution:  </p>\n\n<pre><code>from itertools import permutations\ns = 'ABCDEF'\np = [''.join(x) for x in permutations(s)]\n</code></pre>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6922856",
        "title": "",
        "text": "<p>Here's a non-recursive version I came up with, in javascript.\nIt's not based on Knuth's non-recursive one above, although it has some similarities in element swapping.\nI've verified its correctness for input arrays of up to 8 elements.</p>\n\n<p>A quick optimization would be pre-flighting the <code>out</code> array and avoiding <code>push()</code>.</p>\n\n<p>The basic idea is:</p>\n\n<ol>\n<li><p>Given a single source array, generate a first new set of arrays which swap the first element with each subsequent element in turn, each time leaving the other elements unperturbed.\neg: given 1234, generate 1234, 2134, 3214, 4231.</p></li>\n<li><p>Use each array from the previous pass as the seed for a new pass,\nbut instead of swapping the first element, swap the second element with each subsequent element. Also, this time, don't include the original array in the output.</p></li>\n<li><p>Repeat step 2 until done.</p></li>\n</ol>\n\n<p>Here is the code sample:</p>\n\n<pre><code>function oxe_perm(src, depth, index)\n{\n    var perm = src.slice();     // duplicates src.\n    perm = perm.split(\"\");\n    perm[depth] = src[index];\n    perm[index] = src[depth];\n    perm = perm.join(\"\");\n    return perm;\n}\n\nfunction oxe_permutations(src)\n{\n    out = new Array();\n\n    out.push(src);\n\n    for (depth = 0; depth &lt; src.length; depth++) {\n        var numInPreviousPass = out.length;\n        for (var m = 0; m &lt; numInPreviousPass; ++m) {\n            for (var n = depth + 1; n &lt; src.length; ++n) {\n                out.push(oxe_perm(out[m], depth, n));\n            }\n        }\n    }\n\n    return out;\n}\n</code></pre>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3178268",
        "title": "",
        "text": "<p>Here is a simple solution in C#.</p>\n\n<p>It generates only the distinct permutations of a given string.</p>\n\n<pre><code>    static public IEnumerable&lt;string&gt; permute(string word)\n    {\n        if (word.Length &gt; 1)\n        {\n\n            char character = word[0];\n            foreach (string subPermute in permute(word.Substring(1)))\n            {\n\n                for (int index = 0; index &lt;= subPermute.Length; index++)\n                {\n                    string pre = subPermute.Substring(0, index);\n                    string post = subPermute.Substring(index);\n\n                    if (post.Contains(character))\n                            continue;                       \n\n                    yield return pre + character + post;\n                }\n\n            }\n        }\n        else\n        {\n            yield return word;\n        }\n    }\n</code></pre>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "31086857",
        "title": "",
        "text": "<p>Well here is an elegant, non-recursive, O(n!) solution:</p>\n\n<pre><code>public static StringBuilder[] permutations(String s) {\n        if (s.length() == 0)\n            return null;\n        int length = fact(s.length());\n        StringBuilder[] sb = new StringBuilder[length];\n        for (int i = 0; i &lt; length; i++) {\n            sb[i] = new StringBuilder();\n        }\n        for (int i = 0; i &lt; s.length(); i++) {\n            char ch = s.charAt(i);\n            int times = length / (i + 1);\n            for (int j = 0; j &lt; times; j++) {\n                for (int k = 0; k &lt; length / times; k++) {\n                    sb[j * length / times + k].insert(k, ch);\n                }\n            }\n        }\n        return sb;\n    }\n</code></pre>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "364",
        "title": "",
        "text": "<p>I just whipped this up quick in Ruby:</p>\n\n<pre><code>def perms(x, y, possible_characters)\n  all = [\"\"]\n  current_array = all.clone\n  1.upto(y) { |iteration|\n    next_array = []\n    current_array.each { |string|\n      possible_characters.each { |c|\n        value = string + c\n        next_array.insert next_array.length, value\n        all.insert all.length, value\n      }\n    }\n    current_array = next_array\n  }\n  all.delete_if { |string| string.length &lt; x }\nend\n</code></pre>\n\n<p>You might look into language API for built in permutation type functions, and you might be able to write more optimized code, but if the numbers are all that high, I'm not sure there is much of a way around having a lot of results.</p>\n\n<p>Anyways, the idea behind the code is start with string of length 0, then keep track of all the strings of length Z where Z is the current size in the iteration.  Then, go through each string and append each character onto each string.  Finally at the end, remove any that were below the x threshold and return the result.</p>\n\n<p>I didn't test it with potentially meaningless input (null character list, weird values of x and y, etc).</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "10238654",
        "title": "",
        "text": "<p>Ruby answer that works:</p>\n\n<pre><code>class String\n  def each_char_with_index\n    0.upto(size - 1) do |index|\n      yield(self[index..index], index)\n    end\n  end\n  def remove_char_at(index)\n    return self[1..-1] if index == 0\n    self[0..(index-1)] + self[(index+1)..-1]\n  end\nend\n\ndef permute(str, prefix = '')\n  if str.size == 0\n    puts prefix\n    return\n  end\n  str.each_char_with_index do |char, index|\n    permute(str.remove_char_at(index), prefix + char)\n  end\nend\n\n# example\n# permute(\"abc\")\n</code></pre>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "371",
    "url": "https://stackoverflow.com/questions/371",
    "title": "How do you make sure email you send programmatically is not automatically marked as spam?",
    "text:": "<p>This is a tricky one and I've always relied on techniques, such as permission-based emails (i.e. only sending to people you have permission to send to) and not using blatantly <em>spamish</em> terminology.</p>\n\n<p>Of late, some of the emails I send out programmatically have started being shuffled into people's spam folder automatically and I'm wondering what I can do about it.</p>\n\n<p>This is despite the fact that these particular emails are not ones that humans would mark as spam, specifically, they are emails that contain license keys that people have paid good money for, so I don't think they're going to consider them spam</p>\n\n<p>I figure this is a big topic in which I am essentially an ignorant simpleton.</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      [
        "Go to your account now: <a href=\"http://www.paypal.com.phishers-anonymous.org/\">http://www.paypal.com</a>\n",
        "Go to your account now: <a href=\"http://www.yourdomain.org/\">http://www.yourdomain.org</a>\n",
        "<a href=\"http://www.yourdomain.org/\">Click here to go to your account</a>\n"
      ],
      [
        "mail($to,$subject,$message,$headers); // Wrong way\n",
        "Return-Path: <your-website-user@server.host.com>\nFrom: <your-website-user@domain.com>\n",
        "mail($to,$subject,$message,$headers, '-r bounce_email@domain.com'); // Right way\n",
        "Return-Path: <bounce_email@domain.com>\nFrom: <your-website-user@domain.com>\n"
      ],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "436",
    "tags": "<email><email-spam>",
    "AcceptedAnswerId": "396",
    "answers": [
      {
        "id": "7461",
        "title": "",
        "text": "<p>one of my application's emails was constantly being tagged as spam.  it was html with a single link, which i sent as html in the body with a text/html content type.</p>\n\n<p>my most successful resolution to this problem was to compose the email so it looked like it was generated by an email client.</p>\n\n<p>i changed the email to be a multipart/alternative mime document and i now generate both text/plain and text/html parts.</p>\n\n<p>the email no longer is detected as junk by outlook.</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "693",
        "title": "",
        "text": "<p>I've found that using the recipients real first and last name in the body is a sure fire way of getting through a spam filter.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "9775",
        "title": "",
        "text": "<p>In the UK it's also best practice to include a real physical address for your company and its registered number.</p>\n\n<p>That way it's all open and honest and they're less likely to manually mark it as spam.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "9813",
        "title": "",
        "text": "<p>Delivering email can be like black magic sometimes.  The reverse DNS is really important.  </p>\n\n<p>I have found it to be very helpful to carefully track NDRs.  I direct all of my NDRs to a single address and I have a windows service parsing them out (Google ListNanny).  I put as much information from the NDR as I can into a database, and then I run reports on it to see if I have suddenly started getting blocked by a certain domain.  Also, you should avoid sending emails to addresses that were previously marked as NDR, because that's generally a good indication of spam.</p>\n\n<p>If you need to send out a bunch of customer service emails at once, it's best to put a delay in between each one, because if you send too many nearly identical emails to one domain at a time, you are sure to wind up on their blacklist.</p>\n\n<p>Some domains are just impossible to deliver to sometimes.  Comcast.net is the worst.  </p>\n\n<p>Make sure your IPs aren't listed on sites like <a href=\"http://www.mxtoolbox.com/blacklists.aspx\" rel=\"noreferrer\">http://www.mxtoolbox.com/blacklists.aspx</a>.</p>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "275016",
        "title": "",
        "text": "<p>I hate to tell you, but I and others may be using white-list defaults to control our filtering of spam.</p>\n\n<p>This means that all e-mail from an unknown source is automatically spam and diverted into a spam folder.  (I don't let my e-mail service delete spam, because I want to always review the arrivals for false positives, something that is pretty easy to do by a quick scan of the folder.)</p>\n\n<p>I even have e-mail from myself go to the spam bucket because (1) I usually don't send e-mail to myself and (2) there are spammers that fake my return address in spam sent to me.</p>\n\n<p>So to get out of the spam designation, I have to consider that your mail might be legitimate (from sender and subject information) and open it first in plaintext (my default for all incoming mail, spam or not) to see if it is legitimate.  My spam folder will not use any links in e-mails so I am protected against tricky image links and other misbehavior.</p>\n\n<p>If I want future arrivals from the same source to go to my in box and not be diverted for spam review, I will specify that to my e-mail client.  For those organizations that use bulk-mail forwarders and unique sender addresses per mail piece, that's too bad.  They never get my approval and always show up in my spam folder, and if I'm busy I will never look at them.</p>\n\n<p>Finally, if an e-mail is not legible in plaintext, even when sent as HTML, I am likely to just delete it unless it is something that I know is of interest to me by virtue of the source and previous valuable experiences.</p>\n\n<p>As you can see, it is ultimately under an users control and there is no automated act that will convince such a system that your mail is legitimate from its structure alone.  In this case, you need to play nice, don't do anything that is similar to phishing, and make it easy for users willing to trust your mail to add you to their white list.</p>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "12715357",
        "title": "",
        "text": "<p>In addition to all of the other answers, if you are sending HTML emails that contain URLs as linking text, make sure that the URL matches the linking text. I know that Thunderbird automatically flags them as being a scam if not.</p>\n\n<p>The wrong way:</p>\n\n<pre><code>Go to your account now: &lt;a href=\"http://www.paypal.com.phishers-anonymous.org/\"&gt;http://www.paypal.com&lt;/a&gt;\n</code></pre>\n\n<p>The right way:</p>\n\n<pre><code>Go to your account now: &lt;a href=\"http://www.yourdomain.org/\"&gt;http://www.yourdomain.org&lt;/a&gt;\n</code></pre>\n\n<p>Or use an unrelated linking text instead of a URL:</p>\n\n<pre><code>&lt;a href=\"http://www.yourdomain.org/\"&gt;Click here to go to your account&lt;/a&gt;\n</code></pre>\n",
        "votes": "16",
        "tags": "",
        "accepted": false
      },
      {
        "id": "57564315",
        "title": "",
        "text": "<p>To allow <strong>DMARC</strong> checks for SPF to pass and also be <strong>aligned</strong> when using sendmail, make sure you are setting the envelope sender address (<code>-f</code> or <code>-r</code> parameter) to something that matches the domain in the <code>From:</code> header address.</p>\n\n<h2>With PHP:</h2>\n\n<p>Using PHP's built-in <code>mail()</code> function without setting the 5th paramater will cause DMARC SPF checks to be unaligned if not done correctly. By default, sendmail will send the email with the webserver's user as the <a href=\"https://tools.ietf.org/html/rfc5321\" rel=\"nofollow noreferrer\">RFC5321</a>.MailFrom / Return Path header.</p>\n\n<p>For example, say you are hosting your website <code>domain.com</code> on the <code>host.com</code> web server. If you do not set the additional parameters parameter:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>mail($to,$subject,$message,$headers); // Wrong way\n</code></pre>\n\n<p>The email recipient will receive an email with the following mail headers:</p>\n\n<pre><code>Return-Path: &lt;your-website-user@server.host.com&gt;\nFrom: &lt;your-website-user@domain.com&gt;\n</code></pre>\n\n<p>Even though this passes SPF checks, it will be unaligned (since domain.com and host.com do not match), which means that DMARC SPF check will fail as unaligned.</p>\n\n<p>Instead, you <strong>must</strong> pass the envelope sender address to sendmail by including the 5th parameter in the PHP <code>mail()</code> function, for example:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>mail($to,$subject,$message,$headers, '-r bounce_email@domain.com'); // Right way\n</code></pre>\n\n<p>In this case, the email recipient will receive an email with the following mail headers:</p>\n\n<pre><code>Return-Path: &lt;bounce_email@domain.com&gt;\nFrom: &lt;your-website-user@domain.com&gt;\n</code></pre>\n\n<p>Since both of these headers contain addresses from <code>domain.com</code>, SPF will pass and also be aligned, which means that DMARC will also pass the SPF check.</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "396",
        "title": "",
        "text": "<p>Use email authentication methods, such as <a href=\"http://en.wikipedia.org/wiki/Sender_Policy_Framework\" rel=\"noreferrer\">SPF</a>, and <a href=\"https://help.ubuntu.com/community/Postfix/DKIM\" rel=\"noreferrer\">DKIM</a> to prove that your emails and your domain name belong together, and to prevent spoofing of your domain name. The SPF website includes a wizard to generate the DNS information for your site.</p>\n\n<p><a href=\"http://remote.12dt.com/\" rel=\"noreferrer\">Check</a> your <a href=\"http://en.wikipedia.org/wiki/Reverse_DNS_lookup\" rel=\"noreferrer\">reverse DNS</a> to make sure the IP address of your mail server points to the domain name that you use for sending mail.</p>\n\n<p>Make sure that the IP-address that you're using is <a href=\"http://www.spamhaus.org/lookup.lasso\" rel=\"noreferrer\">not on a blacklist</a></p>\n\n<p>Make sure that the reply-to address is a valid, existing address.</p>\n\n<p>Use the full, real name of the addressee in the To field, not just the email-address (e.g. <code>\"John Smith\" &lt;john@blacksmiths-international.com&gt;</code> ).</p>\n\n<p>Monitor your abuse accounts, such as abuse@yourdomain.com and postmaster@yourdomain.com. That means - make sure that these accounts exist, read what's sent to them, and act on complaints.</p>\n\n<p>Finally, make it <strong>really</strong> easy to unsubscribe. Otherwise, your users will unsubscribe by pressing the <strong>spam</strong> button, and that will affect your reputation.</p>\n\n<p>That said, getting Hotmail to accept your emails remains a black art.</p>\n",
        "votes": "339",
        "tags": "",
        "accepted": true
      },
      {
        "id": "576",
        "title": "",
        "text": "<p>Sign up for an account on as many major email providers as possible (gmail/yahoo/hotmail/aol/etc). If you make changes to your emails, either major rewording, changes to the code that sends the emails, changes to your email servers, etc, make sure to send test messages to all your accounts and verify that they are not being marked as spam.</p>\n",
        "votes": "30",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2579555",
        "title": "",
        "text": "<p>A few bullet points from a <a href=\"https://stackoverflow.com/questions/1658043/troubleshooting-php-mail/1658064#1658064\">previous answer</a>:</p>\n\n<ul>\n<li><p><strong>Most important:</strong> Does the sender address (\"From\") belong to a domain that runs on the server you send the E-Mail from? If not, make it so. Never use sender addresses like <code>xxx@gmail.com</code>. User <code>reply-to</code> if you need replies to arrive at a different address.</p></li>\n<li><p>Is your server on a blacklist (e.g. check IP on spamhaus.org)? This is a possibility when you're on shared hosting when neighbours behave badly. </p></li>\n<li><p>Are mails filtered by a spam filter? Open an account with a freemailer that has a spam folder and find out. Also, try sending mail to an address without any spam filtering at all. </p></li>\n<li><p>Do you possibly need the fifth parameter \"-f\" of mail() to add a sender address? (See mail() command in the PHP manual)</p></li>\n<li><p>If you have access to log files, check those, of course.</p></li>\n<li>Do you check the \"from:\" address for possible bounce mails (\"Returned to sender\")? You can also set up a separate \"errors-to\" address.</li>\n</ul>\n",
        "votes": "24",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3889",
        "title": "",
        "text": "<p>I have had the same problem in the past on many sites I have done here at work. The only guaranteed method of making sure the user gets the email is to advise the user to add you to there safe list. Any other method is really only going to be something that can help with it and isn't guaranteed.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "48076275",
        "title": "",
        "text": "<p>Google has a tool and guidelines for this. You can find them on:  <a href=\"https://postmaster.google.com/\" rel=\"nofollow noreferrer\">https://postmaster.google.com/</a> Register and verify your domain name and Google provides an individual scoring of that IP-address and domain.</p>\n\n<p>From the <a href=\"https://support.google.com/mail/answer/81126\" rel=\"nofollow noreferrer\">bulk senders guidelines</a>:</p>\n\n<p>Authentication ensures that your messages can be correctly classified. Emails that lack authentication are likely to be rejected or placed in the spam folder, given the high likelihood that they are forged messages used for phishing scams. In addition, unauthenticated emails with attachments may be outrightly rejected, for security reasons.</p>\n\n<p>To ensure that Gmail can identify you:</p>\n\n<ul>\n<li>Use a consistent IP address to send bulk mail.</li>\n<li>Keep valid reverse DNS records for the IP address(es) from which you send mail, pointing to your domain.</li>\n<li><p>Use the same address in the 'From:' header on every bulk mail you send.\nWe also recommend the following:</p></li>\n<li><p>Sign messages with DKIM. We do not authenticate messages signed with keys using fewer than 1024 bits.</p></li>\n<li>Publish an SPF record.</li>\n<li>Publish a DMARC policy.</li>\n</ul>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "44775378",
        "title": "",
        "text": "<p>I always use:\n<a href=\"https://www.mail-tester.com/\" rel=\"nofollow noreferrer\">https://www.mail-tester.com/</a></p>\n\n<p>It gives me feedback on the technical part of sending an e-mail. Like SPF-records, DKIM, Spamassassin score and so on. Even though I know what is required, I continuously make errors and mail-tester.com makes it easy to figure out what could be wrong. </p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "36840",
        "title": "",
        "text": "<p>I would add :</p>\n\n<p>Provide real unsubscription upon click on \"Unsubscribe\". I've seen real newsletters providing a dummy unsubscription link that upon click shows \" has been unsubscribed successfully\" but I will still receive further newsletters.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "41915740",
        "title": "",
        "text": "<p>It could very well be the case that people who sign up for your service are entering emails with typing mistakes that you do not correct. For example: chris@<strong>gmial.com</strong> -or- james@<strong>hotnail.com</strong>.</p>\n\n<p>And such domains are configured to be used as <em>spamtraps</em> which will automatically flag your email server's IP and/or domain and hurt its reputation.</p>\n\n<p>To avoid this, do a double-check for the email address that is entered upon your product subscription. Also, send a confirmation email to really ensure that this email address is 100% validated by a human being that is entering the confirmation email, before you send them the product key or accept their subscription. The verification email should require the recipient to click a link or reply in order to really confirm that the owner of the mailbox is the person who signed up.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "375",
        "title": "",
        "text": "<p>You can tell your users to add your From address to their contacts when they complete their order, which, if they do so, will help a lot.</p>\n\n<p>Otherwise, I would try to get a log from some of your users. Sometimes they have details about why it was flagged as spam in the headers of the message, which you could use to tweak the text.</p>\n\n<p>Other things you can try:</p>\n\n<ul>\n<li>Put your site name or address in the subject</li>\n<li>Keep all links in the message pointing to your domain (and not email.com)</li>\n<li>Put an address or other contact information in the email</li>\n</ul>\n",
        "votes": "26",
        "tags": "",
        "accepted": false
      },
      {
        "id": "451",
        "title": "",
        "text": "<p>Yahoo uses a method called Sender ID, which can be configured at <a href=\"http://old.openspf.org/wizard.html?mydomain=stackoverflow.com\" rel=\"nofollow noreferrer\">The SPF Setup Wizard</a> and entered in to your DNS.  Also one of the important ones for Exchange, Hotmail, AOL, Yahoo, and others is to have a Reverse DNS for your domain.  Those will knock out most of the issues.  However you can never prevent a person intentionally blocking your or custom rules.</p>\n",
        "votes": "14",
        "tags": "",
        "accepted": false
      },
      {
        "id": "243289",
        "title": "",
        "text": "<p>It sounds like you are depending on some feedback to determine what is getting stuck on the receiving end. You should be checking the outbound mail yourself for obvious \"spaminess\".</p>\n\n<p>Buy any decent spam control system, and send your outbound mail through it. If you send any decent volume of mail, you should be doing this anyhow, because of the risk of sending outbound viruses, especially if you have desktop windows users.</p>\n\n<p>Proofpoint had spam + anti-virus + some reputation services in a single deployment, for example. (I used to work there, so I happen to know this off the top of my head. I'm sure other vendors in this space have similar features.) But you get the idea. If you send your mail through a basic commerical spam control setup, and it doesn't pass, it shouldn't be going out of your network.</p>\n\n<p>Also, there are some companies that can assist you with increasing delivery rates of non-spam, outbound email, like Habeas.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3010",
        "title": "",
        "text": "<p>You need a reverse DNS entry. You need to not send the same content to the same user twice. You need to test it with some common webmail and email clients.\nPersonally I ran mine through a freshly installed spam assassin, a trained spam assassin, and multiple hotmail, gmail, and aol accounts.</p>\n\n<p>But have you seen that spam that doesn't seem to link to or advertise anything? That's a spammer trying to affect your Bayesian filter. If he can get a high rating and then include some words that would be in his future emails it might be automatically learned as good.  So you can't really guess what a user's filter is going to be set as at the time of your mailing.</p>\n\n<p>Lastly, I did not sort my list by the domains, but randomized it.</p>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3526",
        "title": "",
        "text": "<p>You may consider a third party email service who handles delivery issues:</p>\n\n<ul>\n<li>Exact Target</li>\n<li>Vertical Response</li>\n<li>Constant Contact</li>\n<li>Campaign Monitor</li>\n<li>Emma</li>\n<li>Return Path</li>\n<li>IntelliContact</li>\n<li>SilverPop</li>\n</ul>\n",
        "votes": "16",
        "tags": "",
        "accepted": false
      },
      {
        "id": "10658382",
        "title": "",
        "text": "<p>The most important thing you can do is to make sure that the people you are sending email to are not likely going to hit the \"Spam\" button when they receive your email. So, stick to the following rules of thumb:</p>\n\n<ul>\n<li><p>Make sure you have permission from the people you are sending email to. Don't ever send email to someone who did not request it from you.</p></li>\n<li><p>Clearly identify who you are right at the top of each message, and why the person is receiving the email.</p></li>\n<li><p>At least once a month, send out a reminder email to people on your list (if you are running a list), forcing them to opt back in to the list in order to keep receiving communications from you. Yes, this will mean your list gets shorter over time, but the up-side is that the people on your list are \"bought in\" and will be less likely to flag your email.</p></li>\n<li><p>Keep your content highly relevant and useful.</p></li>\n<li><p>Give people an easy way to opt out of further communications.</p></li>\n<li><p>Use an email sending service like SendGrid that works hard to maintain a good IP reputation.</p></li>\n<li><p>Avoid using short links - these are often blacklisted.</p></li>\n</ul>\n\n<p>Following these rules of thumb will go a long way.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "598",
        "title": "",
        "text": "<p>Confirm that you have the correct email address before sending out emails. If someone gives the wrong email address on sign-up, beat them over the head about it ASAP.</p>\n\n<p>Always include clear \"how to unsubscribe\" information in EVERY email. Do not require the user to login to unsubscribe, it should be a unique url for 1-click unsubscribe.</p>\n\n<p>This will prevent people from marking your mails as spam because \"unsubscribing\" is too hard.</p>\n",
        "votes": "22",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "387",
    "url": "https://stackoverflow.com/questions/387",
    "title": "Lucene Score results",
    "text:": "<p>In Lucene if you had multiple indexes that covered only one partition each. Why does the same search on different indexes return results with different scores? The results from different servers match exactly. </p>\n\n<p>i.e. if I searched for :</p>\n\n<ul>\n<li>Name - John Smith</li>\n<li>DOB - 11/11/1934</li>\n</ul>\n\n<p><strong>Partition 0</strong> would return a score of 0.345</p>\n\n<p><strong>Partition 1</strong> would return a score of 0.337</p>\n\n<p>Both match exactly on name and DOB.</p>\n",
    "codes": [
      [],
      [],
      []
    ],
    "votes:": "43",
    "tags": "<search><lucene>",
    "AcceptedAnswerId": "",
    "answers": [
      {
        "id": "551",
        "title": "",
        "text": "<p>You may also be interested in the output of the <a href=\"https://lucene.apache.org/core/3_6_2/api/all/org/apache/lucene/search/IndexSearcher.html#explain(org.apache.lucene.search.Query,%20int)\" rel=\"noreferrer\"><code>explain()</code> method</a>, and the resulting <a href=\"https://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/Explanation.html\" rel=\"noreferrer\"><code>Explanation</code> object</a>, which will give you an idea of how things are scored the way they are.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "391",
        "title": "",
        "text": "<p>The <a href=\"http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/Similarity.html\" rel=\"noreferrer\">scoring</a> contains the Inverse Document Frequency(IDF). If the term \"John Smith\" is in one partition, 0, 100 times and in partition 1, once. The score for searching for John Smith would be higher search in partition 1 as the term is more scarce.</p>\n\n<p>To get round this you would wither have to have your index being over all partitions, or you would need to override the IDF.</p>\n",
        "votes": "19",
        "tags": "",
        "accepted": false
      },
      {
        "id": "392",
        "title": "",
        "text": "<p>Because the score is determined on the index if I am not completely mistaken. </p>\n\n<p>If you have different indexes (more/less or different data that was indexed), the score will differ:</p>\n\n<p><a href=\"http://lucene.apache.org/core/3_6_0/scoring.html\" rel=\"noreferrer\">http://lucene.apache.org/core/3_6_0/scoring.html</a></p>\n\n<p>(Warning: Contains Math :-))</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "402",
    "url": "https://stackoverflow.com/questions/402",
    "title": "iPhone app in landscape mode, 2008 systems",
    "text:": "<p>Please note that this question is from 2008 and now is of only historic interest.</p>\n\n<hr>\n\n<p>What's the best way to create an iPhone application that runs in landscape mode from the start, regardless of the position of the device?</p>\n\n<p>Both programmatically and using the Interface Builder.</p>\n",
    "codes": [
      [
        "<key>UIInterfaceOrientation</key>\n<string>UIInterfaceOrientationLandscapeRight</string>\n",
        "CGAffineTransform rotate = CGAffineTransformMakeRotation(1.57079633);\n[window setTransform:rotate];\n\nCGRect contentRect = CGRectMake(0, 0, 480, 320); \nwindow.bounds = contentRect; \n[window setCenter:CGPointMake(160.0f, 240.0f)]; \n"
      ],
      [
        "[window addSubview:happyThing.view];\n[window makeKeyAndVisible];\n"
      ],
      [],
      [
        "- (void)viewWillAppear:(BOOL)animated\n{\n if ( dummy != nil ) {\n  [dummy setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];\n  [self presentModalViewController:dummy animated:NO];\n  [dummy release];\n  dummy = nil;\n }\n...\n}\n"
      ],
      [
        "[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight];\n"
      ],
      [
        "- (void)applicationDidFinishLaunchingUIApplication *)application {\n    application.statusBarOrientation = UIInterfaceOrientationLandscapeRight;\n}\n",
        "[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight];\n",
        "[application setStatusBarOrientation: UIInterfaceOrientationLandscapeRight animated:NO];\n"
      ],
      [
        "<key>UIInterfaceOrientation</key>\n<string>UIInterfaceOrientationLandscapeRight</string>\n"
      ],
      []
    ],
    "votes:": "100",
    "tags": "<ios><objective-c><landscape>",
    "AcceptedAnswerId": "2530953",
    "answers": [
      {
        "id": "1773197",
        "title": "",
        "text": "<p>First I set in info.plist</p>\n\n<pre><code>&lt;key&gt;UIInterfaceOrientation&lt;/key&gt;\n&lt;string&gt;UIInterfaceOrientationLandscapeRight&lt;/string&gt;\n</code></pre>\n\n<p>then I put this code in applicationDidFinishLaunching:</p>\n\n<pre><code>CGAffineTransform rotate = CGAffineTransformMakeRotation(1.57079633);\n[window setTransform:rotate];\n\nCGRect contentRect = CGRectMake(0, 0, 480, 320); \nwindow.bounds = contentRect; \n[window setCenter:CGPointMake(160.0f, 240.0f)]; \n</code></pre>\n\n<p>This way I can work on the view in Interface Builder in landscape mode.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2530953",
        "title": "",
        "text": "<h1>Historic answer only. Spectacularly out of date.</h1>\n\n<p>Please note that this answer is now hugely out of date/</p>\n\n<p>This answer is <strong>only a historical curiosity</strong>.</p>\n\n<hr>\n\n<p>Exciting news! As discovered by Andrew below, this problem has been fixed by Apple in 4.0+.</p>\n\n<p>It would appear it is NO longer necessary to force the size of the view on every view, and the specific serious problem of landscape \"only working the first time\" has been resolved.</p>\n\n<p>As of April 2011, it is not possible to test or even build anything below 4.0, so the question is purely a historic curiosity.  It's incredible how much trouble it caused developers for so long!</p>\n\n<hr>\n\n<p>Here is the original discussion and solution. This is utterly irrelevant now, as these systems are not even operable.</p>\n\n<hr>\n\n<p>It is EXTREMELY DIFFICULT to make this work fully -- there are at least three problems/bugs at play.</p>\n\n<p>try this .. <a href=\"http://www.iphonedevsdk.com/forum/iphone-sdk-development/7366-interface-builder-landscape-design.html#post186977\" rel=\"nofollow noreferrer\">interface builder landscape design</a></p>\n\n<p>Note in particular that where it says <em>\"and you need to use shouldAutorotateToInterfaceOrientation properly everywhere\"</em> it means everywhere, all your fullscreen views.</p>\n\n<p>Hope it helps in this nightmare!</p>\n\n<p>An important reminder of the ADDITIONAL well-known problem at hand here: if you are trying to swap between <strong><em>MORE THAN ONE</em></strong> view (all landscape), <strong><em>IT SIMPLY DOES NOT WORK</em></strong>.  It is essential to remember this or you will waste days on the problem. It is literally NOT POSSIBLE. It is the biggest open, known, bug on the iOS platform. There is literally no way to make the hardware make the second view you load, be landscape. The annoying but simple workaround, and what you must do, is have a trivial master UIViewController that does nothing but sit there and let you swap between your views.</p>\n\n<p>In other words, in iOS because of a major know bug:</p>\n\n<pre><code>[window addSubview:happyThing.view];\n[window makeKeyAndVisible];\n</code></pre>\n\n<p><strong><em>You can do that only once</em></strong>. Later, if you try to remove happyThing.view, and instead put in there newThing.view, IT DOES NOT WORK - AND THAT'S THAT. The machine will never rotate the view to landscape. There is no trick fix, even Apple cannot make it work. The workaround you must adopt is having an overall UIViewController that simply sits there and just holds your various views (happyThing, newThing, etc). Hope it helps!</p>\n",
        "votes": "50",
        "tags": "",
        "accepted": true
      },
      {
        "id": "2787997",
        "title": "",
        "text": "<p><em>Summary and integration from all the posts, after testing it myself; check the update for 4.x, 5.x below.</em></p>\n\n<p>As of 3.2 you cannot change the orientation of a running application from code.</p>\n\n<p>But you can start an application with a fixed orientation, although doing so this is not straightforward. </p>\n\n<p>Try with this recipe:</p>\n\n<ol>\n<li>set your orientation to <code>UISupportedInterfaceOrientations</code> in the <code>Info.plist</code> file</li>\n<li>in your window define a 480x320 \"base view controller\". Every other view will be added as a subview to its view.</li>\n<li>in all view controllers set up the <code>shouldAutorotateToInterfaceOrientation:</code> method (to return the same value you defined in the plist, of course)</li>\n<li><p>in all view controllers set a background view with </p>\n\n<p><code>self.view.frame = CGRectMake(0, 0, 480, 320)</code> </p>\n\n<p>in the <code>viewDidLoad</code> method.</p></li>\n</ol>\n\n<p><strong>Update (iOS 4.x, 5.x)</strong>: the Apple iOS App Programming Guide has a \"Launching in Landscape Mode\" paragraph in the \"Advanced App Tricks\" chapter.</p>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"http://www.iphonedevsdk.com/forum/iphone-sdk-development/7366-interface-builder-landscape-design.html#post186977\" rel=\"noreferrer\">interface builder landscape design</a></li>\n<li><a href=\"http://www.iphonedevsdk.com/forum/iphone-sdk-development/7366-interface-builder-landscape-design.html#post190014\" rel=\"noreferrer\">interface builder landscape design-1</a></li>\n</ul>\n",
        "votes": "28",
        "tags": "",
        "accepted": false
      },
      {
        "id": "4290617",
        "title": "",
        "text": "<p>I'm surprised no one has come up with this answer yet:</p>\n\n<p>In all my tests when a dismissing a modal view controller the parent view controller's preferred orientation set in <code>shouldAutorotateToInterfaceOrientation</code> is honored even when part of a UINavigationController. So the solution to this is simple:</p>\n\n<p>Create a dummy UIViewController with a UIImageView for a background. Set the image to the default.png image your app uses on startup.</p>\n\n<p>When <code>viewWillAppear</code> gets called in your root view controller, just present the dummy view controller without animation.</p>\n\n<p>when <code>viewDidAppear</code> gets called in your dummy view controller, dismiss the view controller with a nice cross dissolve animation.</p>\n\n<p>Not only does this work, but it looks good! BTW, just for clarification i do the root view controller's <code>viewWillAppear</code> like this:</p>\n\n<pre><code>- (void)viewWillAppear:(BOOL)animated\n{\n if ( dummy != nil ) {\n  [dummy setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];\n  [self presentModalViewController:dummy animated:NO];\n  [dummy release];\n  dummy = nil;\n }\n...\n}\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5209365",
        "title": "",
        "text": "<p>See this answer: <a href=\"https://stackoverflow.com/questions/2647786/landscape-mode-only-for-iphone-or-ipad/2647807#2647807\">Landscape Mode ONLY for iPhone or iPad</a></p>\n\n<ol>\n<li>add orientation to plist</li>\n<li>shouldAutorotateToInterfaceOrientation = YES in all files</li>\n</ol>\n\n<p>Although if you're using mixed modes, you might be better off with </p>\n\n<pre><code>[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight];\n</code></pre>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "36899",
        "title": "",
        "text": "<p>sasb's and michaelpryor's answer appears to be correct, but if it's not working for you, try this alternative:</p>\n\n<pre><code>- (void)applicationDidFinishLaunchingUIApplication *)application {\n    application.statusBarOrientation = UIInterfaceOrientationLandscapeRight;\n}\n</code></pre>\n\n<p>Or this one:</p>\n\n<pre><code>[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight];\n</code></pre>\n\n<p>Or this one:</p>\n\n<pre><code>[application setStatusBarOrientation: UIInterfaceOrientationLandscapeRight animated:NO];\n</code></pre>\n\n<p>You may also have to call <code>window makeKeyAndVisible;</code> first.</p>\n\n<p>A few links: <a href=\"http://www.iphonedevsdk.com/forum/iphone-sdk-development/1664-developing-landscape-mode.html\" rel=\"nofollow noreferrer\">Developing in landscape mode</a>, <a href=\"http://discussions.apple.com/thread.jspa?threadID=1454154&amp;tstart=135\" rel=\"nofollow noreferrer\">iPhone SDK: How to force Landscape mode only?</a></p>\n\n<p>@Robert: please refer to <a href=\"https://stackoverflow.com/questions/23482/the-iphone-sdk-nda-and-stack-overflow\">The iPhone SDK, NDA, and Stack Overflow</a>.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "36884",
        "title": "",
        "text": "<p>From the Apple Dev Site:</p>\n\n<blockquote>\n  <p>To start your application in landscape\n  mode so that the status bar is in the\n  appropriate position immediately, edit\n  your Info.plist file to add the\n  UIInterfaceOrientation key with the\n  appropriate value\n  (UIInterfaceOrientationLandscapeRight\n  or\n  UIInterfaceOrientationLandscapeLeft),\n  as shown in Listing 2.</p>\n  \n  <p>Listing 2: Starting your application\n  in landscape mode</p>\n\n<pre><code>&lt;key&gt;UIInterfaceOrientation&lt;/key&gt;\n&lt;string&gt;UIInterfaceOrientationLandscapeRight&lt;/string&gt;\n</code></pre>\n</blockquote>\n",
        "votes": "45",
        "tags": "",
        "accepted": false
      },
      {
        "id": "44876",
        "title": "",
        "text": "<p>The latest iPhone OS Programming Guide has a full section on this, with sample code. I am sure this is a recent addition, so maybe you missed it. It explains all the conditions you have to comply with; basically...</p>\n\n<ul>\n<li>set the Info.plist properties (this changes the position of the status bar, but not the view)</li>\n<li>rotate your view manually around its center, on either your UIViewController viewDidLoad: method or your applicationDidFinishLaunching: method or implement auto rotation (\"Autoresizing behaviors\", page 124)</li>\n</ul>\n\n<p>Look for \"Launching in Landscape Mode\", page 102.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "427",
    "url": "https://stackoverflow.com/questions/427",
    "title": "Programmatically launch IE Mobile favorites screen",
    "text:": "<p>Is there any way to launch IE Mobile's \"Favorites\" screen directly by\nspecifying any command line parameter?</p>\n",
    "codes": [
      [],
      [],
      []
    ],
    "votes:": "28",
    "tags": "<internet-explorer><windows-mobile><pocketpc>",
    "AcceptedAnswerId": "",
    "answers": [
      {
        "id": "5019863",
        "title": "",
        "text": "<p>Create a link file with this line: <code>26#\"\\Windows\\iexplore.exe\" -f</code></p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1435",
        "title": "",
        "text": "<p>How about running IE with the HTML favorites file as a parameter?</p>\n\n<blockquote>\n  <p>IExplore file://\\windows\\fav.htm</p>\n</blockquote>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "28344",
        "title": "",
        "text": "<p>I think this is going to be quite difficult without code. </p>\n\n<p>Two options come to mind:</p>\n\n<ul>\n<li>Find out what Windows messages IE sends to open the favorites screen and replay these in your application. You would first need to see if IE is running and if it is bring it to the foreground. If not then start the process. Maybe you can use Windows CE Remote Spy to find the right Window and information about the Favorites button?</li>\n<li>Other option is to work against the place where IE stores it's favorites information. You would have to write your own UI to parse the favorites etc.</li>\n</ul>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "438",
    "url": "https://stackoverflow.com/questions/438",
    "title": "Implementation of \"Remember me\" in a Rails application",
    "text:": "<p>My Rails-app has a sign in box with a \"remember me\" checkbox. Users who check that box should remain logged in even after closing their browser. I'm keeping track of whether users are logged in by storing their id in the user's session. </p>\n\n<p>But sessions are implemented in Rails as session cookies, which are not persistent. I can <em>make</em> them persistent:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  before_filter :update_session_expiration_date\n\n  private\n\n  def update_session_expiration_date\n    options = ActionController::Base.session_options\n    unless options[:session_expires]\n      options[:session_expires] = 1.year.from_now\n    end\n  end\nend\n</code></pre>\n\n<p>But that seems like a hack, which is surprising for such common functionality. Is there any better way?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Gareth's answer is pretty good, but I would still like an answer from someone familiar with Rails 2 (because of it's unique <code>CookieSessionStore</code>).</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "54",
    "tags": "<ruby-on-rails><ruby><http>",
    "AcceptedAnswerId": "77397",
    "answers": [
      {
        "id": "83714",
        "title": "",
        "text": "<p>I would suggest that you either take a look at the RESTful_Authentication plug in, which has an implementation of this, or just switch your implementation to use the RESTful Authentication_plugin.  There is a good explanation about how to use this plug in at Railscasts:</p>\n\n<p><a href=\"http://railscasts.com/episodes/67-restful-authentication\" rel=\"noreferrer\">railscasts #67 restful_authentication</a></p>\n\n<p>Here is a link to the plugin itself</p>\n\n<p><a href=\"http://rubygems.org/gems/restful_authentication\" rel=\"noreferrer\">restful_authentication</a></p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "107677",
        "title": "",
        "text": "<p>This worked like a charm for me:</p>\n\n<p><a href=\"http://squarewheel.wordpress.com/2007/11/03/session-cookie-expiration-time-in-rails/\" rel=\"nofollow noreferrer\">http://squarewheel.wordpress.com/2007/11/03/session-cookie-expiration-time-in-rails/</a></p>\n\n<p>Now my CookieStore sessions expire after two weeks, whereby the user must submit their login credentials again in order to be persistently logged-in for another two weeks.</p>\n\n<p>Bascially, it's as simple as:</p>\n\n<ol>\n<li>including one file in vendor/plugins directory</li>\n<li>set session expiry value in application controller using just one line</li>\n</ol>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "483",
        "title": "",
        "text": "<p>You should almost certainly not be extending the session cookie to be long lived.</p>\n\n<p>Although not dealing specifically with rails <a href=\"http://fishbowl.pastiche.org/2004/01/19/persistent_login_cookie_best_practice\" rel=\"noreferrer\">this article</a> goes to some length to explain 'remember me' best practices.</p>\n\n<p>In summary though you should:</p>\n\n<ul>\n<li>Add an extra column to the user table to accept a large random value</li>\n<li>Set a long lived cookie on the client which combines the user id and the random value</li>\n<li>When a new session starts, check for the existence of the id/value cookie and authenticate the new user if they match.</li>\n</ul>\n\n<p>The author also recommends invalidating the random value and resetting the cookie at every login.  Personally I don't like that as you then can't stay logged into a site on two computers.  I would tend to make sure my password changing function also reset the random value thus locking out sessions on other machines. </p>\n\n<p>As a final note, the advice he gives on making certain functions (password change/email change etc) unavailable to auto authenticated sessions is well worth following but rarely seen in the real world.</p>\n",
        "votes": "30",
        "tags": "",
        "accepted": false
      },
      {
        "id": "77397",
        "title": "",
        "text": "<p>I have spent a while thinking about this and came to some conclusions.  Rails session cookies are tamper-proof by default, so you really don't have to worry about a cookie being modified on the client end.</p>\n\n<p>Here is what I've done:</p>\n\n<ul>\n<li>Session cookie is set to be long-lived (6 months or so)</li>\n<li>Inside the session store\n\n<ul>\n<li>An 'expires on' date that is set to login + 24 hours</li>\n<li>user id</li>\n<li>Authenticated = true  so I can allow for anonymous user sesssions (not dangerous because of the cookie tamper protection)</li>\n</ul></li>\n<li>I add a before_filter in the Application Controller that checks the 'expires on' part of the session.</li>\n</ul>\n\n<p>When the user checks the \"Remember Me\" box, I just set the session[:expireson] date to be login + 2 weeks.  No one can steal the cookie and stay logged in forever or masquerade as another user because the rails session cookie is tamper-proof.</p>\n",
        "votes": "16",
        "tags": "",
        "accepted": true
      },
      {
        "id": "4025",
        "title": "",
        "text": "<p>The restful_authentication plugin has a good implementation of this: </p>\n\n<p><a href=\"http://agilewebdevelopment.com/plugins/restful_authentication\" rel=\"noreferrer\">http://agilewebdevelopment.com/plugins/restful_authentication</a></p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "600",
        "title": "",
        "text": "<p>This is a pretty good write-up of one guys experience of creating 30-day persistent sessions.</p>\n\n<p>WARNING: blog post is from 2006</p>\n\n<p><a href=\"http://grahamglass.blogs.com/main/2006/05/rails_sessionsr.html\" rel=\"nofollow noreferrer\">http://grahamglass.blogs.com/main/2006/05/rails_sessionsr.html</a></p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "38481",
        "title": "",
        "text": "<p>Note that you don't want to persist their session, just their identity.  You'll create a fresh session for them when they return to your site.  Generally you just assign a GUID to the user, write that to their cookie, then use it to look them up when they come back.  Don't use their login name or user ID for the token as it could easily be guessed and allow crafty visitors to hijack other users' accounts.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "4703796",
        "title": "",
        "text": "<p>I would go for Devise for a brilliant authentication solution for rails.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "469",
    "url": "https://stackoverflow.com/questions/469",
    "title": "How can I find the full path to a font from its display name on a Mac?",
    "text:": "<p>I am using the Photoshop's javascript API to find the fonts in a given PSD.</p>\n\n<p>Given a font name returned by the API, I want to find the actual physical font file that font name corresponds to on the disc.</p>\n\n<p>This is all happening in a python program running on OSX so I guess I'm looking for one of:</p>\n\n<ul>\n<li>Some Photoshop javascript</li>\n<li>A Python function</li>\n<li>An OSX API that I can call from python</li>\n</ul>\n",
    "codes": [
      [],
      [],
      [
        "locate InsertFontHere\n"
      ],
      [
        "import os\ndef get_font_list():\n    fonts = []\n    for font_path in [\"/Library/Fonts\", os.path.expanduser(\"~/Library/Fonts\")]:\n        if os.path.isdir(font_path):\n            fonts.extend(\n                [os.path.join(font_path, cur_font) \n                 for cur_font in os.listdir(font_path)\n                ]\n            )\n    return fonts\n"
      ]
    ],
    "votes:": "42",
    "tags": "<python><macos><fonts><photoshop>",
    "AcceptedAnswerId": "3040",
    "answers": [
      {
        "id": "3040",
        "title": "",
        "text": "<p>Unfortunately the only API that isn't deprecated is located in the ApplicationServices framework, which doesn't have a bridge support file, and thus isn't available in the bridge. If you're wanting to use ctypes, you can use ATSFontGetFileReference after looking up the ATSFontRef.</p>\n\n<p>Cocoa doesn't have any native support, at least as of 10.5, for getting the location of a font.</p>\n",
        "votes": "20",
        "tags": "",
        "accepted": true
      },
      {
        "id": "518",
        "title": "",
        "text": "<p>I haven't been able to find anything that does this directly.  I think you'll have to iterate through the various font folders on the system: <code>/System/Library/Fonts</code>, <code>/Library/Fonts</code>, and there can probably be a user-level directory as well <code>~/Library/Fonts</code>.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "497",
        "title": "",
        "text": "<p>open up a terminal (Applications->Utilities->Terminal) and type this in:</p>\n\n<pre><code>locate InsertFontHere\n</code></pre>\n\n<p>This will spit out every file that has the name you want.</p>\n\n<p>Warning: there may be alot to wade through.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "195170",
        "title": "",
        "text": "<p>There must be a method in Cocoa to get a list of fonts, then you would have to use the PyObjC bindings to call it..</p>\n\n<p>Depending on what you need them for, you could probably just use something like the following..</p>\n\n<pre><code>import os\ndef get_font_list():\n    fonts = []\n    for font_path in [\"/Library/Fonts\", os.path.expanduser(\"~/Library/Fonts\")]:\n        if os.path.isdir(font_path):\n            fonts.extend(\n                [os.path.join(font_path, cur_font) \n                 for cur_font in os.listdir(font_path)\n                ]\n            )\n    return fonts\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "502",
    "url": "https://stackoverflow.com/questions/502",
    "title": "Get a preview JPEG of a PDF on Windows?",
    "text:": "<p>I have a cross-platform (Python) application which needs to generate a JPEG preview of the first page of a PDF.</p>\n\n<p>On the Mac I am spawning <a href=\"http://developer.apple.com/documentation/Darwin/Reference/ManPages/man1/sips.1.html\" rel=\"noreferrer\">sips</a>.  Is there something similarly simple I can do on Windows?</p>\n",
    "codes": [
      [
        "gs -q -dQUIET -dPARANOIDSAFER -dBATCH -dNOPAUSE -dNOPROMPT \\\n-dMaxBitmap=500000000 -dLastPage=1 -dAlignToPixels=0 -dGridFitTT=0 \\\n-sDEVICE=jpeg -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -r72x72 \\\n-sOutputFile=$OUTPUT -f$INPUT\n"
      ],
      [
        "Convert taxes.pdf taxes.jpg \n",
        "convert -size 120x120 taxes.jpg.0 -geometry 120x120 +profile '*' thumbnail.jpg\n",
        "convert -size 120x120 taxes.pdf -geometry 120x120 +profile '*' thumbnail.jpg\n"
      ],
      []
    ],
    "votes:": "46",
    "tags": "<python><windows><image><pdf>",
    "AcceptedAnswerId": "7090",
    "answers": [
      {
        "id": "7090",
        "title": "",
        "text": "<p>ImageMagick delegates the PDF->bitmap conversion to GhostScript anyway, so here's a command you can use (it's based on the actual command listed by the <code>ps:alpha</code> delegate in ImageMagick, just adjusted to use JPEG as output):</p>\n\n<pre><code>gs -q -dQUIET -dPARANOIDSAFER -dBATCH -dNOPAUSE -dNOPROMPT \\\n-dMaxBitmap=500000000 -dLastPage=1 -dAlignToPixels=0 -dGridFitTT=0 \\\n-sDEVICE=jpeg -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -r72x72 \\\n-sOutputFile=$OUTPUT -f$INPUT\n</code></pre>\n\n<p>where <code>$OUTPUT</code> and <code>$INPUT</code> are the output and input filenames. Adjust the <code>72x72</code> to whatever resolution you need. (Obviously, strip out the backslashes if you're writing out the whole command as one line.)</p>\n\n<p>This is good for two reasons:</p>\n\n<ol>\n<li>You don't need to have ImageMagick installed anymore. Not that I have anything against ImageMagick (I love it to bits), but I believe in simple solutions.</li>\n<li>ImageMagick does a two-step conversion. First PDF->PPM, then PPM->JPEG. This way, the conversion is one-step.</li>\n</ol>\n\n<p>Other things to consider: with the files I've tested, PNG compresses better than JPEG. If you want to use PNG, change the <code>-sDEVICE=jpeg</code> to <code>-sDEVICE=png16m</code>.</p>\n",
        "votes": "38",
        "tags": "",
        "accepted": true
      },
      {
        "id": "536",
        "title": "",
        "text": "<p>You can use ImageMagick's convert utility for this, see some examples in <a href=\"https://web.archive.org/web/20120413111338/http://studio.imagemagick.org/pipermail/magick-users/2002-May/002636.html\" rel=\"noreferrer\">http://studio.imagemagick.org/pipermail/magick-users/2002-May/002636.html</a>\n:</p>\n\n<blockquote>\n<pre><code>Convert taxes.pdf taxes.jpg \n</code></pre>\n  \n  <p>Will convert a two page PDF file into [2] jpeg files: taxes.jpg.0,\n  taxes.jpg.1</p>\n  \n  <p>I can also convert these JPEGS to a thumbnail as follows:</p>\n\n<pre><code>convert -size 120x120 taxes.jpg.0 -geometry 120x120 +profile '*' thumbnail.jpg\n</code></pre>\n  \n  <p>I can even convert the PDF directly to a jpeg thumbnail as follows:</p>\n\n<pre><code>convert -size 120x120 taxes.pdf -geometry 120x120 +profile '*' thumbnail.jpg\n</code></pre>\n  \n  <p>This will result in a thumbnail.jpg.0 and thumbnail.jpg.1 for the two\n  pages.</p>\n</blockquote>\n",
        "votes": "14",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7073",
        "title": "",
        "text": "<p>Is the PC likely to have Acrobat installed? I think Acrobat installs a shell extension so previews of the first page of a PDF document appear in Windows Explorer's thumbnail view. You can get thumbnails yourself via the IExtractImage COM API, which you'll need to wrap. <a href=\"http://www.vbaccelerator.com/home/net/code/libraries/shell_projects/Thumbnail_Extraction/article.asp\" rel=\"nofollow noreferrer\">VBAccelerator has an example in C#</a> that you could port to Python.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "514",
    "url": "https://stackoverflow.com/questions/514",
    "title": "Frequent SystemExit in Ruby when making HTTP calls",
    "text:": "<p>I have a Ruby on Rails Website that makes HTTP calls to an external Web Service.</p>\n\n<p>About once a day I get a SystemExit (stacktrace below) error email where a call to the service has failed.  If I then try the exact same query on my site moments later it works fine.\nIt's been happening since the site went live and I've had no luck tracking down what causes it.</p>\n\n<p>Ruby is version 1.8.6 and rails is version 1.2.6.</p>\n\n<p>Anyone else have this problem?</p>\n\n<p>This is the error and stacktrace.</p>\n\n<blockquote>\n  <p>A SystemExit occurred\n  /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.6/lib/fcgi_handler.rb:116:in\n  exit'\n  /usr/local/lib/ruby/gems/1.8/gems/rails-1.2.6/lib/fcgi_handler.rb:116:in\n  exit_now_handler'\n  /usr/local/lib/ruby/gems/1.8/gems/activesupport-1.4.4/lib/active_support/inflector.rb:250:in\n  to_proc' /usr/local/lib/ruby/1.8/net/protocol.rb:133:in call'\n  /usr/local/lib/ruby/1.8/net/protocol.rb:133:in sysread'\n  /usr/local/lib/ruby/1.8/net/protocol.rb:133:in rbuf_fill'\n  /usr/local/lib/ruby/1.8/timeout.rb:56:in timeout'\n  /usr/local/lib/ruby/1.8/timeout.rb:76:in timeout'\n  /usr/local/lib/ruby/1.8/net/protocol.rb:132:in rbuf_fill'\n  /usr/local/lib/ruby/1.8/net/protocol.rb:116:in readuntil'\n  /usr/local/lib/ruby/1.8/net/protocol.rb:126:in readline'\n  /usr/local/lib/ruby/1.8/net/http.rb:2017:in read_status_line'\n  /usr/local/lib/ruby/1.8/net/http.rb:2006:in read_new'\n  /usr/local/lib/ruby/1.8/net/http.rb:1047:in request'\n  /usr/local/lib/ruby/1.8/net/http.rb:945:in request_get'\n  /usr/local/lib/ruby/1.8/net/http.rb:380:in get_response'\n  /usr/local/lib/ruby/1.8/net/http.rb:543:in start'\n  /usr/local/lib/ruby/1.8/net/http.rb:379:in get_response'</p>\n</blockquote>\n",
    "codes": [
      [],
      [],
      [],
      []
    ],
    "votes:": "21",
    "tags": "<ruby-on-rails><ruby><crash>",
    "AcceptedAnswerId": "519",
    "answers": [
      {
        "id": "519",
        "title": "",
        "text": "<p>Using fcgi with Ruby is known to be very buggy. </p>\n\n<p>Practically everybody has moved to <a href=\"http://mongrel.rubyforge.org/\" rel=\"noreferrer\">Mongrel</a> for this reason, and I recommend you do the same.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": true
      },
      {
        "id": "35689",
        "title": "",
        "text": "<p>I used to get these all the time on Apache1/fastcgi. I think it's caused by fastcgi hanging up before Ruby is done. </p>\n\n<p>Switching to mongrel is a good first step, but there's more to do. It's a bad idea to cull from web services on live pages, particularly from Rails. Rails is not thread-safe. The number of concurrent connections you can support equals the number of mongrels (or Passenger processes) in your cluster. </p>\n\n<p>If you have one mongrel and someone accesses a page that calls a web service that takes 10 seconds to time out, every request to your website will timeout during that time. Most of the load balancers just cycle through your mongrels blindly, so if you have two mongrels, every other request will timeout.</p>\n\n<p>Anything that can be unpredictably slow needs to happen in a job queue. The first hit to /slow/action adds the job to the queue, and /slow/action keeps on refreshing via page refreshes or queries via ajax until the job is finished, and then you get your results from the job queue.  There are a few job queues for Rails nowadays, but the oldest and probably most widely used one is <a href=\"http://backgroundrb.rubyforge.org/\" rel=\"noreferrer\">BackgroundRB</a>.</p>\n\n<p>Another alternative, depending on the nature of your app, is to cull the service every N minutes via cron, cache the data locally, and have your live page read from the cache. </p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7926",
        "title": "",
        "text": "<p>I would also take a look at <a href=\"http://modrails.com/\" rel=\"nofollow noreferrer\">Passenger</a>. It's a lot easier to get going than the traditional solution of Apache/nginx + Mongrel.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "619",
        "title": "",
        "text": "<p>It's been awhile since I used FCGI but I think a FCGI process could throw a SystemExit if the thread was taking too long.  This could be the web service not responding or even a slow DNS query.  Some google results show a similar error with Python and FCGI so moving to mongrel would be a good idea.  <a href=\"http://blog.codahale.com/2006/06/19/time-for-a-grown-up-server-rails-mongrel-apache-capistrano-and-you/\" rel=\"noreferrer\">This post</a> is my reference I used to setup mongrel and I still refer back to it.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "535",
    "url": "https://stackoverflow.com/questions/535",
    "title": "Continuous Integration System for a Python Codebase",
    "text:": "<p>I am starting to work on a hobby project with a <strong>Python</strong> codebase and I would like to set up some form of continuous integration (i.e. running a battery of test-cases each time a check-in is made and sending nag e-mails to responsible persons when the tests fail) similar to <strong>CruiseControl</strong> or <strong>TeamCity</strong>.</p>\n\n<p>I realize I could do this with hooks in most <strong>VCSes</strong>, but that requires that the tests run on the same machine as the version control server, which isn't as elegant as I would like. Does anyone have any suggestions for a small, user-friendly, open-source continuous integration system suitable for a <strong>Python</strong> codebase?</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "60",
    "tags": "<python><continuous-integration><extreme-programming>",
    "AcceptedAnswerId": "541",
    "answers": [
      {
        "id": "9120453",
        "title": "",
        "text": "<p>I have very good experiences with <a href=\"http://travis-ci.org/\" rel=\"noreferrer\">Travis-CI</a> for smaller code bases.\nThe main advantages are:</p>\n\n<ul>\n<li>setup is done in less than half a screen of config file</li>\n<li>you can do your own installation or just use the free hosted version</li>\n<li>semi-automatic setup for github repositories</li>\n<li>no account needed on website; login via github</li>\n</ul>\n\n<p>Some limitations:</p>\n\n<ul>\n<li><p>Python is not supported as a first class language (as of time of writing; but you can use pip and apt-get to install python dependencies; see <a href=\"http://www.travisswicegood.com/2011/11/11/travis-and-python/\" rel=\"noreferrer\">this tutorial</a>)</p></li>\n<li><p>code has to be hosted on github (at least when using the official version)</p></li>\n</ul>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "541",
        "title": "",
        "text": "<p>We run <a href=\"http://buildbot.net/trac\" rel=\"nofollow noreferrer\">Buildbot - Trac</a> at work. I haven't used it too much since my codebase isn't part of the release cycle yet. But we run the tests on different environments (OSX/Linux/Win) and it sends emails \u2014 and it's written in Python.</p>\n",
        "votes": "29",
        "tags": "",
        "accepted": true
      },
      {
        "id": "61746",
        "title": "",
        "text": "<p>We use both Buildbot and Hudson for Jython development.  Both are useful, but have different strengths and weaknesses.</p>\n\n<p>Buildbot's configuration is pure Python and quite simple once you get the hang of it (look at the epydoc-generated API docs for the most current info).  Buildbot makes it easier to define non-testing tasks\u00a0and distribute the testers.  However, it really has no concept of individual tests, just textual, HTML, and summary output, so if you want to have multi-level browsable test output and so forth you'll have to build it yourself, or just use Hudson.</p>\n\n<p>Hudson has terrific support for drilling down from overall results into test suites and individual tests; it also is great for comparing test output between builds, but the distributed (master/slave) stuff is comparatively more complicated because you need a Java environment on the slaves too; also, Hudson is less tolerant of flaky network links between the master and slaves.</p>\n\n<p>So, to get the benefits of both tools, we run a single instance of Hudson, which catches the common test failures, then we do multi-platform regression with Buildbot.</p>\n\n<p>Here are our instances:</p>\n\n<ul>\n<li><a href=\"http://bob.underboss.org:8080/job/jython/lastBuild/testReport/\" rel=\"noreferrer\">Jython Hudson</a></li>\n<li><a href=\"http://www.acm.uiuc.edu/jython-buildbot/waterfall\" rel=\"noreferrer\">Jython buildbot</a></li>\n</ul>\n",
        "votes": "17",
        "tags": "",
        "accepted": false
      },
      {
        "id": "538",
        "title": "",
        "text": "<p>One possibility is Hudson.  It's written in Java, but there's integration with Python projects:</p>\n\n<blockquote>\n  <p><a href=\"http://redsolo.blogspot.com/2007/11/hudson-embraces-python.html\" rel=\"noreferrer\">Hudson embraces Python</a></p>\n</blockquote>\n\n<p>I've never tried it myself, however.</p>\n\n<p>(<strong>Update</strong>, Sept. 2011: After a trademark dispute Hudson has been renamed to <a href=\"http://jenkins-ci.org/\" rel=\"noreferrer\">Jenkins</a>.)</p>\n",
        "votes": "28",
        "tags": "",
        "accepted": false
      },
      {
        "id": "117712",
        "title": "",
        "text": "<p>TeamCity has some Python <a href=\"http://www.jetbrains.net/confluence/display/TW/Python+Unit+Test+Reporting\" rel=\"noreferrer\">integration</a>.</p>\n\n<p>But TeamCity is:</p>\n\n<ul>\n<li>not open-source</li>\n<li>is not small, but rather feature rich</li>\n<li>is free for small-mid teams.</li>\n</ul>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "660",
        "title": "",
        "text": "<p>Second the Buildbot - Trac integration. You can find more information about the integration on the <a href=\"http://buildbot.net/trac/wiki/BuildbotAndTrac\" rel=\"noreferrer\">Buildbot website</a>. At my previous job, we wrote and used the plugin they mention (tracbb).\nWhat the plugin does is rewriting all of the Buildbot urls so you can use Buildbot from within Trac. (<a href=\"http://example.com/tracbb\" rel=\"noreferrer\">http://example.com/tracbb</a>).</p>\n\n<p>The really nice thing about Buildbot is that the configuration is written in Python. You can integrate your own Python code directly to the configuration. It's also very easy to write your own BuildSteps to execute specific tasks.</p>\n\n<p>We used BuildSteps to get the source from SVN, pull the dependencies, publish test results to WebDAV, etcetera.</p>\n\n<p>I wrote an X10 interface so we could send signals with build results. When the build failed, we switched on a red lava lamp. When the build succeeded, a green lava lamp switched on. Good times :-)</p>\n",
        "votes": "19",
        "tags": "",
        "accepted": false
      },
      {
        "id": "74452",
        "title": "",
        "text": "<p>We are using <a href=\"http://bitten.edgewall.org/\" rel=\"noreferrer\">Bitten</a> wich is integrated with trac. And it's python based.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "549",
    "url": "https://stackoverflow.com/questions/549",
    "title": "The definitive guide to form-based website authentication",
    "text:": "<h2>Form-based authentication for websites</h2>\n\n<p>We believe that Stack&nbsp;Overflow should not just be a resource for very specific technical questions, but also for general guidelines on how to solve variations on common problems. \"Form based authentication for websites\" should be a fine topic for such an experiment.</p>\n\n<h3>It should include topics such as:</h3>\n\n<ul>\n<li>How to log in</li>\n<li>How to log out</li>\n<li>How to remain logged in</li>\n<li>Managing cookies (including recommended settings)</li>\n<li>SSL/HTTPS encryption</li>\n<li>How to store passwords</li>\n<li>Using secret questions</li>\n<li>Forgotten username/password functionality</li>\n<li>Use of <a href=\"https://en.wikipedia.org/wiki/Cryptographic_nonce\" rel=\"noreferrer\">nonces</a> to prevent <a href=\"https://en.wikipedia.org/wiki/Cross-site_request_forgery\" rel=\"noreferrer\">cross-site request forgeries (CSRF)</a></li>\n<li><a href=\"http://openid.net/\" rel=\"noreferrer\">OpenID</a></li>\n<li>\"Remember me\" checkbox</li>\n<li>Browser autocompletion of usernames and passwords</li>\n<li>Secret URLs (public <a href=\"https://en.wikipedia.org/wiki/Uniform_Resource_Locator\" rel=\"noreferrer\">URL</a> protected by digest)</li>\n<li>Checking password strength</li>\n<li>E-mail validation</li>\n<li><em>and much more about</em> <a href=\"http://en.wikipedia.org/wiki/Form-based_authentication\" rel=\"noreferrer\">form based authentication</a>...</li>\n</ul>\n\n<h3>It should not include things like:</h3>\n\n<ul>\n<li>Roles and authorization</li>\n<li>HTTP basic authentication</li>\n</ul>\n\n<h3>Please help us by:</h3>\n\n<ol>\n<li>Suggesting subtopics</li>\n<li>Submitting good articles about this subject</li>\n<li>Editing the official answer</li>\n</ol>\n",
    "codes": [
      [],
      [],
      [
        "<input type=\"text\" name=\"email\" style=\"display:none\" />\n"
      ],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "5411",
    "tags": "<security><http><authentication><language-agnostic><article>",
    "AcceptedAnswerId": "477578",
    "answers": [
      {
        "id": "555",
        "title": "",
        "text": "<h1>Definitive Article</h1>\n\n<h3>Sending credentials</h3>\n\n<p>The only practical way to send credentials 100% securely is by using <a href=\"http://en.wikipedia.org/wiki/SSL\" rel=\"noreferrer\">SSL</a>. Using JavaScript to hash the password is not safe. Common pitfalls for client-side password hashing:</p>\n\n<ul>\n<li>If the connection between the client and server is unencrypted, everything you do is <a href=\"https://stackoverflow.com/questions/14907581/ssl-and-man-in-the-middle-misunderstanding\">vulnerable to man-in-the-middle attacks</a>. An attacker could replace the incoming javascript to break the hashing or send all credentials to their server, they could listen to client responses and impersonate the users perfectly, etc. etc. SSL with trusted Certificate Authorities is designed to prevent MitM attacks.</li>\n<li>The hashed password received by the server is <a href=\"https://security.stackexchange.com/questions/45254/owasp-recommendation-on-client-side-password-hashing\">less secure</a> if you don't do additional, redundant work on the server.</li>\n</ul>\n\n<p>There's another secure method called <strong>SRP</strong>, but it's patented (although it is <a href=\"http://srp.stanford.edu/license.txt\" rel=\"noreferrer\">freely licensed</a>) and there are few good implementations available.</p>\n\n<h3>Storing passwords</h3>\n\n<p>Don't ever store passwords as plaintext in the database. Not even if you don't care about the security of your own site. Assume that some of your users will reuse the password of their online bank account. So, store the hashed password, and throw away the original. And make sure the password doesn't show up in access logs or application logs. OWASP <a href=\"https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet#Impose_infeasible_verification_on_attacker\" rel=\"noreferrer\">recommends the use of Argon2</a> as your first choice for new applications. If this is not available, PBKDF2 or scrypt should be used instead. And finally if none of the above are available, use bcrypt.</p>\n\n<p>Hashes by themselves are also insecure. For instance, identical passwords mean identical hashes--this makes hash lookup tables an effective way of cracking lots of passwords at once. Instead, store the <strong>salted</strong> hash. A salt is a string appended to the password prior to hashing - use a different (random) salt per user. The salt is a public value, so you can store them with the hash in the database. See <a href=\"http://www.codeproject.com/Articles/704865/Salted-Password-Hashing-Doing-it-Right\" rel=\"noreferrer\">here</a> for more on this.</p>\n\n<p>This means that you can't send the user their forgotten passwords (because you only have the hash). Don't reset the user's password unless you have authenticated the user (users must prove that they are able to read emails sent to the stored (and validated) email address.)</p>\n\n<h3>Security questions</h3>\n\n<p>Security questions are insecure - avoid using them. Why? Anything a security question does, a password does better. Read <strong><em>PART III: Using Secret Questions</em></strong> in <a href=\"http://srp.stanford.edu/license.txt\" rel=\"noreferrer\">@Jens Roland answer</a> here in this wiki.</p>\n\n<h3>Session cookies</h3>\n\n<p>After the user logs in, the server sends the user a session cookie. The server can retrieve the username or id from the cookie, but nobody else can generate such a cookie (TODO explain mechanisms).</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Session_hijacking\" rel=\"noreferrer\">Cookies can be hijacked</a>: they are only as secure as the rest of the client's machine and other communications. They can be read from disk, sniffed in network traffic, lifted by a cross-site scripting attack, phished from a poisoned DNS so the client sends their cookies to the wrong servers. Don't send persistent cookies. Cookies should expire at the end of the client session (browser close or leaving your domain).</p>\n\n<p>If you want to autologin your users, you can set a persistent cookie, but it should be distinct from a full-session cookie. You can set an additional flag that the user has auto-logged in, and needs to log in for real for sensitive operations. This is popular with shopping sites that want to provide you with a seamless, personalized shopping experience but still protect your financial details. For example, when you return to visit Amazon, they show you a page that looks like you're logged in, but when you go to place an order (or change your shipping address, credit card etc.), they ask you to confirm your password.</p>\n\n<p>Financial websites such as banks and credit cards, on the other hand, only have sensitive data and should not allow auto-login or a low-security mode.</p>\n\n<h3>List of external resources</h3>\n\n<ul>\n<li><a href=\"http://pdos.csail.mit.edu/papers/webauth:sec10.pdf\" rel=\"noreferrer\">Dos and Don'ts of Client Authentication on the Web (PDF)</a><br>\n21 page academic article with many great tips.  </li>\n<li><a href=\"http://news.ycombinator.com/item?id=205572\" rel=\"noreferrer\">Ask YC: Best Practices for User Authentication</a><br>\nForum discussion on the subject  </li>\n<li><a href=\"http://www.codinghorror.com/blog/archives/000953.html\" rel=\"noreferrer\">You're Probably Storing Passwords Incorrectly</a><br>\nIntroductory article about storing passwords</li>\n<li><a href=\"http://news.ycombinator.com/item?id=55660\" rel=\"noreferrer\">Discussion: Coding Horror: You're Probably Storing Passwords Incorrectly</a><br>\nForum discussion about a Coding Horror article.</li>\n<li>Never store passwords in a database!<br>\nAnother warning about storing passwords in the database.</li>\n<li><a href=\"http://en.wikipedia.org/wiki/Password_cracking\" rel=\"noreferrer\">Password cracking</a><br>\nWikipedia article on weaknesses of several password hashing schemes.</li>\n<li><a href=\"http://www.securityfocus.com/blogs/262\" rel=\"noreferrer\">Enough With The Rainbow Tables: What You Need To Know About Secure Password Schemes</a><br>\nDiscussion about rainbow tables and how to defend against them, and against other threads. Includes extensive discussion.</li>\n</ul>\n",
        "votes": "422",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6989665",
        "title": "",
        "text": "<p>When hashing, don't use fast hash algorithms such as MD5 (many hardware implementations exist).  Use something like SHA-512.  For passwords, slower hashes are better.</p>\n\n<p>The faster you can create hashes, the faster any brute force checker can work. Slower hashes will therefore slow down brute forcing. A slow hash algorithm will make brute forcing impractical for longer passwords (8 digits +)</p>\n",
        "votes": "60",
        "tags": "",
        "accepted": false
      },
      {
        "id": "10701801",
        "title": "",
        "text": "<p>I just thought I'd share this solution that I found to be working just fine.</p>\n\n<p>I call it the <strong>Dummy Field</strong> (though I haven't invented this so don't credit me).</p>\n\n<p>In short: you just have to insert this into your <code>&lt;form&gt;</code> and check for it to be empty at when validating:</p>\n\n<pre><code>&lt;input type=\"text\" name=\"email\" style=\"display:none\" /&gt;\n</code></pre>\n\n<p>The trick is to fool a bot into thinking it has to insert data into a required field, that's why I named the input \"email\". If you already have a field called email that you're using you should try naming the dummy field something else like \"company\", \"phone\" or \"emailaddress\". Just pick something you know you don't need and what sounds like something people would normally find logical to fill in into a web form. Now hide the <code>input</code> field using CSS or JavaScript/jQuery - whatever fits you best - just <strong>don't</strong> set the input <code>type</code> to <code>hidden</code> or else the bot won't fall for it.</p>\n\n<p>When you are validating the form (either client or server side) check if your dummy field has been filled to determine if it was sent by a human or a bot.</p>\n\n<p>Example:</p>\n\n<p><strong>In case of a human:</strong>\nThe user will not see the dummy field (in my case named \"email\") and will not attempt to fill it. So the value of the dummy field should still be empty when the form has been sent.</p>\n\n<p><strong>In case of a bot:</strong> The bot will see a field whose type is <code>text</code> and a name <code>email</code> (or whatever it is you called it) and will logically attempt to fill it with appropriate data. It doesn't care if you styled the input form with some fancy CSS, web-developers do it all the time. Whatever the value in the dummy field is, we don't care as long as it's larger than <code>0</code> characters.</p>\n\n<p>I used this method on a guestbook in combination with <a href=\"http://en.wikipedia.org/wiki/CAPTCHA\" rel=\"noreferrer\">CAPTCHA</a>, and I haven't seen a single spam post since. I had used a CAPTCHA-only solution before, but eventually, it resulted in about five spam posts every hour. Adding the dummy field in the form has stopped (at least until now) all the spam from appearing. </p>\n\n<p>I believe this can also be used just fine with a login/authentication form.</p>\n\n<p><strong>Warning</strong>: Of course this method is not 100% foolproof. Bots can be programmed to ignore input fields with the style <code>display:none</code> applied to it. You also have to think about people who use some form of auto-completion (like most browsers have built-in!) to auto-fill all form fields for them. They might just as well pick up a dummy field.</p>\n\n<p>You can also vary this up a little by leaving the dummy field visible but outside the boundaries of the screen, but this is totally up to you. </p>\n\n<p>Be creative!</p>\n",
        "votes": "139",
        "tags": "",
        "accepted": false
      },
      {
        "id": "13287971",
        "title": "",
        "text": "<p>A good article about realistic password strength estimation is:</p>\n\n<p><em><a href=\"https://tech.dropbox.com/2012/04/zxcvbn-realistic-password-strength-estimation/\">Dropbox Tech Blog &raquo; Blog Archive &raquo; zxcvbn: realistic password strength estimation</a></em></p>\n",
        "votes": "56",
        "tags": "",
        "accepted": false
      },
      {
        "id": "13545692",
        "title": "",
        "text": "<p>My favourite rule in regards to authentication systems: use passphrases, not passwords. Easy to remember, hard to crack.\nMore info: <a href=\"http://www.codinghorror.com/blog/2005/07/passwords-vs-pass-phrases.html\" rel=\"noreferrer\">Coding Horror: Passwords vs. Pass Phrases</a></p>\n",
        "votes": "52",
        "tags": "",
        "accepted": false
      },
      {
        "id": "29932630",
        "title": "",
        "text": "<p>I would like to add one very important comment: -</p>\n\n<ul>\n<li>\"In a <em>corporate,</em> <strong>intra-</strong> net setting,\" most if not all of the foregoing might not apply!</li>\n</ul>\n\n<p>Many corporations deploy \"internal use only\" websites which are, effectively, \"corporate applications\" that happen to have been implemented through URLs. These URLs can <em>(supposedly ...)</em> only be resolved within \"the company's internal network.\" <em>(Which network magically includes all VPN-connected 'road warriors.')</em> </p>\n\n<p>When a user is dutifully-connected to the aforesaid network, their identity <em>(\"authentication\")</em> is [already ...] \"conclusively known,\" as is their permission <em>(\"authorization\")</em> to do certain things ... such as ... \"to access this website.\"</p>\n\n<p>This \"authentication + authorization\" service can be provided by several different technologies, such as LDAP <em>(Microsoft OpenDirectory)</em>, or Kerberos.</p>\n\n<p>From your point-of-view, you simply know this: that <em>anyone</em> who legitimately winds-up at your website <em>must</em> be accompanied by [an environment-variable magically containing ...] a \"token.\" (<em>i.e.</em> The absence of such a token must be immediate grounds for <code>404 Not Found</code>.)</p>\n\n<p>The token's value makes no sense to you, <em>but,</em> should the need arise, \"appropriate means exist\" by which your website can \"[authoritatively] ask someone who knows (LDAP... etc.)\" about any <em>and every(!)</em> question that you may have. In other words, you do <strong>not</strong> avail yourself of <em>any</em> \"home-grown logic.\" Instead, you inquire of The Authority and implicitly trust its verdict.</p>\n\n<p>Uh huh ... it's <em>quite</em> a mental-switch from the \"wild-and-wooly Internet.\"</p>\n",
        "votes": "18",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6984591",
        "title": "",
        "text": "<p>First, a strong caveat that this answer is not the best fit for this exact question. It should definitely not be the top answer!</p>\n\n<p>I will go ahead and mention Mozilla\u2019s proposed <a href=\"https://browserid.org/\" rel=\"noreferrer\">BrowserID</a> (or perhaps more precisely, the <a href=\"https://wiki.mozilla.org/Identity/Verified_Email_Protocol/Latest\" rel=\"noreferrer\">Verified Email Protocol</a>) in the spirit of finding an upgrade path to better approaches to authentication in the future.</p>\n\n<p>I\u2019ll summarize it this way:</p>\n\n<ol>\n<li>Mozilla is a nonprofit with <a href=\"http://www.mozilla.org/about/manifesto.en.html\" rel=\"noreferrer\">values</a> that align well with finding good solutions to this problem.</li>\n<li>The reality today is that most websites use form-based authentication</li>\n<li>Form-based authentication has a big drawback, which is an increased risk of <a href=\"http://en.wikipedia.org/wiki/Phishing\" rel=\"noreferrer\">phishing</a>. Users are asked to enter sensitive information into an area controlled by a remote entity, rather than an area controlled by their User Agent (browser).</li>\n<li>Since browsers are implicitly trusted (the whole idea of a User Agent is to act on behalf of the User), they can help improve this situation.</li>\n<li>The primary force holding back progress here is <a href=\"http://www.w3.org/2011/identity-ws/papers/idbrowser2011_submission_10.pdf\" rel=\"noreferrer\">deployment deadlock</a>. Solutions must be decomposed into steps which provide some incremental benefit on their own.</li>\n<li>The simplest decentralized method for expressing an identity that is built into the internet infrastructure is the domain name.</li>\n<li>As a second level of expressing identity, each domain manages its own set of accounts.</li>\n<li>The form \u201caccount<code>@</code>domain\u201d is concise and supported by a wide range of protocols and URI schemes. Such an identifier is, of course, most universally recognized as an email address.</li>\n<li>Email providers are already the de-facto primary identity providers online. Current password reset flows usually let you take control of an account if you can prove that you control that account\u2019s associated email address.</li>\n<li>The Verified Email Protocol was proposed to provide a secure method, based on public key cryptography, for streamlining the process of proving to domain B that you have an account on domain A.</li>\n<li>For browsers that don\u2019t support the Verified Email Protocol (currently all of them), Mozilla provides a shim which implements the protocol in client-side JavaScript code.</li>\n<li>For email services that don\u2019t support the Verified Email Protocol, the protocol allows third parties to act as a trusted intermediary, asserting that they\u2019ve verified a user\u2019s ownership of an account. It is not desirable to have a large number of such third parties; this capability is intended only to allow an upgrade path, and it is much preferred that email services provide these assertions themselves.</li>\n<li>Mozilla offers their own service to act like such a trusted third party. Service Providers (that is, Relying Parties) implementing the Verified Email Protocol may choose to trust Mozilla's assertions or not. Mozilla\u2019s service verifies users\u2019 account ownership using the conventional means of sending an email with a confirmation link.</li>\n<li>Service Providers may, of course, offer this protocol as an option in addition to any other method(s) of authentication they might wish to offer.</li>\n<li>A big user interface benefit being sought here is the \u201cidentity selector\u201d. When a user visits a site and chooses to authenticate, their browser shows them a selection of email addresses (\u201cpersonal\u201d, \u201cwork\u201d, \u201cpolitical activism\u201d, etc.) they may use to identify themselves to the site.</li>\n<li>Another big user interface benefit being sought as part of this effort is <a href=\"https://wiki.mozilla.org/Identity/Verified_Email_Protocol/Latest-Session\" rel=\"noreferrer\">helping the browser know more about the user\u2019s session</a> \u2013 who they\u2019re signed in as currently, primarily \u2013 so it may display that in the browser chrome.</li>\n<li>Because of the distributed nature of this system, it avoids lock-in to major sites like Facebook, Twitter, Google, etc. Any individual can own their own domain and therefore act as their own identity provider.</li>\n</ol>\n\n<p>This is not strictly \u201cform-based authentication for websites\u201d. But it is an effort to transition from the current norm of form-based authentication to something more secure: browser-supported authentication.</p>\n",
        "votes": "165",
        "tags": "",
        "accepted": false
      },
      {
        "id": "38874818",
        "title": "",
        "text": "<p>Use <a href=\"http://openid.net/connect/\" rel=\"noreferrer\">OpenID Connect</a> or <a href=\"https://kantarainitiative.org/confluence/display/uma/Home\" rel=\"noreferrer\">User-Managed Access</a>.</p>\n\n<p>As nothing is more efficient than not doing it at all.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "477578",
        "title": "",
        "text": "<h2>PART I: How To Log In</h2>\n\n<p>We'll assume you already know how to build a login+password HTML form which POSTs the values to a script on the server side for authentication. The sections below will deal with patterns for sound practical auth, and how to avoid the most common security pitfalls.</p>\n\n<p><strong>To HTTPS or not to HTTPS?</strong></p>\n\n<p>Unless the connection is already secure (that is, tunneled through HTTPS using SSL/TLS), your login form values will be sent in cleartext, which allows anyone eavesdropping on the line between browser and web server will be able to read logins as they pass through. This type of wiretapping is done routinely by governments, but in general, we won't address 'owned' wires other than to say this: Just use HTTPS.</p>\n\n<p>In essence, the only <strong>practical</strong> way to protect against wiretapping/packet sniffing during login is by using HTTPS or another certificate-based encryption scheme (for example, <a href=\"https://en.wikipedia.org/wiki/Transport_Layer_Security\" rel=\"noreferrer\">TLS</a>) or a proven &amp; tested challenge-response scheme (for example, the <a href=\"https://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange\" rel=\"noreferrer\">Diffie-Hellman</a>-based SRP). <em>Any other method can be easily circumvented</em> by an eavesdropping attacker.</p>\n\n<p>Of course, if you are willing to get a little bit impractical, you could also employ some form of two-factor authentication scheme (e.g. the Google Authenticator app, a physical 'cold war style' codebook, or an RSA key generator dongle). If applied correctly, this could work even with an unsecured connection, but it's hard to imagine that a dev would be willing to implement two-factor auth but not SSL.</p>\n\n<p><strong>(Do not) Roll-your-own JavaScript encryption/hashing</strong></p>\n\n<p>Given the perceived (though now <a href=\"https://letsencrypt.org/\" rel=\"noreferrer\">avoidable</a>) cost and technical difficulty of setting up an SSL certificate on your website, some developers are tempted to roll their own in-browser hashing or encryption schemes in order to avoid passing cleartext logins over an unsecured wire.</p>\n\n<p>While this is a noble thought, it is essentially useless (and can be a <a href=\"https://stackoverflow.com/questions/1380168/does-it-make-security-sense-to-hash-password-on-client-end\">security flaw</a>) unless it is combined with one of the above - that is, either securing the line with strong encryption or using a tried-and-tested challenge-response mechanism (if you don't know what that is, just know that it is one of the most difficult to prove, most difficult to design, and most difficult to implement concepts in digital security).</p>\n\n<p>While it is true that hashing the password <em>can be</em> effective against <strong>password disclosure</strong>, it is vulnerable to replay attacks, Man-In-The-Middle attacks / hijackings (if an attacker can inject a few bytes into your unsecured HTML page before it reaches your browser, they can simply comment out the hashing in the JavaScript), or brute-force attacks (since you are handing the attacker both username, salt and hashed password).</p>\n\n<p><strong>CAPTCHAS against humanity</strong></p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/CAPTCHA\" rel=\"noreferrer\">CAPTCHA</a> is meant to thwart one specific category of attack: automated dictionary/brute force trial-and-error with no human operator. There is no doubt that this is a real threat, however, there are ways of dealing with it seamlessly that don't require a CAPTCHA, specifically properly designed server-side login throttling schemes - we'll discuss those later.</p>\n\n<p>Know that CAPTCHA implementations are not created alike; they often aren't human-solvable, most of them are actually ineffective against bots, all of them are ineffective against cheap third-world labor (according to <a href=\"https://en.wikipedia.org/wiki/OWASP\" rel=\"noreferrer\">OWASP</a>, the current sweatshop rate is $12 per 500 tests), and some implementations may be technically illegal in some countries (see <a href=\"https://www.owasp.org/index.php/Authentication_Cheat_Sheet\" rel=\"noreferrer\">OWASP Authentication Cheat Sheet</a>). If you must use a CAPTCHA, use Google's <a href=\"https://en.wikipedia.org/wiki/ReCAPTCHA\" rel=\"noreferrer\">reCAPTCHA</a>, since it is OCR-hard by definition (since it uses already OCR-misclassified book scans) and tries very hard to be user-friendly.</p>\n\n<p>Personally, I tend to find CAPTCHAS annoying, and use them only as a last resort when a user has failed to log in a number of times and throttling delays are maxed out. This will happen rarely enough to be acceptable, and it strengthens the system as a whole.</p>\n\n<p><strong>Storing Passwords / Verifying logins</strong></p>\n\n<p>This may finally be common knowledge after all the highly-publicized hacks and user data leaks we've seen in recent years, but it has to be said: Do not store passwords in cleartext in your database. User databases are routinely hacked, leaked or gleaned through SQL injection, and if you are storing raw, plaintext passwords, that is instant game over for your login security.</p>\n\n<p>So if you can't store the password, how do you check that the login+password combination POSTed from the login form is correct? The answer is hashing using a <a href=\"https://en.wikipedia.org/wiki/Key_derivation_function\" rel=\"noreferrer\">key derivation function</a>. Whenever a new user is created or a password is changed, you take the password and run it through a KDF, such as Argon2, bcrypt, scrypt or PBKDF2, turning the cleartext password (\"correcthorsebatterystaple\") into a long, random-looking string, which is a lot safer to store in your database. To verify a login, you run the same hash function on the entered password, this time passing in the salt and compare the resulting hash string to the value stored in your database. Argon2, bcrypt and scrypt store the salt with the hash already. Check out this <a href=\"https://security.stackexchange.com/a/31846/8340\">article</a> on sec.stackexchange for more detailed information.</p>\n\n<p>The reason a salt is used is that hashing in itself is not sufficient -- you'll want to add a so-called 'salt' to protect the hash against <a href=\"https://en.wikipedia.org/wiki/Rainbow_table\" rel=\"noreferrer\">rainbow tables</a>. A salt effectively prevents two passwords that exactly match from being stored as the same hash value, preventing the whole database being scanned in one run if an attacker is executing a password guessing attack.</p>\n\n<p>A cryptographic hash should not be used for password storage because user-selected passwords are not strong enough (i.e. do not usually contain enough entropy) and a password guessing attack could be completed in a relatively short time by an attacker with access to the hashes. This is why KDFs are used - these effectively <a href=\"https://en.wikipedia.org/wiki/Key_stretching\" rel=\"noreferrer\">\"stretch the key\"</a>, which means that every password guess an attacker makes causes multiple repetitions of the hash algorithm, for example 10,000 times, which causes the attacker to guess the password 10,000 times slower.</p>\n\n<p><strong>Session data - \"You are logged in as Spiderman69\"</strong></p>\n\n<p>Once the server has verified the login and password against your user database and found a match, the system needs a way to remember that the browser has been authenticated. This fact should only ever be stored server side in the session data.</p>\n\n<blockquote>\n  <p>If you are unfamiliar with session data, here's how it works: A single randomly-generated string is stored in an expiring cookie and used to reference a collection of data - the session data - which is stored on the server. If you are using an MVC framework, this is undoubtedly handled already.</p>\n</blockquote>\n\n<p>If at all possible, make sure the session cookie has the secure and HTTP Only flags set when sent to the browser. The HttpOnly flag provides some protection against the cookie being read through XSS attack. The secure flag ensures that the cookie is only sent back via HTTPS, and therefore protects against network sniffing attacks. The value of the cookie should not be predictable. Where a cookie referencing a non-existent session is presented, its value should be replaced immediately to prevent <a href=\"https://www.owasp.org/index.php/Session_fixation\" rel=\"noreferrer\">session fixation</a>.</p>\n\n<h2>PART II: How To Remain Logged In - The Infamous \"Remember Me\" Checkbox</h2>\n\n<p>Persistent Login Cookies (\"remember me\" functionality) are a danger zone; on the one hand, they are entirely as safe as conventional logins when users understand how to handle them; and on the other hand, they are an enormous security risk in the hands of careless users, who may use them on public computers and forget to log out, and who may not know what browser cookies are or how to delete them.</p>\n\n<p>Personally, I like persistent logins for the websites I visit on a regular basis, but I know how to handle them safely. If you are positive that your users know the same, you can use persistent logins with a clean conscience. If not - well, then you may subscribe to the philosophy that users who are careless with their login credentials brought it upon themselves if they get hacked. It's not like we go to our user's houses and tear off all those facepalm-inducing Post-It notes with passwords they have lined up on the edge of their monitors, either.</p>\n\n<p>Of course, some systems can't afford to have <em>any</em> accounts hacked; for such systems, there is no way you can justify having persistent logins.</p>\n\n<p><strong>If you DO decide to implement persistent login cookies, this is how you do it:</strong></p>\n\n<ol>\n<li><p>First, take some time to read <a href=\"https://paragonie.com/blog/2015/04/secure-authentication-php-with-long-term-persistence\" rel=\"noreferrer\">Paragon Initiative's article</a> on the subject. You'll need to get a bunch of elements right, and the article does a great job of explaining each.</p></li>\n<li><p>And just to reiterate one of the most common pitfalls, <strong>DO NOT STORE THE PERSISTENT LOGIN COOKIE (TOKEN) IN YOUR DATABASE, ONLY A HASH OF IT!</strong> The login token is Password Equivalent, so if an attacker got their hands on your database, they could use the tokens to log in to any account, just as if they were cleartext login-password combinations. Therefore, use hashing (according to <a href=\"https://security.stackexchange.com/a/63438/5002\">https://security.stackexchange.com/a/63438/5002</a> a weak hash will do just fine for this purpose) when storing persistent login tokens.</p></li>\n</ol>\n\n<h2>PART III: Using Secret Questions</h2>\n\n<p><strong>Don't implement 'secret questions'</strong>. The 'secret questions' feature is a security anti-pattern. Read the paper from link number 4 from the MUST-READ list. You can ask Sarah Palin about that one, after her Yahoo! email account got hacked during a previous presidential campaign because the answer to her security question was... \"Wasilla High School\"!</p>\n\n<p>Even with user-specified questions, it is highly likely that most users will choose either:</p>\n\n<ul>\n<li><p>A 'standard' secret question like mother's maiden name or favorite pet</p></li>\n<li><p>A simple piece of trivia that anyone could lift from their blog, LinkedIn profile, or similar</p></li>\n<li><p>Any question that is easier to answer than guessing their password. Which, for any decent password, is every question you can imagine</p></li>\n</ul>\n\n<p><strong>In conclusion, security questions are inherently insecure in virtually all their forms and variations, and should not be employed in an authentication scheme for any reason.</strong></p>\n\n<p>The true reason why security questions even exist in the wild is that they conveniently save the cost of a few support calls from users who can't access their email to get to a reactivation code. This at the expense of security and Sarah Palin's reputation. Worth it? Probably not.</p>\n\n<h2>PART IV: Forgotten Password Functionality</h2>\n\n<p>I already mentioned why you should <strong>never use security questions</strong> for handling forgotten/lost user passwords; it also goes without saying that you should never e-mail users their actual passwords. There are at least two more all-too-common pitfalls to avoid in this field:</p>\n\n<ol>\n<li><p>Don't <em>reset</em> a forgotten password to an autogenerated strong password - such passwords are notoriously hard to remember, which means the user must either change it or write it down - say, on a bright yellow Post-It on the edge of their monitor. Instead of setting a new password, just let users pick a new one right away - which is what they want to do anyway. (An exception to this might be if the users are universally using a password manager to store/manage passwords that would normally be impossible to remember without writing it down).</p></li>\n<li><p>Always hash the lost password code/token in the database. <strong><em>AGAIN</em></strong>, this code is another example of a Password Equivalent, so it MUST be hashed in case an attacker got their hands on your database. When a lost password code is requested, send the plaintext code to the user's email address, then hash it, save the hash in your database -- and <em>throw away the original</em>. Just like a password or a persistent login token.</p></li>\n</ol>\n\n<p>A final note: always make sure your interface for entering the 'lost password code' is at least as secure as your login form itself, or an attacker will simply use this to gain access instead. Making sure you generate very long 'lost password codes' (for example, 16 case-sensitive alphanumeric characters) is a good start, but consider adding the same throttling scheme that you do for the login form itself.</p>\n\n<h2>PART V: Checking Password Strength</h2>\n\n<p>First, you'll want to read this small article for a reality check: <a href=\"http://www.whatsmypass.com/?p=415\" rel=\"noreferrer\">The 500 most common passwords</a></p>\n\n<p>Okay, so maybe the list isn't the <em>canonical</em> list of most common passwords on <em>any</em> system <em>anywhere ever</em>, but it's a good indication of how poorly people will choose their passwords when there is no enforced policy in place. Plus, the list looks frighteningly close to home when you compare it to publicly available analyses of recently stolen passwords.</p>\n\n<p>So: With no minimum password strength requirements, 2% of users use one of the top 20 most common passwords. Meaning: if an attacker gets just 20 attempts, 1 in 50 accounts on your website will be crackable.</p>\n\n<p>Thwarting this requires calculating the entropy of a password and then applying a threshold.  The National Institute of Standards and Technology (NIST) <a href=\"https://en.wikipedia.org/wiki/Password_strength#NIST_Special_Publication_800-63\" rel=\"noreferrer\">Special Publication 800-63</a> has a set of very good suggestions.  That, when combined with a dictionary and keyboard layout analysis (for example, 'qwertyuiop' is a bad password), can <a href=\"https://cubicspot.blogspot.com/2012/01/how-to-calculate-password-strength-part.html\" rel=\"noreferrer\">reject 99% of all poorly selected passwords</a> at a level of 18 bits of entropy.  Simply calculating password strength and <a href=\"https://blogs.dropbox.com/tech/2012/04/zxcvbn-realistic-password-strength-estimation/\" rel=\"noreferrer\">showing a visual strength meter</a> to a user is good, but insufficient.  Unless it is enforced, a lot of users will most likely ignore it.</p>\n\n<p>And for a refreshing take on user-friendliness of high-entropy passwords, Randall Munroe's <a href=\"https://xkcd.com/936/\" rel=\"noreferrer\">Password Strength xkcd</a> is highly recommended.</p>\n\n<p>Utilize Troy Hunt's <a href=\"https://haveibeenpwned.com/API/\" rel=\"noreferrer\">Have I Been Pwned API</a> to check users passwords against passwords compromised in public data breaches.</p>\n\n<h2>PART VI: Much More - Or: Preventing Rapid-Fire Login Attempts</h2>\n\n<p>First, have a look at the numbers: <a href=\"https://www.lockdown.co.uk/?pg=combi&amp;s=articles\" rel=\"noreferrer\">Password Recovery Speeds - How long will your password stand up</a></p>\n\n<p>If you don't have the time to look through the tables in that link, here's the list of them:</p>\n\n<ol>\n<li><p>It takes <em>virtually no time</em> to crack a weak password, even if you're cracking it with an abacus</p></li>\n<li><p>It takes <em>virtually no time</em> to crack an alphanumeric 9-character password if it is <strong>case insensitive</strong></p></li>\n<li><p>It takes <em>virtually no time</em> to crack an intricate, symbols-and-letters-and-numbers, upper-and-lowercase password if it is <strong>less than 8 characters long</strong> (a desktop PC can search the entire keyspace up to 7 characters in a matter of days or even hours)</p></li>\n<li><p><strong>It would, however, take an inordinate amount of time to crack even a 6-character password, <em>if you were limited to one attempt per second!</em></strong></p></li>\n</ol>\n\n<p>So what can we learn from these numbers? Well, lots, but we can focus on the most important part: the fact that preventing large numbers of rapid-fire successive login attempts (ie. the <em>brute force</em> attack) really isn't that difficult. But preventing it <em>right</em> isn't as easy as it seems.</p>\n\n<p>Generally speaking, you have three choices that are all effective against brute-force attacks <em>(and dictionary attacks, but since you are already employing a strong passwords policy, they shouldn't be an issue)</em>:</p>\n\n<ul>\n<li><p>Present a <strong>CAPTCHA</strong> after N failed attempts (annoying as hell and often ineffective -- but I'm repeating myself here)</p></li>\n<li><p><strong>Locking accounts</strong> and requiring email verification after N failed attempts (this is a <a href=\"https://en.wikipedia.org/wiki/Denial-of-service_attack\" rel=\"noreferrer\">DoS</a> attack waiting to happen)</p></li>\n<li><p>And finally, <strong>login throttling</strong>: that is, setting a time delay between attempts after N failed attempts (yes, DoS attacks are still possible, but at least they are far less likely and a lot more complicated to pull off).</p></li>\n</ul>\n\n<p><strong>Best practice #1:</strong> A short time delay that increases with the number of failed attempts, like:</p>\n\n<ul>\n<li>1 failed attempt = no delay</li>\n<li>2 failed attempts = 2 sec delay</li>\n<li>3 failed attempts = 4 sec delay</li>\n<li>4 failed attempts = 8 sec delay</li>\n<li>5 failed attempts = 16 sec delay</li>\n<li>etc.</li>\n</ul>\n\n<p>DoS attacking this scheme would be very impractical, since the resulting lockout time is slightly larger than the sum of the previous lockout times.</p>\n\n<blockquote>\n  <p>To clarify: The delay is <em>not</em> a delay before returning the response to the browser. It is more like a timeout or refractory period during which login attempts to a specific account or from a specific IP address will not be accepted or evaluated at all. That is, correct credentials will not return in a successful login, and incorrect credentials will not trigger a delay increase.</p>\n</blockquote>\n\n<p><strong>Best practice #2:</strong> A medium length time delay that goes into effect after N failed attempts, like:</p>\n\n<ul>\n<li>1-4 failed attempts = no delay</li>\n<li>5 failed attempts = 15-30 min delay</li>\n</ul>\n\n<p>DoS attacking this scheme would be quite impractical, but certainly doable. Also, it might be relevant to note that such a long delay can be very annoying for a legitimate user. Forgetful users will dislike you.</p>\n\n<p><strong>Best practice #3:</strong> Combining the two approaches - either a fixed, short time delay that goes into effect after N failed attempts, like:</p>\n\n<ul>\n<li>1-4 failed attempts = no delay</li>\n<li>5+ failed attempts = 20 sec delay</li>\n</ul>\n\n<p>Or, an increasing delay with a fixed upper bound, like:</p>\n\n<ul>\n<li>1 failed attempt = 5 sec delay</li>\n<li>2 failed attempts = 15 sec delay</li>\n<li>3+ failed attempts = 45 sec delay</li>\n</ul>\n\n<p>This final scheme was taken from the OWASP best-practices suggestions (link 1 from the MUST-READ list) and should be considered best practice, even if it is admittedly on the restrictive side.</p>\n\n<blockquote>\n  <p><em>As a rule of thumb, however, I would say: the stronger your password policy is, the less you have to bug users with delays. If you require strong (case-sensitive alphanumerics + required numbers and symbols) 9+ character passwords, you could give the users 2-4 non-delayed password attempts before activating the throttling.</em></p>\n</blockquote>\n\n<p>DoS attacking this final login throttling scheme would be <strong><em>very</em></strong> impractical. And as a final touch, always allow persistent (cookie) logins (and/or a CAPTCHA-verified login form) to pass through, so legitimate users won't even be delayed <em>while the attack is in progress</em>. That way, the very impractical DoS attack becomes an <em>extremely</em> impractical attack.</p>\n\n<p>Additionally, it makes sense to do more aggressive throttling on admin accounts, since those are the most attractive entry points</p>\n\n<h2>PART VII: Distributed Brute Force Attacks</h2>\n\n<p>Just as an aside, more advanced attackers will try to circumvent login throttling by 'spreading their activities':</p>\n\n<ul>\n<li><p>Distributing the attempts on a botnet to prevent IP address flagging</p></li>\n<li><p>Rather than picking one user and trying the 50.000 most common passwords (which they can't, because of our throttling), they will pick THE most common password and try it against 50.000 users instead. That way, not only do they get around maximum-attempts measures like CAPTCHAs and login throttling, their chance of success increases as well, since the number 1 most common password is far more likely than number 49.995</p></li>\n<li><p>Spacing the login requests for each user account, say, 30 seconds apart, to sneak under the radar</p></li>\n</ul>\n\n<p>Here, the best practice would be <strong>logging the number of failed logins, system-wide</strong>, and using a running average of your site's bad-login frequency as the basis for an upper limit that you then impose on all users.</p>\n\n<p>Too abstract? Let me rephrase:</p>\n\n<p>Say your site has had an average of 120 bad logins per day over the past 3 months. Using that (running average), your system might set the global limit to 3 times that -- ie. 360 failed attempts over a 24 hour period. Then, if the total number of failed attempts across all accounts exceeds that number within one day (or even better, monitor the rate of acceleration and trigger on a calculated threshold), it activates system-wide login throttling - meaning short delays for ALL users (still, with the exception of cookie logins and/or backup CAPTCHA logins).</p>\n\n<p>I also posted a question with <a href=\"https://stackoverflow.com/questions/479233/what-is-the-best-distributed-brute-force-countermeasure\">more details and a really good discussion of how to avoid tricky pitfals</a> in fending off distributed brute force attacks</p>\n\n<h2>PART VIII: Two-Factor Authentication and Authentication Providers</h2>\n\n<p>Credentials can be compromised, whether by exploits, passwords being written down and lost, laptops with keys being stolen, or users entering logins into phishing sites.  Logins can be further protected with two-factor authentication, which uses out-of-band factors such as single-use codes received from a phone call, SMS message, app, or dongle. Several providers offer two-factor authentication services.</p>\n\n<p>Authentication can be completely delegated to a single-sign-on service, where another provider handles collecting credentials. This pushes the problem to a trusted third party. Google and Twitter both provide standards-based SSO services, while Facebook provides a similar proprietary solution.</p>\n\n<h2>MUST-READ LINKS About Web Authentication</h2>\n\n<ol>\n<li><a href=\"https://www.owasp.org/index.php/Authentication_Cheat_Sheet\" rel=\"noreferrer\">OWASP Guide To Authentication</a> / <a href=\"https://www.owasp.org/index.php/Authentication_Cheat_Sheet\" rel=\"noreferrer\">OWASP Authentication Cheat Sheet</a></li>\n<li><a href=\"https://pdos.csail.mit.edu/papers/webauth:sec10.pdf\" rel=\"noreferrer\">Dos and Don\u2019ts of Client Authentication on the Web (very readable MIT research paper)</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/HTTP_cookie#Drawbacks_of_cookies\" rel=\"noreferrer\">Wikipedia: HTTP cookie</a></li>\n<li><a href=\"https://cups.cs.cmu.edu/soups/2008/proceedings/p13Rabkin.pdf\" rel=\"noreferrer\">Personal knowledge questions for fallback authentication: Security questions in the era of Facebook (very readable Berkeley research paper)</a></li>\n</ol>\n",
        "votes": "3767",
        "tags": "",
        "accepted": true
      },
      {
        "id": "31486842",
        "title": "",
        "text": "<p>I'd like to add one suggestion I've used, based on defense in depth. You don't need to have the same auth&amp;auth system for admins as regular users. You can have a separate login form on a separate url executing separate code for requests that will grant high privileges. This one can make choices that would be a total pain to regular users. One such that I've used is to actually scramble the login URL for admin access and email the admin the new URL. Stops any brute force attack right away as your new URL can be arbitrarily difficult (very long random string) but your admin user's only inconvenience is following a link in their email. The attacker no longer knows where to even POST to. </p>\n",
        "votes": "25",
        "tags": "",
        "accepted": false
      },
      {
        "id": "32038011",
        "title": "",
        "text": "<p>I dont't know whether it was best to answer this as an answer or as a comment. I opted for the first option.</p>\n\n<p>Regarding the poing <strong>PART IV: Forgotten Password Functionality</strong> in the first answer, I would make a point about Timing Attacks. </p>\n\n<p>In the <strong>Remember your password</strong> forms, an attacker could potentially check a full list of emails and detect which are registered to the system (see link below). </p>\n\n<p>Regarding the Forgotten Password Form, I would add that it is a good idea to equal times between successful and unsucessful queries with some delay function. </p>\n\n<p><a href=\"https://crypto.stanford.edu/~dabo/papers/webtiming.pdf\">https://crypto.stanford.edu/~dabo/papers/webtiming.pdf</a></p>\n",
        "votes": "17",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6985280",
        "title": "",
        "text": "<p>I do not think the above answer is \"wrong\" but there are large areas of authentication that are not touched upon (or rather the emphasis is on \"how to implement cookie sessions\", not on \"what options are available and what are the trade-offs\".</p>\n\n<p>My suggested edits/answers are</p>\n\n<ul>\n<li>The problem lies more in account setup than in password checking.</li>\n<li>The use of two-factor authentication is much more secure than more clever means of password encryption</li>\n<li><p>Do NOT try to implement your own login form or database storage of passwords, unless \nthe data being stored is valueless at account creation and self-generated (that is, web 2.0 style like Facebook, <a href=\"http://en.wikipedia.org/wiki/Flickr\" rel=\"noreferrer\">Flickr</a>, etc.)</p>\n\n<ol>\n<li>Digest Authentication is a standards-based approach supported in all major browsers and servers, that will not send a password even over a secure channel.</li>\n</ol></li>\n</ul>\n\n<p>This avoids any need to have \"sessions\" or cookies as the browser itself will re-encrypt the communication each time. It is the most \"lightweight\" development approach.</p>\n\n<p>However, I do not recommend this, except for public, low-value services. This is an issue with some of the other answers above - do not try an re-implement server-side authentication mechanisms - this problem has been solved and is supported by most major browsers. Do not use cookies. Do not store anything in your own hand-rolled database. Just ask, per request, if the request is authenticated. Everything else should be supported by configuration and third-party trusted software.</p>\n\n<p>So ...</p>\n\n<p>First, we are confusing the initial creation of an account (with a password) with the re-checking of the password subsequently. If I am Flickr and creating your site for the first time, the new user has access to zero value (blank web space). I truly do not care if the person creating the account is lying about their name. If I am creating an account of the hospital intranet/extranet, the value lies in all the medical records, and so I <em>do</em> care about the identity (*) of the account creator.</p>\n\n<p>This is the very very hard part. The <em>only</em> decent solution is a web of trust. For example, you join the hospital as a doctor. You create a web page hosted somewhere with your photo, your passport number, and a public key, and hash them all with the private key. You then visit the hospital and the system administrator looks at your passport, sees if the photo matches you, and then hashes the web page/photo hash with the hospital private key. From now on we can securely exchange keys and tokens. As can anyone who trusts the hospital (there is the secret sauce BTW). The system administrator can also give you an <a href=\"http://en.wikipedia.org/wiki/RSA_%28security_firm%29\" rel=\"noreferrer\">RSA</a> dongle or other two-factor authentication.</p>\n\n<p>But this is a <em>lot</em> of a hassle, and not very web 2.0. However, it is the only secure way to create new accounts that have access to valuable information that is not self-created.</p>\n\n<ol>\n<li><p>Kerberos and SPNEGO - single sign-on mechanisms with a trusted third party - basically the user verifies against a trusted third party. (NB this is not in any way the not to be trusted <a href=\"http://en.wikipedia.org/wiki/OAuth\" rel=\"noreferrer\">OAuth</a>)</p></li>\n<li><p><a href=\"http://en.wikipedia.org/wiki/Secure_Remote_Password_protocol\" rel=\"noreferrer\">SRP</a> - sort of clever password authentication without a trusted third party. But here we are getting into the realms of \"it's safer to use two-factor authentication, even if that's costlier\"</p></li>\n<li><p><a href=\"http://en.wikipedia.org/wiki/SSL\" rel=\"noreferrer\">SSL</a> client side - give the clients a public key certificate (support in all major browsers - but raises questions over client machine security).</p></li>\n</ol>\n\n<p>In the end, it's a tradeoff - what is the cost of a security breach vs the cost of implementing more secure approaches. One day, we may see a proper <a href=\"http://en.wikipedia.org/wiki/Public-key_infrastructure\" rel=\"noreferrer\">PKI</a> widely accepted and so no more own rolled authentication forms and databases. One day...</p>\n",
        "votes": "82",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "561",
    "url": "https://stackoverflow.com/questions/561",
    "title": "How to use combinations of sets as test data",
    "text:": "<p>I would like to test a function with a tuple from a set of fringe cases and normal values. For example, while testing a function which returns <code>true</code> whenever given three lengths that form a valid triangle, I would have specific cases, negative / small / large numbers, values close-to being overflowed, etc.; what is more, main aim is to generate combinations of these values, <em>with</em> or <em>without</em> repetition, in order to get a set of test data.</p>\n\n<pre><code>(inf,0,-1), (5,10,1000), (10,5,5), (0,-1,5), (1000,inf,inf),\n...\n</code></pre>\n\n<blockquote>\n  <p><em>As a note: I actually know the answer to this, but it might be helpful for others, and a challenge for people here! --will post my answer later on.</em></p>\n</blockquote>\n",
    "codes": [
      [],
      [
        "import itertools\n\nprint list(itertools.product([1,2,3], [4,5,6]))\n   [(1, 4), (1, 5), (1, 6),\n   (2, 4), (2, 5), (2, 6),\n   (3, 4), (3, 5), (3, 6)]\n",
        "print list(itertools.product([1,2], repeat=3))\n[(1, 1, 1), (1, 1, 2), (1, 2, 1), (1, 2, 2),\n(2, 1, 1), (2, 1, 2), (2, 2, 1), (2, 2, 2)]\n",
        "print list(itertools.combinations('123', 2))\n[('1', '2'), ('1', '3'), ('2', '3')]\n",
        "print list(itertools.permutations([1,2,3,4], 2))\n[(1, 2), (1, 3), (1, 4),\n   (2, 1), (2, 3), (2, 4),\n   (3, 1), (3, 2), (3, 4),\n   (4, 1), (4, 2), (4, 3)]\n"
      ],
      [],
      [],
      [
        "/** [combination c n p x]\n * get the [x]th lexicographically ordered set of [p] elements in [n]\n * output is in [c], and should be sizeof(int)*[p] */\nvoid combination(int* c,int n,int p, int x){\n    int i,r,k = 0;\n    for(i=0;i<p-1;i++){\n        c[i] = (i != 0) ? c[i-1] : 0;\n        do {\n            c[i]++;\n            r = choose(n-c[i],p-(i+1));\n            k = k + r;\n        } while(k < x);\n        k = k - r;\n    }\n    c[p-1] = c[p-2] + x - k;\n}\n"
      ]
    ],
    "votes:": "25",
    "tags": "<unit-testing><language-agnostic><testing>",
    "AcceptedAnswerId": "794",
    "answers": [
      {
        "id": "589",
        "title": "",
        "text": "<p>Interesting question!</p>\n\n<p>I would do this by picking combinations, something like the following in python.  The hardest part is probably first pass verification, i.e. <code>if f(1,2,3) returns true</code>, is that a correct result?  Once you have verified that, then this is a good basis for regression testing.</p>\n\n<p>Probably it's a good idea to make a set of test cases that you know will be all true (e.g. 3,4,5 for this triangle case), and a set of test cases that you know will be all false (e.g. 0,1,inf).  Then you can more easily verify the tests are correct.</p>\n\n<pre>\n# xpermutations from http://code.activestate.com/recipes/190465\nfrom xpermutations import *\n\nlengths=[-1,0,1,5,10,0,1000,'inf']\nfor c in xselections(lengths,3):        # or xuniqueselections\n    print c\n</pre>\n\n<pre>\n(-1,-1,-1);\n(-1,-1,0);\n(-1,-1,1);\n(-1,-1,5);\n(-1,-1,10);\n(-1,-1,0);\n(-1,-1,1000);\n(-1,-1,inf);\n(-1,0,-1);\n(-1,0,0);\n...\n</pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "170010",
        "title": "",
        "text": "<p>With the brand new Python 2.6, you have a standard solution with the itertools module that returns the Cartesian product of iterables :</p>\n\n<pre><code>import itertools\n\nprint list(itertools.product([1,2,3], [4,5,6]))\n   [(1, 4), (1, 5), (1, 6),\n   (2, 4), (2, 5), (2, 6),\n   (3, 4), (3, 5), (3, 6)]\n</code></pre>\n\n<p>You can provide a \"repeat\" argument to perform the product with an iterable and itself:</p>\n\n<pre><code>print list(itertools.product([1,2], repeat=3))\n[(1, 1, 1), (1, 1, 2), (1, 2, 1), (1, 2, 2),\n(2, 1, 1), (2, 1, 2), (2, 2, 1), (2, 2, 2)]\n</code></pre>\n\n<p>You can also tweak something with combinations as well :</p>\n\n<pre><code>print list(itertools.combinations('123', 2))\n[('1', '2'), ('1', '3'), ('2', '3')]\n</code></pre>\n\n<p>And if order matters, there are permutations :</p>\n\n<pre><code>print list(itertools.permutations([1,2,3,4], 2))\n[(1, 2), (1, 3), (1, 4),\n   (2, 1), (2, 3), (2, 4),\n   (3, 1), (3, 2), (3, 4),\n   (4, 1), (4, 2), (4, 3)]\n</code></pre>\n\n<p>Of course all that cool stuff don't exactly do the same thing, but you can use them in a way or another to solve you problem. </p>\n\n<p>Just remember that you can convert a tuple or a list to a set and vice versa using list(), tuple() and set().</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "79583",
        "title": "",
        "text": "<p>While it's possible to create lots of test data and see what happens, it's more efficient to try to minimize the data being used.</p>\n\n<p>From a typical QA perspective, you would want to identify different classifications of inputs. Produce a set of input values for each classification and determine the appropriate outputs. </p>\n\n<p>Here's a sample of classes of input values</p>\n\n<ul>\n<li>valid triangles with small numbers such as (1 billion, 2, billion, 2 billion)</li>\n<li>valid triangles with large numbers such as (0.000001, 0.00002, 0.00003)</li>\n<li>valid obtuse triangles that are 'almost'flat such as (10, 10, 19.9999)</li>\n<li>valid acute triangles that are 'almost' flat such as (10, 10, 0000001)</li>\n<li>invalid triangles with at least one negative value</li>\n<li>invalid triangles where the sum of two sides equals the third</li>\n<li>invalid triangles where the sum of two sides is greater than the third</li>\n<li>input values that are non-numeric</li>\n</ul>\n\n<p>...</p>\n\n<p>Once you are satisfied with the list of input classifications for this function, then you can create the actual test data.  Likely, it would be helpful to test all permutations of each item.  (e.g. (2,3,4), (2,4,3), (3,2,4), (3,4,2), (4,2,3), (4,3,2)) Typically, you'll find there are some classifications you missed (such as the concept of inf as an input parameter).</p>\n\n<p>Random data for some period of time may be helpful as well, that can find strange bugs in the code, but is generally not productive.</p>\n\n<p>More likely, this function is being used in some specific context where additional rules are applied.(e.g. only integer values or values must be in 0.01 increments, etc.) These add to the list of classifications of input parameters.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "13123",
        "title": "",
        "text": "<p>I think you can do this with the <a href=\"http://blog.donnfelker.com/2008/04/01/NUnit247AndTheRowTestAttributeWithExample.aspx\" rel=\"nofollow noreferrer\">Row Test Attribute</a> (available in MbUnit and later versions of NUnit) where you could specify several sets to populate one unit test.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "794",
        "title": "",
        "text": "<p>Absolutely, especially dealing with lots of these permutations/combinations I can definitely see that the first pass would be an issue.</p>\n\n<p>Interesting implementation in python, though I wrote a nice one in C and Ocaml based on \"Algorithm 515\" (see below). He wrote his in Fortran as it was common back then for all the \"Algorithm XX\" papers, well, that assembly or c. I had to re-write it and make some small improvements to work with arrays not ranges of numbers. This one does random access, I'm still working on getting some nice implementations of the ones mentioned in Knuth 4th volume fascicle 2. I'll an explanation of how this works to the reader. Though if someone is curious, I wouldn't object to writing something up.</p>\n\n<pre><code>/** [combination c n p x]\n * get the [x]th lexicographically ordered set of [p] elements in [n]\n * output is in [c], and should be sizeof(int)*[p] */\nvoid combination(int* c,int n,int p, int x){\n    int i,r,k = 0;\n    for(i=0;i&lt;p-1;i++){\n        c[i] = (i != 0) ? c[i-1] : 0;\n        do {\n            c[i]++;\n            r = choose(n-c[i],p-(i+1));\n            k = k + r;\n        } while(k &lt; x);\n        k = k - r;\n    }\n    c[p-1] = c[p-2] + x - k;\n}\n</code></pre>\n\n<p>~\"Algorithm 515: Generation of a Vector from the Lexicographical Index\"; Buckles, B. P., and Lybanon, M. ACM Transactions on Mathematical Software, Vol. 3, No. 2, June 1977.</p>\n",
        "votes": "16",
        "tags": "",
        "accepted": true
      }
    ]
  },
  {
    "id:": "564",
    "url": "https://stackoverflow.com/questions/564",
    "title": "What is the difference between an int and an Integer in Java and C#?",
    "text:": "<p>I was reading <em><a href=\"https://rads.stackoverflow.com/amzn/click/com/1430209879\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">More Joel on Software</a></em> when I came across <a href=\"http://en.wikipedia.org/wiki/Joel_Spolsky\" rel=\"nofollow noreferrer\">Joel Spolsky</a> saying something about a particular type of programmer knowing the difference between an <code>int</code> and an <code>Integer</code> in Java/C# (Object-Oriented Programming Languages).</p>\n\n<p>So, what is the difference?</p>\n",
    "codes": [
      [],
      [
        "int i;\n",
        "object o = i;\n"
      ],
      [
        "double doubleValue = 156.5d;\nDouble doubleObject  = new Double(doubleValue);\nByte myByteValue = doubleObject.byteValue ();\nString myStringValue = doubleObject.toString();\n"
      ],
      [],
      [],
      [],
      [
        "int a;\n//assuming a value you are getting from data base which is null\nif(a ==null) // this is wrong - cannot compare primitive to null\n{\ndo something...}\n\nInstead you will use,\nInteger a;\n//assuming a value you are getting from data base which is null\nif(a ==null) // this is correct/legal\n{ do something...}\n"
      ],
      [
        "int number = 7;\n",
        "Integer number = new Integer(5);\n"
      ],
      [
        "Integer i1 = new Integer(127);\nInteger i2 = new Integer(127);\nSystem.out.println(i1 == i2); //  true\n",
        "Integer i1 = new Integer(128);\nInteger i2 = new Integer(128);\nSystem.out.println(i1 == i2); //  false\n",
        "System.out.println(i1.equals(i2)); //  true\n"
      ],
      [],
      [
        "Integer value1 = null; //OK\n\nint value2 = null      //Error\n",
        "List<Integer> element = new ArrayList<>();\nint valueInt = 10;\nInteger  valueInteger = new Integer(value);\nelement.add(valueInteger);\n",
        "List<Integer> element = new ArrayList<>();\nelement.add(5);\n"
      ],
      [],
      [
        "Integer(int num)\nInteger(String str) throws NumberFormatException\nDouble(double num)\nDouble(String str) throws NumberFormatException\n",
        "class ManualBoxing {\n        public static void main(String args[]) {\n        Integer objInt = new Integer(20);  // Manually box the value 20.\n        int i = objInt.intValue();  // Manually unbox the value 20\n        System.out.println(i + \" \" + iOb); // displays 20 20\n    }\n}\n",
        "class AutoBoxing {\n    public static void main(String args[]) {\n        Integer objInt = 40; // autobox an int\n        int i = objInt ; // auto-unbox\n        System.out.println(i + \" \" + iOb); // displays 40 40\n    }\n}\n"
      ],
      [],
      [],
      [],
      [
        "int aNumber = 4;\nint anotherNum = aNumber;\naNumber += 6;\nSystem.out.println(anotherNum); // Prints 4\n",
        "Integer aNumber = Integer.valueOf(4);\nInteger anotherNumber = aNumber; // anotherNumber references the \n                                 // same object as aNumber\n",
        "public int add(int a, int b) {\n    return a + b;\n}\nfinal int two = 2;\nint sum = add(1, two);\n",
        "public int add(Integer a, Integer b) {\n    return a.intValue() + b.intValue();\n}\nfinal Integer two = Integer.valueOf(2);\nint sum = add(Integer.valueOf(1), two);\n",
        "public void increment(int x) {\n  x = x + 1;\n}\nint a = 1;\nincrement(a);\n// a is now 2\n",
        "public void increment(Integer x) {\n  x = Integer.valueOf(x.intValue() + 1);\n}\nInteger a = Integer.valueOf(1);\nincrement(a);\n// a is now 2\n"
      ],
      [
        "int x;\nInteger y; \n",
        "Integer.toString(x);\n"
      ],
      [
        "Integer i = new Integer(6);\n",
        "String s = i.toString();//sets s the string representation of i\n",
        "int i = 6;\n",
        "String s = i.toString();//will not work!!!\n"
      ],
      [
        "Deque<Integer> queue;\n\nvoid add(int n) {\n    queue.add(n);\n}\n\nint remove() {\n    return queue.remove();\n}\n",
        "Deque queue;\n\nvoid add(int n) {\n    queue.add(Integer.valueOf(n));\n}\n\nint remove() {\n    return ((Integer) queue.remove()).intValue();\n}\n"
      ],
      [
        "e.g. int i=10;\n",
        "Integer a = new Integer();\n"
      ],
      [],
      [],
      [],
      [
        "void DoStuff()\n{\n    System.Console.WriteLine( SomeMethod((int)5) );\n    System.Console.WriteLine( GetTypeName<int>() );\n}\n\nstring SomeMethod(object someParameter)\n{\n    return string.Format(\"Some text {0}\", someParameter.ToString());\n}\n\nstring GetTypeName<T>()\n{\n    return (typeof (T)).FullName;\n}\n"
      ],
      []
    ],
    "votes:": "265",
    "tags": "<c#><java><integer><int>",
    "AcceptedAnswerId": "566",
    "answers": [
      {
        "id": "583",
        "title": "",
        "text": "<p>In C#, int is just an <strong><em>alias</em></strong> for <code>System.Int32</code>, string for <code>System.String</code>, double for <code>System.Double</code> etc...</p>\n\n<p>Personally I prefer int, string, double, etc. because they don't require a <code>using System;</code> statement :) A silly reason, I know...</p>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1266",
        "title": "",
        "text": "<p>I'll just post here since some of the other posts are slightly inaccurate in relation to C#.</p>\n\n<p><strong>Correct:</strong> <code>int</code> is an alias for <code>System.Int32</code>.<br/>\n<strong>Wrong:</strong> <code>float</code> is not an alias for <code>System.Float</code>, but for <code>System.Single</code></p>\n\n<p>Basically, int is a reserved keyword in the C# programming language, and is an alias for the <code>System.Int32</code> value type.</p>\n\n<p>float and Float is not the same however, as the right system type for ''<code>float</code>'' is System.Single. There are some types like this that has reserved keywords that doesn't seem to match the type names directly.</p>\n\n<p>In C# there is no difference between ''<code>int</code>'' and ''<code>System.Int32</code>'', or any of the other pairs or keywords/system types, except for when defining enums. With enums you can specify the storage size to use and in this case you can only use the reserved keyword, and not the system runtime type name.</p>\n\n<p>Wether the value in the int will be stored on the stack, in memory, or as a referenced heap object depends on the context and how you use it.</p>\n\n<p>This declaration in a method:</p>\n\n<pre><code>int i;\n</code></pre>\n\n<p>defines a variable <code>i</code> of type <code>System.Int32</code>, living in a register or on the stack, depending on optimizations. The same declaration in a type (struct or class) defines a member field. The same declaration in a method argument list defines a parameter, with the same storage options as for a local variable. (note that this paragraph is not valid if you start pulling iterator methods into the mix, these are different beasts altogether)</p>\n\n<p>To get a heap object, you can use boxing:</p>\n\n<pre><code>object o = i;\n</code></pre>\n\n<p>this will create a boxed copy of the contents of <code>i</code> on the heap. In IL you can access methods on the heap object directly, but in C# you need to cast it back to an int, which will create another copy. Thus, the object on the heap cannot easily be changed in C# without creating a new boxed copy of a new int value. (Ugh, this paragraph doesn't read all that easily.)</p>\n",
        "votes": "28",
        "tags": "",
        "accepted": false
      },
      {
        "id": "35686676",
        "title": "",
        "text": "<p>In Java int is a primitive data type while Integer is a Helper class, it is use to convert for one data type to other. </p>\n\n<p>For example: </p>\n\n<pre><code>double doubleValue = 156.5d;\nDouble doubleObject  = new Double(doubleValue);\nByte myByteValue = doubleObject.byteValue ();\nString myStringValue = doubleObject.toString();\n</code></pre>\n\n<p>Primitive data types are store the fastest available memory where the Helper class is complex and store in heep memory. </p>\n\n<p>reference from \"David Gassner\" Java Essential Training. </p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "56863511",
        "title": "",
        "text": "<p>int is a primitive datatype whereas Integer is an object. \nCreating an object with Integer will give you access to all the methods that are available in the Integer class. \nBut, if you create a primitive data type with int, you will not be able to use those inbuild methods and you have to define them by yourself.\nBut, if you don't want any other methods and want to make the program more memory efficient, you can go with primitive datatype because creating an object will increase the memory consumption.</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3464",
        "title": "",
        "text": "<p>One more thing that I don't see in previous answers:\nIn Java the primitive wrappers classes like Integer, Double, Float, Boolean... and String are suposed to be invariant, so that when you pass an instance of those classes the invoked method couldn't alter your data in any way, in opositi\u00f3n with most of other classes, which internal data could be altered by its public methods. So that this classes only has 'getter' methods, no 'setters', besides the constructor.</p>\n\n<p>In a java program String literals are stored in a separate portion of heap memory, only a instance for literal, to save memory reusing those instances</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "24795920",
        "title": "",
        "text": "<p>In both languages (Java and C#) <code>int</code> is 4-byte signed integer.</p>\n\n<p>Unlike Java, C# Provides both signed and unsigned integer values. As Java and C# are object object-oriented, some operations in these languages do not map directly onto instructions provided by the run time and so needs to be defined as part of an object of some type.</p>\n\n<p>C# provides <code>System.Int32</code> which is a value type using a part of  memory that belongs to the reference type on the heap.</p>\n\n<p>java provides <code>java.lang.Integer</code> which is a reference type operating on <code>int</code>. The methods in <code>Integer</code> can't be compiled directly to run time instructions.So we box an int value to convert it into an instance of Integer and use the methods which expects instance of some type (like <code>toString()</code>, <code>parseInt()</code>, <code>valueOf()</code> etc).</p>\n\n<p>In C# variable  int refers to <code>System.Int32.Any</code> 4-byte value in memory can be interpreted as a primitive int, that can be manipulated by  instance of System.Int32.So int is an alias for <code>System.Int32.When</code> using integer-related methods like <code>int.Parse()</code>, <code>int.ToString()</code> etc. Integer is compiled into the FCL <code>System.Int32</code> struct calling the respective methods like <code>Int32.Parse()</code>, <code>Int32.ToString()</code>.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "48816251",
        "title": "",
        "text": "<p>(Java Version)\nIn Simple words int is primitive and Integer is wrapper object for int. </p>\n\n<p>One example where to use Integer vs int, When you want to compare and int variable again null it will throw error.</p>\n\n<pre><code>int a;\n//assuming a value you are getting from data base which is null\nif(a ==null) // this is wrong - cannot compare primitive to null\n{\ndo something...}\n\nInstead you will use,\nInteger a;\n//assuming a value you are getting from data base which is null\nif(a ==null) // this is correct/legal\n{ do something...}\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "25180570",
        "title": "",
        "text": "<p>An int and Integer in Java and C# are two different terms used to represent different things. It is one of the the primitive data types that can be assigned to a variable that can store exactly. One value of its declared type at a time.</p>\n\n<p><strong>For example:</strong></p>\n\n<pre><code>int number = 7;\n</code></pre>\n\n<p>Where <code>int</code> is the datatype assigned to the variable number which holds the value seven. So an <code>int</code> is just a primitive not an object.</p>\n\n<p>While an <code>Integer</code> is a wrapper class for a primitive data type which has static methods. That can be used as an argument to a method which requires an object, where as int can be used as an argument to a method which requires an integer value, that can be used for arithmetic expression. </p>\n\n<p><strong>For example:</strong></p>\n\n<pre><code>Integer number = new Integer(5);\n</code></pre>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2823",
        "title": "",
        "text": "<p>Regarding Java 1.5 and <a href=\"http://en.wikipedia.org/wiki/Autoboxing#Autoboxing\" rel=\"noreferrer\">autoboxing</a> there is an important \"quirk\" that comes to play when comparing Integer objects.</p>\n\n<p>In Java, Integer objects with the values -128 to 127 are immutable (that is, for one particular integer value, say 23, all Integer objects instantiated through your program with the value 23 points to the <em>exact</em> same object).</p>\n\n<p>Example, this returns true:</p>\n\n<pre><code>Integer i1 = new Integer(127);\nInteger i2 = new Integer(127);\nSystem.out.println(i1 == i2); //  true\n</code></pre>\n\n<p>While this returns false:</p>\n\n<pre><code>Integer i1 = new Integer(128);\nInteger i2 = new Integer(128);\nSystem.out.println(i1 == i2); //  false\n</code></pre>\n\n<p>The == compares by reference (does the variables point to the same object).</p>\n\n<p>This result may or may not differ depending on what JVM you are using. The specification autoboxing for Java 1.5 requires that integers (-128 to 127) always box to the same wrapper object. </p>\n\n<p>A solution? =) One should always use the Integer.equals() method when comparing Integer objects.</p>\n\n<pre><code>System.out.println(i1.equals(i2)); //  true\n</code></pre>\n\n<p>More info at <a href=\"http://today.java.net/pub/a/today/2005/03/24/autoboxing.html\" rel=\"noreferrer\">java.net</a> Example at <a href=\"http://bexhuff.com/2006/11/java-1-5-autoboxing-wackyness\" rel=\"noreferrer\">bexhuff.com</a></p>\n",
        "votes": "23",
        "tags": "",
        "accepted": false
      },
      {
        "id": "42617947",
        "title": "",
        "text": "<p><code>int</code> is predefined in library function c# but in java we can create object of <code>Integer</code> </p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "50699096",
        "title": "",
        "text": "<p><strong>01. Integer can be null. But int cannot be null.</strong></p>\n\n<pre><code>Integer value1 = null; //OK\n\nint value2 = null      //Error\n</code></pre>\n\n<p><strong>02. Only can pass Wrapper Classes type values to any collection class.</strong></p>\n\n<p>(Wrapper Classes - Boolean,Character,Byte,Short,Integer,Long,Float,Double)</p>\n\n<pre><code>List&lt;Integer&gt; element = new ArrayList&lt;&gt;();\nint valueInt = 10;\nInteger  valueInteger = new Integer(value);\nelement.add(valueInteger);\n</code></pre>\n\n<p>But normally we add primitive values to collection class? Is point 02 correct?</p>\n\n<pre><code>List&lt;Integer&gt; element = new ArrayList&lt;&gt;();\nelement.add(5);\n</code></pre>\n\n<p>Yes 02 is correct, beacouse <code>autoboxing.</code></p>\n\n<blockquote>\n  <p>Autoboxing is the automatic conversion that the java compiler makes\n  between the primitive type and their corresponding wrapper class.</p>\n</blockquote>\n\n<p>Then 5 convert as Integer value by autoboxing. </p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "45503764",
        "title": "",
        "text": "<p>\"int\" is primitive data-type and \"Integer\" in Wrapper Class in Java. \"Integer\" can be used as an argument to a method which requires an object, where as \"int\" can be used as an argument to a method which requires an integer value, that can be used for arithmetic expression.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "37797743",
        "title": "",
        "text": "<p><strong>Java:</strong> </p>\n\n<p><code>int</code>, <code>double</code>, <code>long</code>, <code>byte</code>, <code>float</code>, <code>double</code>, <code>short</code>, <code>boolean</code>, <code>char</code> - primitives. Used for hold the basic data types\nsupported by the language. the primitive types are not part of the\nobject hierarchy, and they do not inherit Object. Thet can'be pass by reference to a method. </p>\n\n<p><code>Double</code>, <code>Float</code>, <code>Long</code>, <code>Integer</code>, <code>Short</code>, <code>Byte</code>, <code>Character</code>, and <code>Boolean</code>, are type Wrappers, packaged in <code>java.lang</code>. All of the numeric type wrappers define constructors that allow an object to be constructed from a given value, or a string representation of that value.\nUsing objects can add an overhead to even the simplest of calculations. </p>\n\n<p>Beginning with JDK 5, Java has included two very helpful features: autoboxing and autounboxing. Autoboxing/unboxing greatly simplifies and streamlines code that must convert primitive types into objects, and vice versa.  </p>\n\n<p>Example of constructors:</p>\n\n<pre><code>Integer(int num)\nInteger(String str) throws NumberFormatException\nDouble(double num)\nDouble(String str) throws NumberFormatException\n</code></pre>\n\n<p>Example of boxing/unboxing:</p>\n\n<pre><code>class ManualBoxing {\n        public static void main(String args[]) {\n        Integer objInt = new Integer(20);  // Manually box the value 20.\n        int i = objInt.intValue();  // Manually unbox the value 20\n        System.out.println(i + \" \" + iOb); // displays 20 20\n    }\n}\n</code></pre>\n\n<p>Example of autoboxing/autounboxing:</p>\n\n<pre><code>class AutoBoxing {\n    public static void main(String args[]) {\n        Integer objInt = 40; // autobox an int\n        int i = objInt ; // auto-unbox\n        System.out.println(i + \" \" + iOb); // displays 40 40\n    }\n}\n</code></pre>\n\n<p>P.S. Herbert Schildt's book was taken as a reference.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "39635844",
        "title": "",
        "text": "<p>In java as per my knowledge if you learner then, when you write int a; then in java generic it will compile code like <code>Integer a = new Integer()</code>.\nSo,as per generics <code>Integer</code> is not used but <code>int</code> is used.\nso there is so such difference there.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "56422463",
        "title": "",
        "text": "<p><strong>int</strong> is a primitive data type.\n<strong>Integer</strong> is a wrapper class. It can store int data as objects.</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "566",
        "title": "",
        "text": "<p><strong>In Java,</strong> the 'int' type is a primitive, whereas the 'Integer' type is an object.</p>\n\n<p><strong>In C#,</strong> the 'int' type is the same as <code>System.Int32</code> and is <a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/value-types\" rel=\"nofollow noreferrer\">a value type</a> (ie more like the java 'int'). An integer (just like any other value types) can be <a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/types/boxing-and-unboxing\" rel=\"nofollow noreferrer\">boxed</a> (\"wrapped\") into an object. </p>\n\n<hr>\n\n<p>The differences between objects and primitives are somewhat beyond the scope of this question, but to summarize: </p>\n\n<p><strong>Objects</strong> provide facilities for polymorphism, are passed by reference (or more accurately have references passed by value), and are allocated from the <a href=\"http://en.wikipedia.org/wiki/Dynamic_memory_allocation\" rel=\"nofollow noreferrer\">heap</a>. Conversely, <strong>primitives</strong> are immutable types that are passed by value and are often allocated from the <a href=\"https://en.wikipedia.org/wiki/Stack-based_memory_allocation\" rel=\"nofollow noreferrer\">stack</a>.</p>\n",
        "votes": "258",
        "tags": "",
        "accepted": true
      },
      {
        "id": "3285",
        "title": "",
        "text": "<p>In Java there are two basic types in the <a href=\"http://java.sun.com/docs/books/jvms/second_edition/html/Concepts.doc.html#22930\" rel=\"noreferrer\">JVM</a>. 1) Primitive types and 2) Reference Types. int is a primitive type and Integer is a class type (which is kind of reference type).</p>\n\n<p>Primitive values do not share state with other primitive values. A variable whose type is a primitive type always holds a primitive value of that type.</p>\n\n<pre><code>int aNumber = 4;\nint anotherNum = aNumber;\naNumber += 6;\nSystem.out.println(anotherNum); // Prints 4\n</code></pre>\n\n<p>An object is a dynamically created class instance or an array. The reference values (often just references) are pointers to these objects and a special null reference, which refers to no object. There may be many references to the same object.</p>\n\n<pre><code>Integer aNumber = Integer.valueOf(4);\nInteger anotherNumber = aNumber; // anotherNumber references the \n                                 // same object as aNumber\n</code></pre>\n\n<p>Also in Java everything is passed by value. With objects the value that is passed is the reference to the object. So another difference between int and Integer in java is how they are passed in method calls. For example in</p>\n\n<pre><code>public int add(int a, int b) {\n    return a + b;\n}\nfinal int two = 2;\nint sum = add(1, two);\n</code></pre>\n\n<p>The variable <em>two</em> is passed as the primitive integer type 2. Whereas in</p>\n\n<pre><code>public int add(Integer a, Integer b) {\n    return a.intValue() + b.intValue();\n}\nfinal Integer two = Integer.valueOf(2);\nint sum = add(Integer.valueOf(1), two);\n</code></pre>\n\n<p>The variable <em>two</em> is passed as a reference to an object that holds the integer value 2.</p>\n\n<hr>\n\n<p>@WolfmanDragon:\nPass by reference would work like so:</p>\n\n<pre><code>public void increment(int x) {\n  x = x + 1;\n}\nint a = 1;\nincrement(a);\n// a is now 2\n</code></pre>\n\n<p>When increment is called it passes a reference (pointer) to variable <em>a</em>. And the <em>increment</em> function directly modifies variable <em>a</em>.</p>\n\n<p>And for object types it would work as follows:</p>\n\n<pre><code>public void increment(Integer x) {\n  x = Integer.valueOf(x.intValue() + 1);\n}\nInteger a = Integer.valueOf(1);\nincrement(a);\n// a is now 2\n</code></pre>\n\n<p>Do you see the difference now?</p>\n",
        "votes": "19",
        "tags": "",
        "accepted": false
      },
      {
        "id": "23711054",
        "title": "",
        "text": "<p>have you ever programmed before then (int) is one of the primitive types you can set for your variables (just like char, float, ...).</p>\n\n<p>but Integer is a wrapper class that you can use it to do some functions on an int variable (e.g convert it to string or vise versa,...) , but keep note that methods in the wrapper classes are static so you can use them anytime without creating an instance of Integer class.\nas a recap :</p>\n\n<pre><code>int x;\nInteger y; \n</code></pre>\n\n<p>x and y are both variables of type int but y is wrapped by an Integer class and has several methods that you use,but i case you need to call some functions of Integer wrapper class you can do it simply.</p>\n\n<pre><code>Integer.toString(x);\n</code></pre>\n\n<p>but be aware that both x and y are corect but if you want to use them just as a primitive type, use the simple form (used for defining x).</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "568",
        "title": "",
        "text": "<p>Well, in Java an int is a primitive while an Integer is an Object. Meaning, if you made a new Integer:</p>\n\n<pre><code>Integer i = new Integer(6);\n</code></pre>\n\n<p>You could call some method on i:</p>\n\n<pre><code>String s = i.toString();//sets s the string representation of i\n</code></pre>\n\n<p>Whereas with an int:</p>\n\n<pre><code>int i = 6;\n</code></pre>\n\n<p>You cannot call any methods on it, because it is simply a primitive. So:</p>\n\n<pre><code>String s = i.toString();//will not work!!!\n</code></pre>\n\n<p>would produce an error, because int is not an object.</p>\n\n<p>int is one of the few primitives in Java (along with char and some others). I'm not 100% sure, but I'm thinking that the Integer object more or less just has an int property and a whole bunch of methods to interact with that property (like the toString() method for example). So Integer is a fancy way to work with an int (Just as perhaps String is a fancy way to work with a group of chars).</p>\n\n<p>I know that Java isn't C, but since I've never programmed in C this is the closest I could come to the answer. Hope this helps!</p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html\" rel=\"noreferrer\">Integer object javadoc</a></p>\n\n<p><a href=\"http://mindprod.com/jgloss/intvsinteger.html\" rel=\"noreferrer\">Integer Ojbect vs. int primitive comparison</a></p>\n",
        "votes": "154",
        "tags": "",
        "accepted": false
      },
      {
        "id": "608",
        "title": "",
        "text": "<p>I'll add to the excellent answers given above, and talk about boxing and unboxing, and how this applies to Java (although C# has it too). I'll use just Java terminology because I am more <em>au fait</em> with that.</p>\n\n<p>As the answers mentioned, <code>int</code> is just a number (called the <em>unboxed</em> type), whereas <code>Integer</code> is an object (which contains the number, hence a <em>boxed</em> type). In Java terms, that means (apart from not being able to call methods on <code>int</code>), you cannot store <code>int</code> or other non-object types in collections (<code>List</code>, <code>Map</code>, etc.). In order to store them, you must first box them up in its corresponding boxed type.</p>\n\n<p>Java 5 onwards have something called <em>auto-boxing</em> and <em>auto-unboxing</em> which allow the boxing/unboxing to be done behind the scenes. Compare and contrast: Java 5 version:</p>\n\n<pre><code>Deque&lt;Integer&gt; queue;\n\nvoid add(int n) {\n    queue.add(n);\n}\n\nint remove() {\n    return queue.remove();\n}\n</code></pre>\n\n<p>Java 1.4 or earlier (no generics either):</p>\n\n<pre><code>Deque queue;\n\nvoid add(int n) {\n    queue.add(Integer.valueOf(n));\n}\n\nint remove() {\n    return ((Integer) queue.remove()).intValue();\n}\n</code></pre>\n\n<p>It must be noted that despite the brevity in the Java 5 version, both versions generate identical bytecode. Thus, although auto-boxing and auto-unboxing are very convenient because you write less code, these operations <em>do</em> happens behind the scenes, with the same runtime costs, so you still have to be aware of their existence.</p>\n\n<p>Hope this helps!</p>\n",
        "votes": "37",
        "tags": "",
        "accepted": false
      },
      {
        "id": "8462531",
        "title": "",
        "text": "<p>int is used to declare primitive variable </p>\n\n<pre><code>e.g. int i=10;\n</code></pre>\n\n<p>Integer is used to create reference variable of class Integer</p>\n\n<pre><code>Integer a = new Integer();\n</code></pre>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "498102",
        "title": "",
        "text": "<p>In platforms like Java, <code>int</code>s are primitives while <code>Integer</code> is an object which holds a integer field. The important distinction is that primitives are always passed around by value and by definition are immutable. </p>\n\n<p>Any operation involving a primitive variable always returns a new value. On the other hand, objects are passed around by reference. One could argue that the point to the object (AKA the reference) is also being passed around by value, but the contents are not.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "33936777",
        "title": "",
        "text": "<p>An int variable holds a 32 bit signed integer value. An Integer (with capital I) holds a reference to an object of (class) type Integer, or to null.</p>\n\n<p>Java automatically casts between the two; from Integer to int whenever the Integer object occurs as an argument to an int operator or is assigned to an int variable, or an int value is assigned to an Integer variable. This casting is called boxing/unboxing.</p>\n\n<p>If an Integer variable referencing null is unboxed, explicitly or implicitly, a NullPointerException is thrown.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "25056184",
        "title": "",
        "text": "<p>There are many reasons to use wrapper classes:</p>\n\n<ol>\n<li>We get extra behavior (for instance we can use methods)</li>\n<li>We can store null values whereas in primitives we cannot</li>\n<li>Collections support storing objects and not primitives.</li>\n</ol>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1582",
        "title": "",
        "text": "<p>This has already been answered for Java, here's the C# answer:</p>\n\n<p>\"Integer\" is not a valid type name in C# and \"int\" is just an alias for System.Int32. Also, unlike in Java (or C++) there aren't any special primitive types in C#, every instance of a type in C# (including int) is an object. Here's some demonstrative code:</p>\n\n<pre><code>void DoStuff()\n{\n    System.Console.WriteLine( SomeMethod((int)5) );\n    System.Console.WriteLine( GetTypeName&lt;int&gt;() );\n}\n\nstring SomeMethod(object someParameter)\n{\n    return string.Format(\"Some text {0}\", someParameter.ToString());\n}\n\nstring GetTypeName&lt;T&gt;()\n{\n    return (typeof (T)).FullName;\n}\n</code></pre>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "43651213",
        "title": "",
        "text": "<p>In Java, the <code>int</code> type is a primitive data type, where as the <code>Integer</code> type is an object.</p>\n\n<p>In C#, the <code>int</code> type is also a data type same as <code>System.Int32</code>. An <code>integer</code> (just like any other value types) can be boxed (\"wrapped\") into an object.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "580",
    "url": "https://stackoverflow.com/questions/580",
    "title": "Deploying SQL Server Databases from Test to Live",
    "text:": "<p>I wonder how you guys manage deployment of a database between 2 SQL Servers, specifically SQL Server 2005.\nNow, there is a development and a live one. As this should be part of a buildscript (standard windows batch, even do with current complexity of those scripts, i might switch to PowerShell or so later), Enterprise Manager/Management Studio Express do not count.</p>\n\n<p>Would you just copy the .mdf File and attach it? I am always a bit careful when working with binary data, as this seems to be a compatiblity issue (even though development and live should run the same version of the server at all time).</p>\n\n<p>Or - given the lack of \"EXPLAIN CREATE TABLE\" in T-SQL - do you do something that exports an existing database into SQL-Scripts which you can run on the target server? If yes, is there a tool that can automatically dump a given Database into SQL Queries and that runs off the command line? (Again, Enterprise Manager/Management Studio Express do not count).</p>\n\n<p>And lastly - given the fact that the live database already contains data, the deployment may not involve creating all tables but rather checking the difference in structure and ALTER TABLE the live ones instead, which may also need data verification/conversion when existing fields change.</p>\n\n<p>Now, i hear a lot of great stuff about the <a href=\"http://www.red-gate.com/products/index.htm\" rel=\"noreferrer\">Red Gate</a> products, but for hobby projects, the price is a bit steep.</p>\n\n<p>So, what are you using to automatically deploy SQL Server Databases from Test to Live?</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "28",
    "tags": "<sql-server><sql-server-2005><deployment><release-management>",
    "AcceptedAnswerId": "586",
    "answers": [
      {
        "id": "1464",
        "title": "",
        "text": "<p>Like Rob Allen, I use SQL Compare / Data Compare by Redgate. I also use the Database publishing wizard by Microsoft. I also have a console app I wrote in C# that takes a sql script and runs it on a server. This way you can run large scripts with 'GO' commands in it from a command line or in a batch script.</p>\n\n<p>I use Microsoft.SqlServer.BatchParser.dll and Microsoft.SqlServer.ConnectionInfo.dll libraries in the console application.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "586",
        "title": "",
        "text": "<p>I've taken to hand-coding all of my DDL (creates/alter/delete) statements, adding them to my .sln as text files, and using normal versioning (using subversion, but any revision control should work). This way, I not only get the benefit of versioning, but updating live from dev/stage is the same process for code and database - tags, branches and so on work all the same.</p>\n\n<p>Otherwise, I agree redgate is expensive if you don't have a company buying it for you. If you can get a company to buy it for you though, it really is worth it!</p>\n",
        "votes": "20",
        "tags": "",
        "accepted": true
      },
      {
        "id": "1446",
        "title": "",
        "text": "<p>Using SMO/DMO, it isn't too difficult to generate a script of your schema.  Data is a little more fun, but still doable.</p>\n\n<p>In general, I take \"Script It\" approach, but you might want to consider something along these lines:</p>\n\n<ul>\n<li>Distinguish between Development and Staging, such that you can Develop with a subset of data ... this I would create a tool to simply pull down some production data, or generate fake data where security is concerned.</li>\n<li>For team development, each change to the database will have to be coordinated amongst your team members.  Schema and data changes can be intermingled, but a single script should enable a given feature.  Once all your features are ready, you bundle these up in a single SQL file and run that against a restore of production.</li>\n<li>Once your staging has cleared acceptance, you run the single SQL file again on the production machine.</li>\n</ul>\n\n<p>I have used the Red Gate tools and they are <strong>great</strong> tools, but if you can't afford it, building the tools and working this way isn't too far from the ideal.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "31405",
        "title": "",
        "text": "<p><a href=\"http://www.red-gate.com/products/SQL_Compare/index.htm\" rel=\"nofollow noreferrer\">RedGate SqlCompare</a> is a way to go in my opinion. We do DB deployment on a regular basis and since I started using that tool I have never looked back. \nVery intuitive interface and saves a lot of time in the end.</p>\n\n<p>The Pro version will take care of scripting for the source control integration as well.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "590",
        "title": "",
        "text": "<p>If you have a company buying it, Toad from Quest Software has this kind of management functionality built in.  It's basically a two-click operation to compare two schemas and generate a sync script from one to the other.</p>\n\n<p>They have editions for most of the popular databases, including of course Sql Server.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "9963",
        "title": "",
        "text": "<p>I agree with keeping everything in source control and manually scripting all changes.  Changes to the schema for a single release go into a script file created specifically for that release.  All stored procs, views, etc should go into individual files and treated just like .cs or .aspx as far as source control goes.  I use a powershell script to generate one big .sql file for updating the programmability stuff.</p>\n\n<p>I don't like automating the application of schema changes, like new tables, new columns, etc.  When doing a production release, I like to go through the change script command by command to make sure each one works as expected.  There's nothing worse than running a big change script on production and getting errors because you forgot some little detail that didn't present itself in development.</p>\n\n<p>I have also learned that indexes need to be treated just like code files and put into source control.</p>\n\n<p>And you should definitely have more than 2 databases - dev and live.  You should have a dev database that everybody uses for daily dev tasks.  Then a staging database that mimics production and is used to do your integration testing.  Then maybe a complete recent copy of production (restored from a full backup), if that is feasible, so your last round of installation testing goes against something that is as close to the real thing as possible.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "14447",
        "title": "",
        "text": "<p>Don't forget Microsoft's solution to the problem: <a href=\"http://msdn.microsoft.com/en-gb/vsts2008/products/bb933747.aspx\" rel=\"nofollow noreferrer\">Visual Studio 2008 Database Edition</a>.  Includes tools for deploying changes to databases, producing a diff between databases for schema and/or data changes, unit tests, test data generation.</p>\n\n<p>It's pretty expensive but I used the trial edition for a while and thought it was brilliant.  It makes the database as easy to work with as any other piece of code.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "28698",
        "title": "",
        "text": "<p>I'm using Subsonic's migrations mechanism so I just have a dll with classes in squential order that have 2 methods, up and down. There is a continuous integration/build script hook into nant, so that I can automate the upgrading of my database.</p>\n\n<p>Its not the best thign in the world, but it beats writing DDL.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "322859",
        "title": "",
        "text": "<p>I'm currently working the same thing to you. Not only deploying SQL Server databases from test to live but also include the whole process from Local -> Integration -> Test -> Production. So what can make me easily everyday is I do <a href=\"http://tech.wowkhmer.com/post/2008/11/11/NAnt-task-with-Red-Gate-SQL-Compare.aspx\" rel=\"nofollow noreferrer\">NAnt task with Red-Gate SQL Compare</a>. I'm not working for RedGate but I have to say it is good choice.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "585",
        "title": "",
        "text": "<p>For my projects I alternate between SQL Compare from REd Gate and the Database Publishing Wizard from Microsoft which you can download free\n<a href=\"http://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&amp;displaylang=en\" rel=\"noreferrer\">here</a>.</p>\n\n<p>The Wizard isn't as slick as SQL Compare or SQL Data Compare but it does the trick. One issue is that the scripts it generates may need some rearranging and/or editing to flow in one shot.</p>\n\n<p>On the up side, it can move your schema and data which isn't bad for a free tool.</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3001482",
        "title": "",
        "text": "<p>I also maintain scripts for all my objects and data. For deploying I wrote this free utility - <a href=\"http://www.sqldart.com\" rel=\"nofollow noreferrer\">http://www.sqldart.com</a>. It'll let you reorder your script files and will run the whole lot within a transaction.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "597",
        "title": "",
        "text": "<p>I agree that scripting everything is the best way to go and is what I advocate at work.  You should script everything from DB and object creation to populating your lookup tables.</p>\n\n<p>Anything you do in UI only won't translate (especially for changes... not so much for first deployments) and will end up requiring a tools like what Redgate offers.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "591",
        "title": "",
        "text": "<p>I work the same way Karl does, by keeping all of my SQL scripts for creating and altering tables in a text file that I keep in source control.  In fact, to avoid the problem of having to have a script examine the live database to determine what ALTERs to run, I usually work like this:</p>\n\n<ul>\n<li>On the first version, I place everything during testing into one SQL script, and treat all tables as a CREATE.  This means I end up dropping and readding tables a lot during testing, but that's not a big deal early into the project (since I'm usually hacking the data I'm using at that point anyway).</li>\n<li>On all subsequent versions, I do two things: I make a new text file to hold the upgrade SQL scripts, that contain just the ALTERs for that version.  And I make the changes to the original, create a fresh database script as well.  This way an upgrade just runs the upgrade script, but if we have to recreate the DB we don't need to run 100 scripts to get there.</li>\n<li>Depending on how I'm deploying the DB changes, I'll also usually put a version table in the DB that holds the version of the DB.  Then, rather than make any human decisions about which scripts to run, whatever code I have running the create/upgrade scripts uses the version to determine what to run.</li>\n</ul>\n\n<p>The one thing this will not do is help if part of what you're moving from test to production is data, but if you want to manage structure and not pay for a nice, but expensive DB management package, is really not very difficult.  I've also found it's a pretty good way of keeping mental track of your DB.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "28410",
        "title": "",
        "text": "<p>I do all my database creation as DDL and then wrap that DDL into a schema maintainence class. I may do various things to create the DDL in the first place but fundamentally I do all the schema maint in code. This also means that if one needs to do non DDL things that don't map well to SQL you can write procedural logic and run it between lumps of DDL/DML.</p>\n\n<p>My dbs then have a table which defines the current version so one can code a relatively straightforward set of tests:</p>\n\n<ol>\n<li>Does the DB exist? If not create it.</li>\n<li>Is the DB the current version? If not then run the methods, in sequence, that bring the schema up to date (you may want to prompt the user to confirm and - ideally - do backups at this point).</li>\n</ol>\n\n<p>For a single user app I just run this in place, for a web app we currently to lock the user out if the versions don't match and have a stand alone schema maint app we run. For multi-user it will depend on the particular environment.</p>\n\n<p>The advantage? Well I have a very high level of confidence that the schema for the apps that use this methodology is consistent across all instances of those applications. Its not perfect, there are issues, but it works...</p>\n\n<p>There are some issues when developing in a team environment but that's more or less a given anyway!</p>\n\n<p>Murph</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "588",
    "url": "https://stackoverflow.com/questions/588",
    "title": "Best way to access Exchange using PHP?",
    "text:": "<p>I'm writing a CMS application in PHP and one of the requirements is that it must be able to interface with the customer's Exchange server.  I've written up this functionality a few times before and have always used <a href=\"http://en.wikipedia.org/wiki/WebDAV\" rel=\"noreferrer\">WebDAV</a> to do it, but now I'm leaning away from that.</p>\n\n<p>I will be running the site on IIS OR Apache (no preference) on Windows server 2008.  A few things I would need to do include adding contacts to a given user's address book, sending emails as a given user and running reports on contacts for a user.</p>\n\n<p>All of this is pretty easy to do with WebDAV, but if there is a better way that doesn't require any functionality that is likely to be deprecated any time soon.</p>\n\n<p>Any ideas?</p>\n\n<h3>Update:</h3>\n\n<p>Justin, I love the idea of using com objects, I just worry about maintaining a 3rd product to make everything work...</p>\n\n<p>John, I can write a web service in C# to interface with for these functions and access it with my PHP app, but it's also a little bit out of the way.</p>\n\n<p>So far, I'm not 100% convinced that either of these is better than WebDAV... </p>\n\n<p>Can anyone show me where I'm being silly?</p>\n",
    "codes": [
      [],
      [
        "$outlook = COM(\"Outlook.Application\")\n"
      ],
      [],
      [],
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "54",
    "tags": "<php><windows><exchange-server><webdav><mapi>",
    "AcceptedAnswerId": "633",
    "answers": [
      {
        "id": "52725548",
        "title": "",
        "text": "<p><a href=\"https://github.com/Garethp/php-ews\" rel=\"nofollow noreferrer\">https://github.com/Garethp/php-ews</a></p>\n\n<p>It was last updated 3 months ago so it is maintained</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "611",
        "title": "",
        "text": "<p>I'm not a PHP dev but Google says that PHP 5+ can instantiate COM components. If you can install Outlook on a box you could write a PHP web service around the COM component to handle the requests you need. </p>\n\n<pre><code>$outlook = COM(\"Outlook.Application\")\n</code></pre>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/aa193231.aspx\" rel=\"noreferrer\">Outlook API referance</a></p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5884422",
        "title": "",
        "text": "<p>I have released an open-source MIT licensed library that allows you to do some basic operations in PHP using Exchange Web Services.</p>\n\n<p><a href=\"https://github.com/Heartspring/Exchange-Web-Services-for-PHP\" rel=\"noreferrer\">Exchange Web Services for PHP</a></p>\n\n<p>I have only tested it on Linux but I don't see any reason why it wouldn't work on a Windows installation of PHP as well.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1826",
        "title": "",
        "text": "<p>Is your customer using Exchange 2007?  If so, I'd have a look at <a href=\"http://msdn.microsoft.com/en-us/library/bb204119(EXCHG.80).aspx\" rel=\"noreferrer\">Exchange Web Services</a>.  If not, as hairy as it can be, I think WebDAV is your best bet.  </p>\n\n<p>Personally I don't like using the Outlook.Application COM object route, as its security prompts (\"An application is attempting to access your contacts.  Allow this?\", etc.) can cause problems on a server.  I also think it would be difficult to accomplish your impersonation-like tasks using Outlook, such as sending mail as a given user.</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "38389",
        "title": "",
        "text": "<p>I can't recommend Dmitry Streblechenko's <a href=\"http://www.dimastr.com/redemption/rdo_introduction.htm\" rel=\"nofollow noreferrer\">Redemption Data Objects</a> library highly enough. It's a COM component that provides a sane API to Extended MAPI and is a joy to use. The Exchange API goalposts move from one release to the next: \u201cUse the M: drive! No, use WebDAV! No, use ExOLEDB!\u2026 No, use Web Services!\u201d with the only constant being good old MAPI.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "14647212",
        "title": "",
        "text": "<p>I would recommend using <strong>\"<a href=\"https://github.com/jamesiarmes/php-ews\" rel=\"noreferrer\">PHP Exchange Web Services</a>\"</strong> or short <strong>php-ews.</strong></p>\n\n<p>Fair amount of documentation under the <a href=\"https://github.com/jamesiarmes/php-ews/wiki\" rel=\"noreferrer\">wiki</a>, helped me a lot.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "633",
        "title": "",
        "text": "<p>I have not used PHP to do this but have experience in using C# to achieve the same thing.</p>\n\n<p>The Outlook API is a way of automating Outlook rather than connecting to Exchange directly. I have previously taken this approach in a C# application and it does work although can be buggy.</p>\n\n<p>If you wish to connect directly to the Exchange server you will need to research extended MAPI.</p>\n\n<p>In the past I used this wrapper <a href=\"http://www.codeproject.com/KB/IP/CMapiEx.aspx\" rel=\"nofollow noreferrer\">MAPIEx: Extended MAPI Wrapper</a>.</p>\n\n<p>It is a C# project but I believe you can use some .NET code on a PHP5 Windows server. Alternatively it has a C++ core DLL that you may be a able to use. I have found it to be very good and there are some good example applications.</p>\n\n<h3>Update:</h3>\n\n<p>Sorry for the delay no current way to keep track of posts yet.</p>\n\n<p>I do agree adding more layer on to your application and relying on 3rd party code can be scary (and rightfully so.)</p>\n\n<p>Today I read another <a href=\"https://stackoverflow.com/questions/4508/mapi-and-managed-code-experiences\">interesting post</a> tagged up as MAPI that is on a different subject. The key thing here though is that it has linked to <a href=\"http://blogs.msdn.com/mstehle/archive/2007/10/03/fyi-why-are-mapi-and-cdo-1-21-not-supported-in-managed-net-code.aspx\" rel=\"nofollow noreferrer\">this important MS article</a>. I have been unaware of the issues until now on using managed code to interface to MAPI although the C++ code in the component should be unaffected by this error as it is unmanaged. </p>\n\n<p>This blog entry also suggests other ways to connect to MAPI/Exchange server. In this case due to these new facts <a href=\"http://us3.php.net/imap\" rel=\"nofollow noreferrer\">http://us3.php.net/imap</a> may be the answer as suggested by the other user.</p>\n",
        "votes": "22",
        "tags": "",
        "accepted": true
      },
      {
        "id": "10522246",
        "title": "",
        "text": "<p>This <a href=\"http://developer.zarafa.com/php-ext/\" rel=\"nofollow\">Zarafa PHP MAPI</a> extension looks like it could work.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1415",
        "title": "",
        "text": "<p>I would look into IMAP</p>\n\n<p><a href=\"http://us3.php.net/imap\" rel=\"nofollow noreferrer\">IMAP, POP3 and NNTP</a></p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "594",
    "url": "https://stackoverflow.com/questions/594",
    "title": "cx_Oracle: How do I iterate over a result set?",
    "text:": "<p>There are several ways to iterate over a result set. What are the tradeoff of each?</p>\n",
    "codes": [
      [
        "curs.execute('select * from people')\ncurs.arraysize = 256\nfor row in curs:\n    print row\n"
      ],
      [
        "curs.execute('select * from people')\nfor row in curs:\n    print row\n",
        "for row in curs.fetchall():\n    print row\n",
        "curs.execute('select first_name from people')\nnames = [row[0] for row in curs.fetchall()]\n",
        "curs.execute('select max(x) from t')\nmaxValue = curs.fetchone()[0]\n",
        "row = curs.fetchone()\nwhile row:\n    print row\n    row = curs.fetchone()\n"
      ],
      []
    ],
    "votes:": "49",
    "tags": "<python><sql><database><oracle><cx-oracle>",
    "AcceptedAnswerId": "595",
    "answers": [
      {
        "id": "125140",
        "title": "",
        "text": "<p>My preferred way is the cursor iterator, but setting first the arraysize property of the cursor. </p>\n\n<pre><code>curs.execute('select * from people')\ncurs.arraysize = 256\nfor row in curs:\n    print row\n</code></pre>\n\n<p>In this example, cx_Oracle will fetch rows from Oracle 256 rows at a time, reducing the number of network round trips that need to be performed</p>\n",
        "votes": "24",
        "tags": "",
        "accepted": false
      },
      {
        "id": "595",
        "title": "",
        "text": "<p>The canonical way is to use the built-in cursor iterator.</p>\n\n<pre><code>curs.execute('select * from people')\nfor row in curs:\n    print row\n</code></pre>\n\n<hr>\n\n<p>You can use <code>fetchall()</code> to get all rows at once.</p>\n\n<pre><code>for row in curs.fetchall():\n    print row\n</code></pre>\n\n<p>It can be convenient to use this to create a Python list containing the values returned:</p>\n\n<pre><code>curs.execute('select first_name from people')\nnames = [row[0] for row in curs.fetchall()]\n</code></pre>\n\n<p>This can be useful for smaller result sets, but can have bad side effects if the result set is large.</p>\n\n<ul>\n<li><p>You have to wait for the entire result set to be returned to\nyour client process.</p></li>\n<li><p>You may eat up a lot of memory in your client to hold\nthe built-up list.</p></li>\n<li><p>It may take a while for Python to construct and deconstruct the\nlist which you are going to immediately discard anyways.</p></li>\n</ul>\n\n<hr>\n\n<p>If you know there's a single row being returned in the result set you can call <code>fetchone()</code> to get the single row.</p>\n\n<pre><code>curs.execute('select max(x) from t')\nmaxValue = curs.fetchone()[0]\n</code></pre>\n\n<hr>\n\n<p>Finally, you can loop over the result set fetching one row at a time.  In general, there's no particular advantage in doing this over using the iterator.</p>\n\n<pre><code>row = curs.fetchone()\nwhile row:\n    print row\n    row = curs.fetchone()\n</code></pre>\n",
        "votes": "47",
        "tags": "",
        "accepted": true
      },
      {
        "id": "25213",
        "title": "",
        "text": "<p>There's also the way <code>psyco-pg</code> seems to do it... From what I gather, it seems to create dictionary-like row-proxies to map key lookup into the memory block returned by the query. In that case, fetching the whole answer and working with a similar proxy-factory over the rows seems like useful idea. Come to think of it though, it feels more like Lua than Python.</p>\n\n<p>Also, this should be applicable to all <a href=\"http://www.python.org/dev/peps/pep-0249/\" rel=\"noreferrer\">PEP-249 DBAPI2.0</a> interfaces, not just Oracle, or did you mean just <em>fastest</em> using <em>Oracle</em>?</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "601",
    "url": "https://stackoverflow.com/questions/601",
    "title": "Robust Random Number Generation",
    "text:": "<p>I'm looking for a performant, reasonably robust RNG using no special hardware. It can use mathematical methods (Mersenne Twister, etc), it can \"collect entropy\" from the machine, whatever. On Linux/etc we have a <code>drand48()</code> which generates 48 random bits. I'd like a similar function/class for C++ or C# which can generate more than 32 bits of randomness and which low-order bits are equally as random as high-order bits.</p>\n\n<p>It doesn't have to be cryptographically secure but it must not use or be based on the C-language <code>rand()</code> or .NET <code>System.Random</code>.</p>\n\n<p>Any source code, links to source, etc. would be appreciated! Failing that, what TYPE of RNG should I be looking for?</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "42",
    "tags": "<c#><c++><random>",
    "AcceptedAnswerId": "602",
    "answers": [
      {
        "id": "602",
        "title": "",
        "text": "<p>For C++, <a href=\"http://www.boost.org/libs/random/\" rel=\"noreferrer\">Boost.Random</a> is probably what you're looking for. It has support for MT (among many other algorithms), and can collect entropy via the <code>nondet_random</code> class. Check it out! :-)</p>\n",
        "votes": "30",
        "tags": "",
        "accepted": true
      },
      {
        "id": "11211443",
        "title": "",
        "text": "<p>C++11 has adopted a robust random number library based on boost.random. You can access a number of random number engines using different algorithms to meet your quality, speed, or size requirements. Quality implementations will even provide access to whatever non-deterministic RNG your platform offers via <code>std::random_device</code>.</p>\n\n<p>In addition there are many adaptors to produce specific distributions, eliminating the need to do such manipulation by hand (something often done incorrectly).</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/numeric/random\" rel=\"noreferrer\"><code>#include &lt;random&gt;</code></a></p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "10139",
        "title": "",
        "text": "<p>Watch out for the Gnu Scientific Library.  It's licensed under the GPL rather than LGPL.</p>\n\n<p>As other folks mentioned, the Boost random classes are a good start.  Their implementation conforms to the PRNG code slated for TR1:</p>\n\n<p><a href=\"http://www.boost.org/doc/libs/1_35_0/libs/random/index.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_35_0/libs/random/index.html</a>\n<a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2003/n1452.html\" rel=\"nofollow noreferrer\">http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2003/n1452.html</a></p>\n\n<p>If you have a recent version of the G++ compiler, you may find the TR1 libraries already included</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "605",
        "title": "",
        "text": "<p><a href=\"http://www.gnu.org/software/gsl\" rel=\"noreferrer\">The Gnu Scientific Library</a> (GSL) has a pretty extensive set of RN generators, test harness, etc.  If you're on linux, it's probably already available on your system.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "9923618",
        "title": "",
        "text": "<p><code>Boost.Random</code> is my first choice for RNG</p>\n\n<p><a href=\"http://www.boost.org/doc/libs/random\" rel=\"nofollow\">http://www.boost.org/doc/libs/random</a></p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "609",
    "url": "https://stackoverflow.com/questions/609",
    "title": "Build for Windows NT 4.0 using Visual Studio 2005?",
    "text:": "<p>An MFC application that I'm trying to migrate uses <code>afxext.h</code>, which causes <code>_AFXDLL</code> to get set, which causes this error if I set <code>/MT</code>:</p>\n\n<blockquote>\n  <p>Please use the /MD switch for _AFXDLL builds</p>\n</blockquote>\n\n<p>My research to date indicates that it is impossible to build an application for execution on Windows NT 4.0 using Visual Studio (C++, in this case) 2005.</p>\n\n<p>Is this really true? Are there any workaround available?</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "22",
    "tags": "<c++><visual-studio><compatibility><windows-nt>",
    "AcceptedAnswerId": "",
    "answers": [
      {
        "id": "200955",
        "title": "",
        "text": "<p>The workaround is to fix the multi-threaded DLL. <a href=\"http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/2435c3ab-f732-467e-8224-5f4e3f12c10b/\" rel=\"nofollow noreferrer\">Simple instructions</a>. Short summary:</p>\n\n<blockquote>\n  <p>The shipping 8.0 C Runtime Library DLL (MSVCR80.DLL) does not support\n  NT 4.0 SP6 for one reason and one reason only: someone at Microsoft\n  added a function call to <code>GetLongPathNameW</code> which does not exist in\n  kernel32.dll on NT 4.0.</p>\n  \n  <p>CRTLIB.C   On line 577, there is a call to <code>GetLongPathNameW</code>.  simply replace it with: <code>ret = 0;</code>\n  only use this build of MSVCR80.DLL on NT 4.0.</p>\n</blockquote>\n\n<p>Once you've got those working, coming up with a more generic solution should be trivial.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "759",
        "title": "",
        "text": "<p>No, there are many applications built with VS2005 that have to support Windows XP, 2000, NT, the whole stack. The issue is that (by default) VS2005 wants to use libraries/exports not present on NT.</p>\n\n<p>See <a href=\"http://www.mombu.com/microsoft/windows-programmer-win32/t-vs2005-and-nt4-392831.html\" rel=\"noreferrer\">this thread</a> for some background.</p>\n\n<p>Then start limiting your dependencies via preprocessor macros, and avoiding APIs which aren't supported on NT.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "94080",
        "title": "",
        "text": "<p>Although I'm not familiar with afxext.h, I am wondering what about it makes it incompatible with Windows NT4.... </p>\n\n<p>However, to answer the original question:\n\"My research to date indicates that it is impossible to build an application for execution on Windows NT 4.0 using Visual Studio (C++, in this case) 2005.\"</p>\n\n<p>The answer should be yes especially if the application was originally written or running on NT4!  With the afxext.h thing aside, this should be an easy YES.</p>\n\n<p>The other thing I am finding trouble with is the loose nature in which people are throwing out the NT term.  Granted most people think of 'NT' as Windows NT4 but it's still ambiguous because 'most people' is not equal to 'all people.'</p>\n\n<p>In reality the term 'NT' is equal to the NT series. The NT series is NT3, NT4, NT5 (2000, XP, 2003) and NT6 (Vista).</p>\n\n<p>Win32 is a subsystem which you target your C/C++ code too.  So I see no reason why one should not be able target this NT4 platform &amp; subsystem or, if this is a platform porting excercise, remove the MFC dependencies that VC is possibly imposing.</p>\n\n<p>Adding the afxext.h to the mix, it sounds to me like a subsystem compatibility issue.  It's part of MFC from my Google research.  The afxext.h appears to be the MFC (Microsoft Foundation Class) extensions.</p>\n\n<p>Can you remove your dependency on MFC?  What type of application is this? (CLR, service, GUI interface?)  Can you convert project to an unmanaged C++ project in VC 8.0?</p>\n\n<p>Hopefully some of this will help you along.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "307235",
        "title": "",
        "text": "<p>The idea is that the exe is needed to link to the static library.</p>\n\n<p>Please try this\n\"Configuration Properties\", \"General\", \"Use of MFC\" to \"Use MFC in a Static Library\"\n\"Configuration Properties\", \"General\", \"Use of ATL\" to \"Static Link to ATL\"</p>\n\n<p>\"Configuration Properties\", \"C\\C++\", \"Code Generation\", \"Runtime Library\" to \"Multi-Threaded (\\MT)\"</p>\n\n<p>Test Platform\nBuild Machine: Visual Studio 2005 on Window XP SP2\nClient Machine: Window XP SP2 (no VS2005 installed)</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "23817",
        "title": "",
        "text": "<p>To get rid of the _AFXDLL error, have you tried changing to the settings to use MFC as a static lib instead of a DLL?  This is similar to what you're already doing in changing the runtime libs to static instead of DLL.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "622",
    "url": "https://stackoverflow.com/questions/622",
    "title": "Most efficient code for the first 10000 prime numbers?",
    "text:": "<p>I want to print the first 10000 prime numbers.\nCan anyone give me the most efficient code for this?\nClarifications:</p>\n\n<ol>\n<li>It does not matter if your code is inefficient for n >10000.</li>\n<li>The size of the code does not matter.</li>\n<li>You cannot just hard code the values in any manner.</li>\n</ol>\n",
    "codes": [
      [
        "import java.io.*;\nclass Primzahlengenerator {\n    long[] Primzahlen;\n    int LastUnknown = 2;\n    public static void main(String[] args)  {\n        Primzahlengenerator Generator = new Primzahlengenerator();\n        switch(args.length) {\n            case 0:  //Wenn keine Argumente \u00fcbergeben worden:\n                Generator.printHelp(); //Hilfe ausgeben\n                return; //Durchfallen verhindern\n            case 1:\n                try {\n                    Generator.Primzahlen = new long[Integer.decode(args[0]).intValue()];\n                }\n                catch (NumberFormatException e) {\n                    System.out.println(\"Das erste Argument muss eine Zahl sein, und nicht als Wort z.B. \\\"Tausend\\\", sondern in Ziffern z.B. \\\"1000\\\" ausgedr\u00fcckt werden.\");//Hinweis, wie man die Argumente angeben muss ausgeben\n                    Generator.printHelp();                    //Generelle Hilfe ausgeben\n                    return;\n                }\n                break;//dutchfallen verhindern\n\n            case 2:\n                switch (args[1]) {\n                    case \"-l\":\n                        System.out.println(\"Sie m\u00fcsen auch eine Datei angeben!\"); //Hilfemitteilung ausgeben\n                        Generator.printHelp();                                    //Generelle Hilfe ausgeben\n                        return;\n                }\n                break;//durchfallen verhindern\n            case 3:\n                try {\n                    Generator.Primzahlen = new long[Integer.decode(args[0]).intValue()];\n                }\n                catch (NumberFormatException e) {\n                    System.out.println(\"Das erste Argument muss eine Zahl sein, und nicht als Wort z.B. \\\"Tausend\\\", sondern in Ziffern z.B. \\\"1000\\\" ausgedr\u00fcckt werden.\");//Hinweis, wie man die Argumente angeben muss ausgeben\n                    Generator.printHelp();                      //Generelle Hilfe ausgeben\n                    return;\n                }\n                switch(args[1]) {\n                    case \"-l\":\n                        Generator.loadFromFile(args[2]);//Datei Namens des Inhalts von Argument 3 lesen, falls Argument 2 = \"-l\" ist\n                        break;\n                    default:\n                        Generator.printHelp();\n                        break;\n                }\n                break;\n            default:\n                Generator.printHelp();\n                return;\n        }\n        Generator.calcPrims();\n    }\n    void printHelp() {\n        System.out.println(\"Sie m\u00fcssen als erstes Argument angeben, die wieviel ersten Primzahlen sie berechnen wollen.\");   //Anleitung wie man das Programm mit Argumenten f\u00fcttern muss\n        System.out.println(\"Als zweites Argument k\u00f6nnen sie \\\"-l\\\" w\u00e4hlen, worauf die Datei, aus der die Primzahlen geladen werden sollen,\");\n        System.out.println(\"folgen muss. Sie muss genauso aufgebaut sein, wie eine Datei Primzahlen.txt, die durch den Aufruf \\\"java Primzahlengenerator 1000 > Primzahlen.txt\\\" entsteht.\");\n    }\n    void loadFromFile(String File) {\n        // System.out.println(\"Lese Datei namens: \\\"\" + File + \"\\\"\");\n        try{\n            int x = 0;\n            BufferedReader in = new BufferedReader(new FileReader(File));\n            String line;\n            while((line = in.readLine()) != null) {\n                Primzahlen[x] = new Long(line).longValue();\n                x++;\n            }\n            LastUnknown = x;\n        } catch(FileNotFoundException ex) {\n            System.out.println(\"Die angegebene Datei existiert nicht. Bitte geben sie eine existierende Datei an.\");\n        } catch(IOException ex) {\n            System.err.println(ex);\n        } catch(ArrayIndexOutOfBoundsException ex) {\n            System.out.println(\"Die Datei enth\u00e4lt mehr Primzahlen als der reservierte Speicherbereich aufnehmen kann. Bitte geben sie als erstes Argument eine gr\u00f6\u00dfere Zahl an,\");\n            System.out.println(\"damit alle in der Datei enthaltenen Primzahlen aufgenommen werden k\u00f6nnen.\");\n            }\n        /* for(long prim : Primzahlen) {\n            System.out.println(\"\" + prim);\n        } */\n        //Hier soll code stehen, der von der Datei mit angegebenem Namen ( Wie diese aussieht einfach durch angeben von folgendem in cmd rausfinden:\n        //java Primzahlengenerator 1000 > 1000Primzahlen.txt\n        //da kommt ne textdatei, die die primzahlen enth\u00e4lt. mit Long.decode(String ziffern).longValue();\n        //erh\u00e4lt man das was an der entsprechenden stelle in das array soll. die erste zeile soll in [0] , die zweite zeile in [1] und so weiter.\n        //falls im arry der platz aus geht(die exception kenn ich grad nich, aber mach mal:\n        //int[] foo = { 1, 2, 3};\n        //int bar = foo[4];\n        //dann kriegst ne exception, das ist die gleiche die man kriegt, wenn im arry der platzt aus geht.\n    }\n    void calcPrims() {\n        int PrimzahlNummer = LastUnknown;\n        // System.out.println(\"LAstUnknown ist: \" + LastUnknown);\n        Primzahlen[0] = 2;\n        Primzahlen[1] = 3;\n        long AktuelleZahl = Primzahlen[PrimzahlNummer - 1];\n        boolean IstPrimzahl;\n        // System.out.println(\"2\");\n        // System.out.println(\"3\");\n        int Limit = Primzahlen.length;\n        while(PrimzahlNummer < Limit) {\n            IstPrimzahl = true;\n            double WurzelDerAktuellenZahl = java.lang.Math.sqrt(AktuelleZahl);\n            for(int i = 1;i < PrimzahlNummer;i++) {\n                if(AktuelleZahl % Primzahlen[i] == 0) {\n                    IstPrimzahl = false;\n                    break;\n                }\n                if(Primzahlen[i] > WurzelDerAktuellenZahl) break;\n            }\n            if(IstPrimzahl) {\n                Primzahlen[PrimzahlNummer] = AktuelleZahl;\n                PrimzahlNummer++;\n                // System.out.println(\"\" + AktuelleZahl);\n            }\n            AktuelleZahl = AktuelleZahl + 2;\n        }\n        for(long prim : Primzahlen) {\n            System.out.println(\"\" + prim);\n        }\n    }\n}\n"
      ],
      [
        "import Data.List.Ordered (minus, union)\n\nprimes = 2 : minus [3..] (foldr (\\p r -> p*p : union [p*p+p, p*p+2*p..] r)\n                                [] primes)\n",
        "primes = 2 : _Y ( (3:) . sieve 5 . _U . map (\\p -> [p*p, p*p+2*p..]) )\n  where\n    _Y g = g (_Y g)                        -- non-sharing fixpoint combinator\n    _U ((x:xs):t) = x : (union xs . _U . pairs) t       -- ~= nub.sort.concat\n    pairs    (xs:ys:t)  = union xs ys : pairs t\n    sieve k s@(x:xs) | k < x      = k : sieve (k+2) s   -- ~= [k,k+2..]\\\\s,\n                     | otherwise  =     sieve (k+2) xs  --   when s\u2282[k,k+2..]\n"
      ],
      [
        "/^1?$|^(11+?)\\1+$/\n"
      ],
      [
        "using System;\n\nnamespace ConsoleApplication2\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            int n, i = 3, j, c;\n            Console.WriteLine(\"Please enter your integer: \");\n            n = Convert.ToInt32(Console.ReadLine());\n            if (n >= 1)\n            {\n                Console.WriteLine(\"First \" + n + \" Prime Numbers are\");\n                Console.WriteLine(\"2\");\n            }\n            for(j=2;j<=n;)\n            {\n                for(c=2;c<=i-1;c++)\n                {\n                    if(i%c==0)\n                        break;\n                }\n                    if(c==i)\n                    {\n                        Console.WriteLine(i);\n                        j++;\n                    }\n                    i++;                                \n            }\n            Console.Read();\n        }\n    }\n}\n"
      ],
      [
        "    public IEnumerable<long> PrimeNumbers(long number)\n    {\n        List<long> primes = new List<long>();\n        for (int i = 2; primes.Count < number; i++)\n        {\n            bool divisible = false;\n\n            foreach (int num in primes)\n            {\n                if (i % num == 0)\n                    divisible = true;\n\n                if (num > Math.Sqrt(i))\n                    break;\n            }\n\n            if (divisible == false)\n                primes.Add(i);\n        }\n        return primes;\n    }\n"
      ],
      [],
      [],
      [
        "import math\nprint (\"You want prime till which number??\")\na = input()\na = int(a)\nx = 0\nx = int(x)\ncount = 1\nprint(\"2 is prime number\")\nfor c in range(3,a+1):\n    b = math.sqrt(c)\n    b = int(b)\n    x = 0\n    for b in range(2,b+1):\n        e  = c % b\n        e = int(e)\n        if (e == 0):\n            x = x+1\n    if (x == 0):\n        print(\"%d is prime number\" % c)\n        count = count + 1\nprint(\"Total number of prime till %d is %d\" % (a,count))\n"
      ],
      [],
      [],
      [
        "/// Get non-negative prime numbers until n using Sieve of Eratosthenes.\npublic int[] GetPrimes(int n) {\n    if (n <= 1) {\n        return new int[] { };\n    }\n\n    var mark = new bool[n];\n    for(var i = 2; i < n; i++) {\n        mark[i] = true;\n    }\n\n    for (var i = 2; i < Math.Sqrt(n); i++) {\n        if (mark[i]) {\n            for (var j = (i * i); j < n; j += i) {\n                mark[j] = false;\n            }\n        }\n    }\n\n    var primes = new List<int>();\n    for(var i = 3; i < n; i++) {\n        if (mark[i]) {\n            primes.Add(i);\n        }\n    }\n\n    return primes.ToArray();\n}\n"
      ],
      [
        "#include <stdio.h>\n#include <math.h>\n#include <time.h>\n#include <limits.h>\n\n/* Finding prime numbers */\nint main()\n{   \n    //pre-phase\n    char d,w;\n    int l,o;\n    printf(\"  1. Find first n number of prime numbers or Find all prime numbers smaller than n ?\\n\"); // this question helps in setting the limits on m or n value i.e l or o \n    printf(\"     Enter 1 or 2 to get anwser of first or second question\\n\");\n    // decision making\n    do\n    {\n        printf(\"  -->\");\n        scanf(\"%c\",&d);\n        while ((w=getchar()) != '\\n' && w != EOF);\n        if ( d == '1')\n        {\n            printf(\"\\n  2. Enter the target no. of primes you will like to find from 3 to 2,000,000 range\\n  -->\");\n            scanf(\"%10d\",&l);\n            o=INT_MAX;\n            printf(\"  Here we go!\\n\\n\");\n            break;\n        }\n        else if ( d == '2' )\n        {\n            printf(\"\\n  2.Enter the limit under which to find prime numbers from 5 to 2,000,000 range\\n  -->\");\n            scanf(\"%10d\",&o);\n            l=o/log(o)*1.25;\n            printf(\"  Here we go!\\n\\n\");\n            break;\n        }\n        else printf(\"\\n  Try again\\n\");\n    }while ( d != '1' || d != '2' );\n\n    clock_t start, end;\n    double cpu_time_used;\n    start = clock(); /* starting the clock for time keeping */\n\n    // main program starts here\n    int i,j,c,m,n; /* i ,j , c and m are all prime array 'p' variables and n is the number that is being tested */\n    int s,x;\n\n    int p[ l ]; /* p is the array for storing prime numbers and l sets the array size, l was initialized in pre-phase */\n    p[1]=2;\n    p[2]=3;\n    p[3]=5;\n    printf(\"%10dst:%10d\\n%10dnd:%10d\\n%10drd:%10d\\n\",1,p[1],2,p[2],3,p[3]); // first three prime are set\n    for ( i=4;i<=l;++i ) /* this loop sets all the prime numbers greater than 5 in the p array to 0 */\n        p[i]=0;\n\n    n=6; /* prime number testing begins with number 6 but this can lowered if you wish but you must remember to update other variables too */\n    s=sqrt(n); /* 's' does two things it stores the root value so that program does not have to calaculate it again and again and also it stores it in integer form instead of float*/\n    x=2; /* 'x' is the biggest prime number that is smaller or equal to root of the number 'n' being tested */\n\n    /* j ,x and c are related in this way, p[j] <= prime number x <= p[c] */\n\n    // the main loop begins here\n    for ( m=4,j=1,c=2; m<=l && n <= o;)\n    /* this condition checks if all the first 'l' numbers of primes are found or n does not exceed the set limit o */\n    {\n            // this will divide n by prime number in p[j] and tries to rule out non-primes\n            if ( n%p[j]==0 )\n            {\n                /* these steps execute if the number n is found to be non-prime */\n\n                ++n; /* this increases n by 1 and therefore sets the next number 'n' to be tested */\n                s=sqrt(n); /* this calaulates and stores in 's' the new root of number 'n' */\n                if ( p[c] <= s && p[c] != x ) /* 'The Magic Setting' tests the next prime number candidate p[c] and if passed it updates the prime number x */\n                {\n                    x=p[c];\n                    ++c;\n                }\n                j=1;\n                /* these steps sets the next number n to be tested and finds the next prime number x if possible for the new number 'n' and also resets j to 1 for the new cycle */\n                continue; /* and this restarts the loop for the new cycle */\n            }\n            // confirmation test for the prime number candidate n\n            else if ( n%p[j]!=0 && p[j]==x )\n            {\n                /* these steps execute if the number is found to be prime */\n                p[m]=n;\n                printf(\"%10dth:%10d\\n\",m,p[m]);\n                ++n;\n                s = sqrt(n);\n                ++m;\n                j=1;\n                /* these steps stores and prints the new prime number and moves the 'm' counter up and also sets the next number n to be tested and also resets j to 1 for the new cycle */\n                continue; /* and this restarts the loop */\n                /* the next number which will be a even and non-prime will trigger the magic setting in the next cycle and therfore we do not have to add another magic setting here*/\n            }\n            ++j; /* increases p[j] to next prime number in the array for the next cycle testing of the number 'n' */\n            // if the cycle reaches this point that means the number 'n' was neither divisible by p[j] nor was it a prime number\n            // and therfore it will test the same number 'n' again in the next cycle with a bigger prime number\n    }\n    // the loops ends\n    printf(\"  All done !!\\n\");\n    end = clock();\n    cpu_time_used = ((double) (end - start)) / CLOCKS_PER_SEC;\n    printf(\"  Time taken : %lf sec\\n\",cpu_time_used);\n}\n"
      ],
      [
        "def compute_primes(bound):\n\"\"\"\nReturn a list of the prime numbers in range(2, bound)\nImplement the Sieve of Eratosthenes\nhttps://en.wikipedia.org/wiki/Sieve_of_Eratosthenes\n\"\"\"\nprimeNumber = [True for i in range(bound + 1)]\nstart_prime_number = 2\nprimes = []\nwhile start_prime_number * start_prime_number <=bound:\n    # If primeNumber[start_prime_number] is not changed, then it is a prime\n    if primeNumber[start_prime_number]:\n        # Update all multiples of start_prime_number\n        for i in range(start_prime_number * start_prime_number, bound + 1, start_prime_number):\n            primeNumber[i] = False\n    start_prime_number += 1\n\n# Print all prime numbers\nfor start_prime_number in range(2, bound + 1):\n    if primeNumber[start_prime_number]:\n        primes.append(start_prime_number)\n\nreturn primes\n"
      ],
      [
        "import static java.lang.Math.sqrt;\nimport java.io.PrintWriter;\nimport java.io.File;\npublic class finder {\n    public static void main(String[] args) {\n        primelist primes = new primelist();\n        primes.insert(3);\n        primes.insert(5);\n        File file = new File(\"C:/Users/Richard/Desktop/directory/file0024.txt\");\n        file.getParentFile().mkdirs();\n        long time = System.nanoTime();\n        try{\n            PrintWriter printWriter = new PrintWriter (\"file0024.txt\"); \n            int linenum = 0;\n            printWriter.print(\"2\");\n            printWriter.print (\" , \");\n            printWriter.print(\"3\");\n            printWriter.print (\" , \");\n            int up;\n            int down;           \n            for(int i =1; i<357913941;i++){//\n                if(linenum%10000==0){\n                    printWriter.println (\"\");\n                    linenum++;\n                }\n                down = i*6-1;\n                if(primes.check(down)){\n                    primes.insert(down);\n                    //System.out.println(i*6-1);\n                    printWriter.print ( down );\n                    printWriter.print (\" , \");\n                    linenum++;  \n                }\n                up = i*6+1;\n                if(primes.check(up)){\n                    primes.insert(up);\n                    //System.out.println(i*6+1);\n                    printWriter.print ( up );\n                    printWriter.print (\" , \");\n                    linenum++;  \n                }\n            }\n            printWriter.println (\"Time to execute\");\n            printWriter.println (System.nanoTime()-time);\n            //System.out.println(primes.length);\n            printWriter.close ();\n        }catch(Exception e){}\n    } \n}\nclass node{\n    node next;\n    int x;\n    public node (){\n        node next;\n        x = 3;\n    }\n    public node(int z) {\n        node next;\n        x = z;\n    }\n}\nclass primelist{\n    node first;\n    int length =0;\n    node current;\n    public void insert(int x){\n        node y = new node(x);\n        if(current == null){\n            current = y;\n            first = y;\n        }else{\n            current.next = y;\n            current = y;\n        }\n        length++;\n    }\n    public boolean check(int x){\n        int p = (int)sqrt(x);\n        node y = first;\n        for(int i = 0;i<length;i++){\n            if(y.x>p){\n                return true;\n            }else if(x%y.x ==0){\n                return false;\n            }\n            y = y.next;\n        }\n        return true;\n    }\n}\n"
      ],
      [
        "Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles \nButton1.Click\n\n    Dim TestNum As Integer\n    Dim X As Integer\n    Dim Z As Integer\n    Dim TM As Single\n    Dim TS As Single\n    Dim TMS As Single\n    Dim UnPrime As Boolean\n    Dim Sentinal As Integer\n    Button1.Text = \"Thinking\"\n    Button1.Refresh()\n    Sentinal = Val(SentinalTxt.Text)\n    UnPrime = True\n    Primes(0) = 2\n    Primes(1) = 3\n    Z = 1\n    TM = TimeOfDay.Minute\n    TS = TimeOfDay.Second\n    TMS = TimeOfDay.Millisecond\n    For TestNum = 5 To Sentinal Step 2\n        Do While Primes(X) <> 0 And UnPrime And Primes(X) ^ 2 <= TestNum\n            If Int(TestNum / Primes(X)) - (TestNum / Primes(X)) = 0 Then\n                UnPrime = False\n            End If\n            X = X + 1\n\n        Loop\n        If UnPrime = True Then\n            X = X + 1\n            Z = Z + 1\n            Primes(Z) = TestNum\n        End If\n        UnPrime = True\n        X = 0\n    Next\n    Button1.Text = \"Finished with \" & Z\n    TM = TimeOfDay.Minute - TM\n    TS = TimeOfDay.Second - TS\n    TMS = TimeOfDay.Millisecond - TMS\n    ShowTime.Text = TM & \":\" & TS & \":\" & TMS\nEnd Sub\n"
      ],
      [
        "check x = null $ filter ((==0) . (x `mod`)) $ [<primes up to 101>]\nPrelude> length $ filter check [101,103..85600]\n>>> 9975\n(0.30 secs, 125,865,152 bytes\n\na = 16294579238595022365 :: Word64\nb = 14290787196698157718\npre = [2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97]\nprimes = (pre ++) $ filter ((==1) . gcd a) $ filter ((==1) . gcd b) [99,101..85600]\nmain = print $ length primes\n\nPrelude> main\n>>> 10000\n(0.05 secs, 36,387,520 bytes)\n",
        "...\\Haskell\\8.6\\Testbed>Primes.exe +RTS -s\n10000\n606,280 bytes allocated in the heap\nTotal   time    0.000s  (  0.004s elapsed)\n",
        "...Haskell\\8.6\\Testbed>Primes.exe +RTS -s\n10000\n47,688 bytes allocated in the heap\nTotal   time    0.000s  (  0.001s elapsed)\n",
        "wheel = scanl (+) 7 $ cycle [4, 2, 4, 2, 4, 6, 2, 6]\nprimes = (pre ++) $ filter ((==1) . gcd a) $ filter ((==1) . gcd b) $ takeWhile (<85600) wheel\n\nTotal   time    0.000s  (  0.003s elapsed)\n",
        "Tue Nov 12 21:13 2019 Time and Allocation Profiling Report  (Final)\n\n   Primes.exe +RTS -p -RTS\n\ntotal time  =        0.00 secs   (2 ticks @ 1000 us, 1 processor)\ntotal alloc =     967,120 bytes  (excludes profiling overheads)\n"
      ],
      [
        "#\n# generate a list of primes up to a specific target using a sieve of eratosthenes\n#\nfunction getPrimes { #sieve of eratosthenes, http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes\n    param ($target,$count = 0)\n    $sieveBound = [math]::ceiling(( $target - 1 ) / 2) #not storing evens so count is lower than $target\n    $sieve = @($false) * $sieveBound\n    $crossLimit = [math]::ceiling(( [math]::sqrt($target) - 1 ) / 2)\n    for ($i = 1; $i -le $crossLimit; $i ++) {\n        if ($sieve[$i] -eq $false) {\n            $prime = 2 * $i + 1\n            write-debug \"Found: $prime\"\n            for ($x = 2 * $i * ( $i + 1 ); $x -lt $sieveBound; $x += 2 * $i + 1) {\n                $sieve[$x] = $true\n            }\n        }\n    }\n    $primes = @(2)\n    for ($i = 1; $i -le $sieveBound; $i ++) {\n        if($count -gt 0 -and $primes.length -ge $count) {\n            break;\n        }\n        if($sieve[$i] -eq $false) {\n            $prime = 2 * $i + 1\n            write-debug \"Output: $prime\"\n            $primes += $prime\n        }\n    }\n    return $primes\n}\n"
      ],
      [
        "function isPrime (number) {\n\n  function prime(element) {\n    let start = 2;\n    while (start <= Math.sqrt(element)) {\n      if (element % start++ < 1) {\n        return false;\n      }\n    }\n    return element > 1;\n  }\n\n  return [number].find(prime)\n\n}\n\nfunction logPrimes (n) {\n\n  let count = 0\n  let nth = n\n\n  let i = 0\n  while (count < nth) {\n    if (isPrime(i)) {\n      count++\n      console.log('i', i) //NOTE: If this line is ommited time to find 10,000th prime is 121.157ms\n      if (count === nth) {\n        console.log('while i', i)\n        console.log('count', count)\n      }\n    }\n    i++\n  }\n\n}\n\nconsole.time(logPrimes)\n\nlogPrimes(10000)\n\nconsole.timeEnd(logPrimes) // 2214.486ms\n"
      ],
      [
        "boolean isPrime(int n){\n//even but is prime\n    if(n==2)\n        return true;\n//even numbers filtered already \n    if(n==0 || n==1 || n%2==0)\n        return false;\n\n// loop for checking only odd factors\n// i*i <= n  (same as i<=sqrt(n), avoiding floating point calculations)\n    for(int i=3 ; i*i <=n ; i+=2){\n    // if any odd factor divides n then its not a prime!\n        if(n%i==0)\n            return false;\n    }\n// its prime now\n    return true;\n}\n",
        "for(int i=1 ; i<=1000 ; i++){\n    if(isPrime(i)){\n       //do something\n    }\n}\n"
      ],
      [
        "#include <stdio.h>\n#include <stdlib.h>\n#include <stdbool.h>\n#include <math.h>\n\nint main(void)\n{\n    unsigned int lim, i, j;\n\n    printf(\"Find primes upto: \");\n    scanf(\"%d\", &lim);\n    lim += 1;\n    bool *primes = calloc(lim, sizeof(bool));\n\n    unsigned int sqrtlim = sqrt(lim);\n    for (i = 2; i <= sqrtlim; i++)\n        if (!primes[i])\n            for (j = i * i; j < lim; j += i)\n                primes[j] = true;\n\n    printf(\"\\nListing prime numbers between 2 and %d:\\n\\n\", lim - 1);\n    for (i = 2; i < lim; i++)\n        if (!primes[i])\n            printf(\"%d\\n\", i);\n\n    return 0;\n}\n"
      ],
      [
        "enter code here\n#include <cmath>\n#include <cstdio>\n#include <vector>\n#include <iostream>\n#include <algorithm>\nusing namespace std;\n\n\nint main() {\n/* Enter your code here. Read input from STDIN. Print output to STDOUT*/   \n\nunsigned long int n;\n\nint prime(unsigned long int);\n\nscanf(\"%ld\",&n);\n\nunsigned long int val;\n\nfor(unsigned long int i=0;i<n;i++)\n{\n    int flag=0;\n\n    scanf(\"%ld\",&val);\n\n    flag=prime(val);\n\n    if(flag==1)\n        printf(\"yes\\n\");\n\n    else\n        printf(\"no\\n\");\n}\n\nreturn 0;\n\n}\n\nint prime(unsigned long int n)\n{\n\nif(n==2) return 1;\n\nelse if (n == 1||n%2==0)  return 0;\n\nfor (unsigned long int i=3; i<=sqrt(n); i+=2)\n    if (n%i == 0)\n        return 0;\n\nreturn 1;\n}\n"
      ],
      [],
      [],
      [],
      [
        "#include <iostream>\n#include <deque>\n\ntypedef std::deque<int> mydeque;\n\nvoid my_insert( mydeque & factors, int factor ) {\n    int where = factor, count = factors.size();\n    while( where < count && factors[where] ) where += factor;\n    if( where >= count ) factors.resize( where + 1 );\n    factors[ where ] = factor;\n}\n\nint main() {\n    mydeque primes;\n    mydeque factors;\n    int a_prime = 3, a_square_prime = 9, maybe_prime = 3;\n    int cnt = 2;\n    factors.resize(3);\n    std::cout << \"2 3 \";\n\n    while( cnt < 10000 ) {\n        int factor = factors.front();\n        maybe_prime += 2;\n        if( factor ) {\n            my_insert( factors, factor );\n        } else if( maybe_prime < a_square_prime ) {\n            std::cout << maybe_prime << \" \";\n            primes.push_back( maybe_prime );\n            ++cnt;\n        } else {\n            my_insert( factors, a_prime );\n            a_prime = primes.front();\n            primes.pop_front();\n            a_square_prime = a_prime * a_prime;\n        }\n        factors.pop_front();\n    }\n\n    std::cout << std::endl;\n    return 0;\n}\n"
      ],
      [
        "ArrayList primeNumbers = new ArrayList();\n\nfor(int i = 2; primeNumbers.Count < 10000; i++) {\n    bool divisible = false;\n\n    foreach(int number in primeNumbers) {\n        if(i % number == 0) {\n            divisible = true;\n        }\n    }\n\n    if(divisible == false) {\n        primeNumbers.Add(i);\n        Console.Write(i + \" \");\n    }\n}\n"
      ],
      [
        "static List<int> deque_sieve (int n = 10000)\n{\n    Trace.Assert(n >= 3);\n\n    var primes = new List<int>()  {  2, 3  };\n    var sieve = new List<int>()  {  0, 0, 0  };\n\n    for (int sieve_base = 5, current_prime_index = 1, current_prime_squared = 9; ; )\n    {\n        int base_factor = sieve[0];\n\n        if (base_factor != 0)\n        {\n            // the sieve base has a non-trivial factor - put that factor back into circulation\n            mark_next_unmarked_multiple(sieve, base_factor);\n        }\n        else if (sieve_base < current_prime_squared)  // no non-trivial factor -> found a non-composite\n        {\n            primes.Add(sieve_base);\n\n            if (primes.Count == n)\n                return primes;\n        }\n        else // sieve_base == current_prime_squared\n        {\n            // bring the current prime into circulation by injecting it into the sieve ...\n            mark_next_unmarked_multiple(sieve, primes[current_prime_index]);\n\n            // ... and elect a new current prime\n            current_prime_squared = square(primes[++current_prime_index]);\n        }\n\n        // slide the sieve one step forward\n        sieve.RemoveAt(0);  sieve_base += 2;\n    }\n}\n",
        "static void mark_next_unmarked_multiple (List<int> sieve, int prime)\n{\n    int i = prime, e = sieve.Count;\n\n    while (i < e && sieve[i] != 0)\n        i += prime;\n\n    for ( ; e <= i; ++e)  // no List<>.Resize()...\n        sieve.Add(0);\n\n    sieve[i] = prime;\n}\n\nstatic int square (int n)\n{\n    return n * n;\n}\n",
        "static List<int> small_odd_primes_up_to (int n)\n{\n    var result = new List<int>();\n\n    if (n < 3)\n        return result;\n\n    int sqrt_n_halved = (int)(Math.Sqrt(n) - 1) >> 1, max_bit = (n - 1) >> 1;\n    var odd_composite = new bool[max_bit + 1];\n\n    for (int i = 3 >> 1; i <= sqrt_n_halved; ++i)\n        if (!odd_composite[i])\n            for (int p = (i << 1) + 1, j = p * p >> 1; j <= max_bit; j += p)\n                odd_composite[j] = true;\n\n    result.Add(3);  // needs to be handled separately because of the mod 3 wheel\n\n    // read out the sieved primes\n    for (int i = 5 >> 1, d = 1; i <= max_bit; i += d, d ^= 3)\n        if (!odd_composite[i])\n            result.Add((i << 1) + 1);\n\n    return result;\n}\n",
        "deque vs simple: 1.802 ms vs 0.182 ms\ndeque vs simple: 1.836 ms vs 0.170 ms \ndeque vs simple: 1.729 ms vs 0.173 ms\n",
        "deque vs simple: 1895.521 ms vs 432.763 ms\ndeque vs simple: 1847.594 ms vs 429.766 ms\ndeque vs simple: 1859.462 ms vs 430.625 ms\n",
        "class CCWriter\n{\n    const int SPACE_RESERVE = 11;  // UInt31 + '\\n'\n\n    public static System.IO.Stream BaseStream;\n    static byte[] m_buffer = new byte[1 << 16];  // need 55k..60k for a maximum-size range\n    static int m_write_pos = 0;\n    public static long BytesWritten = 0;         // for statistics\n\n    internal static ushort[] m_double_digit_lookup = create_double_digit_lookup();\n\n    internal static ushort[] create_double_digit_lookup ()\n    {\n        var lookup = new ushort[100];\n\n        for (int lo = 0; lo < 10; ++lo)\n            for (int hi = 0; hi < 10; ++hi)\n                lookup[hi * 10 + lo] = (ushort)(0x3030 + (hi << 8) + lo);\n\n        return lookup;\n    }\n\n    public static void Flush ()\n    {\n        if (BaseStream != null && m_write_pos > 0)\n            BaseStream.Write(m_buffer, 0, m_write_pos);\n\n        BytesWritten += m_write_pos;\n        m_write_pos = 0;\n    }\n\n    public static void WriteLine ()\n    {\n        if (m_buffer.Length - m_write_pos < 1)\n            Flush();\n\n        m_buffer[m_write_pos++] = (byte)'\\n';\n    }\n\n    public static void WriteLinesSorted (int[] values, int count)\n    {\n        int digits = 1, max_value = 9;\n\n        for (int i = 0; i < count; ++i)\n        {\n            int x = values[i];\n\n            if (m_buffer.Length - m_write_pos < SPACE_RESERVE)\n                Flush();\n\n            while (x > max_value)\n                if (++digits < 10)\n                    max_value = max_value * 10 + 9;\n                else\n                    max_value = int.MaxValue;               \n\n            int n = x, p = m_write_pos + digits, e = p + 1;\n\n            m_buffer[p] = (byte)'\\n';\n\n            while (n >= 10)\n            {\n                int q = n / 100, w = m_double_digit_lookup[n - q * 100];\n                n = q;\n                m_buffer[--p] = (byte)w;\n                m_buffer[--p] = (byte)(w >> 8);\n            }\n\n            if (n != 0 || x == 0)\n                m_buffer[--p] = (byte)((byte)'0' + n);\n\n            m_write_pos = e;\n        }\n    }\n}\n"
      ],
      [
        "#include <stdio.h>\n#include <gmp.h>\n\nint main() {\n  mpz_t prime;\n  mpz_init(prime);\n  mpz_set_ui(prime, 1);\n  int i;\n  char* num = malloc(4000);\n  for(i=0; i<10000; i++) {\n    mpz_nextprime(prime, prime);\n    printf(\"%s, \", mpz_get_str(NULL,10,prime));\n  }\n}\n",
        "time ./a.out > /dev/null\n\nreal    0m0.033s\nuser    0m0.029s\nsys    0m0.003s\n",
        "time ./a.out > /dev/null\n\nreal    0m14.824s\nuser    0m14.606s\nsys     0m0.086s\n"
      ],
      [
        "ArrayList primeNumbers = new ArrayList();\n\nfor(int i = 2; primeNumbers.Count < 10000; i++) {\n    bool divisible = false;\n\n    foreach(int number in primeNumbers) {\n        if(i % number == 0) {\n            divisible = true;\n            break;\n        }\n    }\n\n    if(divisible == false) {\n        primeNumbers.Add(i);\n        Console.Write(i + \" \");\n    }\n}\n"
      ],
      [
        "import gmpy\np=1\nfor i in range(10000):\n    p=gmpy.next_prime(p)\n    print p \n"
      ]
    ],
    "votes:": "65",
    "tags": "<performance><algorithm><primes>",
    "AcceptedAnswerId": "623",
    "answers": [
      {
        "id": "10287195",
        "title": "",
        "text": "<p>I spend some time writing a program calculating a lot of primes and this is the code I'm used to calculate a text file containing the first 1.000.000.000 primes. It's in German, but the interesting part is the method <code>calcPrimes()</code>. The primes are stored in an array called Primzahlen. I recommend a 64bit CPU because the calculations are with 64bit integers.</p>\n\n<pre><code>import java.io.*;\nclass Primzahlengenerator {\n    long[] Primzahlen;\n    int LastUnknown = 2;\n    public static void main(String[] args)  {\n        Primzahlengenerator Generator = new Primzahlengenerator();\n        switch(args.length) {\n            case 0:  //Wenn keine Argumente \u00fcbergeben worden:\n                Generator.printHelp(); //Hilfe ausgeben\n                return; //Durchfallen verhindern\n            case 1:\n                try {\n                    Generator.Primzahlen = new long[Integer.decode(args[0]).intValue()];\n                }\n                catch (NumberFormatException e) {\n                    System.out.println(\"Das erste Argument muss eine Zahl sein, und nicht als Wort z.B. \\\"Tausend\\\", sondern in Ziffern z.B. \\\"1000\\\" ausgedr\u00fcckt werden.\");//Hinweis, wie man die Argumente angeben muss ausgeben\n                    Generator.printHelp();                    //Generelle Hilfe ausgeben\n                    return;\n                }\n                break;//dutchfallen verhindern\n\n            case 2:\n                switch (args[1]) {\n                    case \"-l\":\n                        System.out.println(\"Sie m\u00fcsen auch eine Datei angeben!\"); //Hilfemitteilung ausgeben\n                        Generator.printHelp();                                    //Generelle Hilfe ausgeben\n                        return;\n                }\n                break;//durchfallen verhindern\n            case 3:\n                try {\n                    Generator.Primzahlen = new long[Integer.decode(args[0]).intValue()];\n                }\n                catch (NumberFormatException e) {\n                    System.out.println(\"Das erste Argument muss eine Zahl sein, und nicht als Wort z.B. \\\"Tausend\\\", sondern in Ziffern z.B. \\\"1000\\\" ausgedr\u00fcckt werden.\");//Hinweis, wie man die Argumente angeben muss ausgeben\n                    Generator.printHelp();                      //Generelle Hilfe ausgeben\n                    return;\n                }\n                switch(args[1]) {\n                    case \"-l\":\n                        Generator.loadFromFile(args[2]);//Datei Namens des Inhalts von Argument 3 lesen, falls Argument 2 = \"-l\" ist\n                        break;\n                    default:\n                        Generator.printHelp();\n                        break;\n                }\n                break;\n            default:\n                Generator.printHelp();\n                return;\n        }\n        Generator.calcPrims();\n    }\n    void printHelp() {\n        System.out.println(\"Sie m\u00fcssen als erstes Argument angeben, die wieviel ersten Primzahlen sie berechnen wollen.\");   //Anleitung wie man das Programm mit Argumenten f\u00fcttern muss\n        System.out.println(\"Als zweites Argument k\u00f6nnen sie \\\"-l\\\" w\u00e4hlen, worauf die Datei, aus der die Primzahlen geladen werden sollen,\");\n        System.out.println(\"folgen muss. Sie muss genauso aufgebaut sein, wie eine Datei Primzahlen.txt, die durch den Aufruf \\\"java Primzahlengenerator 1000 &gt; Primzahlen.txt\\\" entsteht.\");\n    }\n    void loadFromFile(String File) {\n        // System.out.println(\"Lese Datei namens: \\\"\" + File + \"\\\"\");\n        try{\n            int x = 0;\n            BufferedReader in = new BufferedReader(new FileReader(File));\n            String line;\n            while((line = in.readLine()) != null) {\n                Primzahlen[x] = new Long(line).longValue();\n                x++;\n            }\n            LastUnknown = x;\n        } catch(FileNotFoundException ex) {\n            System.out.println(\"Die angegebene Datei existiert nicht. Bitte geben sie eine existierende Datei an.\");\n        } catch(IOException ex) {\n            System.err.println(ex);\n        } catch(ArrayIndexOutOfBoundsException ex) {\n            System.out.println(\"Die Datei enth\u00e4lt mehr Primzahlen als der reservierte Speicherbereich aufnehmen kann. Bitte geben sie als erstes Argument eine gr\u00f6\u00dfere Zahl an,\");\n            System.out.println(\"damit alle in der Datei enthaltenen Primzahlen aufgenommen werden k\u00f6nnen.\");\n            }\n        /* for(long prim : Primzahlen) {\n            System.out.println(\"\" + prim);\n        } */\n        //Hier soll code stehen, der von der Datei mit angegebenem Namen ( Wie diese aussieht einfach durch angeben von folgendem in cmd rausfinden:\n        //java Primzahlengenerator 1000 &gt; 1000Primzahlen.txt\n        //da kommt ne textdatei, die die primzahlen enth\u00e4lt. mit Long.decode(String ziffern).longValue();\n        //erh\u00e4lt man das was an der entsprechenden stelle in das array soll. die erste zeile soll in [0] , die zweite zeile in [1] und so weiter.\n        //falls im arry der platz aus geht(die exception kenn ich grad nich, aber mach mal:\n        //int[] foo = { 1, 2, 3};\n        //int bar = foo[4];\n        //dann kriegst ne exception, das ist die gleiche die man kriegt, wenn im arry der platzt aus geht.\n    }\n    void calcPrims() {\n        int PrimzahlNummer = LastUnknown;\n        // System.out.println(\"LAstUnknown ist: \" + LastUnknown);\n        Primzahlen[0] = 2;\n        Primzahlen[1] = 3;\n        long AktuelleZahl = Primzahlen[PrimzahlNummer - 1];\n        boolean IstPrimzahl;\n        // System.out.println(\"2\");\n        // System.out.println(\"3\");\n        int Limit = Primzahlen.length;\n        while(PrimzahlNummer &lt; Limit) {\n            IstPrimzahl = true;\n            double WurzelDerAktuellenZahl = java.lang.Math.sqrt(AktuelleZahl);\n            for(int i = 1;i &lt; PrimzahlNummer;i++) {\n                if(AktuelleZahl % Primzahlen[i] == 0) {\n                    IstPrimzahl = false;\n                    break;\n                }\n                if(Primzahlen[i] &gt; WurzelDerAktuellenZahl) break;\n            }\n            if(IstPrimzahl) {\n                Primzahlen[PrimzahlNummer] = AktuelleZahl;\n                PrimzahlNummer++;\n                // System.out.println(\"\" + AktuelleZahl);\n            }\n            AktuelleZahl = AktuelleZahl + 2;\n        }\n        for(long prim : Primzahlen) {\n            System.out.println(\"\" + prim);\n        }\n    }\n}\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "10302076",
        "title": "",
        "text": "<p>In Haskell, we can write down almost word for word the mathematical definition of the sieve of Eratosthenes, \"<em>primes are natural numbers above 1 without any composite numbers, where composites are found by enumeration of each prime's multiples</em>\":</p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>import Data.List.Ordered (minus, union)\n\nprimes = 2 : minus [3..] (foldr (\\p r -&gt; p*p : union [p*p+p, p*p+2*p..] r)\n                                [] primes)\n</code></pre>\n\n<p><code>primes !! 10000</code> is near-instantaneous. </p>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes\" rel=\"nofollow noreferrer\">Sieve of Eratosthenes</a></li>\n<li><a href=\"http://www.cs.hmc.edu/~oneill/papers/Sieve-JFP.pdf\" rel=\"nofollow noreferrer\">Richard Bird's sieve (see pp. 10,11)</a></li>\n<li><a href=\"http://www.haskell.org/haskellwiki/Prime_numbers#Initial_definition\" rel=\"nofollow noreferrer\">minus, union</a></li>\n</ul>\n\n<hr>\n\n<p><sub>The above code is easily tweaked into working on odds only, <strong><code>primes = 2 : 3 : minus [5,7..] (foldr (\\p r -&gt; p*p : union [p*p+2*p, p*p+4*p..] r) [] (tail primes))</code></strong>. Time complexity is much improved (to just about a <em>log</em> factor above optimal) by folding in a tree-like structure, and space complexity is <a href=\"http://ideone.com/se0bsB\" rel=\"nofollow noreferrer\">drastically improved</a> by <a href=\"https://stackoverflow.com/questions/13894417/double-stream-feed-to-prevent-unneeded-memoization/13895347#13895347\">multistage primes production</a>, in</sub></p>\n\n<pre class=\"lang-hs prettyprint-override\"><code>primes = 2 : _Y ( (3:) . sieve 5 . _U . map (\\p -&gt; [p*p, p*p+2*p..]) )\n  where\n    _Y g = g (_Y g)                        -- non-sharing fixpoint combinator\n    _U ((x:xs):t) = x : (union xs . _U . pairs) t       -- ~= nub.sort.concat\n    pairs    (xs:ys:t)  = union xs ys : pairs t\n    sieve k s@(x:xs) | k &lt; x      = k : sieve (k+2) s   -- ~= [k,k+2..]\\\\s,\n                     | otherwise  =     sieve (k+2) xs  --   when s\u2282[k,k+2..]\n</code></pre>\n\n<p><sub>(In Haskell the parentheses are used for grouping, a function call is signified just by juxtaposition, <strong><code>(:)</code></strong> is a <em>cons</em> operator for lists, and <strong><code>(.)</code></strong> is a functional composition operator: <strong><code>(f . g) x = (\\y -&gt; f (g y)) x = f (g x)</code></strong>).</sub></p>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "791",
        "title": "",
        "text": "<p>Not efficient at all, but you can use a regular expression to test for prime numbers.</p>\n\n<pre><code>/^1?$|^(11+?)\\1+$/\n</code></pre>\n\n<p>This tests if, for a string consisting of <em>k</em> \u201c<code>1</code>\u201ds, <em>k</em> is <em>not prime</em> (i.e. whether the string consists of one \u201c<code>1</code>\u201d or any number of \u201c<code>1</code>\u201ds that can be expressed as an <em>n</em>-ary product).</p>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "10492469",
        "title": "",
        "text": "<pre><code>using System;\n\nnamespace ConsoleApplication2\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            int n, i = 3, j, c;\n            Console.WriteLine(\"Please enter your integer: \");\n            n = Convert.ToInt32(Console.ReadLine());\n            if (n &gt;= 1)\n            {\n                Console.WriteLine(\"First \" + n + \" Prime Numbers are\");\n                Console.WriteLine(\"2\");\n            }\n            for(j=2;j&lt;=n;)\n            {\n                for(c=2;c&lt;=i-1;c++)\n                {\n                    if(i%c==0)\n                        break;\n                }\n                    if(c==i)\n                    {\n                        Console.WriteLine(i);\n                        j++;\n                    }\n                    i++;                                \n            }\n            Console.Read();\n        }\n    }\n}\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "552319",
        "title": "",
        "text": "<p>Adapting and following on from <a href=\"https://stackoverflow.com/questions/622/most-efficient-code-for-the-first-10000-prime-numbers/2753#2753\">GateKiller</a>, here's the final version that I've used.</p>\n\n<pre><code>    public IEnumerable&lt;long&gt; PrimeNumbers(long number)\n    {\n        List&lt;long&gt; primes = new List&lt;long&gt;();\n        for (int i = 2; primes.Count &lt; number; i++)\n        {\n            bool divisible = false;\n\n            foreach (int num in primes)\n            {\n                if (i % num == 0)\n                    divisible = true;\n\n                if (num &gt; Math.Sqrt(i))\n                    break;\n            }\n\n            if (divisible == false)\n                primes.Add(i);\n        }\n        return primes;\n    }\n</code></pre>\n\n<p>It's basically the same, but I've added the \"break on Sqrt\" suggestion and changed some of the variables around to make it fit better for me. (I was working on Euler and needed the 10001th prime)</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "37182",
        "title": "",
        "text": "<p>This isn't strictly against the hardcoding restriction, but comes terribly close.  Why not programatically download this list and print it out, instead?</p>\n\n<p><a href=\"http://primes.utm.edu/lists/small/10000.txt\" rel=\"noreferrer\">http://primes.utm.edu/lists/small/10000.txt</a></p>\n",
        "votes": "19",
        "tags": "",
        "accepted": false
      },
      {
        "id": "623",
        "title": "",
        "text": "<p><a href=\"http://en.wikipedia.org/wiki/Sieve_of_Atkin\" rel=\"noreferrer\">The Sieve of Atkin</a> is probably what you're looking for, its upper bound running time is O(N/log log N).</p>\n\n<p>If you only run the numbers 1 more and 1 less than the multiples of 6, it could be even faster, as all prime numbers above 3 are 1 away from some multiple of six. \n<a href=\"http://primes.utm.edu/notes/faq/six.html\" rel=\"noreferrer\">Resource for my statement</a></p>\n",
        "votes": "53",
        "tags": "",
        "accepted": true
      },
      {
        "id": "4540559",
        "title": "",
        "text": "<p>I have written this using python, as I just started learning it, and it works perfectly fine. The 10,000th prime generate by this code as same as mentioned in <a href=\"http://primes.utm.edu/lists/small/10000.txt\" rel=\"nofollow\">http://primes.utm.edu/lists/small/10000.txt</a>. To check if <code>n</code> is prime or not, divide <code>n</code> by the numbers from <code>2</code> to <code>sqrt(n)</code>. If any of this range of number perfectly divides <code>n</code> then it's not prime.</p>\n\n<pre><code>import math\nprint (\"You want prime till which number??\")\na = input()\na = int(a)\nx = 0\nx = int(x)\ncount = 1\nprint(\"2 is prime number\")\nfor c in range(3,a+1):\n    b = math.sqrt(c)\n    b = int(b)\n    x = 0\n    for b in range(2,b+1):\n        e  = c % b\n        e = int(e)\n        if (e == 0):\n            x = x+1\n    if (x == 0):\n        print(\"%d is prime number\" % c)\n        count = count + 1\nprint(\"Total number of prime till %d is %d\" % (a,count))\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2967",
        "title": "",
        "text": "<p>I recommend a sieve, either the <a href=\"http://web.archive.org/web/20140705111241/http://primes.utm.edu/links/programs/sieves/Eratosthenes/C_source_code/\" rel=\"noreferrer\">Sieve of Eratosthenes</a> or the <a href=\"http://cr.yp.to/primegen.html\" rel=\"noreferrer\">Sieve of Atkin.</a>  </p>\n\n<p>The sieve or Eratosthenes is probably the most intuitive method of finding a list of primes. Basically you:</p>\n\n<ol>\n<li>Write down a list of numbers from 2 to whatever limit you want, let's say 1000.</li>\n<li>Take the first number that isn't crossed off (for the first iteration this is 2) and cross off all multiples of that number from the list.</li>\n<li>Repeat step 2 until you reach the end of the list. All the numbers that aren't crossed off are prime.</li>\n</ol>\n\n<p>Obviously there are quite a few optimizations that can be done to make this algorithm work faster, but this is the basic idea.</p>\n\n<p>The sieve of Atkin uses a similar approach, but unfortunately I don't know enough about it to explain it to you. But I do know that the algorithm I linked takes 8 seconds to figure out all the primes up to 1000000000 on an ancient Pentium II-350</p>\n\n<p>Sieve of Eratosthenes Source Code: <a href=\"http://web.archive.org/web/20140705111241/http://primes.utm.edu/links/programs/sieves/Eratosthenes/C_source_code/\" rel=\"noreferrer\">http://web.archive.org/web/20140705111241/http://primes.utm.edu/links/programs/sieves/Eratosthenes/C_source_code/</a></p>\n\n<p>Sieve of Atkin Source Code: <a href=\"http://cr.yp.to/primegen.html\" rel=\"noreferrer\">http://cr.yp.to/primegen.html</a></p>\n",
        "votes": "38",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1019318",
        "title": "",
        "text": "<p>The Sieve seems to be the wrong answer. The sieve gives you the primes <strong>up to</strong> a number <strong>N</strong>, not the <strong>first N</strong> primes. Run @Imran or @Andrew Szeto, and you get the primes up to N. </p>\n\n<p>The sieve might still be usable if you keep trying sieves for increasingly larger numbers until you hit a certain size of your result set, and use some caching of numbers already obtained, but I believe it would still be no faster than a solution like @Pat's.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "37176847",
        "title": "",
        "text": "<p>Using Sieve of Eratosthenes, computation is quite faster compare to \"known-wide\" prime numbers algorithm.</p>\n\n<p>By using pseudocode from it's wiki (<a href=\"https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes</a>), I be able to have the solution on C#.</p>\n\n<pre><code>/// Get non-negative prime numbers until n using Sieve of Eratosthenes.\npublic int[] GetPrimes(int n) {\n    if (n &lt;= 1) {\n        return new int[] { };\n    }\n\n    var mark = new bool[n];\n    for(var i = 2; i &lt; n; i++) {\n        mark[i] = true;\n    }\n\n    for (var i = 2; i &lt; Math.Sqrt(n); i++) {\n        if (mark[i]) {\n            for (var j = (i * i); j &lt; n; j += i) {\n                mark[j] = false;\n            }\n        }\n    }\n\n    var primes = new List&lt;int&gt;();\n    for(var i = 3; i &lt; n; i++) {\n        if (mark[i]) {\n            primes.Add(i);\n        }\n    }\n\n    return primes.ToArray();\n}\n</code></pre>\n\n<p>GetPrimes(100000000) takes 2s and 330ms.</p>\n\n<p><strong><em>NOTE</strong>: Value might vary depend on Hardware Specifications.</em></p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "43820084",
        "title": "",
        "text": "<p>Here is my code which finds \nfirst 10,000 primes in 0.049655 sec on my laptop, first 1,000,000 primes in under 6 seconds and first 2,000,000 in 15 seconds<br>\nA little explanation. This method uses 2 techniques to find prime number</p>\n\n<ol>\n<li>first of all any non-prime number is a composite of multiples of prime numbers so this code test by dividing the test number by smaller prime numbers instead of any number, this decreases calculation by atleast 10 times for a 4 digit number and even more for a bigger number</li>\n<li>secondly besides dividing by prime, it only divides by prime numbers that are smaller or equal to the root of the number being tested further reducing the calculations greatly, this works because any number that is greater than root of the number will have a counterpart number that has to be smaller than root of the number but since we have tested all numbers smaller than the root already, Therefore we don't need to bother with number greater than the root of the number being tested. </li>\n</ol>\n\n<p>Sample output for first 10,000 prime number<br>\n<a href=\"https://drive.google.com/open?id=0B2QYXBiLI-lZMUpCNFhZeUphck0\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=0B2QYXBiLI-lZMUpCNFhZeUphck0</a> <a href=\"https://drive.google.com/open?id=0B2QYXBiLI-lZbmRtTkZETnp6Ykk\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=0B2QYXBiLI-lZbmRtTkZETnp6Ykk</a></p>\n\n<p>Here is the code in C language,\nEnter 1 and then 10,000 to print out the first 10,000 primes.<br>\nEdit: I forgot this contains math library ,if you are on windows or visual studio than that should be fine but on linux you must compile the code using -lm argument or the code may not work<br>\nExample: gcc -Wall -o \"%e\" \"%f\" -lm</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;time.h&gt;\n#include &lt;limits.h&gt;\n\n/* Finding prime numbers */\nint main()\n{   \n    //pre-phase\n    char d,w;\n    int l,o;\n    printf(\"  1. Find first n number of prime numbers or Find all prime numbers smaller than n ?\\n\"); // this question helps in setting the limits on m or n value i.e l or o \n    printf(\"     Enter 1 or 2 to get anwser of first or second question\\n\");\n    // decision making\n    do\n    {\n        printf(\"  --&gt;\");\n        scanf(\"%c\",&amp;d);\n        while ((w=getchar()) != '\\n' &amp;&amp; w != EOF);\n        if ( d == '1')\n        {\n            printf(\"\\n  2. Enter the target no. of primes you will like to find from 3 to 2,000,000 range\\n  --&gt;\");\n            scanf(\"%10d\",&amp;l);\n            o=INT_MAX;\n            printf(\"  Here we go!\\n\\n\");\n            break;\n        }\n        else if ( d == '2' )\n        {\n            printf(\"\\n  2.Enter the limit under which to find prime numbers from 5 to 2,000,000 range\\n  --&gt;\");\n            scanf(\"%10d\",&amp;o);\n            l=o/log(o)*1.25;\n            printf(\"  Here we go!\\n\\n\");\n            break;\n        }\n        else printf(\"\\n  Try again\\n\");\n    }while ( d != '1' || d != '2' );\n\n    clock_t start, end;\n    double cpu_time_used;\n    start = clock(); /* starting the clock for time keeping */\n\n    // main program starts here\n    int i,j,c,m,n; /* i ,j , c and m are all prime array 'p' variables and n is the number that is being tested */\n    int s,x;\n\n    int p[ l ]; /* p is the array for storing prime numbers and l sets the array size, l was initialized in pre-phase */\n    p[1]=2;\n    p[2]=3;\n    p[3]=5;\n    printf(\"%10dst:%10d\\n%10dnd:%10d\\n%10drd:%10d\\n\",1,p[1],2,p[2],3,p[3]); // first three prime are set\n    for ( i=4;i&lt;=l;++i ) /* this loop sets all the prime numbers greater than 5 in the p array to 0 */\n        p[i]=0;\n\n    n=6; /* prime number testing begins with number 6 but this can lowered if you wish but you must remember to update other variables too */\n    s=sqrt(n); /* 's' does two things it stores the root value so that program does not have to calaculate it again and again and also it stores it in integer form instead of float*/\n    x=2; /* 'x' is the biggest prime number that is smaller or equal to root of the number 'n' being tested */\n\n    /* j ,x and c are related in this way, p[j] &lt;= prime number x &lt;= p[c] */\n\n    // the main loop begins here\n    for ( m=4,j=1,c=2; m&lt;=l &amp;&amp; n &lt;= o;)\n    /* this condition checks if all the first 'l' numbers of primes are found or n does not exceed the set limit o */\n    {\n            // this will divide n by prime number in p[j] and tries to rule out non-primes\n            if ( n%p[j]==0 )\n            {\n                /* these steps execute if the number n is found to be non-prime */\n\n                ++n; /* this increases n by 1 and therefore sets the next number 'n' to be tested */\n                s=sqrt(n); /* this calaulates and stores in 's' the new root of number 'n' */\n                if ( p[c] &lt;= s &amp;&amp; p[c] != x ) /* 'The Magic Setting' tests the next prime number candidate p[c] and if passed it updates the prime number x */\n                {\n                    x=p[c];\n                    ++c;\n                }\n                j=1;\n                /* these steps sets the next number n to be tested and finds the next prime number x if possible for the new number 'n' and also resets j to 1 for the new cycle */\n                continue; /* and this restarts the loop for the new cycle */\n            }\n            // confirmation test for the prime number candidate n\n            else if ( n%p[j]!=0 &amp;&amp; p[j]==x )\n            {\n                /* these steps execute if the number is found to be prime */\n                p[m]=n;\n                printf(\"%10dth:%10d\\n\",m,p[m]);\n                ++n;\n                s = sqrt(n);\n                ++m;\n                j=1;\n                /* these steps stores and prints the new prime number and moves the 'm' counter up and also sets the next number n to be tested and also resets j to 1 for the new cycle */\n                continue; /* and this restarts the loop */\n                /* the next number which will be a even and non-prime will trigger the magic setting in the next cycle and therfore we do not have to add another magic setting here*/\n            }\n            ++j; /* increases p[j] to next prime number in the array for the next cycle testing of the number 'n' */\n            // if the cycle reaches this point that means the number 'n' was neither divisible by p[j] nor was it a prime number\n            // and therfore it will test the same number 'n' again in the next cycle with a bigger prime number\n    }\n    // the loops ends\n    printf(\"  All done !!\\n\");\n    end = clock();\n    cpu_time_used = ((double) (end - start)) / CLOCKS_PER_SEC;\n    printf(\"  Time taken : %lf sec\\n\",cpu_time_used);\n}\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "61831666",
        "title": "",
        "text": "<pre><code>def compute_primes(bound):\n\"\"\"\nReturn a list of the prime numbers in range(2, bound)\nImplement the Sieve of Eratosthenes\nhttps://en.wikipedia.org/wiki/Sieve_of_Eratosthenes\n\"\"\"\nprimeNumber = [True for i in range(bound + 1)]\nstart_prime_number = 2\nprimes = []\nwhile start_prime_number * start_prime_number &lt;=bound:\n    # If primeNumber[start_prime_number] is not changed, then it is a prime\n    if primeNumber[start_prime_number]:\n        # Update all multiples of start_prime_number\n        for i in range(start_prime_number * start_prime_number, bound + 1, start_prime_number):\n            primeNumber[i] = False\n    start_prime_number += 1\n\n# Print all prime numbers\nfor start_prime_number in range(2, bound + 1):\n    if primeNumber[start_prime_number]:\n        primes.append(start_prime_number)\n\nreturn primes\n</code></pre>\n\n<p>print(len(compute_primes(200)))</p>\n\n<p>print(len(compute_primes(2000)))</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "38938100",
        "title": "",
        "text": "<p>I have been working on find primes for about a year. This is what I found to be the fastest:</p>\n\n<pre><code>import static java.lang.Math.sqrt;\nimport java.io.PrintWriter;\nimport java.io.File;\npublic class finder {\n    public static void main(String[] args) {\n        primelist primes = new primelist();\n        primes.insert(3);\n        primes.insert(5);\n        File file = new File(\"C:/Users/Richard/Desktop/directory/file0024.txt\");\n        file.getParentFile().mkdirs();\n        long time = System.nanoTime();\n        try{\n            PrintWriter printWriter = new PrintWriter (\"file0024.txt\"); \n            int linenum = 0;\n            printWriter.print(\"2\");\n            printWriter.print (\" , \");\n            printWriter.print(\"3\");\n            printWriter.print (\" , \");\n            int up;\n            int down;           \n            for(int i =1; i&lt;357913941;i++){//\n                if(linenum%10000==0){\n                    printWriter.println (\"\");\n                    linenum++;\n                }\n                down = i*6-1;\n                if(primes.check(down)){\n                    primes.insert(down);\n                    //System.out.println(i*6-1);\n                    printWriter.print ( down );\n                    printWriter.print (\" , \");\n                    linenum++;  \n                }\n                up = i*6+1;\n                if(primes.check(up)){\n                    primes.insert(up);\n                    //System.out.println(i*6+1);\n                    printWriter.print ( up );\n                    printWriter.print (\" , \");\n                    linenum++;  \n                }\n            }\n            printWriter.println (\"Time to execute\");\n            printWriter.println (System.nanoTime()-time);\n            //System.out.println(primes.length);\n            printWriter.close ();\n        }catch(Exception e){}\n    } \n}\nclass node{\n    node next;\n    int x;\n    public node (){\n        node next;\n        x = 3;\n    }\n    public node(int z) {\n        node next;\n        x = z;\n    }\n}\nclass primelist{\n    node first;\n    int length =0;\n    node current;\n    public void insert(int x){\n        node y = new node(x);\n        if(current == null){\n            current = y;\n            first = y;\n        }else{\n            current.next = y;\n            current = y;\n        }\n        length++;\n    }\n    public boolean check(int x){\n        int p = (int)sqrt(x);\n        node y = first;\n        for(int i = 0;i&lt;length;i++){\n            if(y.x&gt;p){\n                return true;\n            }else if(x%y.x ==0){\n                return false;\n            }\n            y = y.next;\n        }\n        return true;\n    }\n}\n</code></pre>\n\n<p>1902465190909 nano seconds to get to 2147483629 starting at 2.</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5268325",
        "title": "",
        "text": "<p>Here is my VB 2008 code, which finds all primes &lt;10,000,000 in 1 min 27 secs on my work laptop. It skips even numbers and only looks for primes that are &lt; the sqrt of the test number. It is only designed to find primes from 0 to a sentinal value.</p>\n\n<pre><code>Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles \nButton1.Click\n\n    Dim TestNum As Integer\n    Dim X As Integer\n    Dim Z As Integer\n    Dim TM As Single\n    Dim TS As Single\n    Dim TMS As Single\n    Dim UnPrime As Boolean\n    Dim Sentinal As Integer\n    Button1.Text = \"Thinking\"\n    Button1.Refresh()\n    Sentinal = Val(SentinalTxt.Text)\n    UnPrime = True\n    Primes(0) = 2\n    Primes(1) = 3\n    Z = 1\n    TM = TimeOfDay.Minute\n    TS = TimeOfDay.Second\n    TMS = TimeOfDay.Millisecond\n    For TestNum = 5 To Sentinal Step 2\n        Do While Primes(X) &lt;&gt; 0 And UnPrime And Primes(X) ^ 2 &lt;= TestNum\n            If Int(TestNum / Primes(X)) - (TestNum / Primes(X)) = 0 Then\n                UnPrime = False\n            End If\n            X = X + 1\n\n        Loop\n        If UnPrime = True Then\n            X = X + 1\n            Z = Z + 1\n            Primes(Z) = TestNum\n        End If\n        UnPrime = True\n        X = 0\n    Next\n    Button1.Text = \"Finished with \" &amp; Z\n    TM = TimeOfDay.Minute - TM\n    TS = TimeOfDay.Second - TS\n    TMS = TimeOfDay.Millisecond - TMS\n    ShowTime.Text = TM &amp; \":\" &amp; TS &amp; \":\" &amp; TMS\nEnd Sub\n</code></pre>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "58829625",
        "title": "",
        "text": "<p>This is an old question, but there's something here everyone's missing...</p>\n\n<p>For primes this small, trial division isn't <em>that</em> slow... there are only 25 primes under 100. With so few primes to test, and such small primes, we can pull out a neat trick!</p>\n\n<p>If a is coprime to b, then gcd a b = 1. Coprime. Fun word. Means it doesn't share <em>any prime factors</em>. We can thus test for divisibility by several primes with one GCD call. How many? Well, the product of the first 15 primes is less than 2^64. And the product of the next 10 is also less than 2^64. That's all 25 that we need. But is it worth it?</p>\n\n<p>Let's see:</p>\n\n<pre><code>check x = null $ filter ((==0) . (x `mod`)) $ [&lt;primes up to 101&gt;]\nPrelude&gt; length $ filter check [101,103..85600]\n&gt;&gt;&gt; 9975\n(0.30 secs, 125,865,152 bytes\n\na = 16294579238595022365 :: Word64\nb = 14290787196698157718\npre = [2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97]\nprimes = (pre ++) $ filter ((==1) . gcd a) $ filter ((==1) . gcd b) [99,101..85600]\nmain = print $ length primes\n\nPrelude&gt; main\n&gt;&gt;&gt; 10000\n(0.05 secs, 36,387,520 bytes)\n</code></pre>\n\n<p>A 6 fold improvement there.</p>\n\n<p>(<code>length</code> is to force the list to be computed. By default Haskell prints things 1 Unicode character at a time and so actually <em>printing</em> the list will either dominate the time or dominate the amount of actual code used.)</p>\n\n<p>Of course, this is running in GHCi - a repl running interpreted code - on an old laptop and it is not interpreting any of these numbers as <code>int64</code>s or even <code>BigInt</code>s, nor will it even if you ask it to (well, you <em>can</em> force it, but it's ugly and doesn't really help). It is interpreting every single number there as generalized <em>Integer-like</em> things that can be specialized to some particular type via dictionary lookup, and it is traversing a linked list (which is not fused away here as it's not compiled) 3 times. Interestingly, hand fusing the two filters actually slows it down in the REPL. </p>\n\n<p>Let's compile it:</p>\n\n<pre><code>...\\Haskell\\8.6\\Testbed&gt;Primes.exe +RTS -s\n10000\n606,280 bytes allocated in the heap\nTotal   time    0.000s  (  0.004s elapsed)\n</code></pre>\n\n<p>Using the RTS report because Windows. Some lines trimmed because they aren't relevant - they were other GC data, or measurements of only part of the execution, and together add up to 0.004s (or less). It's also not constant folding, because Haskell doesn't actually do much of that. If we constant fold ourselves (<code>main = print 10000</code>), we get dramatically lower allocation:</p>\n\n<pre><code>...Haskell\\8.6\\Testbed&gt;Primes.exe +RTS -s\n10000\n47,688 bytes allocated in the heap\nTotal   time    0.000s  (  0.001s elapsed)\n</code></pre>\n\n<p>Literally just enough to load the runtime, then discover there's nothing to do but print a number and exit. Let's add wheel factorization:</p>\n\n<pre><code>wheel = scanl (+) 7 $ cycle [4, 2, 4, 2, 4, 6, 2, 6]\nprimes = (pre ++) $ filter ((==1) . gcd a) $ filter ((==1) . gcd b) $ takeWhile (&lt;85600) wheel\n\nTotal   time    0.000s  (  0.003s elapsed)\n</code></pre>\n\n<p>Cut down approximately 1/3rd relative to our reference of <code>main = print 10000</code>, but there's definitely room for more optimization. It actually stopped to perform a GC in there for example, while with tweaking there shouldn't be any heap use. For some reason, compiling for profiling here actually cuts the runtime down to 2 milliseconds:</p>\n\n<pre><code>Tue Nov 12 21:13 2019 Time and Allocation Profiling Report  (Final)\n\n   Primes.exe +RTS -p -RTS\n\ntotal time  =        0.00 secs   (2 ticks @ 1000 us, 1 processor)\ntotal alloc =     967,120 bytes  (excludes profiling overheads)\n</code></pre>\n\n<p>I'm going to leave this as is for now, I'm pretty sure random jitter is starting to dominate.</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1390584",
        "title": "",
        "text": "<p>Here is a Sieve of Eratosthenes that I wrote in PowerShell a few days ago.  It has a parameter for identifying the number of prime numbers that should be returned.</p>\n\n<pre><code>#\n# generate a list of primes up to a specific target using a sieve of eratosthenes\n#\nfunction getPrimes { #sieve of eratosthenes, http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes\n    param ($target,$count = 0)\n    $sieveBound = [math]::ceiling(( $target - 1 ) / 2) #not storing evens so count is lower than $target\n    $sieve = @($false) * $sieveBound\n    $crossLimit = [math]::ceiling(( [math]::sqrt($target) - 1 ) / 2)\n    for ($i = 1; $i -le $crossLimit; $i ++) {\n        if ($sieve[$i] -eq $false) {\n            $prime = 2 * $i + 1\n            write-debug \"Found: $prime\"\n            for ($x = 2 * $i * ( $i + 1 ); $x -lt $sieveBound; $x += 2 * $i + 1) {\n                $sieve[$x] = $true\n            }\n        }\n    }\n    $primes = @(2)\n    for ($i = 1; $i -le $sieveBound; $i ++) {\n        if($count -gt 0 -and $primes.length -ge $count) {\n            break;\n        }\n        if($sieve[$i] -eq $false) {\n            $prime = 2 * $i + 1\n            write-debug \"Output: $prime\"\n            $primes += $prime\n        }\n    }\n    return $primes\n}\n</code></pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "50778831",
        "title": "",
        "text": "<p>Using the Array.prototype.find() method in Javascript. 2214.486 ms</p>\n\n<pre><code>function isPrime (number) {\n\n  function prime(element) {\n    let start = 2;\n    while (start &lt;= Math.sqrt(element)) {\n      if (element % start++ &lt; 1) {\n        return false;\n      }\n    }\n    return element &gt; 1;\n  }\n\n  return [number].find(prime)\n\n}\n\nfunction logPrimes (n) {\n\n  let count = 0\n  let nth = n\n\n  let i = 0\n  while (count &lt; nth) {\n    if (isPrime(i)) {\n      count++\n      console.log('i', i) //NOTE: If this line is ommited time to find 10,000th prime is 121.157ms\n      if (count === nth) {\n        console.log('while i', i)\n        console.log('count', count)\n      }\n    }\n    i++\n  }\n\n}\n\nconsole.time(logPrimes)\n\nlogPrimes(10000)\n\nconsole.timeEnd(logPrimes) // 2214.486ms\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "53332013",
        "title": "",
        "text": "<p>Since you want first 10000 primes only, rather than coding complex algorithm I'll suggest \nthe following</p>\n\n<pre><code>boolean isPrime(int n){\n//even but is prime\n    if(n==2)\n        return true;\n//even numbers filtered already \n    if(n==0 || n==1 || n%2==0)\n        return false;\n\n// loop for checking only odd factors\n// i*i &lt;= n  (same as i&lt;=sqrt(n), avoiding floating point calculations)\n    for(int i=3 ; i*i &lt;=n ; i+=2){\n    // if any odd factor divides n then its not a prime!\n        if(n%i==0)\n            return false;\n    }\n// its prime now\n    return true;\n}\n</code></pre>\n\n<p>now call is prime as you need it <br></p>\n\n<pre><code>for(int i=1 ; i&lt;=1000 ; i++){\n    if(isPrime(i)){\n       //do something\n    }\n}\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "19088",
        "title": "",
        "text": "<p><a href=\"http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes\" rel=\"nofollow noreferrer\">Sieve of Eratosthenes</a> is the way to go, because of it's simplicity and speed. My implementation in C</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;math.h&gt;\n\nint main(void)\n{\n    unsigned int lim, i, j;\n\n    printf(\"Find primes upto: \");\n    scanf(\"%d\", &amp;lim);\n    lim += 1;\n    bool *primes = calloc(lim, sizeof(bool));\n\n    unsigned int sqrtlim = sqrt(lim);\n    for (i = 2; i &lt;= sqrtlim; i++)\n        if (!primes[i])\n            for (j = i * i; j &lt; lim; j += i)\n                primes[j] = true;\n\n    printf(\"\\nListing prime numbers between 2 and %d:\\n\\n\", lim - 1);\n    for (i = 2; i &lt; lim; i++)\n        if (!primes[i])\n            printf(\"%d\\n\", i);\n\n    return 0;\n}\n</code></pre>\n\n<p>CPU Time to find primes (on Pentium Dual Core E2140 1.6 GHz, using single core)</p>\n\n<blockquote>\n  <p>~ 4s for lim = 100,000,000</p>\n</blockquote>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "48358041",
        "title": "",
        "text": "<p>Here the code that I made :</p>\n\n<hr>\n\n<pre><code>enter code here\n#include &lt;cmath&gt;\n#include &lt;cstdio&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\n\n\nint main() {\n/* Enter your code here. Read input from STDIN. Print output to STDOUT*/   \n\nunsigned long int n;\n\nint prime(unsigned long int);\n\nscanf(\"%ld\",&amp;n);\n\nunsigned long int val;\n\nfor(unsigned long int i=0;i&lt;n;i++)\n{\n    int flag=0;\n\n    scanf(\"%ld\",&amp;val);\n\n    flag=prime(val);\n\n    if(flag==1)\n        printf(\"yes\\n\");\n\n    else\n        printf(\"no\\n\");\n}\n\nreturn 0;\n\n}\n\nint prime(unsigned long int n)\n{\n\nif(n==2) return 1;\n\nelse if (n == 1||n%2==0)  return 0;\n\nfor (unsigned long int i=3; i&lt;=sqrt(n); i+=2)\n    if (n%i == 0)\n        return 0;\n\nreturn 1;\n}\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "51583803",
        "title": "",
        "text": "<p>I can give you some tips, you have to implement it.</p>\n\n<ol>\n<li>For each number, get the half of that number. E.g. for checking 21, only obtain the remainder by dividing it from range 2-10.</li>\n<li>If its an odd number, only divide by odd number, and vice versa. Such as for 21, divide with 3, 5, 7, 9 only.</li>\n</ol>\n\n<p>Most efficient method I got up to so far.</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "22122651",
        "title": "",
        "text": "<p>The following Mathcad code calculated the first million primes in under 3 minutes.</p>\n\n<p>Bear in mind that this would be using floating point doubles for all of the numbers and is basically interpreted. I hope the syntax is clear.</p>\n\n<p><img src=\"https://i.stack.imgur.com/51jJq.jpg\" alt=\"enter image description here\"></p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "175956",
        "title": "",
        "text": "<p>@Matt: log(log(10000)) is ~2</p>\n\n<p>From the wikipedia article (which you cited) <a href=\"http://en.wikipedia.org/wiki/Sieve_of_Atkin\" rel=\"noreferrer\">Sieve of Atkin</a>:</p>\n\n<blockquote>\n  <p>This sieve computes primes up to N\n  using <code>O(N/log log N)</code> operations with\n  only N<sup>1/2+o(1)</sup> bits of memory. That is\n  a little better than the sieve of\n  Eratosthenes which uses <code>O(N)</code>\n  operations and O(N<sup>1/2</sup>(log log N)/log\n  N) bits of memory <a href=\"http://www.ams.org/mcom/2004-73-246/S0025-5718-03-01501-1/S0025-5718-03-01501-1.pdf\" rel=\"noreferrer\">(A.O.L. Atkin, D.J. Bernstein, 2004)</a>. These asymptotic\n  computational complexities include\n  simple optimizations, such as wheel\n  factorization, and splitting the\n  computation to smaller blocks.</p>\n</blockquote>\n\n<p>Given asymptotic computational complexities along <code>O(N)</code> (for Eratosthenes) and <code>O(N/log(log(N)))</code> (for Atkin) we can't say (for small <code>N=10_000</code>) which algorithm if implemented will be faster.</p>\n\n<p>Achim Flammenkamp wrote in <a href=\"http://wwwhomes.uni-bielefeld.de/achim/prime_sieve.html\" rel=\"noreferrer\">The Sieve of Eratosthenes</a>:</p>\n\n<p>cited by:</p>\n\n<p>@num1</p>\n\n<blockquote>\n  <p>For intervals larger about 10^9,\n  surely for those > 10^10, the Sieve of\n  Eratosthenes is outperformed by the\n  Sieve of Atkins and Bernstein which\n  uses irreducible binary quadratic\n  forms. See their paper for background\n  informations as well as paragraph 5 of\n  W. Galway's Ph.D. thesis.</p>\n</blockquote>\n\n<p>Therefore for <code>10_000</code> Sieve of Eratosthenes can be faster then Sieve of Atkin.</p>\n\n<p>To answer OP the code is <a href=\"http://wwwhomes.uni-bielefeld.de/achim/prime_sieve.c\" rel=\"noreferrer\">prime_sieve.c</a> (cited by <code>num1</code>) </p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "36668089",
        "title": "",
        "text": "<p>Here is a C++ solution, using a form of SoE:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;deque&gt;\n\ntypedef std::deque&lt;int&gt; mydeque;\n\nvoid my_insert( mydeque &amp; factors, int factor ) {\n    int where = factor, count = factors.size();\n    while( where &lt; count &amp;&amp; factors[where] ) where += factor;\n    if( where &gt;= count ) factors.resize( where + 1 );\n    factors[ where ] = factor;\n}\n\nint main() {\n    mydeque primes;\n    mydeque factors;\n    int a_prime = 3, a_square_prime = 9, maybe_prime = 3;\n    int cnt = 2;\n    factors.resize(3);\n    std::cout &lt;&lt; \"2 3 \";\n\n    while( cnt &lt; 10000 ) {\n        int factor = factors.front();\n        maybe_prime += 2;\n        if( factor ) {\n            my_insert( factors, factor );\n        } else if( maybe_prime &lt; a_square_prime ) {\n            std::cout &lt;&lt; maybe_prime &lt;&lt; \" \";\n            primes.push_back( maybe_prime );\n            ++cnt;\n        } else {\n            my_insert( factors, a_prime );\n            a_prime = primes.front();\n            primes.pop_front();\n            a_square_prime = a_prime * a_prime;\n        }\n        factors.pop_front();\n    }\n\n    std::cout &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Note that this version of the Sieve can compute primes indefinitely.</p>\n\n<p>Also note, the STL <code>deque</code> takes <code>O(1)</code> time to perform <code>push_back</code>, <code>pop_front</code>, and random access though subscripting.</p>\n\n<p>The <code>resize</code> operation takes <code>O(n)</code> time, where <code>n</code> is the number of elements being added.  Due to how we are using this function, we can treat this is a small constant.</p>\n\n<p>The body of the <code>while</code> loop in <code>my_insert</code> is executed <code>O(log log n)</code> times, where <code>n</code> equals the variable <code>maybe_prime</code>.  This is because the condition expression of the <code>while</code> will evaluate to true once for each prime factor of <code>maybe_prime</code>.  See \"<a href=\"https://en.wikipedia.org/wiki/Divisor_function\" rel=\"nofollow\" title=\"Divisor function\">Divisor function</a>\" on Wikipedia.</p>\n\n<p>Multiplying by the number of times <code>my_insert</code> is called, shows that it should take <code>O(n log log n)</code> time to list <code>n</code> primes... which is, unsurprisingly, the time complexity which the Sieve of Eratosthenes is supposed to have.</p>\n\n<p>However, while this code <strong>is</strong> efficient, it's not the <strong>most efficient</strong>... I would strongly suggest using a specialized library for primes generation, such as <a href=\"http://primesieve.org/\" rel=\"nofollow\" title=\"primesieve\">primesieve</a>.  Any truly efficient, well optimized solution, will take more code than anyone wants to type into Stackoverflow.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2753",
        "title": "",
        "text": "<p>I have adapted code found on the <a href=\"http://www.codeproject.com/KB/recipes/highspeed_primenumbers.aspx\" rel=\"nofollow noreferrer\">CodeProject</a> to create the following:</p>\n\n<pre><code>ArrayList primeNumbers = new ArrayList();\n\nfor(int i = 2; primeNumbers.Count &lt; 10000; i++) {\n    bool divisible = false;\n\n    foreach(int number in primeNumbers) {\n        if(i % number == 0) {\n            divisible = true;\n        }\n    }\n\n    if(divisible == false) {\n        primeNumbers.Add(i);\n        Console.Write(i + \" \");\n    }\n}\n</code></pre>\n\n<p>Testing this on my ASP.NET Server took the rountine about 1 minute to run.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "36725003",
        "title": "",
        "text": "<p>The <a href=\"https://stackoverflow.com/a/36668089/4156577\">deque sieve algorithm mentioned by BenGoldberg</a> deserves a closer look, not only because it is very elegant but also because it can occasionally be useful in practice (unlike the Sieve of Atkin, which is a purely academical exercise).</p>\n\n<p>The basic idea behind the deque sieve algorithm is to use a small, sliding sieve that is only large enough to contain at least one separate multiple for each of the currently 'active' prime factors - i.e. those primes whose square does not exceed the lowest number currently represented by the moving sieve. Another difference to the SoE is that the deque sieve stores the actual factors into the slots of composites, not booleans.</p>\n\n<p>The algorithm extends the size of the sieve window as needed, resulting in fairly even performance over a wide range until the sieve starts exceeding the capacity of the CPU's L1 cache appreciably. The last prime that fits fully is 25,237,523 (the 1,579,791st prime), which gives a rough ballpark figure for the reasonable operating range of the algorithm.</p>\n\n<p>The algorithm is fairly simple and robust, and it has even performance over a much wider range than an unsegmented Sieve of Eratosthenes. The latter is a lot faster as long its sieve fits fully into the cache, i.e. up to 2^16 for an odds-only sieve with byte-sized bools. Then its performance drops more and more, although it always remains significantly faster than the deque despite the handicap (at least in compiled languages like C/C++, Pascal or Java/C#).</p>\n\n<p>Here is a rendering of the deque sieve algorithm in C#, because I find that language - despite its many flaws - much more practical for prototyping algorithms and experimentation than the supremely cumbersome and pedantic C++. <em>(Sidenote: I'm using the free <a href=\"https://www.linqpad.net/\" rel=\"nofollow noreferrer\">LINQPad</a> which makes it possible to dive right in, without all the messiness with setting up projects, makefiles, directories or whatnot, and it gives me the same degree of interactivity as a python prompt).</em></p>\n\n<p>C# doesn't have an explicit deque type but the plain <code>List&lt;int&gt;</code> works well enough for demonstrating the algorithm. </p>\n\n<p>Note: this version does not use a deque for the primes, because it simply doesn't make sense to pop off sqrt(n) out of n primes. What good would it be to remove 100 primes and to leave 9900? At least this way all the primes are collected in a neat vector, ready for further processing.</p>\n\n\n\n<pre class=\"lang-cs prettyprint-override\"><code>static List&lt;int&gt; deque_sieve (int n = 10000)\n{\n    Trace.Assert(n &gt;= 3);\n\n    var primes = new List&lt;int&gt;()  {  2, 3  };\n    var sieve = new List&lt;int&gt;()  {  0, 0, 0  };\n\n    for (int sieve_base = 5, current_prime_index = 1, current_prime_squared = 9; ; )\n    {\n        int base_factor = sieve[0];\n\n        if (base_factor != 0)\n        {\n            // the sieve base has a non-trivial factor - put that factor back into circulation\n            mark_next_unmarked_multiple(sieve, base_factor);\n        }\n        else if (sieve_base &lt; current_prime_squared)  // no non-trivial factor -&gt; found a non-composite\n        {\n            primes.Add(sieve_base);\n\n            if (primes.Count == n)\n                return primes;\n        }\n        else // sieve_base == current_prime_squared\n        {\n            // bring the current prime into circulation by injecting it into the sieve ...\n            mark_next_unmarked_multiple(sieve, primes[current_prime_index]);\n\n            // ... and elect a new current prime\n            current_prime_squared = square(primes[++current_prime_index]);\n        }\n\n        // slide the sieve one step forward\n        sieve.RemoveAt(0);  sieve_base += 2;\n    }\n}\n</code></pre>\n\n<p>Here are the two helper functions:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>static void mark_next_unmarked_multiple (List&lt;int&gt; sieve, int prime)\n{\n    int i = prime, e = sieve.Count;\n\n    while (i &lt; e &amp;&amp; sieve[i] != 0)\n        i += prime;\n\n    for ( ; e &lt;= i; ++e)  // no List&lt;&gt;.Resize()...\n        sieve.Add(0);\n\n    sieve[i] = prime;\n}\n\nstatic int square (int n)\n{\n    return n * n;\n}\n</code></pre>\n\n<p>Probably the easiest way of understanding the algorithm is to imagine it as a special segmented Sieve of Eratosthenes with a segment size of 1, accompanied by an overflow area where the primes come to rest when they shoot over the end of the segment. Except that the single cell of the segment (a.k.a. <code>sieve[0]</code>) has already been sieved when we get to it, because it got run over while it was part of the overflow area.</p>\n\n<p>The number that is represented by <code>sieve[0]</code> is held in <code>sieve_base</code>, although <code>sieve_front</code> or <code>window_base</code> would also be a good names that allow to draw parallels to Ben's code or implementations of segmented/windowed sieves.</p>\n\n<p>If <code>sieve[0]</code> contains a non-zero value then that value is a factor of <code>sieve_base</code>, which can thus be recognised as composite. Since cell 0 is a multiple of that factor it is easy to compute its next hop, which is simply 0 plus that factor. Should that cell be occupied already by another factor then we simply add the factor again, and so on until we find a multiple of the factor where no other factor is currently parked (extending the sieve if needed). This also means that there is no need for storing the current working offsets of the various primes from one segment to the next, as in a normal segmented sieve. Whenever we find a factor in <code>sieve[0]</code>, its current working offset is 0.</p>\n\n<p>The current prime comes into play in the following way. A prime can only become current after its own occurrence in the stream (i.e. when it has been detected as a prime, because not marked with a factor), and it will remain current until the exact moment that <code>sieve[0]</code> reaches its square. All lower multiples of this prime must have been struck off due to the activities of smaller primes, just like in a normal SoE. But none of the smaller primes can strike off the square, since the only factor of the square is the prime itself and it is not yet in circulation at this point. That explains the actions taken by the algorithm in the case <code>sieve_base == current_prime_squared</code> (which implies <code>sieve[0] == 0</code>, by the way).</p>\n\n<p>Now the case <code>sieve[0] == 0 &amp;&amp; sieve_base &lt; current_prime_squared</code> is easily explained: it means that <code>sieve_base</code> cannot be a multiple of any of the primes smaller than the current prime, or else it would have been marked as composite. I cannot be a higher multiple of the current prime either, since its value is less than the current prime's square. Hence it must be a new prime.</p>\n\n<p>The algorithm is obviously inspired by the Sieve of Eratosthenes, but equally obviously it is very different. The Sieve of Eratosthenes derives its superior speed from the simplicity of its elementary operations: one single index addition and one store for each step of the operation is all that it does for long stretches of time. </p>\n\n<p>Here is a simple, unsegmented Sieve of Eratosthenes that I normally use for sieving factor primes in the ushort range, i.e. up to 2^16. For this post I've modified it to work beyond 2^16 by substituting <code>int</code> for <code>ushort</code></p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>static List&lt;int&gt; small_odd_primes_up_to (int n)\n{\n    var result = new List&lt;int&gt;();\n\n    if (n &lt; 3)\n        return result;\n\n    int sqrt_n_halved = (int)(Math.Sqrt(n) - 1) &gt;&gt; 1, max_bit = (n - 1) &gt;&gt; 1;\n    var odd_composite = new bool[max_bit + 1];\n\n    for (int i = 3 &gt;&gt; 1; i &lt;= sqrt_n_halved; ++i)\n        if (!odd_composite[i])\n            for (int p = (i &lt;&lt; 1) + 1, j = p * p &gt;&gt; 1; j &lt;= max_bit; j += p)\n                odd_composite[j] = true;\n\n    result.Add(3);  // needs to be handled separately because of the mod 3 wheel\n\n    // read out the sieved primes\n    for (int i = 5 &gt;&gt; 1, d = 1; i &lt;= max_bit; i += d, d ^= 3)\n        if (!odd_composite[i])\n            result.Add((i &lt;&lt; 1) + 1);\n\n    return result;\n}\n</code></pre>\n\n<p>When sieving the first 10000 primes a typical L1 cache of 32 KiByte will be exceeded but the function is still very fast (fraction of a millisecond even in C#). </p>\n\n<p>If you compare this code to the deque sieve then it is easy to see that the operations of the deque sieve are a lot more complicated, and it cannot effectively amortise its overhead because it always does the shortest possible stretch of crossings-off in a row (exactly one single crossing-off, after skipping all multiples that have been crossed off already).</p>\n\n<p>Note: the C# code uses <code>int</code> instead of <code>uint</code> because newer compilers have a habit of generating substandard code for <code>uint</code>, probably in order to push people towards signed integers... In the C++ version of the code above I used <code>unsigned</code> throughout, naturally; the benchmark had to be in C++ because I wanted it be based on a supposedly adequate deque type (<code>std::deque&lt;unsigned&gt;</code>; there was no performance gain from using <code>unsigned short</code>). Here are the numbers for my Haswell laptop (VC++ 2015/x64):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>deque vs simple: 1.802 ms vs 0.182 ms\ndeque vs simple: 1.836 ms vs 0.170 ms \ndeque vs simple: 1.729 ms vs 0.173 ms\n</code></pre>\n\n<p>Note: the C# times are pretty much exactly double the C++ timings, which is pretty good for C# and \u00ect shows that <code>List&lt;int&gt;</code> is no slouch even if abused as a deque.</p>\n\n<p>The simple sieve code still blows the deque out of the water, even though it is already operating beyond its normal working range (L1 cache size exceeded by 50%, with attendant cache thrashing). The dominating part here is the reading out of the sieved primes, and this is not affected much by the cache problem. In any case the function was designed for sieving the factors of factors, i.e. level 0 in a 3-level sieve hierarchy, and typically it has to return only a few hundred factors or a low number of thousands. Hence its simplicity.</p>\n\n<p>Performance could be improved by more than an order of magnitude by using a segmented sieve and optimising the code for extracting the sieved primes (stepped mod 3 and unrolled twice, or mod 15 and unrolled once) , and yet more performance could be squeezed out of the code by using a mod 16 or mod 30 wheel with all the trimmings (i.e. full unrolling for all residues). Something like that is explained in my answer to <a href=\"https://codereview.stackexchange.com/a/125057/56653\">Find prime positioned prime number</a> over on Code Review, where a similar problem was discussed. But it's hard to see the point in improving sub-millisecond times for a one-off task...</p>\n\n<p>To put things a bit into perspective, here are the C++ timings for sieving up to 100,000,000:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>deque vs simple: 1895.521 ms vs 432.763 ms\ndeque vs simple: 1847.594 ms vs 429.766 ms\ndeque vs simple: 1859.462 ms vs 430.625 ms\n</code></pre>\n\n<p>By contrast, a segmented sieve in C# with a few bells and whistles does the same job in 95 ms (no C++ timings available, since I do code challenges only in C# at the moment).</p>\n\n<p>Things may look decidedly different in an interpreted language like Python where every operation has a heavy cost and the interpreter overhead dwarfs all differences due to predicted vs. mispredicted branches or sub-cycle ops (shift, addition) vs. multi-cycle ops (multiplication, and perhaps even division). That is bound to erode the simplicity advantage of the Sieve of Eratosthenes, and this could make the deque solution a bit more attractive.</p>\n\n<p>Also, many of the timings reported by other respondents in this topic are probably dominated by <strong>output time</strong>. That's an entirely different war, where my main weapon is a simple class like this:</p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>class CCWriter\n{\n    const int SPACE_RESERVE = 11;  // UInt31 + '\\n'\n\n    public static System.IO.Stream BaseStream;\n    static byte[] m_buffer = new byte[1 &lt;&lt; 16];  // need 55k..60k for a maximum-size range\n    static int m_write_pos = 0;\n    public static long BytesWritten = 0;         // for statistics\n\n    internal static ushort[] m_double_digit_lookup = create_double_digit_lookup();\n\n    internal static ushort[] create_double_digit_lookup ()\n    {\n        var lookup = new ushort[100];\n\n        for (int lo = 0; lo &lt; 10; ++lo)\n            for (int hi = 0; hi &lt; 10; ++hi)\n                lookup[hi * 10 + lo] = (ushort)(0x3030 + (hi &lt;&lt; 8) + lo);\n\n        return lookup;\n    }\n\n    public static void Flush ()\n    {\n        if (BaseStream != null &amp;&amp; m_write_pos &gt; 0)\n            BaseStream.Write(m_buffer, 0, m_write_pos);\n\n        BytesWritten += m_write_pos;\n        m_write_pos = 0;\n    }\n\n    public static void WriteLine ()\n    {\n        if (m_buffer.Length - m_write_pos &lt; 1)\n            Flush();\n\n        m_buffer[m_write_pos++] = (byte)'\\n';\n    }\n\n    public static void WriteLinesSorted (int[] values, int count)\n    {\n        int digits = 1, max_value = 9;\n\n        for (int i = 0; i &lt; count; ++i)\n        {\n            int x = values[i];\n\n            if (m_buffer.Length - m_write_pos &lt; SPACE_RESERVE)\n                Flush();\n\n            while (x &gt; max_value)\n                if (++digits &lt; 10)\n                    max_value = max_value * 10 + 9;\n                else\n                    max_value = int.MaxValue;               \n\n            int n = x, p = m_write_pos + digits, e = p + 1;\n\n            m_buffer[p] = (byte)'\\n';\n\n            while (n &gt;= 10)\n            {\n                int q = n / 100, w = m_double_digit_lookup[n - q * 100];\n                n = q;\n                m_buffer[--p] = (byte)w;\n                m_buffer[--p] = (byte)(w &gt;&gt; 8);\n            }\n\n            if (n != 0 || x == 0)\n                m_buffer[--p] = (byte)((byte)'0' + n);\n\n            m_write_pos = e;\n        }\n    }\n}\n</code></pre>\n\n<p>That takes less than 1 ms for writing 10000 (sorted) numbers. It's a static class because it is intended for textual inclusion in coding challenge submissions, with a minimum of fuss and zero overhead.</p>\n\n<p>In general I found it to be <em>much</em> faster if focussed work is done on entire batches, meaning sieve a certain range, then extract all primes into a vector/array, then blast out the whole array, then sieve the next range and so on, instead of mingling everything together. Having separate functions focussed on specific tasks also makes it easier to mix and match, it enables reuse, and it eases development/testing. </p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "34090",
        "title": "",
        "text": "<p>Using GMP, one could write the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;gmp.h&gt;\n\nint main() {\n  mpz_t prime;\n  mpz_init(prime);\n  mpz_set_ui(prime, 1);\n  int i;\n  char* num = malloc(4000);\n  for(i=0; i&lt;10000; i++) {\n    mpz_nextprime(prime, prime);\n    printf(\"%s, \", mpz_get_str(NULL,10,prime));\n  }\n}\n</code></pre>\n\n<p>On my 2.33GHz Macbook Pro, it executes as follows:</p>\n\n<pre><code>time ./a.out &gt; /dev/null\n\nreal    0m0.033s\nuser    0m0.029s\nsys    0m0.003s\n</code></pre>\n\n<p>Calculating 1,000,000 primes on the same laptop:</p>\n\n<pre><code>time ./a.out &gt; /dev/null\n\nreal    0m14.824s\nuser    0m14.606s\nsys     0m0.086s\n</code></pre>\n\n<p>GMP is highly optimized for this sort of thing.  Unless you really want to understand the algorithms by writing your own, you'd be advised to use libGMP under C.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "31176",
        "title": "",
        "text": "<p><a href=\"https://stackoverflow.com/questions/622/most-efficient-code-for-the-first-10000-prime-numbers#2753\">GateKiller</a>, how about adding a <code>break</code> to that <code>if</code> in the <code>foreach</code> loop? That would speed up things <strong>a lot</strong> because if like 6 is divisible by 2 you don't need to check with 3 and 5. (I'd vote your solution up anyway if I had enough reputation :-) ...)</p>\n\n<pre><code>ArrayList primeNumbers = new ArrayList();\n\nfor(int i = 2; primeNumbers.Count &lt; 10000; i++) {\n    bool divisible = false;\n\n    foreach(int number in primeNumbers) {\n        if(i % number == 0) {\n            divisible = true;\n            break;\n        }\n    }\n\n    if(divisible == false) {\n        primeNumbers.Add(i);\n        Console.Write(i + \" \");\n    }\n}\n</code></pre>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2309490",
        "title": "",
        "text": "<p>In Python</p>\n\n<pre><code>import gmpy\np=1\nfor i in range(10000):\n    p=gmpy.next_prime(p)\n    print p \n</code></pre>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "626",
    "url": "https://stackoverflow.com/questions/626",
    "title": "When to use lambda, when to use Proc.new?",
    "text:": "<p>In Ruby 1.8, there are subtle differences between proc/lambda on the one hand, and <code>Proc.new</code> on the other. </p>\n\n<ul>\n<li>What are those differences?</li>\n<li>Can you give guidelines on how to decide which one to choose?</li>\n<li>In Ruby 1.9, proc and lambda are different. What's the deal?</li>\n</ul>\n",
    "codes": [
      [],
      [],
      [],
      [
        "concat = ->(a, b=2){ \"#{a}#{b}\" }\nconcat.call(4,5) # => \"45\"\nconcat.call(1)   # => \"12\"\n"
      ],
      [],
      [],
      [
        "def m1\n  yield 'Finally!' if block_given?\nend\n\ndef m2\n  m1 &Proc.new\nend\n\nm2 { |e| puts e } \n#\u21d2 Finally!\n"
      ],
      [
        "def whowouldwin\n\n  mylambda = lambda {return \"Freddy\"}\n  mylambda.call\n\n  # mylambda gets called and returns \"Freddy\", and execution\n  # continues on the next line\n\n  return \"Jason\"\n\nend\n\n\nwhowouldwin\n#=> \"Jason\"\n",
        "def whowouldwin2\n\n  myproc = Proc.new {return \"Freddy\"}\n  myproc.call\n\n  # myproc gets called and returns \"Freddy\", \n  # but also returns control from whowhouldwin2!\n  # The line below *never* gets executed.\n\n  return \"Jason\"\n\nend\n\n\nwhowouldwin2         \n#=> \"Freddy\"\n"
      ],
      [],
      [
        "stabby = ->(msg='inside the stabby lambda') { puts msg }\n",
        "# under 1.8\nl = lambda { |msg = 'inside the stabby lambda'|  puts msg }\nSyntaxError: compile error\n(irb):1: syntax error, unexpected '=', expecting tCOLON2 or '[' or '.'\nl = lambda { |msg = 'inside the stabby lambda'|  puts msg }\n",
        "l = lambda { |msg = 'inside the regular lambda'|  puts msg }\n#=> #<Proc:0x0e5dbc@(irb):1 (lambda)>\nl.call\n#=> inside the regular lambda\nl.call('jeez')\n#=> jeez\n"
      ],
      [
        "def some_method\n  myproc = Proc.new {return \"End.\"}\n  myproc.call\n\n  # Any code below will not get executed!\n  # ...\nend\n",
        "irb(main):021:0> l = -> (x) { x.to_s }\n=> #<Proc:0x8b63750@(irb):21 (lambda)>\nirb(main):022:0> p = Proc.new { |x| x.to_s}\n=> #<Proc:0x8b59494@(irb):22>\nirb(main):025:0> l.call\nArgumentError: wrong number of arguments (0 for 1)\n        from (irb):21:in `block in irb_binding'\n        from (irb):25:in `call'\n        from (irb):25\n        from /usr/bin/irb:11:in `<main>'\nirb(main):026:0> p.call\n=> \"\"\nirb(main):049:0> l.call 1, 2\nArgumentError: wrong number of arguments (2 for 1)\n        from (irb):47:in `block in irb_binding'\n        from (irb):49:in `call'\n        from (irb):49\n        from /usr/bin/irb:11:in `<main>'\nirb(main):050:0> p.call 1, 2\n=> \"1\"\n"
      ],
      [
        "def meth1\n  puts \"method start\"\n\n  pr = lambda { return }\n  pr.call\n\n  puts \"method end\"  \nend\n\ndef meth2\n  puts \"method start\"\n\n  pr = Proc.new { return }\n  pr.call\n\n  puts \"method end\"  \nend\n\ndef meth3\n  puts \"method start\"\n\n  pr = proc { return }\n  pr.call\n\n  puts \"method end\"  \nend\n\nputs \"Using lambda\"\nmeth1\nputs \"--------\"\nputs \"using Proc.new\"\nmeth2\nputs \"--------\"\nputs \"using proc\"\nmeth3\n"
      ],
      [
        "def foo\n  proc = Proc.new{return}\n  foobar(proc)\n  puts 'foo'\nend\n\ndef foobar(proc)\n  proc.call\n  puts 'foobar'\nend\n\nfoo\n"
      ],
      []
    ],
    "votes:": "339",
    "tags": "<ruby><lambda><proc>",
    "AcceptedAnswerId": "723",
    "answers": [
      {
        "id": "7484",
        "title": "",
        "text": "<p>The difference in behaviour with <code>return</code> is IMHO the most important difference between the 2. I also prefer lambda because it's less typing than Proc.new :-)</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "48054",
        "title": "",
        "text": "<p>To elaborate on Accordion Guy's response:</p>\n\n<p>Notice that <code>Proc.new</code> creates a proc out by being passed a block.  I believe that <code>lambda {...}</code> is parsed as a sort of literal, rather than a method call which passes a block.  <code>return</code>ing from inside a block attached to a method call will return from the method, not the block, and the <code>Proc.new</code> case is an example of this at play.</p>\n\n<p>(This is 1.8.  I don't know how this translates to 1.9.)</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "352857",
        "title": "",
        "text": "<p>A good way to see it is that lambdas are executed in their own scope (as if it was a method call), while Procs may be viewed as executed inline with the calling method, at least that's a good way of deciding wich one to use in each case.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1515670",
        "title": "",
        "text": "<p>To provide further clarification:</p>\n\n<p>Joey says that the return behavior of <code>Proc.new</code> is surprising. However when you consider that Proc.new behaves like a block this is not surprising as that is exactly how blocks behave. lambas on the other hand behave more like methods.</p>\n\n<p>This actually explains why Procs are flexible when it comes to arity (number of arguments) whereas lambdas are not. Blocks don't require all their arguments to be provided but methods do (unless a default is provided). While providing lambda argument default is not an option in Ruby 1.8, it is now supported in Ruby 1.9 with the alternative lambda syntax (as noted by webmat):</p>\n\n<pre><code>concat = -&gt;(a, b=2){ \"#{a}#{b}\" }\nconcat.call(4,5) # =&gt; \"45\"\nconcat.call(1)   # =&gt; \"12\"\n</code></pre>\n\n<p>And Michiel de Mare (the OP) is incorrect about the Procs and lambda behaving the same with arity in Ruby 1.9. I have verified that they still maintain the behavior from 1.8 as specified above.</p>\n\n<p><code>break</code> statements don't actually make much sense in either Procs or lambdas. In Procs, the break would return you from Proc.new which has already been completed. And it doesn't make any sense to break from a lambda since it's essentially a method, and you would never break from the top level of a method.</p>\n\n<p><code>next</code>, <code>redo</code>, and <code>raise</code> behave the same in both Procs and lambdas. Whereas <code>retry</code> is not allowed in either and will raise an exception.</p>\n\n<p>And finally, the <code>proc</code> method should never be used as it is inconsistent and has unexpected behavior. In Ruby 1.8 it actually returns a lambda! In Ruby 1.9 this has been fixed and it returns a Proc. If you want to create a Proc, stick with <code>Proc.new</code>.</p>\n\n<p>For more information, I highly recommend O'Reilly's <em>The Ruby Programming Language</em> which is my source for most of this information.</p>\n",
        "votes": "96",
        "tags": "",
        "accepted": false
      },
      {
        "id": "629",
        "title": "",
        "text": "<p>I found <a href=\"http://raulparolari.com/Ruby2/lambda_Proc\" rel=\"noreferrer\">this page</a> which shows what the difference between <code>Proc.new</code> and <code>lambda</code> are.  According to the page, the only difference is that a lambda is strict about the number of arguments it accepts, whereas <code>Proc.new</code> converts missing arguments to <code>nil</code>.  Here is an example IRB session illustrating the difference:</p>\n\n<pre>irb(main):001:0> l = lambda { |x, y| x + y }\n=> #&lt;Proc:0x00007fc605ec0748@(irb):1&gt;\nirb(main):002:0> p = Proc.new { |x, y| x + y }\n=> #&lt;Proc:0x00007fc605ea8698@(irb):2&gt;\nirb(main):003:0> l.call \"hello\", \"world\"\n=> \"helloworld\"\nirb(main):004:0> p.call \"hello\", \"world\"\n=> \"helloworld\"\nirb(main):005:0> l.call \"hello\"\nArgumentError: wrong number of arguments (1 for 2)\n    from (irb):1\n    from (irb):5:in `call'\n    from (irb):5\n    from :0\nirb(main):006:0> p.call \"hello\"\nTypeError: can't convert nil into String\n    from (irb):2:in `+'\n    from (irb):2\n    from (irb):6:in `call'\n    from (irb):6\n    from :0</pre>\n\n<p>The page also recommends using lambda unless you specifically want the error tolerant behavior.  I agree with this sentiment.  Using a lambda seems a tad more concise, and with such an insignificant difference, it seems the better choice in the average situation.</p>\n\n<p>As for Ruby 1.9, sorry, I haven't looked into 1.9 yet, but I don't imagine they would change it all that much (don't take my word for it though, it seems you have heard of some changes, so I am probably wrong there).</p>\n",
        "votes": "45",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7678836",
        "title": "",
        "text": "<p>Short answer: What matters is what <code>return</code> does: lambda returns out of itself, and proc returns out of itself AND the function that called it. </p>\n\n<p>What is less clear is why you want to use each. lambda is what we expect things should do in a functional programming sense. It is basically an anonymous method with the current scope automatically bound. Of the two, lambda is the one you should probably be using.</p>\n\n<p>Proc, on the other hand, is really useful for implementing the language itself. For example you can implement \"if\" statements or \"for\" loops with them. Any return found in the proc will return out of the method that called it, not the just the \"if\" statement. This is how languages work, how \"if\" statements work, so my guess is Ruby uses this under the covers and they just exposed it because it seemed powerful.</p>\n\n<p>You would only really need this if you are creating new language constructs like loops, if-else constructs, etc.</p>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "29920634",
        "title": "",
        "text": "<p>I am a bit late on this, but there is one great but little known thing about <code>Proc.new</code> not mentioned in comments at all. As by <a href=\"http://ruby-doc.org/core-2.2.1/Proc.html#method-c-new\" rel=\"nofollow\">documentation</a>:</p>\n\n<blockquote>\n  <p><code>Proc::new</code> may be called without a block only within a method with an attached block, in which case that <strong>block is converted to the <code>Proc</code></strong> object.</p>\n</blockquote>\n\n<p>That said, <code>Proc.new</code> lets to chain yielding methods:</p>\n\n<pre><code>def m1\n  yield 'Finally!' if block_given?\nend\n\ndef m2\n  m1 &amp;Proc.new\nend\n\nm2 { |e| puts e } \n#\u21d2 Finally!\n</code></pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "723",
        "title": "",
        "text": "<p>Another important but subtle difference between procs created with <code>lambda</code> and procs created with <code>Proc.new</code> is how they handle the <code>return</code> statement:</p>\n\n<ul>\n<li>In a <code>lambda</code>-created proc, the <code>return</code> statement returns only from the proc itself</li>\n<li>In a <code>Proc.new</code>-created proc, the <code>return</code> statement is a little more surprising: it returns control not just from the proc, <strong>but also from the method enclosing the proc!</strong></li>\n</ul>\n\n<p>Here's <code>lambda</code>-created proc's <code>return</code> in action. It behaves in a way that you probably expect:</p>\n\n<pre><code>def whowouldwin\n\n  mylambda = lambda {return \"Freddy\"}\n  mylambda.call\n\n  # mylambda gets called and returns \"Freddy\", and execution\n  # continues on the next line\n\n  return \"Jason\"\n\nend\n\n\nwhowouldwin\n#=&gt; \"Jason\"\n</code></pre>\n\n<p>Now here's a <code>Proc.new</code>-created proc's <code>return</code> doing the same thing. You're about to see one of those cases where Ruby breaks the much-vaunted Principle of Least Surprise:</p>\n\n<pre><code>def whowouldwin2\n\n  myproc = Proc.new {return \"Freddy\"}\n  myproc.call\n\n  # myproc gets called and returns \"Freddy\", \n  # but also returns control from whowhouldwin2!\n  # The line below *never* gets executed.\n\n  return \"Jason\"\n\nend\n\n\nwhowouldwin2         \n#=&gt; \"Freddy\"\n</code></pre>\n\n<p>Thanks to this surprising behavior (as well as less typing), I tend to favor using <code>lambda</code> over <code>Proc.new</code> when making procs.</p>\n",
        "votes": "379",
        "tags": "",
        "accepted": true
      },
      {
        "id": "55491",
        "title": "",
        "text": "<p>Proc is older, but the semantics of return are highly counterintuitive to me (at least when I was learning the language) because:</p>\n\n<ol>\n<li>If you are using proc, you are most likely using some kind of functional paradigm. </li>\n<li>Proc can return out of the enclosing scope (see previous responses), which is a goto basically, and highly non-functional in nature.</li>\n</ol>\n\n<p>Lambda is functionally safer and easier to reason about - I always use it instead of proc.</p>\n",
        "votes": "17",
        "tags": "",
        "accepted": false
      },
      {
        "id": "303428",
        "title": "",
        "text": "<p>I can't say much about the subtle differences. However, I can point out that Ruby 1.9 now allows optional parameters for lambdas and blocks.</p>\n\n<p>Here's the new syntax for the stabby lambdas under 1.9:</p>\n\n<pre><code>stabby = -&gt;(msg='inside the stabby lambda') { puts msg }\n</code></pre>\n\n<p>Ruby 1.8 didn't have that syntax. Neither did the conventional way of declaring blocks/lambdas support optional args:</p>\n\n<pre><code># under 1.8\nl = lambda { |msg = 'inside the stabby lambda'|  puts msg }\nSyntaxError: compile error\n(irb):1: syntax error, unexpected '=', expecting tCOLON2 or '[' or '.'\nl = lambda { |msg = 'inside the stabby lambda'|  puts msg }\n</code></pre>\n\n<p>Ruby 1.9, however, supports optional arguments even with the old syntax:</p>\n\n<pre><code>l = lambda { |msg = 'inside the regular lambda'|  puts msg }\n#=&gt; #&lt;Proc:0x0e5dbc@(irb):1 (lambda)&gt;\nl.call\n#=&gt; inside the regular lambda\nl.call('jeez')\n#=&gt; jeez\n</code></pre>\n\n<p>If you wanna build Ruby1.9 for Leopard or Linux, check out <a href=\"http://programblings.com/2008/11/18/installing-ruby-19preview1-on-os-x-leopard/\" rel=\"noreferrer\">this article</a> (shameless self promotion).</p>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "26635646",
        "title": "",
        "text": "<p>lambda works as expected, like in other languages.</p>\n\n<p>The wired <code>Proc.new</code> is surprising and confusing.</p>\n\n<p>The <code>return</code> statement in proc created by <code>Proc.new</code> will not only return control just from itself, but <em>also from the method enclosing it</em>.</p>\n\n<pre><code>def some_method\n  myproc = Proc.new {return \"End.\"}\n  myproc.call\n\n  # Any code below will not get executed!\n  # ...\nend\n</code></pre>\n\n<p>You can argue that <code>Proc.new</code> inserts code into the enclosing method, just like block.\nBut <code>Proc.new</code> creates an object, while block are <em>part of</em> an object.</p>\n\n<p>And there is another difference between lambda and <code>Proc.new</code>, which is their handling of (wrong) arguments.\nlambda complains about it, while <code>Proc.new</code> ignores extra arguments or considers the absence of arguments as nil.</p>\n\n<pre><code>irb(main):021:0&gt; l = -&gt; (x) { x.to_s }\n=&gt; #&lt;Proc:0x8b63750@(irb):21 (lambda)&gt;\nirb(main):022:0&gt; p = Proc.new { |x| x.to_s}\n=&gt; #&lt;Proc:0x8b59494@(irb):22&gt;\nirb(main):025:0&gt; l.call\nArgumentError: wrong number of arguments (0 for 1)\n        from (irb):21:in `block in irb_binding'\n        from (irb):25:in `call'\n        from (irb):25\n        from /usr/bin/irb:11:in `&lt;main&gt;'\nirb(main):026:0&gt; p.call\n=&gt; \"\"\nirb(main):049:0&gt; l.call 1, 2\nArgumentError: wrong number of arguments (2 for 1)\n        from (irb):47:in `block in irb_binding'\n        from (irb):49:in `call'\n        from (irb):49\n        from /usr/bin/irb:11:in `&lt;main&gt;'\nirb(main):050:0&gt; p.call 1, 2\n=&gt; \"1\"\n</code></pre>\n\n<p>BTW, <code>proc</code> in Ruby 1.8 creates a lambda, while in Ruby 1.9+ behaves like <code>Proc.new</code>, which is really confusing.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1043390",
        "title": "",
        "text": "<p>I didn't notice any comments on the third method in the queston, \"proc\" which is deprecated, but handled differently in 1.8 and 1.9.</p>\n\n<p>Here's a fairly verbose example that makes it easy to see the differences between the three similar calls:</p>\n\n<pre><code>def meth1\n  puts \"method start\"\n\n  pr = lambda { return }\n  pr.call\n\n  puts \"method end\"  \nend\n\ndef meth2\n  puts \"method start\"\n\n  pr = Proc.new { return }\n  pr.call\n\n  puts \"method end\"  \nend\n\ndef meth3\n  puts \"method start\"\n\n  pr = proc { return }\n  pr.call\n\n  puts \"method end\"  \nend\n\nputs \"Using lambda\"\nmeth1\nputs \"--------\"\nputs \"using Proc.new\"\nmeth2\nputs \"--------\"\nputs \"using proc\"\nmeth3\n</code></pre>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "53316814",
        "title": "",
        "text": "<p>It's worth emphasizing that <code>return</code> in a proc returns from the lexically enclosing method, i.e. <em>the method where the proc was created</em>, <strong>not</strong> the method that called the proc. This is a consequence of the closure property of procs. So the following code outputs nothing:</p>\n\n<pre><code>def foo\n  proc = Proc.new{return}\n  foobar(proc)\n  puts 'foo'\nend\n\ndef foobar(proc)\n  proc.call\n  puts 'foobar'\nend\n\nfoo\n</code></pre>\n\n<p>Although the proc executes in <code>foobar</code>, it was created in <code>foo</code> and so the <code>return</code> exits <code>foo</code>, not just <code>foobar</code>. As Charles Caldwell wrote above, it has a GOTO feel to it. In my opinion, <code>return</code> is fine in a block that is executed in its lexical context, but is much less intuitive when used in a proc that is executed in a different context.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "32329",
        "title": "",
        "text": "<p><a href=\"https://innig.net/software/ruby/closures-in-ruby.html\" rel=\"nofollow noreferrer\">Closures in Ruby</a> is a good overview for how blocks, lambda and proc work in Ruby, with Ruby. </p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "644",
    "url": "https://stackoverflow.com/questions/644",
    "title": "Swap unique indexed column values in database",
    "text:": "<p>I have a database table and one of the fields (not the primary key) is having a unique index on it. Now I want to swap values under this column for two rows. How could this be done? Two hacks I know are:</p>\n\n<ol>\n<li>Delete both rows and re-insert them.</li>\n<li>Update rows with some other value\nand swap and then update to actual value.</li>\n</ol>\n\n<p>But I don't want to go for these as they do not seem to be the appropriate solution to the problem.\nCould anyone help me out?</p>\n",
    "codes": [
      [],
      [
        "CREATE TABLE testing\n(\n    cola int NOT NULL,\n    colb CHAR(1) NOT NULL\n);\n\nCREATE UNIQUE INDEX UIX_testing_a ON testing(colb);\n\nINSERT INTO testing VALUES (1, 'b');\nINSERT INTO testing VALUES (2, 'a');\n\nSELECT * FROM testing;\n\nUPDATE testing\nSET colb = CASE cola WHEN 1 THEN 'a'\n                WHEN 2 THEN 'b'\n                END\nWHERE cola IN (1,2);\n\nSELECT * FROM testing;\n",
        "cola    colb\n------------\n1       b\n2       a\n",
        "cola    colb\n------------\n1       a\n2       b\n"
      ],
      [],
      [],
      [
        "UPDATE    DOCDATA    \nSET       LNUM = CASE LNUM\n              WHEN 0 THEN 1\n              WHEN 1 THEN 2 \n              WHEN 2 THEN 0 \n          END\nWHERE     (pID = 10) \n  AND     (LNUM IN (0, 1, 2))\n"
      ],
      [
        "id    student \n\n1     Abbot   \n2     Doris  \n3     Emerson \n4     Green  \n5     Jeames  \n",
        "1     Doris   \n2     Abbot   \n3     Green   \n4     Emerson \n5     Jeames  \n"
      ],
      [
        "-- setup initial data values:\ninsert into data_table(id, name) values(1, 'A')\ninsert into data_table(id, name) values(2, 'B')\n\n-- create temp table that matches live table\nselect top 0 * into #tmp_data_table from data_table\n\n-- insert records to be swapped\ninsert into #tmp_data_table(id, name) values(1, 'B')\ninsert into #tmp_data_table(id, name) values(2, 'A')\n\n-- update both rows at once! No index violations!\nupdate data_table set name = #tmp_data_table.name\nfrom data_table join #tmp_data_table on (data_table.id = #tmp_data_table.id)\n"
      ],
      [
        "SET CONSTRAINT emp_no_fk_par DEFERRED; \n"
      ],
      [],
      [],
      [],
      [
        "DROP TABLE ztable CASCADE;\nCREATE TABLE ztable\n    ( id integer NOT NULL PRIMARY KEY\n    , payload varchar\n    );\nINSERT INTO ztable(id,payload) VALUES (1,'one' ), (2,'two' ), (3,'three' );\nSELECT * FROM ztable;\n\n\n    -- This works, because there is no constraint\nUPDATE ztable t1\nSET payload=t2.payload\nFROM ztable t2\nWHERE t1.id IN (2,3)\nAND t2.id IN (2,3)\nAND t1.id <> t2.id\n    ;\nSELECT * FROM ztable;\n\nALTER TABLE ztable ADD CONSTRAINT OMG_WTF UNIQUE (payload)\n    DEFERRABLE INITIALLY DEFERRED\n    ;\n\n    -- This should also work, because the constraint \n    -- is deferred until \"commit time\"\nUPDATE ztable t1\nSET payload=t2.payload\nFROM ztable t2\nWHERE t1.id IN (2,3)\nAND t2.id IN (2,3)\nAND t1.id <> t2.id\n    ;\nSELECT * FROM ztable;\n",
        "DROP TABLE\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"ztable_pkey\" for table \"ztable\"\nCREATE TABLE\nINSERT 0 3\n id | payload\n----+---------\n  1 | one\n  2 | two\n  3 | three\n(3 rows)\n\nUPDATE 2\n id | payload\n----+---------\n  1 | one\n  2 | three\n  3 | two\n(3 rows)\n\nNOTICE:  ALTER TABLE / ADD UNIQUE will create implicit index \"omg_wtf\" for table \"ztable\"\nALTER TABLE\nUPDATE 2\n id | payload\n----+---------\n  1 | one\n  2 | two\n  3 | three\n(3 rows)\n"
      ]
    ],
    "votes:": "62",
    "tags": "<sql><database>",
    "AcceptedAnswerId": "665",
    "answers": [
      {
        "id": "665",
        "title": "",
        "text": "<p>I think you should go for solution 2. There is no 'swap' function in any SQL variant I know of.</p>\n\n<p>If you need to do this regularly, I suggest solution 1, depending on how other parts of the software are using this data. You can have locking issues if you're not careful.</p>\n\n<p>But in short: there is no other solution than the ones you provided.</p>\n",
        "votes": "16",
        "tags": "",
        "accepted": true
      },
      {
        "id": "73258",
        "title": "",
        "text": "<p>Assuming you know the PK of the two rows you want to update... This works in SQL Server, can't speak for other products. SQL is (supposed to be) atomic at the statement level:</p>\n\n<pre><code>CREATE TABLE testing\n(\n    cola int NOT NULL,\n    colb CHAR(1) NOT NULL\n);\n\nCREATE UNIQUE INDEX UIX_testing_a ON testing(colb);\n\nINSERT INTO testing VALUES (1, 'b');\nINSERT INTO testing VALUES (2, 'a');\n\nSELECT * FROM testing;\n\nUPDATE testing\nSET colb = CASE cola WHEN 1 THEN 'a'\n                WHEN 2 THEN 'b'\n                END\nWHERE cola IN (1,2);\n\nSELECT * FROM testing;\n</code></pre>\n\n<p>so you will go from:</p>\n\n<pre><code>cola    colb\n------------\n1       b\n2       a\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>cola    colb\n------------\n1       a\n2       b\n</code></pre>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "42877932",
        "title": "",
        "text": "<p>I usually think of a value that absolutely no index in my table could have. Usually - for unique column values - it's really easy. For example, for values of column 'position' (information about the order of several elements) it's 0. </p>\n\n<p>Then you can copy value A to a variable, update it with value B and then set value B from your variable. Two queries, I know no better solution though.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "10252174",
        "title": "",
        "text": "<p>In SQL Server, the MERGE statement can update rows that would normally break a UNIQUE KEY/INDEX. (Just tested this because I was curious.)</p>\n\n<p>However, you'd have to use a temp table/variable to supply MERGE w/ the necessary rows.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "355870",
        "title": "",
        "text": "<p>Further to Andy Irving's answer</p>\n\n<p>this worked for me (on SQL Server 2005) in a similar situation\nwhere I have a composite key and I need to swap a field which is part of the unique constraint.</p>\n\n<p>key:  pID, LNUM \nrec1: 10, 0\nrec2: 10, 1\nrec3: 10, 2</p>\n\n<p>and I need to swap LNUM so that the result is</p>\n\n<p>key:  pID, LNUM\nrec1: 10, 1\nrec2: 10, 2\nrec3: 10, 0</p>\n\n<p>the SQL needed:</p>\n\n<pre><code>UPDATE    DOCDATA    \nSET       LNUM = CASE LNUM\n              WHEN 0 THEN 1\n              WHEN 1 THEN 2 \n              WHEN 2 THEN 0 \n          END\nWHERE     (pID = 10) \n  AND     (LNUM IN (0, 1, 2))\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "53168583",
        "title": "",
        "text": "<p>1)  switch the ids for name </p>\n\n<pre><code>id    student \n\n1     Abbot   \n2     Doris  \n3     Emerson \n4     Green  \n5     Jeames  \n</code></pre>\n\n<p>For the sample input, the output is:</p>\n\n<p>id    student </p>\n\n<pre><code>1     Doris   \n2     Abbot   \n3     Green   \n4     Emerson \n5     Jeames  \n</code></pre>\n\n<p>\"in case n number of rows how will manage......\"</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "10018113",
        "title": "",
        "text": "<p>There is another approach that works with SQL Server: use a temp table join to it in your UPDATE statement.</p>\n\n<p>The problem is caused by having two rows with the same value <em>at the same time</em>, but if you update both rows at once (to their new, unique values), there is no constraint violation.</p>\n\n<p>Pseudo-code:</p>\n\n<pre><code>-- setup initial data values:\ninsert into data_table(id, name) values(1, 'A')\ninsert into data_table(id, name) values(2, 'B')\n\n-- create temp table that matches live table\nselect top 0 * into #tmp_data_table from data_table\n\n-- insert records to be swapped\ninsert into #tmp_data_table(id, name) values(1, 'B')\ninsert into #tmp_data_table(id, name) values(2, 'A')\n\n-- update both rows at once! No index violations!\nupdate data_table set name = #tmp_data_table.name\nfrom data_table join #tmp_data_table on (data_table.id = #tmp_data_table.id)\n</code></pre>\n\n<p>Thanks to Rich H for this technique.\n- Mark</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "36892474",
        "title": "",
        "text": "<p>For Oracle there is an option, DEFERRED, but you have to add it to your constraint.</p>\n\n<pre><code>SET CONSTRAINT emp_no_fk_par DEFERRED; \n</code></pre>\n\n<p>To defer ALL constraints that are deferrable during the entire session, you can use the ALTER SESSION SET constraints=DEFERRED statement. </p>\n\n<p><a href=\"http://www.databasedesign-resource.com/deferred-integrity-constraints.html\" rel=\"nofollow\">Source</a></p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2480068",
        "title": "",
        "text": "<p>Oracle has deferred integrity checking which solves exactly this, but it is not available in either SQL Server or MySQL.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1036322",
        "title": "",
        "text": "<p>I have the same problem.  Here's my proposed approach in PostgreSQL.  In my case, my unique index is a sequence value, defining an explicit user-order on my rows.  The user will shuffle rows around in a web-app, then submit the changes.</p>\n\n<p>I'm planning to add a \"before\" trigger.  In that trigger, whenever my unique index value is updated, I will look to see if any other row already holds my new value.  If so, I will give them my old value, and effectively steal the value off them.</p>\n\n<p>I'm hoping that PostgreSQL will allow me to do this shuffle in the before trigger.</p>\n\n<p>I'll post back and let you know my mileage.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "684",
        "title": "",
        "text": "<p>I also think that #2 is the best bet, though I would be sure to wrap it in a transaction in case something goes wrong mid-update.</p>\n\n<p>An alternative (since you asked) to updating the Unique Index values with different values would be to update all of the other values in the rows to that of the other row. Doing this means that you could leave the Unique Index values alone, and in the end, you end up with the data that you want. Be careful though, in case some other table references this table in a Foreign Key relationship, that all of the relationships in the DB remain intact.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "12437451",
        "title": "",
        "text": "<p>The magic word is <strong>DEFERRABLE</strong> here:</p>\n\n<pre><code>DROP TABLE ztable CASCADE;\nCREATE TABLE ztable\n    ( id integer NOT NULL PRIMARY KEY\n    , payload varchar\n    );\nINSERT INTO ztable(id,payload) VALUES (1,'one' ), (2,'two' ), (3,'three' );\nSELECT * FROM ztable;\n\n\n    -- This works, because there is no constraint\nUPDATE ztable t1\nSET payload=t2.payload\nFROM ztable t2\nWHERE t1.id IN (2,3)\nAND t2.id IN (2,3)\nAND t1.id &lt;&gt; t2.id\n    ;\nSELECT * FROM ztable;\n\nALTER TABLE ztable ADD CONSTRAINT OMG_WTF UNIQUE (payload)\n    DEFERRABLE INITIALLY DEFERRED\n    ;\n\n    -- This should also work, because the constraint \n    -- is deferred until \"commit time\"\nUPDATE ztable t1\nSET payload=t2.payload\nFROM ztable t2\nWHERE t1.id IN (2,3)\nAND t2.id IN (2,3)\nAND t1.id &lt;&gt; t2.id\n    ;\nSELECT * FROM ztable;\n</code></pre>\n\n<p>RESULT:</p>\n\n<pre><code>DROP TABLE\nNOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index \"ztable_pkey\" for table \"ztable\"\nCREATE TABLE\nINSERT 0 3\n id | payload\n----+---------\n  1 | one\n  2 | two\n  3 | three\n(3 rows)\n\nUPDATE 2\n id | payload\n----+---------\n  1 | one\n  2 | three\n  3 | two\n(3 rows)\n\nNOTICE:  ALTER TABLE / ADD UNIQUE will create implicit index \"omg_wtf\" for table \"ztable\"\nALTER TABLE\nUPDATE 2\n id | payload\n----+---------\n  1 | one\n  2 | two\n  3 | three\n(3 rows)\n</code></pre>\n",
        "votes": "30",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "650",
    "url": "https://stackoverflow.com/questions/650",
    "title": "Automatically update version number",
    "text:": "<p>I would like the version property of my application to be incremented for each build but I'm not sure on how to enable this functionality in Visual Studio (2005/2008). I have tried to specify the AssemblyVersion as 1.0.* but it doesn't get me exactly what I want. </p>\n\n<p>I'm also using a settings file and in earlier attempts when the assembly version changed my settings got reset to the default since the application looked for the settings file in another directory. </p>\n\n<p>I would like to be able to display a version number in the form of 1.1.38 so when a user finds a problem I can log the version they are using as well as tell them to upgrade if they have an old release.</p>\n\n<p>A short explanation of how the versioning works would also be appreciated. When does the build and revision number get incremented?</p>\n",
    "codes": [
      [],
      [],
      [
        "Version v = Assembly.GetExecutingAssembly().GetName().Version;\nstring About = string.Format(CultureInfo.InvariantCulture, @\"YourApp Version {0}.{1}.{2} (r{3})\", v.Major, v.Minor, v.Build, v.Revision);\n"
      ],
      [
        "' Version information for an assembly consists of the following four values:\n'\n'      Major Version\n'      Minor Version \n'      Build Number\n'      Revision\n'\n' You can specify all the values or you can default the Build and Revision Numbers \n' by using the '*' as shown below:\n' <Assembly: AssemblyVersion(\"1.0.*\")> \n\n<Assembly: AssemblyVersion(\"1.0.0.0\")> \n<Assembly: AssemblyFileVersion(\"1.0.0.0\")> \n"
      ],
      [
        "using Microsoft.Build.Framework;\nusing System;\nusing System.Collections.Generic;\nusing System.Text;\n\npublic class RefreshVersion : Microsoft.Build.Utilities.Task\n{\n    [Output]\n    public string NewVersionString { get; set; }\n    public string CurrentVersionString { get; set; } \n\n    public override bool Execute()\n    {       \n        Version currentVersion = new Version(CurrentVersionString ?? \"1.0.0\");\n\n        DateTime d = DateTime.Now;\n        NewVersionString = new Version(currentVersion.Major, \n            currentVersion.Minor, currentVersion.Build+1).ToString();\n        return true;\n    }\n\n}\n",
        "<Project Sdk=\"Microsoft.NET.Sdk\">    \n...\n<UsingTask TaskName=\"RefreshVersion\" AssemblyFile=\"$(MSBuildThisFileFullPath)\\..\\..\\<dll path>\\BuildTasks.dll\" />\n<Target Name=\"RefreshVersionBuildTask\" BeforeTargets=\"Pack\" Condition=\"'$(Configuration)|$(Platform)'=='Release|AnyCPU'\">\n   <RefreshVersion CurrentVersionString=\"$(PackageVersion)\">\n          <Output TaskParameter=\"NewVersionString\" PropertyName=\"NewVersionString\" />             \n   </RefreshVersion>\n   <Message Text=\"Updating package version number to $(NewVersionString)...\" Importance=\"high\" />\n   <XmlPoke XmlInputPath=\"$(MSBuildProjectDirectory)\\mustache.website.sdk.dotNET.csproj\" Query=\"/Project/PropertyGroup/PackageVersion\" Value=\"$(NewVersionString)\" />\n</Target>\n...\n<PropertyGroup>\n ..\n <PackageVersion>1.1.4</PackageVersion>\n ..\n",
        "<Message Text=\"Uploading package to NuGet...\" Importance=\"high\" />\n<Exec WorkingDirectory=\"$(MSBuildProjectDirectory)\\bin\\release\" Command=\"c:\\nuget\\nuget push *.nupkg -Source https://www.nuget.org/api/v2/package\" IgnoreExitCode=\"true\" />\n"
      ],
      [],
      [
        "System.IO.File.GetLastWriteTime(System.Reflection.Assembly.GetExecutingAssembly().Location).ToString(\"yyyy.MM.dd.HH.mm.ss\")\n",
        "System.Reflection.Assembly assembly = System.Reflection.Assembly.GetExecutingAssembly();\nobject[] attributes = assembly.GetCustomAttributes(typeof(System.Reflection.AssemblyFileVersionAttribute), false);\nobject attribute = null;\n\nif (attributes.Length > 0)\n{\n    attribute = attributes[0] as System.Reflection.AssemblyFileVersionAttribute;\n}\n"
      ]
    ],
    "votes:": "108",
    "tags": "<c#><visual-studio><versioning>",
    "AcceptedAnswerId": "655",
    "answers": [
      {
        "id": "1550",
        "title": "",
        "text": "<p>Some time ago I wrote a quick and dirty exe that would update the version #'s in an assemblyinfo.{cs/vb} - I also have used rxfind.exe (a simple and powerful regex-based search replace tool) to do the update from a command line as part of the build process.  A couple of other helpfule hints:</p>\n\n<ol>\n<li>separate the assemblyinfo into product parts (company name, version, etc.) and assembly specific parts (assembly name etc.).  See <a href=\"http://blog.darrenstokes.com/2007/12/17/ease-versioning-multiple-assemblies-by-splitting-up-assemblyinfo/\" rel=\"nofollow noreferrer\">here</a></li>\n<li>Also - i use subversion, so I found it helpful to set the build number to subversion revision number thereby making it really easy to always get back to the codebase that generated the assembly (e.g. 1.4.100.1502 was built from revision 1502).</li>\n</ol>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "787",
        "title": "",
        "text": "<p>What source control system are you using? </p>\n\n<p>Almost all of them have some form of $ Id $ tag that gets expanded when the file is checked in.</p>\n\n<p>I usually use some form of hackery to display this as the version number.</p>\n\n<p>The other alternative is use to use the date as the build number: 080803-1448</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "655",
        "title": "",
        "text": "<p>With the \"Built in\" stuff, you can't, as using 1.0.* or 1.0.0.* will replace the revision and build numbers with a coded date/timestamp, which is usually also a good way. </p>\n\n<p>For more info, see the <a href=\"http://msdn2.microsoft.com/en-us/library/c405shex(vs.80).aspx\" rel=\"noreferrer\">Assembly Linker</a> Documentation in the /v tag.</p>\n\n<p>As for automatically incrementing numbers, use the AssemblyInfo Task:</p>\n\n<p><a href=\"http://code.msdn.microsoft.com/AssemblyInfoTaskvers\" rel=\"noreferrer\">AssemblyInfo Task</a></p>\n\n<p>This can be configured to automatically increment the build number.</p>\n\n<p>There are 2 Gotchas:</p>\n\n<ol>\n<li>Each of the 4 numbers in the Version string is limited to 65535. This is a Windows Limitation and unlikely to get fixed.\n\n<ul>\n<li><a href=\"http://blogs.msdn.com/msbuild/archive/2007/01/03/why-are-build-numbers-limited-to-65535.aspx\" rel=\"noreferrer\">Why are build numbers limited to 65535?</a></li>\n</ul></li>\n<li>Using with with Subversion requires a small change:\n\n<ul>\n<li><a href=\"http://www.andrewconnell.com/blog/archive/2006/08/29/4078.aspx\" rel=\"noreferrer\">Using MSBuild to generate assembly version info at build time (including SubVersion fix)</a></li>\n</ul></li>\n</ol>\n\n<p>Retrieving the Version number is then quite easy:</p>\n\n<pre><code>Version v = Assembly.GetExecutingAssembly().GetName().Version;\nstring About = string.Format(CultureInfo.InvariantCulture, @\"YourApp Version {0}.{1}.{2} (r{3})\", v.Major, v.Minor, v.Build, v.Revision);\n</code></pre>\n\n<hr>\n\n<p>And, to clarify: In .net or at least in C#, the build is actually the THIRD number, not the fourth one as some people (for example Delphi Developers who are used to Major.Minor.Release.Build) might expect.</p>\n\n<p>In .net, it's Major.Minor.Build.Revision.</p>\n",
        "votes": "97",
        "tags": "",
        "accepted": true
      },
      {
        "id": "155067",
        "title": "",
        "text": "<p>VS.NET defaults the Assembly version to 1.0.* and uses the following logic when auto-incrementing: it sets the build part to the number of days since January 1st, 2000, and sets the revision part to the number of seconds since midnight, local time, divided by two. See this <a href=\"http://msdn.microsoft.com/en-us/library/system.reflection.assemblyversionattribute.assemblyversionattribute.aspx\" rel=\"noreferrer\">MSDN article</a>.</p>\n\n<p>Assembly version is located in an assemblyinfo.vb or assemblyinfo.cs file. From the file: </p>\n\n<pre class=\"lang-vb prettyprint-override\"><code>' Version information for an assembly consists of the following four values:\n'\n'      Major Version\n'      Minor Version \n'      Build Number\n'      Revision\n'\n' You can specify all the values or you can default the Build and Revision Numbers \n' by using the '*' as shown below:\n' &lt;Assembly: AssemblyVersion(\"1.0.*\")&gt; \n\n&lt;Assembly: AssemblyVersion(\"1.0.0.0\")&gt; \n&lt;Assembly: AssemblyFileVersion(\"1.0.0.0\")&gt; \n</code></pre>\n",
        "votes": "22",
        "tags": "",
        "accepted": false
      },
      {
        "id": "43894925",
        "title": "",
        "text": "<p><em>[Visual Studio 2017, <strong>.csproj</strong> properties]</em></p>\n\n<p>To automatically update your PackageVersion/Version/AssemblyVersion property (or any other property), first, create a new <code>Microsoft.Build.Utilities.Task</code> class that will get your current build number and send back the updated number (I recommend to create a separate project just for that class).</p>\n\n<p>I manually update the major.minor numbers, but let MSBuild to automatically update the build number (1.1.<strong>1</strong>, 1.1.<strong>2</strong>, 1.1.<strong>3</strong>, etc. :)</p>\n\n<pre><code>using Microsoft.Build.Framework;\nusing System;\nusing System.Collections.Generic;\nusing System.Text;\n\npublic class RefreshVersion : Microsoft.Build.Utilities.Task\n{\n    [Output]\n    public string NewVersionString { get; set; }\n    public string CurrentVersionString { get; set; } \n\n    public override bool Execute()\n    {       \n        Version currentVersion = new Version(CurrentVersionString ?? \"1.0.0\");\n\n        DateTime d = DateTime.Now;\n        NewVersionString = new Version(currentVersion.Major, \n            currentVersion.Minor, currentVersion.Build+1).ToString();\n        return true;\n    }\n\n}\n</code></pre>\n\n<p>Then call your recently created Task on MSBuild process adding the next code on your .csproj file:</p>\n\n<pre><code>&lt;Project Sdk=\"Microsoft.NET.Sdk\"&gt;    \n...\n&lt;UsingTask TaskName=\"RefreshVersion\" AssemblyFile=\"$(MSBuildThisFileFullPath)\\..\\..\\&lt;dll path&gt;\\BuildTasks.dll\" /&gt;\n&lt;Target Name=\"RefreshVersionBuildTask\" BeforeTargets=\"Pack\" Condition=\"'$(Configuration)|$(Platform)'=='Release|AnyCPU'\"&gt;\n   &lt;RefreshVersion CurrentVersionString=\"$(PackageVersion)\"&gt;\n          &lt;Output TaskParameter=\"NewVersionString\" PropertyName=\"NewVersionString\" /&gt;             \n   &lt;/RefreshVersion&gt;\n   &lt;Message Text=\"Updating package version number to $(NewVersionString)...\" Importance=\"high\" /&gt;\n   &lt;XmlPoke XmlInputPath=\"$(MSBuildProjectDirectory)\\mustache.website.sdk.dotNET.csproj\" Query=\"/Project/PropertyGroup/PackageVersion\" Value=\"$(NewVersionString)\" /&gt;\n&lt;/Target&gt;\n...\n&lt;PropertyGroup&gt;\n ..\n &lt;PackageVersion&gt;1.1.4&lt;/PackageVersion&gt;\n ..\n</code></pre>\n\n<p>When picking Visual Studio Pack project option (just change to <code>BeforeTargets=\"Build\"</code> for executing the task before Build) the RefreshVersion code will be triggered to calculate the new version number, and <code>XmlPoke</code> task will update your .csproj property accordingly (yes, it will modify the file).</p>\n\n<p>When working with NuGet libraries, I also send the package to NuGet repository by just adding the next build task to the previous example.</p>\n\n<pre><code>&lt;Message Text=\"Uploading package to NuGet...\" Importance=\"high\" /&gt;\n&lt;Exec WorkingDirectory=\"$(MSBuildProjectDirectory)\\bin\\release\" Command=\"c:\\nuget\\nuget push *.nupkg -Source https://www.nuget.org/api/v2/package\" IgnoreExitCode=\"true\" /&gt;\n</code></pre>\n\n<p><code>c:\\nuget\\nuget</code> is where I have the NuGet client (remember to save your NuGet API key by calling <code>nuget SetApiKey &lt;my-api-key&gt;</code> or to include the key on the NuGet push call).</p>\n\n<p>Just in case it helps someone ^_^.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2352703",
        "title": "",
        "text": "<p>If you want an auto incrementing number that updates each time a compilation is done, you can use <a href=\"http://testdox.wordpress.com/versionupdater/\" rel=\"nofollow noreferrer\">VersionUpdater</a> from a pre-build event. Your pre-build event can check the build configuration if you prefer so that the version number will only increment for a Release build (for example).</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "15211000",
        "title": "",
        "text": "<p>I have found that it works well to simply display the date of the last build using the following wherever a product version is needed:</p>\n\n<pre><code>System.IO.File.GetLastWriteTime(System.Reflection.Assembly.GetExecutingAssembly().Location).ToString(\"yyyy.MM.dd.HH.mm.ss\")\n</code></pre>\n\n<p>Rather than attempting to get the version from something like the following:</p>\n\n<pre><code>System.Reflection.Assembly assembly = System.Reflection.Assembly.GetExecutingAssembly();\nobject[] attributes = assembly.GetCustomAttributes(typeof(System.Reflection.AssemblyFileVersionAttribute), false);\nobject attribute = null;\n\nif (attributes.Length &gt; 0)\n{\n    attribute = attributes[0] as System.Reflection.AssemblyFileVersionAttribute;\n}\n</code></pre>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "651",
    "url": "https://stackoverflow.com/questions/651",
    "title": "Checklist for IIS 6/ASP.NET Windows Authentication?",
    "text:": "<p>I've been having trouble getting my ASP.NET application to automatically log users into the Intranet site I'm building.  No matter the googling or the experimentation I applied, there is always a login box displayed by IE7.</p>\n\n<p>I've got Windows authentication mode set in the Web.config, disabled anonymous access and configured the correct default domain in IIS, but it's still asking the user to log in and, more annoyingly, the user is required to provide the domain too (<em>DOMAIN\\auser</em>), which is causing problems with non-technical visitors.  Thank Zeus for password remembering functionality.</p>\n\n<p>I'm not the network administrator so it's possible that something about Active Directory is set up incorrectly, or it could just be me missing something very simple.  Please note that I don't want to impersonate the user, I just need to know that the IPrincipal.Name property matches that of a valid record in my user database, hence authenticating the user to my application.</p>\n\n<p>To this end, it would be very useful to have a checklist of all configuration requirements for AD, ASP.NET and IIS to work together in this manner as a reference for debugging and hopefully reducing some user friction.</p>\n",
    "codes": [
      [],
      [],
      []
    ],
    "votes:": "31",
    "tags": "<asp.net><iis><authentication><active-directory>",
    "AcceptedAnswerId": "725",
    "answers": [
      {
        "id": "2629",
        "title": "",
        "text": "<p>In IIS, enable annonymous access and allow the web.config to handle user authentication.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "725",
        "title": "",
        "text": "<p>It sounds like you've covered all the server-side bases--maybe it's a client issue?  I assume your users have integrated authentication enabled in IE7?  (Tools -> Internet Options -> Advanced -> Security).  This is enabled by default.</p>\n\n<p>Also, is your site correctly recognized by IE7 as being in the Local Intranet zone?  The IE7 default is to allow automatic logon only in that zone, so users would be prompted if IE thinks your site is on the internet.  I believe using a hostname with a dot in it causes IE to place the site into the Internet zone.</p>\n",
        "votes": "20",
        "tags": "",
        "accepted": true
      },
      {
        "id": "90759",
        "title": "",
        "text": "<ol>\n<li><p>Open <code>Active Directory Users and Computers</code> MMC snap in </p></li>\n<li><p>Expand <code>computers</code> section from <code>TreeView</code> (left side)</p></li>\n<li><p>Check if the computer is registered in your domain.</p></li>\n</ol>\n\n<p>Also, you have to login with a domain account on that computer, otherwise that authentication box will be shown.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "657",
    "url": "https://stackoverflow.com/questions/657",
    "title": "Encrypting Passwords",
    "text:": "<p>What is the fastest, yet secure way to encrypt passwords (in PHP preferably), and for whichever method you choose, is it portable?</p>\n\n<p>In other words, if I later migrate my website to a different server, will my passwords continue to work?</p>\n\n<p>The method I am using now, as I was told, is dependent on the exact versions of the libraries installed on the server.</p>\n",
    "codes": [
      [
        "}else{\necho \"password not correct\";\n}\n"
      ],
      [],
      [],
      [],
      [],
      [],
      [
        "String s = HashStringSHA256(\"password1PasswordSaltDesignedForThisQuestion\");\n"
      ],
      []
    ],
    "votes:": "36",
    "tags": "<php><encryption><passwords>",
    "AcceptedAnswerId": "669",
    "answers": [
      {
        "id": "58778226",
        "title": "",
        "text": "<p>Use this function when inserting in database\n    Password_harsh($password,PASSWORD_DEFAULT);\nAnd when selecting from the database you compare the password you are inserting with the one in the database using the function \n    if(password_verify($password,$databasePassword)){</p>\n\n<pre><code>}else{\necho \"password not correct\";\n}\n</code></pre>\n\n<p>This will harsh the password in a secure format</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1684",
        "title": "",
        "text": "<p>I'm not necessarily looking for the fastest but a nice balance, some of the server that this code is being developed for are fairly slow, the script that hashes and stores the password is taking 5-6 seconds to run, and I've narrowed it down to the hashing (if I comment the hashing out it runs, in 1-2 seconds).</p>\n\n<p>It doesn't have to be the MOST secure, I'm not codding for a bank (right now) but I certainly <strong><em>WILL NOT</em></strong> store the passwords as plain-text.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "38409027",
        "title": "",
        "text": "<p>Consider to use <code>bcrypt</code> it is used in many modern frameworks like laravel.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "691",
        "title": "",
        "text": "<p>I'm with Peter. Developer don't seem to understand passwords. We all pick (and I'm guilty of this too) MD5 or SHA1 because they are fast. Thinking about it ('cuz someone recently pointed it out to me) that doesn't make any sense. We should be picking a hashing algorithm that's stupid slow. I mean, on the scale of things, a busy site will hash passwords what? every 1/2 minute? Who cares if it take 0.8 seconds vs 0.03 seconds server wise? But that extra slowness is huge to prevent all types of common brute-forcish attacks.</p>\n\n<p>From my reading, bcrypt is specifically designed for secure password hashing. It's based on blowfish, and there are many implementation.</p>\n\n<p>For PHP, check out PHPPass <a href=\"http://www.openwall.com/phpass/\" rel=\"noreferrer\">http://www.openwall.com/phpass/</a></p>\n\n<p>For anyone doing .NET, check out BCrypt.NET <a href=\"http://derekslager.com/blog/posts/2007/10/bcrypt-dotnet-strong-password-hashing-for-dotnet-and-mono.ashx\" rel=\"noreferrer\">http://derekslager.com/blog/posts/2007/10/bcrypt-dotnet-strong-password-hashing-for-dotnet-and-mono.ashx</a></p>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "50417253",
        "title": "",
        "text": "<p><a href=\"http://php.net/password_hash\" rel=\"nofollow noreferrer\"><code>password_hash ( string $password , int $algo [, array $options ] )</code></a>.  (PHP 5 >= 5.5.0, PHP 7)</p>\n\n<p>password_hash() creates a new password hash using a strong one-way hashing algorithm. password_hash() is compatible with crypt(). Therefore, password hashes created by crypt() can be used with password_hash().</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "669",
        "title": "",
        "text": "<p>If you are choosing an encryption method for your login system then speed is not your friend, Jeff had a to-and-frow with Thomas Ptacek about passwords and the <a href=\"http://chargen.matasano.com/chargen/2007/9/7/enough-with-the-rainbow-tables-what-you-need-to-know-about-s.html\" rel=\"noreferrer\">conclusion</a> was that you should use the slowest, most secure encryption method you can afford to. </p>\n\n<blockquote>\n  <p>From Thomas Ptacek's blog:<br>\n  Speed is exactly what you don\u2019t want in a password hash function.</p>\n  \n  <p>Modern password schemes are attacked with incremental password crackers.</p>\n  \n  <p>Incremental crackers don\u2019t precalculate all possible cracked passwords. They consider each password hash individually, and they feed their dictionary through the password hash function the same way your PHP login page would. Rainbow table crackers like Ophcrack use space to attack passwords; incremental crackers like John the Ripper, Crack, and LC5 work with time: statistics and compute.</p>\n  \n  <p>The password attack game is scored in time taken to crack password X. With rainbow tables, that time depends on how big your table needs to be and how fast you can search it. With incremental crackers, the time depends on how fast you can make the password hash function run.</p>\n  \n  <p>The better you can optimize your password hash function, the faster your password hash function gets, the weaker your scheme is. MD5 and SHA1, even conventional block ciphers like DES, are designed to be fast. MD5, SHA1, and DES are weak password hashes. On modern CPUs, raw crypto building blocks like DES and MD5 can be bitsliced, vectorized, and parallelized to make password searches lightning fast. Game-over FPGA implementations cost only hundreds of dollars. </p>\n</blockquote>\n",
        "votes": "33",
        "tags": "",
        "accepted": true
      },
      {
        "id": "85951",
        "title": "",
        "text": "<p>It should be pointed out that you don't want to <em>encrypt</em> the password, you want to <strong>hash</strong> it.</p>\n\n<p>Encrypted passwords can be decrypted, letting someone see the password. Hashing is a one-way operation so the user's original password is (cryptographically) gone.</p>\n\n<hr>\n\n<p>As for which algorithm you should choose - use the currently accepted standard one:</p>\n\n<ul>\n<li>SHA-256</li>\n</ul>\n\n<p>And when you hash the user's password, be sure to also hash in some other junk with it. e.g.:</p>\n\n<ul>\n<li>password: <code>password1</code></li>\n<li>salt: <code>PasswordSaltDesignedForThisQuestion</code></li>\n</ul>\n\n<p>Append the salt to the user's password: </p>\n\n<pre><code>String s = HashStringSHA256(\"password1PasswordSaltDesignedForThisQuestion\");\n</code></pre>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "86061",
        "title": "",
        "text": "<p>Whatever you do, don't write your own encryption algorithm.  Doing this will almost guarantee (unless you're a cryptographer) that there will be a flaw in the algorithm that will make it trivial to crack.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "683",
    "url": "https://stackoverflow.com/questions/683",
    "title": "Using 'in' to match an attribute of Python objects in an array",
    "text:": "<p>I don't remember whether I was dreaming or not but I seem to recall there being a function which allowed something like,</p>\n\n<pre><code>foo in iter_attr(array of python objects, attribute name)</code></pre>\n\n<p>I've looked over the docs but this kind of thing doesn't fall under any obvious listed headers</p>\n",
    "codes": [
      [
        "import operator\nids = map(operator.attrgetter(\"id\"), bar)",
        "import operator,itertools\nfoo = 12\nfoo in itertools.imap(operator.attrgetter(\"id\"), bar)\n"
      ],
      [
        "def iterattr(iterator, attributename):\n    for obj in iterator:\n        yield getattr(obj, attributename)\n"
      ],
      [
        "    files = os.listdir(path)                               \n    test = re.compile(\"test\\.py$\", re.IGNORECASE)          \n    files = [f for f in files if test.search(f)]\n"
      ],
      [
        "result = [obj for obj in listOfObjs if hasattr(obj, 'attributeName')]\n"
      ],
      [],
      [
        "foo = 12\nfoo in iter_attr(bar, 'id')",
        "foo = 12\nfoo in [obj.id for obj in bar]"
      ],
      [
        "foo = 12\nfoo in (obj.id for obj in bar)\n",
        "foo = 12\nfoo in (obj.id for obj in bar if hasattr(obj, 'id'))\n"
      ],
      [
        "#!/bin/python\nbar in dict(Foo)\n",
        "#!/bin/python\nbaz = dict([(key, value) for key, value in foo if bar in value])\n"
      ]
    ],
    "votes:": "46",
    "tags": "<python><arrays><iteration>",
    "AcceptedAnswerId": "57833",
    "answers": [
      {
        "id": "4905822",
        "title": "",
        "text": "<p>The function you are thinking of is probably <code>operator.attrgettter</code>. For example, to get a list that contains the value of each object's \"id\" attribute:</p>\n\n<pre><code>import operator\nids = map(operator.attrgetter(\"id\"), bar)</code></pre>\n\n<p>If you want to check whether the list contains an object with an id == 12, then a neat and efficient (i.e. doesn't iterate the whole list unnecessarily) way to do it is:</p>\n\n<pre><code>any(obj.id == 12 for obj in bar)</code></pre>\n\n<p>If you want to use 'in' with attrgetter, while still retaining lazy iteration of the list:</p>\n\n<p><pre><code>import operator,itertools\nfoo = 12\nfoo in itertools.imap(operator.attrgetter(\"id\"), bar)\n</pre></code></p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "31126",
        "title": "",
        "text": "<p>you could always write one yourself:</p>\n\n<pre><code>def iterattr(iterator, attributename):\n    for obj in iterator:\n        yield getattr(obj, attributename)\n</code></pre>\n\n<p>will work with anything that iterates, be it a tuple, list, or whatever.</p>\n\n<p>I love python, it makes stuff like this very simple and no more of a hassle than neccessary, and in use stuff like this is hugely elegant.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "701",
        "title": "",
        "text": "<p>No, you were not dreaming.  Python has a pretty excellent list comprehension system that lets you manipulate lists pretty elegantly, and depending on exactly what you want to accomplish, this can be done a couple of ways.  In essence, what you're doing is saying \"For item in list if criteria.matches\", and from that you can just iterate through the results or dump the results into a new list.</p>\n\n<p>I'm going to crib an example from <a href=\"http://diveintopython.net/functional_programming/filtering_lists.html\" rel=\"noreferrer\">Dive Into Python</a> here, because it's pretty elegant and they're smarter than I am.  Here they're getting a list of files in a directory, then filtering the list for all files that match a regular expression criteria.</p>\n\n<blockquote>\n<pre><code>    files = os.listdir(path)                               \n    test = re.compile(\"test\\.py$\", re.IGNORECASE)          \n    files = [f for f in files if test.search(f)]\n</code></pre>\n</blockquote>\n\n<p>You could do this without regular expressions, for your example, for anything where your expression at the end returns true for a match.  There are other options like using the filter() function, but if I were going to choose, I'd go with this.</p>\n\n<p>Eric Sipple</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "745",
        "title": "",
        "text": "<p>Are you looking to get a list of objects that have a certain attribute? If so, a <a href=\"http://docs.python.org/tut/node7.html#SECTION007140000000000000000\" rel=\"noreferrer\">list comprehension</a> is the right way to do this.</p>\n\n<pre><code>result = [obj for obj in listOfObjs if hasattr(obj, 'attributeName')]\n</code></pre>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "31188",
        "title": "",
        "text": "<p>If you plan on searching anything of remotely decent size, your best bet is going to be to use a dictionary or a set.  Otherwise, you basically have to iterate through every element of the iterator until you get to the one you want.</p>\n\n<p>If this isn't necessarily performance sensitive code, then the list comprehension way should work.  But note that it is fairly inefficient because it goes over every element of the iterator and then goes BACK over it again until it finds what it wants.</p>\n\n<p>Remember, python has one of the most efficient hashing algorithms around.  Use it to your advantage.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "750",
        "title": "",
        "text": "<p>What I was thinking of can be achieved using list comprehensions, but I thought that there was a function that did this in a slightly neater way.</p>\n\n<p>i.e. 'bar' is a list of objects, all of which have the attribute 'id'</p>\n\n<p>The mythical functional way:</p>\n\n<pre><code>foo = 12\nfoo in iter&#95;attr(bar, 'id')</code></pre>\n\n<p>The list comprehension way:</p>\n\n<pre><code>foo = 12\nfoo in [obj.id for obj in bar]</code></pre>\n\n<p>In retrospect the list comprehension way is pretty neat anyway.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "57833",
        "title": "",
        "text": "<p>Using a list comprehension would build a temporary list, which could eat all your memory if the sequence being searched is large. Even if the sequence is not large, building the list means iterating over the whole of the sequence before <code>in</code> could start its search.</p>\n\n<p>The temporary list can be avoiding by using a generator expression:</p>\n\n<pre><code>foo = 12\nfoo in (obj.id for obj in bar)\n</code></pre>\n\n<p>Now, as long as <code>obj.id == 12</code> near the start of <code>bar</code>, the search will be fast, even if <code>bar</code> is infinitely long.</p>\n\n<p>As @Matt suggested, it's a good idea to use <code>hasattr</code> if any of the objects in <code>bar</code> can be missing an <code>id</code> attribute:</p>\n\n<pre><code>foo = 12\nfoo in (obj.id for obj in bar if hasattr(obj, 'id'))\n</code></pre>\n",
        "votes": "42",
        "tags": "",
        "accepted": true
      },
      {
        "id": "735",
        "title": "",
        "text": "<p>I think:</p>\n\n<pre><code>#!/bin/python\nbar in dict(Foo)\n</code></pre>\n\n<p>Is what you are thinking of.  When trying to see if a certain key exists within a dictionary in python (python's version of a hash table) there are two ways to check.  First is the <strong><code>has_key()</code></strong> method attached to the dictionary and second is the example given above.  It will return a boolean value.</p>\n\n<p>That should answer your question.</p>\n\n<p>And now a little off topic to tie this in to the <em>list comprehension</em> answer previously given (for a bit more clarity).  <em>List Comprehensions</em> construct a list from a basic <em>for loop</em> with modifiers.  As an example (to clarify slightly), a way to use the <code>in dict</code> language construct in a <em>list comprehension</em>:</p>\n\n<p>Say you have a two dimensional dictionary <strong><code>foo</code></strong> and you only want the second dimension dictionaries which contain the key <strong><code>bar</code></strong>.  A relatively straightforward way to do so would be to use a <em>list comprehension</em> with a conditional as follows:</p>\n\n<pre><code>#!/bin/python\nbaz = dict([(key, value) for key, value in foo if bar in value])\n</code></pre>\n\n<p>Note the <strong><code>if bar in value</code></strong> at the end of the statement**, this is a modifying clause which tells the <em>list comprehension</em> to only keep those key-value pairs which meet the conditional.**  In this case <strong><code>baz</code></strong> is a new dictionary which contains only the dictionaries from foo which contain bar (Hopefully I didn't miss anything in that code example... you may have to take a look at the list comprehension documentation found in <a href=\"http://docs.python.org/tut/node7.html#SECTION007140000000000000000\" rel=\"nofollow noreferrer\">docs.python.org tutorials</a> and at <a href=\"http://www.secnetix.de/olli/Python/list_comprehensions.hawk\" rel=\"nofollow noreferrer\">secnetix.de</a>, both sites are good references if you have questions in the future.).</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "696",
    "url": "https://stackoverflow.com/questions/696",
    "title": "Connect PHP to IBM i (AS/400)",
    "text:": "<p>I've got an upcoming project wherein I will need to connect our website (<code>PHP5/Apache 1.3/OpenBSD 4.1</code>) to our back-end system running on an iSeries with OS400 V5R3 so that I can access some tables stored there. I've done some checking around but am running into some roadblocks.</p>\n\n<p>From what I've seen the DB2 extensions and DB2 software from IBM only run under Linux. I've tried compiling the extensions with all the software from IBM and even tried their precompiled ibm_db2 extension with no luck. IBM only supports Linux so I turned on the Linux emulation in the kernel but that didn't seem to help anything.</p>\n\n<p>If anyone has run across getting everything to run natively under OpenBSD that would be great, but what I think I may have to do is setting up a second server running CentOS with DB2 installed (most likely via ZendCore for IBM since it seems to do all this for me) and the driver so that I can set up a small transaction server that I can post against and get a JSON representation of the DB2 data that I need.</p>\n\n<p>Does the second option seem overkill or does anyone else have any better ideas?</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "35",
    "tags": "<php><database><odbc><db2><ibm-midrange>",
    "AcceptedAnswerId": "704",
    "answers": [
      {
        "id": "25617",
        "title": "",
        "text": "<p>Indeed, a webservice seems like a great way to solve the problem.  One way to avoid having a completely separate OS for it would be to write the webservice in Java on top of the AS400 tools for Java (which are quite nice, btw).  That should at least let you run your service layer on the OpenBSD box as well.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "836",
        "title": "",
        "text": "<p>Looks like a web service is going to be the answer for me. On a production box I'd rather not have to go through compiling and maintaining my own special installation of PHP since ODBC support needs to be compiled in, according to the PHP documentation.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "31091",
        "title": "",
        "text": "<p>Rather than setup a 2nd box, why don't you look into the PHP Connector for iSeries? My mainframe guys said it was very easy to setup on our iSeries here. </p>\n\n<p>We wrote a simple server in PHP that loads data models from DB2 data, serializes them, and returns them to the caller. This approach means that only another PHP app can consume the service but it's just so much quicker on both ends to just serialize the object and send it down the pipe.</p>\n\n<p>Here is a PDF from IBM on the subject: <a href=\"http://i-seriesusergroup.org/wp-content/uploads/2006/09/PHP%20for%20i5OS%20NESDND.pdf\" rel=\"nofollow noreferrer\">http://i-seriesusergroup.org/wp-content/uploads/2006/09/PHP%20for%20i5OS%20NESDND.pdf</a></p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "121074",
        "title": "",
        "text": "<p>You can connect directly using a standard ODBC driver as well. The IBM version usually gives you more features like being able to call programs and things like that. If you only need SQL and stored procedures, ODBC should work.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "25436",
        "title": "",
        "text": "<p>To second @John Downey, I've gotten connectivity to work with PHP on an AS/400 with unixODBC.</p>\n\n<p>Check your phpinfo() to see if unixODBC is available in it. I didn't have to compile it in on SLES 10. </p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "158959",
        "title": "",
        "text": "<p>Why not use PDO from PHP? I have to guess here since I could not find a public list of all ports available for OpenBSD, but since there is a port for FreeBSD, NetBSD etc. maybe you get lucky as well.</p>\n\n<p>(I guess that even though OpenBSD links to FreeBSD's porter's handbook, <a href=\"http://www.freshports.org/\" rel=\"nofollow noreferrer\">Freshports</a> is not applicable for your system?)</p>\n\n<p>If PDO is not available and since I am hoping you use ports and according to the following link there is php5-ODBC available:</p>\n\n<ul>\n<li><a href=\"http://www.openbsd.org/pkg-stable40.html\" rel=\"nofollow noreferrer\">http://www.openbsd.org/pkg-stable40.html</a></li>\n</ul>\n\n<p>So assuming you manage your system through ports, there are your pointers.</p>\n\n<p>Hope that helps!</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "704",
        "title": "",
        "text": "<p>Have you looked at connecting to the server using <a href=\"http://www.unixodbc.org/\" rel=\"noreferrer\">unixODBC</a>? If I remember correctly it has support for IBM DB2 and compiles on OpenBSD. Check out <a href=\"http://www.php.net/odbc\" rel=\"noreferrer\">http://www.php.net/odbc</a> for more information regarding the PHP side.</p>\n\n<p>If you can't get that to work, the option to setup a web service on a Linux server may be all you can do.</p>\n",
        "votes": "19",
        "tags": "",
        "accepted": true
      },
      {
        "id": "17038",
        "title": "",
        "text": "<p>A web service is almost certainly the way to go.  I'm sure you've already thought of this, but since you're doing PHP on both sides, you can shortcut things a little bit by using serialize() to build your response data instead of building a proper XML document.  It's less flexible over the long run, but it will probably get you up and running more quickly.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "705",
    "url": "https://stackoverflow.com/questions/705",
    "title": "Embedded Database for .net that can run off a network",
    "text:": "<p>I was (and still am) looking for an embedded database to be used in a .net (c#) application. The caveat: The Application (or at least the database) is stored on a Network drive, but only used by 1 user at a time.</p>\n\n<p>Now, my first idea was <a href=\"http://www.microsoft.com/sql/editions/compact/default.mspx\" rel=\"noreferrer\">SQL Server Compact edition</a>. That is really nicely integreated, but it can not run off a network.</p>\n\n<p><a href=\"http://www.firebirdsql.org/dotnetfirebird/\" rel=\"noreferrer\">Firebird</a> seems to have the same issue, but the .net Integration seems to be not really first-class and is largely undocumented.</p>\n\n<p><a href=\"http://www.codegear.com/products/blackfish\" rel=\"noreferrer\">Blackfish SQL</a> looks interesting, but there is no trial of the .net Version. Pricing is also OK.</p>\n\n<p>Any other suggestions of something that works well with .net <strong>and</strong> runs off a network without the need of actually installing a server software?</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [
        "Dim catalog as New ADOX.Catalog\nCatalog.Create(\"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=\\\\server\\path\\to\\db.mdb\")\n"
      ],
      [
        "using FirebirdSql.Data.FirebirdClient;\n\npublic static IDbConnection MyConnection()\n{\n    FbConnection cn = new FbConnection(\"...\");\n    return cn;\n}\n"
      ],
      [],
      [],
      [],
      []
    ],
    "votes:": "36",
    "tags": "<.net><database><embedded-database>",
    "AcceptedAnswerId": "707",
    "answers": [
      {
        "id": "223132",
        "title": "",
        "text": "<p>I'd recommend Advantage Database Server (www.advantagedatabase.com).  It's a mature embedded DB with great support and accessible from many development languages in addition to .NET.  The \"local\" version is free, runs within your application in the form of a DLL, requires no installation on the server/network share, and supports all major DB features.  You can store the DB and/or application files all on the network; it doesn't care where the data is.</p>\n\n<p>Disclaimer:  I am an engineer in the ADS R&amp;D group.  I promise, it rocks :)</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7013",
        "title": "",
        "text": "<p>There's also <a href=\"http://www.paradigmasoft.com/en/products/developer/adk/VNET\" rel=\"nofollow noreferrer\">Valentina</a>. I cam e across this product when I was working on some Real Basic project. The RB version is very good.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "707",
        "title": "",
        "text": "<p><a href=\"http://www.sqlite.org/\" rel=\"noreferrer\">SQLite</a> came to my mind while reading your question, and I'm quite sure that it's possible to access it from a network drive <em>if</em> you keep yourself to the constraint of 1 user at a time.</p>\n\n<p><a href=\"http://web.archive.org/web/20100208133236/www.mikeduncan.com/sqlite-on-dotnet-in-3-mins/\" rel=\"noreferrer\">SQLite on .NET - Get up and running in 3 minutes</a></p>\n",
        "votes": "26",
        "tags": "",
        "accepted": true
      },
      {
        "id": "779214",
        "title": "",
        "text": "<p>A little late to the post here.. And <a href=\"http://www.gibraltarsoftware.com/VistaDB\" rel=\"nofollow noreferrer\">VistaDB</a> is already mentioned, but I wanted to point out that VistaDB is 100% managed (since your post was tagged .net).  It can run from a shared network drive, and is 1MB xcopy deployed.</p>\n\n<p>Since you mention SQL CE, we also support T-SQL Syntax and datatypes (in fact more than SQL CE) and have updateable views, TSQL Procs and other things missing in SQL CE.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "737",
        "title": "",
        "text": "<p>It sounds like ADO/Access is perfect for your needs. It's baked into the MS stack, well seasoned, and multi-user.</p>\n\n<p>You can programatically create a DB like so:</p>\n\n<pre><code>Dim catalog as New ADOX.Catalog\nCatalog.Create(\"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=\\\\server\\path\\to\\db.mdb\")\n</code></pre>\n\n<p>You can then use standard ADO.NET methods to interact with the database.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6751",
        "title": "",
        "text": "<p>You can use the firebird embeded, it's just a dll that you will need to ship with you app.</p>\n\n<p>About things being undocumented, that's not really true, the firebird .NET driver implements the ADO Interfaces, so if you know ADO you can work with Firebird, basically instead of SQLConnection you will use FBConnection and so on, but my advice is to write a data access layer and use just interfaces on your code, something like this:</p>\n\n<pre><code>using FirebirdSql.Data.FirebirdClient;\n\npublic static IDbConnection MyConnection()\n{\n    FbConnection cn = new FbConnection(\"...\");\n    return cn;\n}\n</code></pre>\n\n<p>This example is very simple, but you will not need much more than that.</p>\n\n<p>We use firebird for our all application without any problems, you should at least try it out.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "710",
        "title": "",
        "text": "<p>Check out <a href=\"http://www.gibraltarsoftware.com/VistaDB\" rel=\"nofollow noreferrer\">VistaDB</a>. They have a very good product, the server version (3.4) is in Beta and is very close to release.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2844264",
        "title": "",
        "text": "<p>Have you considered an OODB? From the various open sources alternatives I recommend <a href=\"http://www.db4o.com\" rel=\"nofollow noreferrer\">db4o</a> (sorry for the self promotion :)) which can run either embedded or in client/server mode.</p>\n\n<p>Best</p>\n\n<p>Adriano</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "779273",
        "title": "",
        "text": "<p>I'm puzzled. </p>\n\n<p>You're asking for an embeded database - where the database itself is stored on the server. that translates to storing the data file on a network share. You then say that SQL Compact Edition won't work... except that if one looks at this document:</p>\n\n<p>Word Document:<br>\n<a href=\"http://download.microsoft.com/download/A/4/7/A47B7B0E-976D-4F49-B15D-F02ADE638EBE/Compact_Express_Comparison.doc\" rel=\"nofollow noreferrer\">Choosing Between SQL Server 2005 Compact Edition and SQL Server 2005 Express Edition </a></p>\n\n<p>On page 8 you have a nice big green tick next to \"Data file storage on a network share\".</p>\n\n<p>So it seems to me that your first thought was the right one.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "730",
        "title": "",
        "text": "<p>Why not use <a href=\"http://www.microsoft.com/sql/editions/express/default.mspx\" rel=\"nofollow noreferrer\">SQL Server 2005 Express edition</a>? </p>\n\n<p>It really depends on what you mean by \"embedded\" - but you can redistribute SQLServer2005E with your applications and the user never has to know it's there.</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/ms165660.aspx\" rel=\"nofollow noreferrer\">Embedding SQL Server Express in Applications</a></p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/bb264562.aspx\" rel=\"nofollow noreferrer\">Embedding SQL Server Express into Custom Applications</a></p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "709",
    "url": "https://stackoverflow.com/questions/709",
    "title": ".NET Testing Framework Advice",
    "text:": "<p>I'm looking to introduce a unit testing framework into the mix at my job.  We're using Visual Studio 2005 (though we may be moving to 2008 within the next 6 months) and work primarily in C#.  If the framework has some kind of IDE integration that would be best, but I'm open to frameworks that don't have integration but are still relatively simple to get set up.  I'm going to get resistance to it one way or another, so if I can make sure what I'm pushing isn't a pain in the neck, that would help my case.</p>\n\n<p>The obvious choice from the research I've done so far points to nUnit, but I'd like to get the impressions of someone who's actually used it before recommending it to my team.</p>\n\n<p>Has anyone out there used nUnit?  If so, are there any pitfalls or limitations of which I should be aware?  Are there other good options out there?  If so, if you've used both nUnit at that, I'd greatly appreciate an idea of the strengths and weaknesses of them.</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "52",
    "tags": "<c#><.net><visual-studio><unit-testing>",
    "AcceptedAnswerId": "713",
    "answers": [
      {
        "id": "71134",
        "title": "",
        "text": "<p>When I started unit testing I started with <code>NUnit</code> as it is simple to set up and use, currently I am using the built in test runner that comes with <code>Resharper</code>, that way I can easily flip between code and test results.\nIncidently <code>NUnit</code> detects when you have compiled your code so you do not need to do any refresh in <code>NUnit</code>. <code>Resharper</code> automatically does a build when you choose to run a specific test.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "712",
        "title": "",
        "text": "<p>Scott Hanselman had a good Podcast about this, entitled:</p>\n\n<blockquote>\n  <p>\"The Past, Present and Future of .NET Unit Testing Frameworks\"</p>\n</blockquote>\n\n<p>:</p>\n\n<p><a href=\"http://www.hanselminutes.com/default.aspx?showID=130\" rel=\"noreferrer\">Hanselminutes #112</a></p>\n",
        "votes": "18",
        "tags": "",
        "accepted": false
      },
      {
        "id": "718",
        "title": "",
        "text": "<p><code>Visual Studio 2008</code> has a built in test project type that works in a similar way to NUnit, but obviously has much tighter integration with <code>Visual Studio</code> (can run on every build and shows the results in a similar way to the conversion results page when upgrading solution files), but it is obviously not as mature as NUnit as it's pretty new and I'm not sure about how it handles mocking.</p>\n\n<p>But it would be worth looking into when your team moves to <code>VS2008</code></p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "763178",
        "title": "",
        "text": "<p>Try also <a href=\"http://research.microsoft.com/en-us/projects/Pex/\" rel=\"nofollow noreferrer\">PEX</a> tool\nIt Microsoft's own probably soon to be integrated into VSTS \nand does support <code>NUnit</code>  , <code>MbUnit</code> and <code>xUnit.net</code> </p>\n\n<p>I use also small Console Application for testing one class or small library. You could copy paste the code from <a href=\"http://ysgitdiary.blogspot.com/2009/04/example-console-application-in-c-ready.html\" rel=\"nofollow noreferrer\">here</a></p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "71142",
        "title": "",
        "text": "<p>The built in unit testing in <code>VS 2008</code> is alright, but its difficult to integrate with <code>CruiseControl.net</code>, certainly a lot harder than normal <code>NUnit</code>. </p>\n\n<p>So go with <code>NUnit</code> if you plan to have nice automated tests.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "798",
        "title": "",
        "text": "<p><code>mbUnit</code> is worth alook, it has a set of features comparable to <code>NUnit</code>, it has its own GUI, or can be integrated into <code>VS</code> if you have <code>Resharper</code>. I would also recommend <code>Rhino Mocks</code> if you are doing any sort of <code>TDD</code>.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "4290",
        "title": "",
        "text": "<p>I would say mbUnit also, I like being able to run a single test many times just by specifying inputs and result right above the test function.  Horrible description of what I mean so <a href=\"http://www.hanselman.com/blog/MbUnitUnitTestingOnCrack.aspx\" rel=\"nofollow noreferrer\">here is a link that shows you what I mean.</a></p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "157451",
        "title": "",
        "text": "<p>We've been using <a href=\"http://www.codeplex.com/xunit\" rel=\"nofollow noreferrer\">xUnit.net</a>.  It seems to combine all the best of <code>nUnit</code>, <code>mbUnit</code> and <code>MSTest</code>.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6164060",
        "title": "",
        "text": "<p><code>VSTT 2010</code> should be a good bet if you are looking for functional test automation. Web Services Testing, <code>UI</code> testing, Biztalk testing and Data Driven Testing Support. Please look at <a href=\"http://msdn.microsoft.com/en-us/library/ee338734%28v=vs.90%29.aspx\" rel=\"nofollow\">VSTT</a></p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "713",
        "title": "",
        "text": "<p>I think <code>NUnit</code> <strong>is</strong> your best bet. With <code>TestDriven.NET</code>, you get great integration within <code>VS.NET</code>. (Resharper also has a unit test runner if you're using it).  <code>NUnit</code> it simple to use and follows an established paradigm. You'll also find plenty of projects/tutorials/guides using it which always helps.</p>\n\n<p>Your other main choice is probably MBUnit, which is more and more position itself as the <code>BDD</code> framework of choice (in conjunction with Gallio <a href=\"http://www.gallio.org\" rel=\"noreferrer\">http://www.gallio.org</a>).</p>\n",
        "votes": "44",
        "tags": "",
        "accepted": true
      }
    ]
  },
  {
    "id:": "717",
    "url": "https://stackoverflow.com/questions/717",
    "title": "Why doesn't VFP .NET OLEdb provider work in 64 bit Windows?",
    "text:": "<p>I wrote a windows service using VB that read some legacy data from Visual Foxpro Databases to be inserted in SQL 2005. The problem is this use to run fine in Windows server 2003 32-Bits, but the client recently moved to Windows 2003 64-Bits and now the service won't work. I'm getting a message the the VFP .NET OLEdb provider is not found. I researched and everything seems to point out that there is no solution. Any Help, please...</p>\n",
    "codes": [
      [],
      [],
      []
    ],
    "votes:": "29",
    "tags": "<.net><sql-server-2005><oledb><legacy><visual-foxpro>",
    "AcceptedAnswerId": "799",
    "answers": [
      {
        "id": "877",
        "title": "",
        "text": "<p>You'll need to compile with the target <code>CPU</code> set to <code>x86</code> to force your code to use the <code>32 bit</code> version of the <code>VFP OLE Db provider</code>.  </p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/vfoxpro/bb190293.aspx\" rel=\"noreferrer\">Microsoft has stated</a> that there are no plans on releasing a <code>64-bit</code> edition of the Visual FoxPro OLE Db provider.  For what's worth, Microsoft has <a href=\"http://msdn.microsoft.com/en-us/vfoxpro/bb308952.aspx\" rel=\"noreferrer\">also stated</a> that VFP 9 is the final version of <code>Visual FoxPro</code> and support will end in <code>2015</code>.  If you need the <code>OLE DB</code> provider for <code>VFP 9</code>, you can get it <a href=\"http://www.microsoft.com/downloads/details.aspx?FamilyId=E1A87D8F-2D58-491F-A0FA-95A3289C5FD4&amp;displaylang=en\" rel=\"noreferrer\">here</a>.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "4074",
        "title": "",
        "text": "<p><code>Sybase Anywhere</code> has a <code>OLEDB provider</code> for <code>VFP</code> tables. It states in the page that the server supports <code>64 bit Windows</code>, don't know about the <code>OLEDB provider</code>:</p>\n\n<blockquote>\n  <p>Support 64-bit Windows and Linux Servers</p>\n  \n  <p>In order to further enhance scalability, support for the x86_64 architecture was added to the Advantage Database Servers for Windows and Linux. On computers with an x86_64 processor and a 64 bit Operating System the Advantage Database Server will now be able to use memory in excess of 4GB. The extra memory will allow more users to access the server concurrently and increase the amount of information the server can cache when processing queries.</p>\n</blockquote>\n\n<p>I didn't try it by myself, but <a href=\"http://weblogs.foxite.com/andykramek/archive/2008/01/05/5530.aspx\" rel=\"nofollow noreferrer\">some people</a> of the VFP newsgroups reports that it works OK.<p>\n<a href=\"http://devzone.advantagedatabase.com/dz/webhelp/Advantage9.0/Advantage.htm\" rel=\"nofollow noreferrer\">Link to the Advantage Server / VFP Page</a></p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "799",
        "title": "",
        "text": "<p>Have you tried changing the target CPU to <code>x86</code> instead of <code>\"Any CPU\"</code> in the advanced compiler options? I know that this solves some problems with other <code>OLEDB</code> providers by forcing the use of the 32-bit version.</p>\n",
        "votes": "16",
        "tags": "",
        "accepted": true
      }
    ]
  },
  {
    "id:": "742",
    "url": "https://stackoverflow.com/questions/742",
    "title": "Class views in Django",
    "text:": "<p><a href=\"http://www.djangoproject.com/\" rel=\"noreferrer\">Django</a> view points to a function, which can be a problem if you want to change only a bit of functionality. Yes, I could have million keyword arguments and even more if statements in the function, but I was thinking more of an object oriented approach.</p>\n\n<p>For example, I have a page that displays a user. This page is very similar to page that displays a group, but it's still not so similar to just use another data model. Group also has members etc...</p>\n\n<p>One way would be to point views to class methods and then extend that class. Has anyone tried this approach or has any other idea? </p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      [
        "class CallableViewClass(type):\n    def __call__(cls, *args, **kwargs):\n        if args and isinstance(args[0], HttpRequest):\n            instance = super(CallableViewClass, cls).__call__()\n            return instance.__call__(*args, **kwargs)\n        else:\n            instance = super(CallableViewClass, cls).__call__(*args, **kwargs)\n            return instance\n\n\nclass View(object):\n    __metaclass__ = CallableViewClass\n\n    def __call__(self, request, *args, **kwargs):\n        if hasattr(self, request.method):\n            handler = getattr(self, request.method)\n            if hasattr(handler, '__call__'):\n                return handler(request, *args, **kwargs)\n        return HttpResponseBadRequest('Method Not Allowed', status=405)\n",
        "class MyView(View):\n    def __init__(self, arg=None):\n        self.arg = arg\n    def GET(request):\n        return HttpResponse(self.arg or 'no args provided')\n\n@login_required\nclass MyOtherView(View):\n    def POST(request):\n        pass\n\n# And all the following work as expected.\nurlpatterns = patterns(''\n    url(r'^myview1$', 'myapp.views.MyView', name='myview1'),\n    url(r'^myview2$', myapp.views.MyView, name='myview2'),\n    url(r'^myview3$', myapp.views.MyView('foobar'), name='myview3'),\n    url(r'^myotherview$', 'myapp.views.MyOtherView', name='otherview'),\n)\n"
      ],
      [],
      [],
      []
    ],
    "votes:": "54",
    "tags": "<python><django><views><oop>",
    "AcceptedAnswerId": "33957",
    "answers": [
      {
        "id": "33957",
        "title": "",
        "text": "<p>I've created and used my own generic view classes, defining <strong><code>__call__</code></strong> so an instance of the class is callable.  I really like it; while Django's generic views allow some customization through keyword arguments, OO generic views (if their behavior is split into a number of separate methods) can have much more fine-grained customization via subclassing, which lets me repeat myself a lot less.  (I get tired of rewriting the same create/update view logic anytime I need to tweak something Django's generic views don't quite allow).</p>\n\n<p>I've posted some code at <a href=\"http://www.djangosnippets.org/snippets/1009/\" rel=\"noreferrer\">djangosnippets.org</a>.</p>\n\n<p>The only real downside I see is the proliferation of internal method calls, which may impact performance somewhat. I don't think this is much of a concern; it's rare that Python code execution would be your performance bottleneck in a web app.</p>\n\n<p><strong>UPDATE</strong>: Django's own <a href=\"http://docs.djangoproject.com/en/dev/topics/class-based-views/\" rel=\"noreferrer\">generic views</a> are now class-based.</p>\n\n<p><strong>UPDATE</strong>: FWIW, I've changed my opinion on class-based views since this answer was written. After having used them extensively on a couple of projects, I feel they tend to lead to code that is satisfyingly DRY to write, but very hard to read and maintain later, because functionality is spread across so many different places, and subclasses are so dependent on every implementation detail of the superclasses and mixins. I now feel that <a href=\"https://docs.djangoproject.com/en/dev/ref/template-response/\" rel=\"noreferrer\">TemplateResponse</a> and view decorators is a better answer for decomposing view code.</p>\n",
        "votes": "43",
        "tags": "",
        "accepted": true
      },
      {
        "id": "27780",
        "title": "",
        "text": "<p>If you want to share common functionality between pages I suggest you look at custom tags. They're quite <a href=\"https://docs.djangoproject.com/en/1.1/howto/custom-template-tags/\" rel=\"nofollow noreferrer\">easy to create</a>, and are very powerful.</p>\n\n<p>Also, <a href=\"https://code.djangoproject.com/wiki/ExtendingTemplates\" rel=\"nofollow noreferrer\">templates can extend from other templates</a>. This allows you to have a base template to set up the layout of the page and to share this between other templates which fill in the blanks. You can nest templates to any depth; allowing you to specify the layout on separate groups of related pages in one place.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "27792",
        "title": "",
        "text": "<p>You can always create a class, override the <em><code>__call__</code></em> function and then point the URL file to an instance of the class. You can take a look at the <a href=\"http://code.djangoproject.com/browser/django/trunk/django/contrib/formtools/wizard.py\" rel=\"nofollow noreferrer\">FormWizard</a> class to see how this is done.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "8320",
        "title": "",
        "text": "<p>Unless you want to do something a little complex, using the generic views are the way to go.  They are far more powerful than their name implies, and if you are just displaying model data generic views will do the job.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "764",
        "title": "",
        "text": "<p>Sounds to me like you're trying to combine things that shouldn't be combined.  If you need to do different processing in your view depending on if it's a User or Group object you're trying to look at then you should use two different view functions.</p>\n\n<p>On the other hand there can be common idioms you'd want to extract out of your object&#95;detail type views... perhaps you could use a decorator or just helper functions?</p>\n\n<p>-Dan</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2921293",
        "title": "",
        "text": "<p>I needed to use class based views, but I wanted to be able to use the full name of the class in my URLconf without always having to instantiate the view class before using it. What helped me was a surprisingly simple metaclass:</p>\n\n<pre><code>class CallableViewClass(type):\n    def __call__(cls, *args, **kwargs):\n        if args and isinstance(args[0], HttpRequest):\n            instance = super(CallableViewClass, cls).__call__()\n            return instance.__call__(*args, **kwargs)\n        else:\n            instance = super(CallableViewClass, cls).__call__(*args, **kwargs)\n            return instance\n\n\nclass View(object):\n    __metaclass__ = CallableViewClass\n\n    def __call__(self, request, *args, **kwargs):\n        if hasattr(self, request.method):\n            handler = getattr(self, request.method)\n            if hasattr(handler, '__call__'):\n                return handler(request, *args, **kwargs)\n        return HttpResponseBadRequest('Method Not Allowed', status=405)\n</code></pre>\n\n<p>I can now both instantiate view classes and use the instances as view functions, OR I can simply point my URLconf to my class and have the metaclass instantiate (and call) the view class for me. This works by checking the first argument to <code>__call__</code> \u2013 if it's a <code>HttpRequest</code>, it must be an actual HTTP request because it would be nonsense to attept to instantiate a view class with an <code>HttpRequest</code> instance.</p>\n\n<pre><code>class MyView(View):\n    def __init__(self, arg=None):\n        self.arg = arg\n    def GET(request):\n        return HttpResponse(self.arg or 'no args provided')\n\n@login_required\nclass MyOtherView(View):\n    def POST(request):\n        pass\n\n# And all the following work as expected.\nurlpatterns = patterns(''\n    url(r'^myview1$', 'myapp.views.MyView', name='myview1'),\n    url(r'^myview2$', myapp.views.MyView, name='myview2'),\n    url(r'^myview3$', myapp.views.MyView('foobar'), name='myview3'),\n    url(r'^myotherview$', 'myapp.views.MyOtherView', name='otherview'),\n)\n</code></pre>\n\n<p>(I posted a snippet for this at <a href=\"http://djangosnippets.org/snippets/2041/\" rel=\"noreferrer\">http://djangosnippets.org/snippets/2041/</a>)</p>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "26250049",
        "title": "",
        "text": "<p>You can use the Django Generic Views. You can easily achieve desired functionality thorough Django generic Views</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "123090",
        "title": "",
        "text": "<p>Generic views will usually be the way to go, but ultimately you're free to handle URLs however you want. FormWizard does things in a class-based way, as do some apps for RESTful APIs.</p>\n\n<p>Basically with a URL you are given a bunch of variables and place to provide a callable, what callable you provide is completely up to you - the standard way is to provide a function - but ultimately Django puts no restrictions on what you do.</p>\n\n<p>I do agree that a few more examples of how to do this would be good, FormWizard is probably the place to start though.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "4572",
        "title": "",
        "text": "<p>If you're simply displaying data from models, why not use the <a href=\"https://docs.djangoproject.com/en/1.2/ref/generic-views/\" rel=\"nofollow noreferrer\">Django Generic Views</a>? They're designed to let you easy show data from a model without having to write your own view and stuff about mapping URL paramaters to views, fetching data, handling edge cases, rendering output, etc.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "746",
    "url": "https://stackoverflow.com/questions/746",
    "title": "Format string to title case",
    "text:": "<p>How do I format a string to <a href=\"http://www.grammar-monster.com/lessons/capital_letters_title_case.htm\" rel=\"noreferrer\">title case</a>?</p>\n",
    "codes": [
      [
        "$HelloWorld = ucwords('hello world');\n"
      ],
      [
        "public static string ToTitleCaseInvariant(string str)\n{\n    return System.Threading.Thread.CurrentThread.CurrentCulture.TextInfo.ToTitleCase(str);\n}\n"
      ],
      [
        "'some string here'.gsub(/\\b\\w/){$&.upcase}\n"
      ],
      [],
      [
        "my $tc_string = join ' ', map { ucfirst($\\_) } split /\\s+/, $string;\n"
      ],
      [
        "#include <iostream>\n#include <string>\n#include <vector>\n#include <cctype>\n#include <set>\n\nusing namespace std;\n\ntypedef vector<pair<string, int> > subDivision;\nset<string> nonUpperCaseAble;\n\nsubDivision split(string & cadena, string delim = \" \"){\n    subDivision retorno;\n    int pos, inic = 0;\n    while((pos = cadena.find_first_of(delim, inic)) != cadena.npos){\n        if(pos-inic > 0){\n            retorno.push_back(make_pair(cadena.substr(inic, pos-inic), inic));\n        }\n        inic = pos+1;\n    }\n    if(inic != cadena.length()){\n        retorno.push_back(make_pair(cadena.substr(inic, cadena.length() - inic), inic));\n    }\n    return retorno;\n}\n\nstring firstUpper (string & pal){\n    pal[0] = toupper(pal[0]);\n    return pal;\n}\n\nint main()\n{\n    nonUpperCaseAble.insert(\"the\");\n    nonUpperCaseAble.insert(\"of\");\n    nonUpperCaseAble.insert(\"in\");\n    // ...\n\n    string linea, resultado;\n    cout << \"Type the line you want to convert: \" << endl;\n    getline(cin, linea);\n\n    subDivision trozos = split(linea);\n    for(int i = 0; i < trozos.size(); i++){\n        if(trozos[i].second == 0)\n        {\n            resultado += firstUpper(trozos[i].first);\n        }\n        else if (linea[trozos[i].second-1] == ' ')\n        {\n            if(nonUpperCaseAble.find(trozos[i].first) == nonUpperCaseAble.end())\n            {\n                resultado += \" \" + firstUpper(trozos[i].first);\n            }else{\n                resultado += \" \" + trozos[i].first;\n            }\n        }\n        else\n        {\n            resultado += trozos[i].first;\n        }       \n    }\n\n    cout << resultado << endl;\n    getchar();\n    return 0;\n}\n"
      ],
      [],
      [
        "    public string TitleCase(string str)\n    {\n        return Regex.Replace(str, @\"\\w+\", (m) =>\n        {\n            string tmp = m.Value;\n            return char.ToUpper(tmp[0]) + tmp.Substring(1, tmp.Length - 1).ToLower();\n        });\n    }\n"
      ],
      [],
      [
        "public static string ExcelProper(string s) {\n    bool upper_needed = true;\n    string result = \"\";\n    foreach (char c in s) {\n        bool is_letter = Char.IsLetter(c);\n        if (is_letter)\n            if (upper_needed)\n                result += Char.ToUpper(c);\n            else\n                result += Char.ToLower(c);\n        else\n            result += c;\n        upper_needed = !is_letter;\n    }\n    return result;\n}\n"
      ],
      [
        "public static string ToTitleCaseInvariant(string targetString)\n{\n    return System.Threading.Thread.CurrentThread.CurrentCulture.TextInfo.ToTitleCase(targetString);\n}\n"
      ],
      [
        "$string =~ s/(\\w+)/\\u\\L$1/g;\n"
      ],
      [],
      [
        "using System.Globalization;  \nusing System.Threading;  \nprotected void Page_Load(object sender, EventArgs e)  \n{  \n  CultureInfo cultureInfo   = Thread.CurrentThread.CurrentCulture;  \n  TextInfo textInfo = cultureInfo.TextInfo;  \n  Response.Write(textInfo.ToTitleCase(\"WelcometoHome<br />\"));  \n  Response.Write(textInfo.ToTitleCase(\"Welcome to Home\"));  \nResponse.Write(textInfo.ToTitleCase(\"Welcome@to$home<br/>\").Replace(\"@\",\"\").Replace(\"$\", \"\"));  \n}\n"
      ],
      [
        "string sourceName = txtTextBox.Text.ToLower();\nstring destinationName = sourceName[0].ToUpper();\n\nfor (int i = 0; i < (sourceName.Length - 1); i++) {\n  if (sourceName[i + 1] == \"\")  {\n    destinationName += sourceName[i + 1];\n  }\n  else {\n    destinationName += sourceName[i + 1];\n  }\n}\ntxtTextBox.Text = desinationName;\n"
      ],
      [],
      [
        "public String titleCase(String str) {\n    char[] chars = str.toCharArray();\n    for (int i = 0; i < chars.length; i++) {\n        if (i == 0) {\n            chars[i] = Character.toUpperCase(chars[i]);\n        } else if ((i + 1) < chars.length && chars[i] == ' ') {\n            chars[i + 1] = Character.toUpperCase(chars[i + 1]);\n        }\n    }\n    return new String(chars);\n}\n"
      ],
      [
        "\nconvert first character to uppercase.\nfor each character in string,\n    if the previous character is whitespace,\n        convert character to uppercase.\n"
      ],
      []
    ],
    "votes:": "30",
    "tags": "<string><language-agnostic><format><title-case>",
    "AcceptedAnswerId": "",
    "answers": [
      {
        "id": "749",
        "title": "",
        "text": "<p>In what language?</p>\n\n<p>In PHP it is:</p>\n\n<p><a href=\"http://php.net/manual/en/function.ucwords.php\" rel=\"nofollow noreferrer\">ucwords()</a></p>\n\n<p>example:</p>\n\n<pre><code>$HelloWorld = ucwords('hello world');\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "47831875",
        "title": "",
        "text": "<p>Here is a simple example of how to do it :</p>\n\n<pre><code>public static string ToTitleCaseInvariant(string str)\n{\n    return System.Threading.Thread.CurrentThread.CurrentCulture.TextInfo.ToTitleCase(str);\n}\n</code></pre>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "771",
        "title": "",
        "text": "<p>Here's a Perl solution <a href=\"http://daringfireball.net/2008/05/title_case\" rel=\"noreferrer\">http://daringfireball.net/2008/05/title_case</a></p>\n\n<p>Here's a Ruby solution <a href=\"http://frankschmitt.org/projects/title-case\" rel=\"noreferrer\">http://frankschmitt.org/projects/title-case</a></p>\n\n<p>Here's a Ruby one-liner solution: <a href=\"http://snippets.dzone.com/posts/show/4702\" rel=\"noreferrer\">http://snippets.dzone.com/posts/show/4702</a></p>\n\n<pre><code>'some string here'.gsub(/\\b\\w/){$&amp;.upcase}\n</code></pre>\n\n<p>What the one-liner is doing is using a regular expression substitution of the first character of each word with the uppercase version of it.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "795",
        "title": "",
        "text": "<p>I would be wary of automatically upcasing all whitespace-preceded-words in scenarios where I would run the risk of attracting the fury of nitpickers.</p>\n\n<p>I would at least consider implementing a dictionary for exception cases like articles and conjunctions. Behold: </p>\n\n<blockquote>\n  <p>\"Beauty and the Beast\"</p>\n</blockquote>\n\n<p>And when it comes to proper nouns, the thing gets much uglier.</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "71282",
        "title": "",
        "text": "<p>With perl you could do this:</p>\n\n<pre><code>my $tc_string = join ' ', map { ucfirst($\\_) } split /\\s+/, $string;\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "151181",
        "title": "",
        "text": "<p>Here you have a C++ version. It's got a set of non uppercaseable words like prononuns and prepositions. However, I would not recommend automating this process if you are to deal with important texts.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;cctype&gt;\n#include &lt;set&gt;\n\nusing namespace std;\n\ntypedef vector&lt;pair&lt;string, int&gt; &gt; subDivision;\nset&lt;string&gt; nonUpperCaseAble;\n\nsubDivision split(string &amp; cadena, string delim = \" \"){\n    subDivision retorno;\n    int pos, inic = 0;\n    while((pos = cadena.find_first_of(delim, inic)) != cadena.npos){\n        if(pos-inic &gt; 0){\n            retorno.push_back(make_pair(cadena.substr(inic, pos-inic), inic));\n        }\n        inic = pos+1;\n    }\n    if(inic != cadena.length()){\n        retorno.push_back(make_pair(cadena.substr(inic, cadena.length() - inic), inic));\n    }\n    return retorno;\n}\n\nstring firstUpper (string &amp; pal){\n    pal[0] = toupper(pal[0]);\n    return pal;\n}\n\nint main()\n{\n    nonUpperCaseAble.insert(\"the\");\n    nonUpperCaseAble.insert(\"of\");\n    nonUpperCaseAble.insert(\"in\");\n    // ...\n\n    string linea, resultado;\n    cout &lt;&lt; \"Type the line you want to convert: \" &lt;&lt; endl;\n    getline(cin, linea);\n\n    subDivision trozos = split(linea);\n    for(int i = 0; i &lt; trozos.size(); i++){\n        if(trozos[i].second == 0)\n        {\n            resultado += firstUpper(trozos[i].first);\n        }\n        else if (linea[trozos[i].second-1] == ' ')\n        {\n            if(nonUpperCaseAble.find(trozos[i].first) == nonUpperCaseAble.end())\n            {\n                resultado += \" \" + firstUpper(trozos[i].first);\n            }else{\n                resultado += \" \" + trozos[i].first;\n            }\n        }\n        else\n        {\n            resultado += trozos[i].first;\n        }       \n    }\n\n    cout &lt;&lt; resultado &lt;&lt; endl;\n    getchar();\n    return 0;\n}\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3003038",
        "title": "",
        "text": "<p><code>http://titlecase.com/</code> has an <a href=\"http://titlecase.com\" rel=\"nofollow noreferrer\">API</a></p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3003080",
        "title": "",
        "text": "<p>In Silverlight there is no <code>ToTitleCase</code> in the <code>TextInfo</code> class.</p>\n\n<p>Here's a simple regex based way. </p>\n\n<p>Note: Silverlight doesn't have precompiled regexes, but for me this performance loss is not an issue.</p>\n\n<pre><code>    public string TitleCase(string str)\n    {\n        return Regex.Replace(str, @\"\\w+\", (m) =&gt;\n        {\n            string tmp = m.Value;\n            return char.ToUpper(tmp[0]) + tmp.Substring(1, tmp.Length - 1).ToLower();\n        });\n    }\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1595",
        "title": "",
        "text": "<blockquote>\n  <p>To capatilise it in, say, C - use the ascii codes (<a href=\"http://www.asciitable.com/\" rel=\"noreferrer\">http://www.asciitable.com/</a>) to find the integer value of the char and subtract 32 from it.</p>\n</blockquote>\n\n<p>This is a poor solution if you ever plan to accept characters beyond a-z and A-Z.</p>\n\n<p>For instance: ASCII 134: \u00e5, ASCII 143: \u00c5.<br>\nUsing arithmetic gets you: ASCII 102: f</p>\n\n<p>Use library calls, don't assume you can use integer arithmetic on your characters to get back something useful.  Unicode is <a href=\"http://www.joelonsoftware.com/articles/Unicode.html\" rel=\"noreferrer\">tricky</a>.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5174338",
        "title": "",
        "text": "<p>Excel-like PROPER:</p>\n\n<pre><code>public static string ExcelProper(string s) {\n    bool upper_needed = true;\n    string result = \"\";\n    foreach (char c in s) {\n        bool is_letter = Char.IsLetter(c);\n        if (is_letter)\n            if (upper_needed)\n                result += Char.ToUpper(c);\n            else\n                result += Char.ToLower(c);\n        else\n            result += c;\n        upper_needed = !is_letter;\n    }\n    return result;\n}\n</code></pre>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "747",
        "title": "",
        "text": "<p>Here is a simple static method to do this in C#:</p>\n\n<pre><code>public static string ToTitleCaseInvariant(string targetString)\n{\n    return System.Threading.Thread.CurrentThread.CurrentCulture.TextInfo.ToTitleCase(targetString);\n}\n</code></pre>\n",
        "votes": "18",
        "tags": "",
        "accepted": false
      },
      {
        "id": "151018",
        "title": "",
        "text": "<p>In Perl:</p>\n\n<pre><code>$string =~ s/(\\w+)/\\u\\L$1/g;\n</code></pre>\n\n<p>That's even in the FAQ.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "13449709",
        "title": "",
        "text": "<p>Here's an implementation in Python: <a href=\"https://launchpad.net/titlecase.py\" rel=\"nofollow\">https://launchpad.net/titlecase.py</a></p>\n\n<p>And a port of this implementation that I've just done in C++: <a href=\"http://codepad.org/RrfcsZzO\" rel=\"nofollow\">http://codepad.org/RrfcsZzO</a></p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "58643270",
        "title": "",
        "text": "<p>In C#</p>\n\n<pre><code>using System.Globalization;  \nusing System.Threading;  \nprotected void Page_Load(object sender, EventArgs e)  \n{  \n  CultureInfo cultureInfo   = Thread.CurrentThread.CurrentCulture;  \n  TextInfo textInfo = cultureInfo.TextInfo;  \n  Response.Write(textInfo.ToTitleCase(\"WelcometoHome&lt;br /&gt;\"));  \n  Response.Write(textInfo.ToTitleCase(\"Welcome to Home\"));  \nResponse.Write(textInfo.ToTitleCase(\"Welcome@to$home&lt;br/&gt;\").Replace(\"@\",\"\").Replace(\"$\", \"\"));  \n}\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1861303",
        "title": "",
        "text": "<p>I think using the CultureInfo is not always reliable, this the the simple and handy way to manipulate string manually:</p>\n\n<pre><code>string sourceName = txtTextBox.Text.ToLower();\nstring destinationName = sourceName[0].ToUpper();\n\nfor (int i = 0; i &lt; (sourceName.Length - 1); i++) {\n  if (sourceName[i + 1] == \"\")  {\n    destinationName += sourceName[i + 1];\n  }\n  else {\n    destinationName += sourceName[i + 1];\n  }\n}\ntxtTextBox.Text = desinationName;\n</code></pre>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3003034",
        "title": "",
        "text": "<p>There is a built-in formula <code>PROPER(n)</code> in Excel.</p>\n\n<p>Was quite pleased to see I didn't have to write it myself!</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "35744634",
        "title": "",
        "text": "<p>In Java, you can use the following code.</p>\n\n<pre><code>public String titleCase(String str) {\n    char[] chars = str.toCharArray();\n    for (int i = 0; i &lt; chars.length; i++) {\n        if (i == 0) {\n            chars[i] = Character.toUpperCase(chars[i]);\n        } else if ((i + 1) &lt; chars.length &amp;&amp; chars[i] == ' ') {\n            chars[i + 1] = Character.toUpperCase(chars[i + 1]);\n        }\n    }\n    return new String(chars);\n}\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "751",
        "title": "",
        "text": "<p>Without using a ready-made function, a super-simple low-level algorithm to convert a string to title case:</p>\n\n<p><pre><code>\nconvert first character to uppercase.\nfor each character in string,\n    if the previous character is whitespace,\n        convert character to uppercase.\n</pre></code></p>\n\n<p>This asssumes the \"convert character to uppercase\" will do that correctly regardless of whether or not the character is case-sensitive (e.g., '+').</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "754",
        "title": "",
        "text": "<p>If the language you are using has a supported method/function then just use that (as in the C# <code>ToTitleCase</code> method)</p>\n\n<p>If it does not, then you will want to do something like the following:  </p>\n\n<ol>\n<li>Read in the string  </li>\n<li>Take the first word  </li>\n<li>Capitalize the first letter of that word <sup>1</sup></li>\n<li>Go forward and find the next word  </li>\n<li>Go to 3 if not at the end of the string, otherwise exit  </li>\n</ol>\n\n<p><sup>1</sup> To capitalize it in, say, C - use the <a href=\"http://www.asciitable.com\" rel=\"nofollow noreferrer\">ascii codes</a> to find the integer value of the char and subtract 32 from it.</p>\n\n<p>There would need to be much more error checking in the code (ensuring valid letters etc.), and the \"Capitalize\" function will need to impose some sort of \"title-case scheme\" on the letters to check for words that do not need to be capatilised ('and', 'but' etc. <a href=\"http://answers.google.com/answers/threadview?id=349913\" rel=\"nofollow noreferrer\">Here</a> is a good scheme)</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "752",
    "url": "https://stackoverflow.com/questions/752",
    "title": "How to create a new object instance from a Type",
    "text:": "<p>One may not always know the <code>Type</code> of an object at compile-time, but may need to create an instance of the <code>Type</code>.  </p>\n\n<p>How do you get a new object instance from a <code>Type</code>?</p>\n",
    "codes": [
      [
        "Public Function CloneObject(Of T As New)(ByVal src As T) As T\n    Dim result As T = Nothing\n    Dim cloneable = TryCast(src, ICloneable)\n    If cloneable IsNot Nothing Then\n        result = cloneable.Clone()\n    Else\n        result = New T\n        CopySimpleProperties(src, result, Nothing, \"clone\")\n    End If\n    Return result\nEnd Function\n",
        "Public Function CloneObject(ByVal src As Object) As Object\n    Dim result As Object = Nothing\n    Dim cloneable As ICloneable\n    Try\n        cloneable = TryCast(src, ICloneable)\n        If cloneable IsNot Nothing Then\n            result = cloneable.Clone()\n        Else\n            result = Activator.CreateInstance(src.GetType())\n            CopySimpleProperties(src, result, Nothing, \"clone\")\n        End If\n    Catch ex As Exception\n        Trace.WriteLine(\"!!! CloneObject(): \" & ex.Message)\n    End Try\n    Return result\nEnd Function\n"
      ],
      [
        "public static object GetNewObject(Type t)\n{\n    try\n    {\n        return t.GetConstructor(new Type[] { }).Invoke(new object[] { });\n    }\n    catch\n    {\n        return null;\n    }\n}\n",
        "public static T GetNewObject<T>()\n{\n    try\n    {\n        return (T)typeof(T).GetConstructor(new Type[] { }).Invoke(new object[] { });\n    }\n    catch\n    {\n        return default(T);\n    }\n}\n"
      ],
      [
        "public object GetInstance(string strNamesapace)\n{         \n     Type t = Type.GetType(strNamesapace); \n     return  Activator.CreateInstance(t);         \n}\n",
        "public object GetInstance(string strFullyQualifiedName)\n{\n     Type type = Type.GetType(strFullyQualifiedName);\n     if (type != null)\n         return Activator.CreateInstance(type);\n     foreach (var asm in AppDomain.CurrentDomain.GetAssemblies())\n     {\n         type = asm.GetType(strFullyQualifiedName);\n         if (type != null)\n             return Activator.CreateInstance(type);\n     }\n     return null;\n }\n",
        "object objClassInstance = GetInstance(\"Vehicles.Car\");\n"
      ],
      [],
      [
        "System.Runtime.Serialization.FormatterServices.GetSafeUninitializedObject()\n"
      ],
      [
        "ObjectType instance = \n    (ObjectType)System.Reflection.Assembly.GetExecutingAssembly().CreateInstance(\n        typeName: objectType.FulName, // string including namespace of the type\n        ignoreCase: false,\n        bindingAttr: BindingFlags.Default,\n        binder: null,  // use default binder\n        args: new object[] { args, to, constructor },\n        culture: null, // use CultureInfo from current thread\n        activationAttributes: null\n    );\n",
        "ObjectType instance = \n    (ObjectType)System.ComponentModel.TypeDescriptor.CreateInstance(\n        provider: null, // use standard type description provider, which uses reflection\n        objectType: objectType,\n        argTypes: new Type[] { types, of, args },\n        args: new object[] { args, to, constructor }\n    );\n"
      ],
      [
        "private T Create<T>() where T : class, new()\n{\n    return new T();\n}\n"
      ],
      [
        "public AbstractType New\n{\n    get\n    {\n        return (AbstractType) Activator.CreateInstance(GetType());\n    }\n}\n"
      ],
      [
        "ObjectType instance = (ObjectType)Activator.CreateInstance(objectType);\n\nObjectType instance = (ObjectType)Activator.CreateInstance(\"MyAssembly\",\"MyNamespace.ObjectType\");\n"
      ],
      [
        "static readonly Func<X> YCreator = Expression.Lambda<Func<X>>(\n   Expression.New(typeof(Y).GetConstructor(Type.EmptyTypes))\n ).Compile();\n\nX x = YCreator();\n",
        "    Iterations: 5000000\n    00:00:00.8481762, Activator.CreateInstance(string, string)\n    00:00:00.8416930, Activator.CreateInstance(type)\n    00:00:06.6236752, ConstructorInfo.Invoke\n    00:00:00.1776255, Compiled expression\n    00:00:00.0462197, new\n",
        "    Iterations: 5000000\n    00:00:00.2659981, Activator.CreateInstance(string, string)\n    00:00:00.2603770, Activator.CreateInstance(type)\n    00:00:00.7478936, ConstructorInfo.Invoke\n    00:00:00.0700757, Compiled expression\n    00:00:00.0286710, new\n",
        "    Iterations: 5000000\n    00:00:00.3541501, Activator.CreateInstance(string, string)\n    00:00:00.3686861, Activator.CreateInstance(type)\n    00:00:00.9492354, ConstructorInfo.Invoke\n    00:00:00.0719072, Compiled expression\n    00:00:00.0229387, new\n",
        "    Iterations: 5000000\n    No args\n    00:00:00.3897563, Activator.CreateInstance(string assemblyName, string typeName)\n    00:00:00.3500748, Activator.CreateInstance(Type type)\n    00:00:01.0100714, ConstructorInfo.Invoke\n    00:00:00.1375767, Compiled expression\n    00:00:00.1337920, Compiled expression (type)\n    00:00:00.0593664, new\n    Single arg\n    00:00:03.9300630, Activator.CreateInstance(Type type)\n    00:00:01.3881770, ConstructorInfo.Invoke\n    00:00:00.1425534, Compiled expression\n    00:00:00.0717409, new\n",
        "Iterations: 5000000\nNo args\n00:00:00.3287835, Activator.CreateInstance(string assemblyName, string typeName)\n00:00:00.3122015, Activator.CreateInstance(Type type)\n00:00:00.8035712, ConstructorInfo.Invoke\n00:00:00.0692854, Compiled expression\n00:00:00.0662223, Compiled expression (type)\n00:00:00.0337862, new\nSingle arg\n00:00:03.8081959, Activator.CreateInstance(Type type)\n00:00:01.2507642, ConstructorInfo.Invoke\n00:00:00.0671756, Compiled expression\n00:00:00.0301489, new\n",
        "Iterations: 5000000\nNo args\n00:00:00.3226895, Activator.CreateInstance(string assemblyName, string typeName)\n00:00:00.2786803, Activator.CreateInstance(Type type)\n00:00:00.6183554, ConstructorInfo.Invoke\n00:00:00.0483217, Compiled expression\n00:00:00.0485119, Compiled expression (type)\n00:00:00.0434534, new\nSingle arg\n00:00:03.4389401, Activator.CreateInstance(Type type)\n00:00:01.0803609, ConstructorInfo.Invoke\n00:00:00.0554756, Compiled expression\n00:00:00.0462232, new\n",
        "static X CreateY_New()\n{\n    return new Y();\n}\n\nstatic X CreateY_New_Arg(int z)\n{\n    return new Y(z);\n}\n\nstatic X CreateY_CreateInstance()\n{\n    return (X)Activator.CreateInstance(typeof(Y));\n}\n\nstatic X CreateY_CreateInstance_String()\n{\n    return (X)Activator.CreateInstance(\"Program\", \"Y\").Unwrap();\n}\n\nstatic X CreateY_CreateInstance_Arg(int z)\n{\n    return (X)Activator.CreateInstance(typeof(Y), new object[] { z, });\n}\n\nprivate static readonly System.Reflection.ConstructorInfo YConstructor =\n    typeof(Y).GetConstructor(Type.EmptyTypes);\nprivate static readonly object[] Empty = new object[] { };\nstatic X CreateY_Invoke()\n{\n    return (X)YConstructor.Invoke(Empty);\n}\n\nprivate static readonly System.Reflection.ConstructorInfo YConstructor_Arg =\n    typeof(Y).GetConstructor(new[] { typeof(int), });\nstatic X CreateY_Invoke_Arg(int z)\n{\n    return (X)YConstructor_Arg.Invoke(new object[] { z, });\n}\n\nprivate static readonly Func<X> YCreator = Expression.Lambda<Func<X>>(\n   Expression.New(typeof(Y).GetConstructor(Type.EmptyTypes))\n).Compile();\nstatic X CreateY_CompiledExpression()\n{\n    return YCreator();\n}\n\nprivate static readonly Func<X> YCreator_Type = Expression.Lambda<Func<X>>(\n   Expression.New(typeof(Y))\n).Compile();\nstatic X CreateY_CompiledExpression_Type()\n{\n    return YCreator_Type();\n}\n\nprivate static readonly ParameterExpression YCreator_Arg_Param = Expression.Parameter(typeof(int), \"z\");\nprivate static readonly Func<int, X> YCreator_Arg = Expression.Lambda<Func<int, X>>(\n   Expression.New(typeof(Y).GetConstructor(new[] { typeof(int), }), new[] { YCreator_Arg_Param, }),\n   YCreator_Arg_Param\n).Compile();\nstatic X CreateY_CompiledExpression_Arg(int z)\n{\n    return YCreator_Arg(z);\n}\n\nstatic void Main(string[] args)\n{\n    const int iterations = 5000000;\n\n    Console.WriteLine(\"Iterations: {0}\", iterations);\n\n    Console.WriteLine(\"No args\");\n    foreach (var creatorInfo in new[]\n    {\n        new {Name = \"Activator.CreateInstance(string assemblyName, string typeName)\", Creator = (Func<X>)CreateY_CreateInstance},\n        new {Name = \"Activator.CreateInstance(Type type)\", Creator = (Func<X>)CreateY_CreateInstance},\n        new {Name = \"ConstructorInfo.Invoke\", Creator = (Func<X>)CreateY_Invoke},\n        new {Name = \"Compiled expression\", Creator = (Func<X>)CreateY_CompiledExpression},\n        new {Name = \"Compiled expression (type)\", Creator = (Func<X>)CreateY_CompiledExpression_Type},\n        new {Name = \"new\", Creator = (Func<X>)CreateY_New},\n    })\n    {\n        var creator = creatorInfo.Creator;\n\n        var sum = 0;\n        for (var i = 0; i < 1000; i++)\n            sum += creator().Z;\n\n        var stopwatch = new Stopwatch();\n        stopwatch.Start();\n        for (var i = 0; i < iterations; ++i)\n        {\n            var x = creator();\n            sum += x.Z;\n        }\n        stopwatch.Stop();\n        Console.WriteLine(\"{0}, {1}\", stopwatch.Elapsed, creatorInfo.Name);\n    }\n\n    Console.WriteLine(\"Single arg\");\n    foreach (var creatorInfo in new[]\n    {\n        new {Name = \"Activator.CreateInstance(Type type)\", Creator = (Func<int, X>)CreateY_CreateInstance_Arg},\n        new {Name = \"ConstructorInfo.Invoke\", Creator = (Func<int, X>)CreateY_Invoke_Arg},\n        new {Name = \"Compiled expression\", Creator = (Func<int, X>)CreateY_CompiledExpression_Arg},\n        new {Name = \"new\", Creator = (Func<int, X>)CreateY_New_Arg},\n    })\n    {\n        var creator = creatorInfo.Creator;\n\n        var sum = 0;\n        for (var i = 0; i < 1000; i++)\n            sum += creator(i).Z;\n\n        var stopwatch = new Stopwatch();\n        stopwatch.Start();\n        for (var i = 0; i < iterations; ++i)\n        {\n            var x = creator(i);\n            sum += x.Z;\n        }\n        stopwatch.Stop();\n        Console.WriteLine(\"{0}, {1}\", stopwatch.Elapsed, creatorInfo.Name);\n    }\n}\n\npublic class X\n{\n  public X() { }\n  public X(int z) { this.Z = z; }\n  public int Z;\n}\n\npublic class Y : X\n{\n    public Y() {}\n    public Y(int z) : base(z) {}\n}\n"
      ],
      [],
      [
        "ObjectType instance = (ObjectType)Activator.CreateInstance(objectType);\n",
        "ObjectType instance = Activator.CreateInstance<ObjectType>();\n"
      ]
    ],
    "votes:": "747",
    "tags": "<c#><.net><performance><reflection><types>",
    "AcceptedAnswerId": "755",
    "answers": [
      {
        "id": "29239907",
        "title": "",
        "text": "<p>I can across this question because I was looking to implement a simple CloneObject method for arbitrary class (with a default constructor)</p>\n\n<p>With generic method you can require that the type implements New().</p>\n\n<pre><code>Public Function CloneObject(Of T As New)(ByVal src As T) As T\n    Dim result As T = Nothing\n    Dim cloneable = TryCast(src, ICloneable)\n    If cloneable IsNot Nothing Then\n        result = cloneable.Clone()\n    Else\n        result = New T\n        CopySimpleProperties(src, result, Nothing, \"clone\")\n    End If\n    Return result\nEnd Function\n</code></pre>\n\n<p>With non-generic assume the type has a default constructor and catch\nan exception if it doesn't.</p>\n\n<pre><code>Public Function CloneObject(ByVal src As Object) As Object\n    Dim result As Object = Nothing\n    Dim cloneable As ICloneable\n    Try\n        cloneable = TryCast(src, ICloneable)\n        If cloneable IsNot Nothing Then\n            result = cloneable.Clone()\n        Else\n            result = Activator.CreateInstance(src.GetType())\n            CopySimpleProperties(src, result, Nothing, \"clone\")\n        End If\n    Catch ex As Exception\n        Trace.WriteLine(\"!!! CloneObject(): \" &amp; ex.Message)\n    End Try\n    Return result\nEnd Function\n</code></pre>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "753",
        "title": "",
        "text": "<p>One implementation of this problem is to attempt to call the parameter-less constructor of the Type:</p>\n\n<pre><code>public static object GetNewObject(Type t)\n{\n    try\n    {\n        return t.GetConstructor(new Type[] { }).Invoke(new object[] { });\n    }\n    catch\n    {\n        return null;\n    }\n}\n</code></pre>\n\n<p>Here is the same approach, contained in a generic method:</p>\n\n<pre><code>public static T GetNewObject&lt;T&gt;()\n{\n    try\n    {\n        return (T)typeof(T).GetConstructor(new Type[] { }).Invoke(new object[] { });\n    }\n    catch\n    {\n        return default(T);\n    }\n}\n</code></pre>\n",
        "votes": "56",
        "tags": "",
        "accepted": false
      },
      {
        "id": "26708746",
        "title": "",
        "text": "<p>Its pretty simple. Assume that your classname is <code>Car</code> and the namespace is <code>Vehicles</code>, then pass the parameter as <code>Vehicles.Car</code> which returns object of type <code>Car</code>. Like this you can create any instance of any class dynamically.</p>\n\n<pre><code>public object GetInstance(string strNamesapace)\n{         \n     Type t = Type.GetType(strNamesapace); \n     return  Activator.CreateInstance(t);         \n}\n</code></pre>\n\n<p>If your <a href=\"https://msdn.microsoft.com/en-us/library/dfb3cx8s%28v=vs.71%29.aspx\" rel=\"noreferrer\">Fully Qualified Name</a>(ie, <code>Vehicles.Car</code> in this case) is in another assembly, the <code>Type.GetType</code> will be null. In such cases, you have loop through all assemblies and find the <code>Type</code>. For that you can use the below code</p>\n\n<pre><code>public object GetInstance(string strFullyQualifiedName)\n{\n     Type type = Type.GetType(strFullyQualifiedName);\n     if (type != null)\n         return Activator.CreateInstance(type);\n     foreach (var asm in AppDomain.CurrentDomain.GetAssemblies())\n     {\n         type = asm.GetType(strFullyQualifiedName);\n         if (type != null)\n             return Activator.CreateInstance(type);\n     }\n     return null;\n }\n</code></pre>\n\n<p>And you can get the instance by calling the above method.</p>\n\n<pre><code>object objClassInstance = GetInstance(\"Vehicles.Car\");\n</code></pre>\n",
        "votes": "16",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3503517",
        "title": "",
        "text": "<p>Wouldn't the generic <code>T t = new T();</code> work? </p>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "31143718",
        "title": "",
        "text": "<p>Given this problem the Activator will work when there is a parameterless ctor. If this is a constraint consider using </p>\n\n<pre><code>System.Runtime.Serialization.FormatterServices.GetSafeUninitializedObject()\n</code></pre>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "17797389",
        "title": "",
        "text": "<p>If you want to use the default constructor then the solution using <code>System.Activator</code> presented earlier is probably the most convenient. However, if the type lacks a default constructor or you have to use a non-default one, then an option is to use reflection or <code>System.ComponentModel.TypeDescriptor</code>. In case of reflection, it is enough to know just the type name (with its namespace).</p>\n\n<p>Example using reflection:</p>\n\n<pre><code>ObjectType instance = \n    (ObjectType)System.Reflection.Assembly.GetExecutingAssembly().CreateInstance(\n        typeName: objectType.FulName, // string including namespace of the type\n        ignoreCase: false,\n        bindingAttr: BindingFlags.Default,\n        binder: null,  // use default binder\n        args: new object[] { args, to, constructor },\n        culture: null, // use CultureInfo from current thread\n        activationAttributes: null\n    );\n</code></pre>\n\n<p>Example using <code>TypeDescriptor</code>:</p>\n\n<pre><code>ObjectType instance = \n    (ObjectType)System.ComponentModel.TypeDescriptor.CreateInstance(\n        provider: null, // use standard type description provider, which uses reflection\n        objectType: objectType,\n        argTypes: new Type[] { types, of, args },\n        args: new object[] { args, to, constructor }\n    );\n</code></pre>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "31138841",
        "title": "",
        "text": "<p>Without use of Reflection:</p>\n\n<pre><code>private T Create&lt;T&gt;() where T : class, new()\n{\n    return new T();\n}\n</code></pre>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "12343731",
        "title": "",
        "text": "<pre><code>public AbstractType New\n{\n    get\n    {\n        return (AbstractType) Activator.CreateInstance(GetType());\n    }\n}\n</code></pre>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "755",
        "title": "",
        "text": "<p>The <code>Activator</code> class within the root <code>System</code> namespace is pretty powerful.</p>\n\n<p>There are a lot of overloads for passing parameters to the constructor and such. Check out the documentation at: </p>\n\n<blockquote>\n  <p><a href=\"http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx\" rel=\"noreferrer\">http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx</a></p>\n</blockquote>\n\n<p>or (new path)</p>\n\n<blockquote>\n  <p><a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.activator.createinstance\" rel=\"noreferrer\">https://docs.microsoft.com/en-us/dotnet/api/system.activator.createinstance</a></p>\n</blockquote>\n\n<p>Here are some simple examples:</p>\n\n<pre><code>ObjectType instance = (ObjectType)Activator.CreateInstance(objectType);\n\nObjectType instance = (ObjectType)Activator.CreateInstance(\"MyAssembly\",\"MyNamespace.ObjectType\");\n</code></pre>\n",
        "votes": "896",
        "tags": "",
        "accepted": true
      },
      {
        "id": "29972767",
        "title": "",
        "text": "<p>Compiled expression is best way! (for performance to repeatedly create instance in runtime).</p>\n\n<pre><code>static readonly Func&lt;X&gt; YCreator = Expression.Lambda&lt;Func&lt;X&gt;&gt;(\n   Expression.New(typeof(Y).GetConstructor(Type.EmptyTypes))\n ).Compile();\n\nX x = YCreator();\n</code></pre>\n\n<p>Statistics (2012):</p>\n\n<pre><code>    Iterations: 5000000\n    00:00:00.8481762, Activator.CreateInstance(string, string)\n    00:00:00.8416930, Activator.CreateInstance(type)\n    00:00:06.6236752, ConstructorInfo.Invoke\n    00:00:00.1776255, Compiled expression\n    00:00:00.0462197, new\n</code></pre>\n\n<p>Statistics (2015, .net 4.5, x64):</p>\n\n<pre><code>    Iterations: 5000000\n    00:00:00.2659981, Activator.CreateInstance(string, string)\n    00:00:00.2603770, Activator.CreateInstance(type)\n    00:00:00.7478936, ConstructorInfo.Invoke\n    00:00:00.0700757, Compiled expression\n    00:00:00.0286710, new\n</code></pre>\n\n<p>Statistics (2015, .net 4.5, x86):</p>\n\n<pre><code>    Iterations: 5000000\n    00:00:00.3541501, Activator.CreateInstance(string, string)\n    00:00:00.3686861, Activator.CreateInstance(type)\n    00:00:00.9492354, ConstructorInfo.Invoke\n    00:00:00.0719072, Compiled expression\n    00:00:00.0229387, new\n</code></pre>\n\n<p>Statistics (2017, LINQPad 5.22.02/x64/.NET 4.6):</p>\n\n<pre><code>    Iterations: 5000000\n    No args\n    00:00:00.3897563, Activator.CreateInstance(string assemblyName, string typeName)\n    00:00:00.3500748, Activator.CreateInstance(Type type)\n    00:00:01.0100714, ConstructorInfo.Invoke\n    00:00:00.1375767, Compiled expression\n    00:00:00.1337920, Compiled expression (type)\n    00:00:00.0593664, new\n    Single arg\n    00:00:03.9300630, Activator.CreateInstance(Type type)\n    00:00:01.3881770, ConstructorInfo.Invoke\n    00:00:00.1425534, Compiled expression\n    00:00:00.0717409, new\n</code></pre>\n\n<p>Statistics (2019, x64/.NET 4.8):</p>\n\n<pre><code>Iterations: 5000000\nNo args\n00:00:00.3287835, Activator.CreateInstance(string assemblyName, string typeName)\n00:00:00.3122015, Activator.CreateInstance(Type type)\n00:00:00.8035712, ConstructorInfo.Invoke\n00:00:00.0692854, Compiled expression\n00:00:00.0662223, Compiled expression (type)\n00:00:00.0337862, new\nSingle arg\n00:00:03.8081959, Activator.CreateInstance(Type type)\n00:00:01.2507642, ConstructorInfo.Invoke\n00:00:00.0671756, Compiled expression\n00:00:00.0301489, new\n</code></pre>\n\n<p>Statistics (2019, x64/.NET Core 3.0):</p>\n\n<pre><code>Iterations: 5000000\nNo args\n00:00:00.3226895, Activator.CreateInstance(string assemblyName, string typeName)\n00:00:00.2786803, Activator.CreateInstance(Type type)\n00:00:00.6183554, ConstructorInfo.Invoke\n00:00:00.0483217, Compiled expression\n00:00:00.0485119, Compiled expression (type)\n00:00:00.0434534, new\nSingle arg\n00:00:03.4389401, Activator.CreateInstance(Type type)\n00:00:01.0803609, ConstructorInfo.Invoke\n00:00:00.0554756, Compiled expression\n00:00:00.0462232, new\n</code></pre>\n\n<p>Full code:</p>\n\n<pre><code>static X CreateY_New()\n{\n    return new Y();\n}\n\nstatic X CreateY_New_Arg(int z)\n{\n    return new Y(z);\n}\n\nstatic X CreateY_CreateInstance()\n{\n    return (X)Activator.CreateInstance(typeof(Y));\n}\n\nstatic X CreateY_CreateInstance_String()\n{\n    return (X)Activator.CreateInstance(\"Program\", \"Y\").Unwrap();\n}\n\nstatic X CreateY_CreateInstance_Arg(int z)\n{\n    return (X)Activator.CreateInstance(typeof(Y), new object[] { z, });\n}\n\nprivate static readonly System.Reflection.ConstructorInfo YConstructor =\n    typeof(Y).GetConstructor(Type.EmptyTypes);\nprivate static readonly object[] Empty = new object[] { };\nstatic X CreateY_Invoke()\n{\n    return (X)YConstructor.Invoke(Empty);\n}\n\nprivate static readonly System.Reflection.ConstructorInfo YConstructor_Arg =\n    typeof(Y).GetConstructor(new[] { typeof(int), });\nstatic X CreateY_Invoke_Arg(int z)\n{\n    return (X)YConstructor_Arg.Invoke(new object[] { z, });\n}\n\nprivate static readonly Func&lt;X&gt; YCreator = Expression.Lambda&lt;Func&lt;X&gt;&gt;(\n   Expression.New(typeof(Y).GetConstructor(Type.EmptyTypes))\n).Compile();\nstatic X CreateY_CompiledExpression()\n{\n    return YCreator();\n}\n\nprivate static readonly Func&lt;X&gt; YCreator_Type = Expression.Lambda&lt;Func&lt;X&gt;&gt;(\n   Expression.New(typeof(Y))\n).Compile();\nstatic X CreateY_CompiledExpression_Type()\n{\n    return YCreator_Type();\n}\n\nprivate static readonly ParameterExpression YCreator_Arg_Param = Expression.Parameter(typeof(int), \"z\");\nprivate static readonly Func&lt;int, X&gt; YCreator_Arg = Expression.Lambda&lt;Func&lt;int, X&gt;&gt;(\n   Expression.New(typeof(Y).GetConstructor(new[] { typeof(int), }), new[] { YCreator_Arg_Param, }),\n   YCreator_Arg_Param\n).Compile();\nstatic X CreateY_CompiledExpression_Arg(int z)\n{\n    return YCreator_Arg(z);\n}\n\nstatic void Main(string[] args)\n{\n    const int iterations = 5000000;\n\n    Console.WriteLine(\"Iterations: {0}\", iterations);\n\n    Console.WriteLine(\"No args\");\n    foreach (var creatorInfo in new[]\n    {\n        new {Name = \"Activator.CreateInstance(string assemblyName, string typeName)\", Creator = (Func&lt;X&gt;)CreateY_CreateInstance},\n        new {Name = \"Activator.CreateInstance(Type type)\", Creator = (Func&lt;X&gt;)CreateY_CreateInstance},\n        new {Name = \"ConstructorInfo.Invoke\", Creator = (Func&lt;X&gt;)CreateY_Invoke},\n        new {Name = \"Compiled expression\", Creator = (Func&lt;X&gt;)CreateY_CompiledExpression},\n        new {Name = \"Compiled expression (type)\", Creator = (Func&lt;X&gt;)CreateY_CompiledExpression_Type},\n        new {Name = \"new\", Creator = (Func&lt;X&gt;)CreateY_New},\n    })\n    {\n        var creator = creatorInfo.Creator;\n\n        var sum = 0;\n        for (var i = 0; i &lt; 1000; i++)\n            sum += creator().Z;\n\n        var stopwatch = new Stopwatch();\n        stopwatch.Start();\n        for (var i = 0; i &lt; iterations; ++i)\n        {\n            var x = creator();\n            sum += x.Z;\n        }\n        stopwatch.Stop();\n        Console.WriteLine(\"{0}, {1}\", stopwatch.Elapsed, creatorInfo.Name);\n    }\n\n    Console.WriteLine(\"Single arg\");\n    foreach (var creatorInfo in new[]\n    {\n        new {Name = \"Activator.CreateInstance(Type type)\", Creator = (Func&lt;int, X&gt;)CreateY_CreateInstance_Arg},\n        new {Name = \"ConstructorInfo.Invoke\", Creator = (Func&lt;int, X&gt;)CreateY_Invoke_Arg},\n        new {Name = \"Compiled expression\", Creator = (Func&lt;int, X&gt;)CreateY_CompiledExpression_Arg},\n        new {Name = \"new\", Creator = (Func&lt;int, X&gt;)CreateY_New_Arg},\n    })\n    {\n        var creator = creatorInfo.Creator;\n\n        var sum = 0;\n        for (var i = 0; i &lt; 1000; i++)\n            sum += creator(i).Z;\n\n        var stopwatch = new Stopwatch();\n        stopwatch.Start();\n        for (var i = 0; i &lt; iterations; ++i)\n        {\n            var x = creator(i);\n            sum += x.Z;\n        }\n        stopwatch.Stop();\n        Console.WriteLine(\"{0}, {1}\", stopwatch.Elapsed, creatorInfo.Name);\n    }\n}\n\npublic class X\n{\n  public X() { }\n  public X(int z) { this.Z = z; }\n  public int Z;\n}\n\npublic class Y : X\n{\n    public Y() {}\n    public Y(int z) : base(z) {}\n}\n</code></pre>\n",
        "votes": "132",
        "tags": "",
        "accepted": false
      },
      {
        "id": "26031",
        "title": "",
        "text": "<p>If this is for something that will be called a lot in an application instance, it's a lot faster to compile and cache dynamic code instead of using the activator or <code>ConstructorInfo.Invoke()</code>.  Two easy options for dynamic compilation are compiled <a href=\"http://rogeralsing.com/2008/02/28/linq-expressions-creating-objects/\" rel=\"noreferrer\">Linq Expressions</a> or some simple <a href=\"http://web.archive.org/web/20140926050502/http://www.ozcandegirmenci.com/post/2008/02/Create-object-instances-Faster-than-Reflection.aspx\" rel=\"noreferrer\"><code>IL</code> opcodes and <code>DynamicMethod</code></a>.  Either way, the difference is huge when you start getting into tight loops or multiple calls.</p>\n",
        "votes": "14",
        "tags": "",
        "accepted": false
      },
      {
        "id": "26033",
        "title": "",
        "text": "<pre><code>ObjectType instance = (ObjectType)Activator.CreateInstance(objectType);\n</code></pre>\n\n<p>The <code>Activator</code> class has a generic variant that makes this a bit easier:</p>\n\n<pre><code>ObjectType instance = Activator.CreateInstance&lt;ObjectType&gt;();\n</code></pre>\n",
        "votes": "147",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "761",
    "url": "https://stackoverflow.com/questions/761",
    "title": "Localising date format descriptors",
    "text:": "<p>What is the best way to localise a date format descriptor?</p>\n\n<p>As anyone from a culture which does not use the mm/dd/yyyy format knows, it is annoying to have to enter dates in this format. The .NET framework provides some very good localisation support, so it's trivial to parse dates according to the users culture, but you often want to also display a helpful hint as to the format required (especially to distinguish between yy and yyyy which is interchangeable in most cultures).</p>\n\n<p>What is the best way to do this in a way that make sense to most users (e.g. dd/M/yyy is confusing because of the change in case and the switching between one and two letters).</p>\n",
    "codes": [
      [
        "Regex singleMToDoubleRegex = new Regex(\"(?<!m)m(?!m)\");\nRegex singleDToDoubleRegex = new Regex(\"(?<!d)d(?!d)\");\nCultureInfo currentCulture = CultureInfo.CurrentUICulture;\n\n// If the culture is netural there is no date pattern to use, so use the default.\nif (currentCulture.IsNeutralCulture)\n{\n    currentCulture = CultureInfo.InvariantCulture;\n}\n\n// Massage the format into a more general user friendly form.\nstring shortDatePattern = CultureInfo.CurrentUICulture.DateTimeFormat.ShortDatePattern.ToLower();\nshortDatePattern = singleMToDoubleRegex.Replace(shortDatePattern, \"mm\");\nshortDatePattern = singleDToDoubleRegex.Replace(shortDatePattern, \"dd\");\n"
      ],
      [],
      [],
      [],
      [
        "Date and time (current at page generation) expressed according to ISO 8601:\nDate:                           2014-07-05\nCombined date and time in UTC:  2014-07-05T04:00:25+00:00\n                                2014-07-05T04:00:25Z\nWeek:                           2014-W27\nDate with week number:          2014-W27-6\nOrdinal date:                   2014-186\n"
      ],
      [],
      []
    ],
    "votes:": "20",
    "tags": "<.net><internationalization><date><globalization>",
    "AcceptedAnswerId": "762",
    "answers": [
      {
        "id": "762",
        "title": "",
        "text": "<p>Here is my current method. Any suggestions?</p>\n\n<pre><code>Regex singleMToDoubleRegex = new Regex(\"(?&lt;!m)m(?!m)\");\nRegex singleDToDoubleRegex = new Regex(\"(?&lt;!d)d(?!d)\");\nCultureInfo currentCulture = CultureInfo.CurrentUICulture;\n\n// If the culture is netural there is no date pattern to use, so use the default.\nif (currentCulture.IsNeutralCulture)\n{\n    currentCulture = CultureInfo.InvariantCulture;\n}\n\n// Massage the format into a more general user friendly form.\nstring shortDatePattern = CultureInfo.CurrentUICulture.DateTimeFormat.ShortDatePattern.ToLower();\nshortDatePattern = singleMToDoubleRegex.Replace(shortDatePattern, \"mm\");\nshortDatePattern = singleDToDoubleRegex.Replace(shortDatePattern, \"dd\");\n</code></pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": true
      },
      {
        "id": "1077",
        "title": "",
        "text": "<p>The trouble with international standards is that pretty much noone uses them. I try where I can, but I am forced to use dd/mm/yyyy almost everywhere in real life, which means I am so used to it it's always a conscious process to use ISO-8601. For the majority of people who don't even try to use ISO-8601 it's even worse. If you can internationalize where you can, I think it's a great advantage.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1495",
        "title": "",
        "text": "<p>I have to agree with the OP 'wrong' dates really jar with my DD/MM/YYYY upbringing and I find ISO 8601 dates and times extremely easy to work with.  For once the standard got it right and <a href=\"https://stackoverflow.com/questions/761/#770\">engtech</a> has the obvious answer that doesn't require localisation.</p>\n\n<p>I was going to report the birthday input form on stack overflow as a bug because of how much of a sore thumb it is to the majority of the world.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "763",
        "title": "",
        "text": "<p>How about giving the format (mm/dd/yyyy or dd/mm/yyyy) followed by a printout of today's date in the user's culture. MSDN has an article on <a href=\"http://msdn.microsoft.com/en-us/library/5hh873ya(VS.71).aspx\" rel=\"nofollow noreferrer\">formatting a DateTime for the person's culture</a>, using the CultureInfo object that might be helpful in doing this. A combination of the format (which most people are familiar with) combined with the current date represented in that format should be enough of a clue to the person on how they should enter the date. (Also include a calendar control for those who still cant figure it out).</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "770",
        "title": "",
        "text": "<p><a href=\"http://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">Just use ISO-8601</a>. It's an international standard.</p>\n\n<pre><code>Date and time (current at page generation) expressed according to ISO 8601:\nDate:                           2014-07-05\nCombined date and time in UTC:  2014-07-05T04:00:25+00:00\n                                2014-07-05T04:00:25Z\nWeek:                           2014-W27\nDate with week number:          2014-W27-6\nOrdinal date:                   2014-186\n</code></pre>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "103717",
        "title": "",
        "text": "<p><strong>Best option</strong>: I would instead recommend to use a standard date picker.</p>\n\n<p><strong>Alternative</strong>: every time the content of the edit control changes, parse it and display (in a separate control?) the long format of the date (ie: input \"03/04/09\" display \"Your input: March 4, 2009\")</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1524",
        "title": "",
        "text": "<p>A short form is convenient and helps avoid spelling mistakes. Localize as applicable, but be sure to display the expected format (do not leave the user blind). Provide a date-picker control as an <em>optional</em> aide to filling in the field.</p>\n\n<p>As an extra, on-the-fly parsing and display of the date in long form might help too.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "766",
    "url": "https://stackoverflow.com/questions/766",
    "title": "Python and MySQL",
    "text:": "<p>I can get Python to work with Postgresql but I cannot get it to work with MySQL. The main problem is that on the shared hosting account I have I do not have the ability to install things such as Django or PySQL, I generally fail when installing them on my computer so maybe it's good I can't install on the host.</p>\n\n<p>I found <a href=\"http://barryp.org/software/bpgsql/\" rel=\"noreferrer\">bpgsql</a> really good because it does not require an install, it's a single file that I can look at, read and then call the functions of. Does anybody know of something like this for MySQL?</p>\n",
    "codes": [
      [],
      [],
      [
        "#!/usr/bin/python\n\nmodule_name = 'MySQLdb'\nhead = '''Content-Type: text/html\n\n%s is ''' % module_name\n\ntry:\n    __import__(module_name)\n    print head + 'installed'\nexcept ImportError:\n    print head + 'not installed'\n"
      ],
      [
        "Premature end of script headers\n",
        "import cgi\nimport cgitb; cgitb.enable()\nimport MySQLdb\n",
        "import MySQLdb\nimport cgi\nimport cgitb; cgitb.enable()\n"
      ],
      [],
      []
    ],
    "votes:": "38",
    "tags": "<python><mysql><postgresql><bpgsql>",
    "AcceptedAnswerId": "1619",
    "answers": [
      {
        "id": "1619",
        "title": "",
        "text": "<p>MySQLdb is what I have used before.</p>\n\n<p>If you host is using Python version 2.5 or higher, support for sqlite3 databases is built in (sqlite allows you to have a relational database that is simply a file in your filesystem).  But buyer beware, sqlite is not suited for production, so it may depend what you are trying to do with it.</p>\n\n<p>Another option may be to call your host and complain, or change hosts.  Honestly these days, any self respecting web host that supports python and mysql ought to have MySQLdb pre installed.</p>\n",
        "votes": "24",
        "tags": "",
        "accepted": true
      },
      {
        "id": "33058407",
        "title": "",
        "text": "<p>Take a pick at</p>\n\n<p><a href=\"https://docs.djangoproject.com/en/1.8/ref/databases/\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.8/ref/databases/</a></p>\n\n<p>MySQLdb is mostly used driver, but if you are using python3 and django 1.8.x that will not work, then you should use mysqlclient that is a folk of MySQLdb on the following link</p>\n\n<p><a href=\"https://pypi.python.org/pypi/mysqlclient\" rel=\"nofollow\">https://pypi.python.org/pypi/mysqlclient</a></p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "777",
        "title": "",
        "text": "<p>I don't have any experience with <a href=\"http://www.SiteGround.com\" rel=\"noreferrer\">http://www.SiteGround.com</a> as a web host personally.  </p>\n\n<p>This is just a guess, but it's common for a shared host to support Python and MySQL with the MySQLdb module (e.g., GoDaddy does this).  Try the following CGI script to see if MySQLdb is installed.</p>\n\n<pre><code>#!/usr/bin/python\n\nmodule_name = 'MySQLdb'\nhead = '''Content-Type: text/html\n\n%s is ''' % module_name\n\ntry:\n    __import__(module_name)\n    print head + 'installed'\nexcept ImportError:\n    print head + 'not installed'\n</code></pre>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "802",
        "title": "",
        "text": "<p>I uploaded it and got an internal error</p>\n\n<pre><code>Premature end of script headers\n</code></pre>\n\n<p>After much playing around, I found that if I had</p>\n\n<pre><code>import cgi\nimport cgitb; cgitb.enable()\nimport MySQLdb\n</code></pre>\n\n<p>It would give me a much more useful answer and say that it was not installed, you can see it yourself -> <a href=\"http://woarl.com/db.py\" rel=\"nofollow noreferrer\">http://woarl.com/db.py</a></p>\n\n<p>Oddly enough, this would produce an error</p>\n\n<pre><code>import MySQLdb\nimport cgi\nimport cgitb; cgitb.enable()\n</code></pre>\n\n<p>I looked at some of the other files I had up there and it seems that library was one of the ones I had already tried.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "8332",
        "title": "",
        "text": "<p>You could try setting up your own python installation using <a href=\"http://peak.telecommunity.com/DevCenter/EasyInstall#creating-a-virtual-python\" rel=\"noreferrer\">Virtual Python</a>.  Check out how to setup Django using it <a href=\"http://forums.site5.com/showthread.php?t=10236\" rel=\"noreferrer\">here</a>.  That was written a long time ago, but it shows how I got MySQLdb setup without having root access or anything like it.  Once you've got the basics going, you can install any python library you want.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "4813530",
        "title": "",
        "text": "<p>You really want MySQLdb for any MySQL + Python code.  However, you shouldn't need root access or anything to use it.  You can build/install it in a user directory (~/lib/python2.x/site-packages), and just add that to your PYTHON_PATH env variable.  This should work for just about any python library.</p>\n\n<p>Give it a shot, there really isn't a good alternative.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "769",
    "url": "https://stackoverflow.com/questions/769",
    "title": "Solving a linear equation",
    "text:": "<p>I need to programmatically solve a system of linear equations in C, Objective C, or (if needed) C++.</p>\n\n<p>Here's an example of the equations:</p>\n\n<pre><code>-44.3940 = a * 50.0 + b * 37.0 + tx\n-45.3049 = a * 43.0 + b * 39.0 + tx\n-44.9594 = a * 52.0 + b * 41.0 + tx\n</code></pre>\n\n<p>From this, I'd like to get the best approximation for <code>a</code>, <code>b</code>, and <code>tx</code>.</p>\n",
    "codes": [
      [
        "-44.3940 = 50a + 37b + c (A)\n-45.3049 = 43a + 39b + c (B)\n-44.9594 = 52a + 41b + c (C)\n\n(A-B): 0.9109 =  7a -  2b (D)\n(B-C): 0.3455 = -9a -  2b (E)\n\n(D-E): 1.2564 = 16a (F)\n\n(F/16):  a = 0.078525 (G)\n\nFeed G into D:\n       0.9109 = 7a - 2b\n    => 0.9109 = 0.549675 - 2b (substitute a)\n    => 0.361225 = -2b (subtract 0.549675 from both sides)\n    => -0.1806125 = b (divide both sides by -2) (H)\n\nFeed H/G into A:\n       -44.3940 = 50a + 37b + c\n    => -44.3940 = 3.92625 - 6.6826625 + c (substitute a/b)\n    => -41.6375875 = c (subtract 3.92625 - 6.6826625 from both sides)\n",
        "a =   0.0785250\nb =  -0.1806125\nc = -41.6375875\n",
        " 7a + 2b =  50\n14a + 4b = 100\n",
        "0 = 0 + 0\n",
        "#include <stdio.h>\n\ntypedef struct { double r, a, b, c; } tEquation;\ntEquation equ1[] = {\n    { -44.3940,  50, 37, 1 },      // -44.3940 = 50a + 37b + c (A)\n    { -45.3049,  43, 39, 1 },      // -45.3049 = 43a + 39b + c (B)\n    { -44.9594,  52, 41, 1 },      // -44.9594 = 52a + 41b + c (C)\n};\ntEquation equ2[2], equ3[1];\n\nstatic void dumpEqu (char *desc, tEquation *e, char *post) {\n    printf (\"%10s: %12.8lf = %12.8lfa + %12.8lfb + %12.8lfc (%s)\\n\",\n        desc, e->r, e->a, e->b, e->c, post);\n}\n\nint main (void) {\n    double a, b, c;\n",
        "    // First step, populate equ2 based on removing c from equ.\n\n    dumpEqu (\">\", &(equ1[0]), \"A\");\n    dumpEqu (\">\", &(equ1[1]), \"B\");\n    dumpEqu (\">\", &(equ1[2]), \"C\");\n    puts (\"\");\n\n    // A - B\n    equ2[0].r = equ1[0].r * equ1[1].c - equ1[1].r * equ1[0].c;\n    equ2[0].a = equ1[0].a * equ1[1].c - equ1[1].a * equ1[0].c;\n    equ2[0].b = equ1[0].b * equ1[1].c - equ1[1].b * equ1[0].c;\n    equ2[0].c = 0;\n\n    // B - C\n    equ2[1].r = equ1[1].r * equ1[2].c - equ1[2].r * equ1[1].c;\n    equ2[1].a = equ1[1].a * equ1[2].c - equ1[2].a * equ1[1].c;\n    equ2[1].b = equ1[1].b * equ1[2].c - equ1[2].b * equ1[1].c;\n    equ2[1].c = 0;\n\n    dumpEqu (\"A-B\", &(equ2[0]), \"D\");\n    dumpEqu (\"B-C\", &(equ2[1]), \"E\");\n    puts (\"\");\n",
        "    // Next step, populate equ3 based on removing b from equ2.\n\n    // D - E\n    equ3[0].r = equ2[0].r * equ2[1].b - equ2[1].r * equ2[0].b;\n    equ3[0].a = equ2[0].a * equ2[1].b - equ2[1].a * equ2[0].b;\n    equ3[0].b = 0;\n    equ3[0].c = 0;\n\n    dumpEqu (\"D-E\", &(equ3[0]), \"F\");\n    puts (\"\");\n",
        "    // Finally, substitute values back into equations.\n\n    a = equ3[0].r / equ3[0].a;\n    printf (\"From (F    ), a = %12.8lf (G)\\n\", a);\n\n    b = (equ2[0].r - equ2[0].a * a) / equ2[0].b;\n    printf (\"From (D,G  ), b = %12.8lf (H)\\n\", b);\n\n    c = (equ1[0].r - equ1[0].a * a - equ1[0].b * b) / equ1[0].c;\n    printf (\"From (A,G,H), c = %12.8lf (I)\\n\", c);\n\n    return 0;\n}\n",
        "         >: -44.39400000 =  50.00000000a +  37.00000000b +   1.00000000c (A)\n         >: -45.30490000 =  43.00000000a +  39.00000000b +   1.00000000c (B)\n         >: -44.95940000 =  52.00000000a +  41.00000000b +   1.00000000c (C)\n\n       A-B:   0.91090000 =   7.00000000a +  -2.00000000b +   0.00000000c (D)\n       B-C:  -0.34550000 =  -9.00000000a +  -2.00000000b +   0.00000000c (E)\n\n       D-E:  -2.51280000 = -32.00000000a +   0.00000000b +   0.00000000c (F)\n\nFrom (F    ), a =   0.07852500 (G)\nFrom (D,G  ), b =  -0.18061250 (H)\nFrom (A,G,H), c = -41.63758750 (I)\n"
      ],
      [
        "> y <- c(-44.394, -45.3049, -44.9594)\n> a <- c(50.0, 43.0, 52.0)\n> b <- c(37.0, 39.0, 41.0)\n> regression = lm(y ~ a + b)\n> regression\n\nCall:\nlm(formula = y ~ a + b)\n\nCoefficients:\n(Intercept)            a            b  \n  -41.63759      0.07852     -0.18061  \n"
      ],
      [],
      [],
      [
        "  SolverContext context = SolverContext.GetContext();\n  Model model = context.CreateModel();\n\n  Decision a = new Decision(Domain.Real, \"a\");\n  Decision b = new Decision(Domain.Real, \"b\");\n  Decision c = new Decision(Domain.Real, \"c\");\n  model.AddDecisions(a,b,c);\n  model.AddConstraint(\"eqA\", -44.3940 == 50*a + 37*b + c);\n  model.AddConstraint(\"eqB\", -45.3049 == 43*a + 39*b + c);\n  model.AddConstraint(\"eqC\", -44.9594 == 52*a + 41*b + c);\n  Solution solution = context.Solve();\n  string results = solution.GetReport().ToString();\n  Console.WriteLine(results); \n"
      ],
      [],
      [
        "void GetInverse(const Array2D<double>& A, Array2D<double>& invA)\n   {\n   QR<double> qr(A);  \n   invA = qr.solve(I); \n   }\n"
      ],
      [],
      [],
      [
        "function x = LinSolve(A,y)\n%\n% Recursive Solution of Linear System Ax=y\n% matlab equivalent: x = A\\y \n% x = n x 1\n% A = n x n\n% y = n x 1\n% Uses stack space extensively. Not efficient.\n% C allows recursion, so convert it into C. \n% ----------------------------------------------\nn=length(y);\nx=zeros(n,1);\nif(n>1)\n    x(1:n-1,1) = LinSolve( A(1:n-1,1:n-1) - (A(1:n-1,n)*A(n,1:n-1))./A(n,n) , ...\n                           y(1:n-1,1) - A(1:n-1,n).*(y(n,1)/A(n,n))); \n    x(n,1) = (y(n,1) - A(n,1:n-1)*x(1:n-1,1))./A(n,n); \nelse\n    x = y(1,1) / A(1,1);\nend\n"
      ]
    ],
    "votes:": "46",
    "tags": "<math><linear-algebra><system><linear-equation>",
    "AcceptedAnswerId": "781",
    "answers": [
      {
        "id": "590060",
        "title": "",
        "text": "<p>You can solve this with a program exactly the same way you solve it by hand (with multiplication and subtraction, then feeding results back into the equations). This is pretty standard secondary-school-level mathematics.</p>\n\n<pre><code>-44.3940 = 50a + 37b + c (A)\n-45.3049 = 43a + 39b + c (B)\n-44.9594 = 52a + 41b + c (C)\n\n(A-B): 0.9109 =  7a -  2b (D)\n(B-C): 0.3455 = -9a -  2b (E)\n\n(D-E): 1.2564 = 16a (F)\n\n(F/16):  a = 0.078525 (G)\n\nFeed G into D:\n       0.9109 = 7a - 2b\n    =&gt; 0.9109 = 0.549675 - 2b (substitute a)\n    =&gt; 0.361225 = -2b (subtract 0.549675 from both sides)\n    =&gt; -0.1806125 = b (divide both sides by -2) (H)\n\nFeed H/G into A:\n       -44.3940 = 50a + 37b + c\n    =&gt; -44.3940 = 3.92625 - 6.6826625 + c (substitute a/b)\n    =&gt; -41.6375875 = c (subtract 3.92625 - 6.6826625 from both sides)\n</code></pre>\n\n<p>So you end up with:</p>\n\n<pre><code>a =   0.0785250\nb =  -0.1806125\nc = -41.6375875\n</code></pre>\n\n<p>If you plug these values back into A, B and C, you'll find they're correct.</p>\n\n<p>The trick is to use a simple 4x3 matrix which reduces in turn to a 3x2 matrix, then a 2x1 which is \"a = n\", n being an actual number. Once you have that, you feed it into the next matrix up to get another value, then those two values into the next matrix up until you've solved all variables.</p>\n\n<p>Provided you have N distinct equations, you can always solve for N variables. I say distinct because these two are not:</p>\n\n<pre><code> 7a + 2b =  50\n14a + 4b = 100\n</code></pre>\n\n<p>They are the <em>same</em> equation multiplied by two so you cannot get a solution from them - multiplying the first by two then subtracting leaves you with the true but useless statement:</p>\n\n<pre><code>0 = 0 + 0\n</code></pre>\n\n<hr>\n\n<p>By way of example, here's some C code that works out the simultaneous equations that you're placed in your question. First some necessary types, variables, a support function for printing out an equation, and the start of <code>main</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct { double r, a, b, c; } tEquation;\ntEquation equ1[] = {\n    { -44.3940,  50, 37, 1 },      // -44.3940 = 50a + 37b + c (A)\n    { -45.3049,  43, 39, 1 },      // -45.3049 = 43a + 39b + c (B)\n    { -44.9594,  52, 41, 1 },      // -44.9594 = 52a + 41b + c (C)\n};\ntEquation equ2[2], equ3[1];\n\nstatic void dumpEqu (char *desc, tEquation *e, char *post) {\n    printf (\"%10s: %12.8lf = %12.8lfa + %12.8lfb + %12.8lfc (%s)\\n\",\n        desc, e-&gt;r, e-&gt;a, e-&gt;b, e-&gt;c, post);\n}\n\nint main (void) {\n    double a, b, c;\n</code></pre>\n\n<p>Next, the reduction of the three equations with three unknowns to two equations with two unknowns:</p>\n\n<pre><code>    // First step, populate equ2 based on removing c from equ.\n\n    dumpEqu (\"&gt;\", &amp;(equ1[0]), \"A\");\n    dumpEqu (\"&gt;\", &amp;(equ1[1]), \"B\");\n    dumpEqu (\"&gt;\", &amp;(equ1[2]), \"C\");\n    puts (\"\");\n\n    // A - B\n    equ2[0].r = equ1[0].r * equ1[1].c - equ1[1].r * equ1[0].c;\n    equ2[0].a = equ1[0].a * equ1[1].c - equ1[1].a * equ1[0].c;\n    equ2[0].b = equ1[0].b * equ1[1].c - equ1[1].b * equ1[0].c;\n    equ2[0].c = 0;\n\n    // B - C\n    equ2[1].r = equ1[1].r * equ1[2].c - equ1[2].r * equ1[1].c;\n    equ2[1].a = equ1[1].a * equ1[2].c - equ1[2].a * equ1[1].c;\n    equ2[1].b = equ1[1].b * equ1[2].c - equ1[2].b * equ1[1].c;\n    equ2[1].c = 0;\n\n    dumpEqu (\"A-B\", &amp;(equ2[0]), \"D\");\n    dumpEqu (\"B-C\", &amp;(equ2[1]), \"E\");\n    puts (\"\");\n</code></pre>\n\n<p>Next, the reduction of the two equations with two unknowns to one equation with one unknown:</p>\n\n<pre><code>    // Next step, populate equ3 based on removing b from equ2.\n\n    // D - E\n    equ3[0].r = equ2[0].r * equ2[1].b - equ2[1].r * equ2[0].b;\n    equ3[0].a = equ2[0].a * equ2[1].b - equ2[1].a * equ2[0].b;\n    equ3[0].b = 0;\n    equ3[0].c = 0;\n\n    dumpEqu (\"D-E\", &amp;(equ3[0]), \"F\");\n    puts (\"\");\n</code></pre>\n\n<p>Now that we have a formula of the type <code>number1 = unknown * number2</code>, we can simply work out the unknown value with <code>unknown &lt;- number1 / number2</code>. Then, once you've figured that value out, substitute it into one of the equations with two unknowns and work out the second value. Then substitute both those (now-known) unknowns into one of the original equations and you now have the values for all three unknowns:</p>\n\n<pre><code>    // Finally, substitute values back into equations.\n\n    a = equ3[0].r / equ3[0].a;\n    printf (\"From (F    ), a = %12.8lf (G)\\n\", a);\n\n    b = (equ2[0].r - equ2[0].a * a) / equ2[0].b;\n    printf (\"From (D,G  ), b = %12.8lf (H)\\n\", b);\n\n    c = (equ1[0].r - equ1[0].a * a - equ1[0].b * b) / equ1[0].c;\n    printf (\"From (A,G,H), c = %12.8lf (I)\\n\", c);\n\n    return 0;\n}\n</code></pre>\n\n<p>The output of that code matches the earlier calculations in this answer:</p>\n\n<pre><code>         &gt;: -44.39400000 =  50.00000000a +  37.00000000b +   1.00000000c (A)\n         &gt;: -45.30490000 =  43.00000000a +  39.00000000b +   1.00000000c (B)\n         &gt;: -44.95940000 =  52.00000000a +  41.00000000b +   1.00000000c (C)\n\n       A-B:   0.91090000 =   7.00000000a +  -2.00000000b +   0.00000000c (D)\n       B-C:  -0.34550000 =  -9.00000000a +  -2.00000000b +   0.00000000c (E)\n\n       D-E:  -2.51280000 = -32.00000000a +   0.00000000b +   0.00000000c (F)\n\nFrom (F    ), a =   0.07852500 (G)\nFrom (D,G  ), b =  -0.18061250 (H)\nFrom (A,G,H), c = -41.63758750 (I)\n</code></pre>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "83758",
        "title": "",
        "text": "<p>From the wording of your question, it seems like you have more equations than unknowns and you want to minimize the inconsistencies.  This is typically done with linear regression, which minimizes the sum of the squares of the inconsistencies.  Depending on the size of the data, you can do this in a spreadsheet or in a statistical package.  R is a high-quality, free package that does linear regression, among a lot of other things.  There is a lot to linear regression (and a lot of gotcha's), but as it's straightforward to do for simple cases.  Here's an R example using your data.  Note that the \"tx\" is the intercept to your model.</p>\n\n<pre><code>&gt; y &lt;- c(-44.394, -45.3049, -44.9594)\n&gt; a &lt;- c(50.0, 43.0, 52.0)\n&gt; b &lt;- c(37.0, 39.0, 41.0)\n&gt; regression = lm(y ~ a + b)\n&gt; regression\n\nCall:\nlm(formula = y ~ a + b)\n\nCoefficients:\n(Intercept)            a            b  \n  -41.63759      0.07852     -0.18061  \n</code></pre>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "26578",
        "title": "",
        "text": "<p>Personally, I'm partial to the algorithms of <a href=\"http://www.nr.com/\" rel=\"nofollow noreferrer\">Numerical Recipes</a>. (I'm fond of the C++ edition.)</p>\n\n<p>This book will teach you why the algorithms work, plus show you some pretty-well debugged implementations of those algorithms.</p>\n\n<p>Of course, you could just blindly use <a href=\"http://www.netlib.org/clapack/\" rel=\"nofollow noreferrer\">CLAPACK</a> (I've used it with great success), but I would first hand-type a Gaussian Elimination algorithm to at least have a faint idea of the kind of work that has gone into making these algorithms stable.</p>\n\n<p>Later, if you're doing more interesting linear algebra, looking around the source code of <a href=\"http://www.gnu.org/software/octave/\" rel=\"nofollow noreferrer\">Octave</a> will answer a lot of questions.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "781",
        "title": "",
        "text": "<p><a href=\"http://en.wikipedia.org/wiki/Cramers_rule\" rel=\"noreferrer\">Cramer's Rule</a>\nand\n<a href=\"http://en.wikipedia.org/wiki/Gaussian_elimination\" rel=\"noreferrer\">Gaussian Elimination</a>\nare two good, general-purpose algorithms (also see <a href=\"http://en.wikipedia.org/wiki/Simultaneous_linear_equations\" rel=\"noreferrer\">Simultaneous Linear Equations</a>). If you're looking for code, check out <a href=\"http://en.wikipedia.org/wiki/GiNaC\" rel=\"noreferrer\">GiNaC</a>, <a href=\"http://maxima.sourceforge.net/\" rel=\"noreferrer\">Maxima</a>, and <a href=\"http://issc.uj.ac.za/symbolic/symbolic.html\" rel=\"noreferrer\">SymbolicC++</a> (depending on your licensing requirements, of course).</p>\n\n<p>EDIT: I know you're working in C land, but I also have to put in a good word for <a href=\"http://code.google.com/p/sympy/\" rel=\"noreferrer\">SymPy</a> (a  computer algebra system in Python). You can learn a lot from its algorithms (if you can read a bit of python). Also, it's under the new BSD license, while most of the free math packages are GPL.</p>\n",
        "votes": "22",
        "tags": "",
        "accepted": true
      },
      {
        "id": "770947",
        "title": "",
        "text": "<p>Take a look at the <a href=\"http://code.msdn.microsoft.com/solverfoundation\" rel=\"noreferrer\">Microsoft Solver Foundation</a>.</p>\n\n<p>With it you could write code like this:</p>\n\n<pre><code>  SolverContext context = SolverContext.GetContext();\n  Model model = context.CreateModel();\n\n  Decision a = new Decision(Domain.Real, \"a\");\n  Decision b = new Decision(Domain.Real, \"b\");\n  Decision c = new Decision(Domain.Real, \"c\");\n  model.AddDecisions(a,b,c);\n  model.AddConstraint(\"eqA\", -44.3940 == 50*a + 37*b + c);\n  model.AddConstraint(\"eqB\", -45.3049 == 43*a + 39*b + c);\n  model.AddConstraint(\"eqC\", -44.9594 == 52*a + 41*b + c);\n  Solution solution = context.Solve();\n  string results = solution.GetReport().ToString();\n  Console.WriteLine(results); \n</code></pre>\n\n<p><strong>Here is the output:</strong><br/>\n===Solver Foundation Service Report===<br/>\nDatetime: 04/20/2009 23:29:55<br/>\nModel Name: Default<br/>\nCapabilities requested: LP<br/>\nSolve Time (ms): 1027<br/>\nTotal Time (ms): 1414<br/>\nSolve Completion Status: Optimal<br/>\nSolver Selected: Microsoft.SolverFoundation.Solvers.SimplexSolver<br/>\nDirectives:<br/>\nMicrosoft.SolverFoundation.Services.Directive<br/>\nAlgorithm: Primal<br/>\nArithmetic: Hybrid<br/>\nPricing (exact): Default<br/>\nPricing (double): SteepestEdge<br/>\nBasis: Slack<br/>\nPivot Count: 3<br/>\n===Solution Details===<br/>\nGoals:<br/>\n<br/>\nDecisions:<br/>\na: 0.0785250000000004<br/>\nb: -0.180612500000001<br/>\nc: -41.6375875<br/></p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "99339",
        "title": "",
        "text": "<p>In terms of run-time efficiency, others have answered better than I.  If you always will have the same number of equations as variables, I like <a href=\"http://en.wikipedia.org/wiki/Cramer&#39;s_rule\" rel=\"nofollow noreferrer\">Cramer's rule</a> as it's easy to implement.  Just write a function to calculate determinant of a matrix (or use one that's already written, I'm sure you can find one out there), and divide the determinants of two matrices.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "26637",
        "title": "",
        "text": "<p><a href=\"http://math.nist.gov/tnt/download.html\" rel=\"nofollow noreferrer\">Template Numerical Toolkit</a> from NIST has tools for doing that. </p>\n\n<p>One of the more reliable ways is to use a <a href=\"http://en.wikipedia.org/wiki/QR_decomposition\" rel=\"nofollow noreferrer\">QR Decomposition</a>. </p>\n\n<p>Here's an example of a wrapper so that I can call \"GetInverse(A, InvA)\" in my code and it will put the inverse into InvA.</p>\n\n<pre><code>void GetInverse(const Array2D&lt;double&gt;&amp; A, Array2D&lt;double&gt;&amp; invA)\n   {\n   QR&lt;double&gt; qr(A);  \n   invA = qr.solve(I); \n   }\n</code></pre>\n\n<p>Array2D is defined in the library. </p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6206",
        "title": "",
        "text": "<p>For a 3x3 system of linear equations I guess it would be okay to roll out your own algorithms. </p>\n\n<p>However, you might have to worry about accuracy, division by zero or really small numbers and what to do about infinitely many solutions. My suggestion is to go with a standard numerical linear algebra package such as <a href=\"http://en.wikipedia.org/wiki/Lapack\" rel=\"nofollow noreferrer\">LAPACK</a>. </p>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "774",
        "title": "",
        "text": "<p>Are you looking for a software package that'll do the work or actually doing the matrix operations and such and do each step?</p>\n\n<p>The the first, a coworker of mine just used <a href=\"http://ocaml-glpk.sourceforge.net/\" rel=\"nofollow noreferrer\" title=\"Ocaml GLPK\">Ocaml GLPK</a>. It is just a wrapper for the <a href=\"http://www.gnu.org/software/glpk/\" rel=\"nofollow noreferrer\" title=\"GNU Linear Programming Kit\">GLPK</a>, but it removes a lot of the steps of setting things up. It looks like you're going to have to stick with the GLPK, in C, though. For the latter, thanks to delicious for saving an old article I used to learn LP awhile back, <a href=\"http://www.math.ucla.edu/~tom/LP.pdf\" rel=\"nofollow noreferrer\" title=\"Linear Programming\">PDF</a>. If you need specific help setting up further, let us know and I'm sure, me or someone will wander back in and help, but, I think it's fairly straight forward from here. Good Luck! </p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "27708081",
        "title": "",
        "text": "<pre><code>function x = LinSolve(A,y)\n%\n% Recursive Solution of Linear System Ax=y\n% matlab equivalent: x = A\\y \n% x = n x 1\n% A = n x n\n% y = n x 1\n% Uses stack space extensively. Not efficient.\n% C allows recursion, so convert it into C. \n% ----------------------------------------------\nn=length(y);\nx=zeros(n,1);\nif(n&gt;1)\n    x(1:n-1,1) = LinSolve( A(1:n-1,1:n-1) - (A(1:n-1,n)*A(n,1:n-1))./A(n,n) , ...\n                           y(1:n-1,1) - A(1:n-1,n).*(y(n,1)/A(n,n))); \n    x(n,1) = (y(n,1) - A(n,1:n-1)*x(1:n-1,1))./A(n,n); \nelse\n    x = y(1,1) / A(1,1);\nend\n</code></pre>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "773",
    "url": "https://stackoverflow.com/questions/773",
    "title": "How do I use itertools.groupby()?",
    "text:": "<p>I haven't been able to find an understandable explanation of how to actually use Python's <code>itertools.groupby()</code> function.  What I'm trying to do is this:</p>\n\n<ul>\n<li>Take a list - in this case, the children of an objectified <code>lxml</code> element</li>\n<li>Divide it into groups based on some criteria</li>\n<li>Then later iterate over each of these groups separately.</li>\n</ul>\n\n<p>I've reviewed <a href=\"https://docs.python.org/2/library/itertools.html\" rel=\"noreferrer\">the documentation</a>, and <a href=\"https://docs.python.org/2/library/itertools.html#itertools.groupby\" rel=\"noreferrer\">the examples</a>, but I've had trouble trying to apply them beyond a simple list of numbers. </p>\n\n<p>So, how do I use of <code>itertools.groupby()</code>?  Is there another technique I should be using?  Pointers to good \"prerequisite\" reading would also be appreciated.</p>\n",
    "codes": [
      [
        "groupby(iterable[, keyfunc]) -> create an iterator which returns\n(key, sub-iterator) grouped by each value of key(value).\n",
        "import itertools\n\n\ndef grouper(iterable, n):\n    def coroutine(n):\n        yield # queue up coroutine\n        for i in itertools.count():\n            for j in range(n):\n                yield i\n    groups = coroutine(n)\n    next(groups) # queue up coroutine\n\n    for c, objs in itertools.groupby(iterable, groups.send):\n        yield c, list(objs)\n    # or instead of materializing a list of objs, just:\n    # return itertools.groupby(iterable, groups.send)\n\nlist(grouper(range(10), 3))\n",
        "[(0, [0, 1, 2]), (1, [3, 4, 5]), (2, [6, 7, 8]), (3, [9])]\n"
      ],
      [
        "           def groupby(data):\n                kv = {}\n                for k,v in data:\n                    if k not in kv:\n                         kv[k]=[v]\n                    else:\n                        kv[k].append(v)\n           return kv\n\n     Run on ipython:\n       In [10]: data = [('a', 1), ('b',2),('a',2)]\n\n        In [11]: groupby(data)\n        Out[11]: {'a': [1, 2], 'b': [2]}\n"
      ],
      [
        "[(c,len(list(cgen))) for c,cgen in groupby(some_string)]\n"
      ],
      [
        "from itertools import groupby\n\nval = [{'name': 'satyajit', 'address': 'btm', 'pin': 560076}, \n       {'name': 'Mukul', 'address': 'Silk board', 'pin': 560078},\n       {'name': 'Preetam', 'address': 'btm', 'pin': 560076}]\n\n\nfor pin, list_data in groupby(sorted(val, key=lambda k: k['pin']),lambda x: x['pin']):\n...     print pin\n...     for rec in list_data:\n...             print rec\n... \no/p:\n\n560076\n{'name': 'satyajit', 'pin': 560076, 'address': 'btm'}\n{'name': 'Preetam', 'pin': 560076, 'address': 'btm'}\n560078\n{'name': 'Mukul', 'pin': 560078, 'address': 'Silk board'}\n"
      ],
      [
        "for key, igroup in itertools.groupby(xrange(12), lambda x: x // 5):\n    print key, list(igroup)\n",
        "0 [0, 1, 2, 3, 4]\n1 [5, 6, 7, 8, 9]\n2 [10, 11]\n",
        "def chunker(items, chunk_size):\n    '''Group items in chunks of chunk_size'''\n    for _key, group in itertools.groupby(enumerate(items), lambda x: x[0] // chunk_size):\n        yield (g[1] for g in group)\n\nwith open('file.txt') as fobj:\n    for chunk in chunker(fobj):\n        process(chunk)\n",
        "xx = range(10)\nyy = [0, 0, 0, 1, 1, 1, 0, 0, 0, 0]\nfor group in itertools.groupby(iter(xx), lambda x: yy[x]):\n    print group[0], list(group[1])\n",
        "0 [0, 1, 2]\n1 [3, 4, 5]\n0 [6, 7, 8, 9]\n"
      ],
      [
        "from itertools import groupby\n\nthings = [(\"vehicle\", \"bear\"), (\"animal\", \"duck\"), (\"animal\", \"cactus\"), (\"vehicle\", \"speed boat\"), (\"vehicle\", \"school bus\")]\n\nfor key, group in groupby(things, lambda x: x[0]):\n    for thing in group:\n        print \"A %s is a %s.\" % (thing[1], key)\n    print \" \"\n",
        "A bear is a vehicle.\n\nA duck is a animal.\nA cactus is a animal.\n\nA speed boat is a vehicle.\nA school bus is a vehicle.\n"
      ],
      [
        "from itertools import groupby\n\n#user input\n\nmyinput = input()\n\n#creating empty list to store output\n\nmyoutput = []\n\nfor k,g in groupby(myinput):\n\n    myoutput.append((len(list(g)),int(k)))\n\nprint(*myoutput)\n"
      ],
      [
        "# Define a printer for comparing outputs\n>>> def print_groupby(iterable, keyfunc=None):\n...    for k, g in it.groupby(iterable, keyfunc):\n...        print(\"key: '{}'--> group: {}\".format(k, list(g)))\n",
        "# Feature A: group consecutive occurrences\n>>> print_groupby(\"BCAACACAADBBB\")\nkey: 'B'--> group: ['B']\nkey: 'C'--> group: ['C']\nkey: 'A'--> group: ['A', 'A']\nkey: 'C'--> group: ['C']\nkey: 'A'--> group: ['A']\nkey: 'C'--> group: ['C']\nkey: 'A'--> group: ['A', 'A']\nkey: 'D'--> group: ['D']\nkey: 'B'--> group: ['B', 'B', 'B']\n\n# Feature B: group all occurrences\n>>> print_groupby(sorted(\"BCAACACAADBBB\"))\nkey: 'A'--> group: ['A', 'A', 'A', 'A', 'A']\nkey: 'B'--> group: ['B', 'B', 'B', 'B']\nkey: 'C'--> group: ['C', 'C', 'C']\nkey: 'D'--> group: ['D']\n\n# Feature C: group by a key function\n>>> # keyfunc = lambda s: s.islower()                      # equivalent\n>>> def keyfunc(s):\n...     \"\"\"Return a True if a string is lowercase, else False.\"\"\"   \n...     return s.islower()\n>>> print_groupby(sorted(\"bCAaCacAADBbB\"), keyfunc)\nkey: 'False'--> group: ['A', 'A', 'A', 'B', 'B', 'C', 'C', 'D']\nkey: 'True'--> group: ['a', 'a', 'b', 'b', 'c']\n",
        "# OP: Yes, you can use `groupby`, e.g. \n[do_something(list(g)) for _, g in groupby(lxml_elements, criteria_func)]\n"
      ],
      [
        "groups = []\nuniquekeys = []\nfor k, g in groupby(data, keyfunc):\n    groups.append(list(g))      # Store group iterator as a list\n    uniquekeys.append(k)\n"
      ],
      [
        "arr = [(1, \"A\"), (1, \"B\"), (1, \"C\"), (2, \"D\"), (2, \"E\"), (3, \"F\")]\n\nfor k,g in groupby(arr, lambda x: x[0]):\n    print(\"--\", k, \"--\")\n    for tup in g:\n        print(tup[1])  # tup[0] == k\n",
        "-- 1 --\nA\nB\nC\n-- 2 --\nD\nE\n-- 3 --\nF\n"
      ],
      [
        "groups = []\nuniquekeys = []\nfor k, g in groupby(data, keyfunc):\n   groups.append(list(g))    # Store group iterator as a list\n   uniquekeys.append(k)\n",
        "from itertools import groupby\n\nthings = [(\"animal\", \"bear\"), (\"animal\", \"duck\"), (\"plant\", \"cactus\"), (\"vehicle\", \"speed boat\"), (\"vehicle\", \"school bus\")]\n\nfor key, group in groupby(things, lambda x: x[0]):\n    for thing in group:\n        print \"A %s is a %s.\" % (thing[1], key)\n    print \" \"\n",
        "for key, group in groupby(things, lambda x: x[0]):\n    listOfThings = \" and \".join([thing[1] for thing in group])\n    print key + \"s:  \" + listOfThings + \".\"\n"
      ],
      [
        "from itertools import groupby \n[(c,len(list(cs))) for c,cs in groupby('Pedro Manoel')]\n",
        "[('P', 1), ('e', 1), ('d', 1), ('r', 1), ('o', 1), (' ', 1), ('M', 1), ('a', 1), ('n', 1), ('o', 1), ('e', 1), ('l', 1)]\n",
        "name = list('Pedro Manoel')\nname.sort()\n[(c,len(list(cs))) for c,cs in groupby(name)]\n",
        "[(' ', 1), ('M', 1), ('P', 1), ('a', 1), ('d', 1), ('e', 2), ('l', 1), ('n', 1), ('o', 2), ('r', 1)]\n"
      ],
      [
        "for x in list(groupby(range(10))):\n    print(list(x[1]))\n",
        "[]\n[]\n[]\n[]\n[]\n[]\n[]\n[]\n[]\n[9]\n",
        "def groupbylist(*args, **kwargs):\n    return [(k, list(g)) for k, g in groupby(*args, **kwargs)]\n"
      ]
    ],
    "votes:": "504",
    "tags": "<python><itertools>",
    "AcceptedAnswerId": "7286",
    "answers": [
      {
        "id": "31660194",
        "title": "",
        "text": "<blockquote>\n  <p><strong>How do I use Python's itertools.groupby()?</strong></p>\n</blockquote>\n\n<p>You can use groupby to group things to iterate over. You give groupby an iterable, and a optional <strong>key</strong> function/callable by which to check the items as they come out of the iterable, and it returns an iterator that gives a two-tuple of the result of the key callable and the actual items in another iterable. From the help:</p>\n\n<pre><code>groupby(iterable[, keyfunc]) -&gt; create an iterator which returns\n(key, sub-iterator) grouped by each value of key(value).\n</code></pre>\n\n<p>Here's an example of groupby using a coroutine to group by a count, it uses a key callable (in this case, <code>coroutine.send</code>) to just spit out the count for however many iterations and a grouped sub-iterator of elements:</p>\n\n<pre><code>import itertools\n\n\ndef grouper(iterable, n):\n    def coroutine(n):\n        yield # queue up coroutine\n        for i in itertools.count():\n            for j in range(n):\n                yield i\n    groups = coroutine(n)\n    next(groups) # queue up coroutine\n\n    for c, objs in itertools.groupby(iterable, groups.send):\n        yield c, list(objs)\n    # or instead of materializing a list of objs, just:\n    # return itertools.groupby(iterable, groups.send)\n\nlist(grouper(range(10), 3))\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>[(0, [0, 1, 2]), (1, [3, 4, 5]), (2, [6, 7, 8]), (3, [9])]\n</code></pre>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "52746139",
        "title": "",
        "text": "<p>You can write own groupby function:</p>\n\n<pre><code>           def groupby(data):\n                kv = {}\n                for k,v in data:\n                    if k not in kv:\n                         kv[k]=[v]\n                    else:\n                        kv[k].append(v)\n           return kv\n\n     Run on ipython:\n       In [10]: data = [('a', 1), ('b',2),('a',2)]\n\n        In [11]: groupby(data)\n        Out[11]: {'a': [1, 2], 'b': [2]}\n</code></pre>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "37252",
        "title": "",
        "text": "<p>A neato trick with groupby is to run length encoding in one line:</p>\n\n<pre><code>[(c,len(list(cgen))) for c,cgen in groupby(some_string)]\n</code></pre>\n\n<p>will give you a list of 2-tuples where the first element is the char and the 2nd is the number of repetitions.</p>\n\n<p>Edit: Note that this is what separates <code>itertools.groupby</code> from the SQL <code>GROUP BY</code> semantics: itertools doesn't (and in general can't) sort the iterator in advance, so groups with the same \"key\" aren't merged.</p>\n",
        "votes": "40",
        "tags": "",
        "accepted": false
      },
      {
        "id": "45431237",
        "title": "",
        "text": "<blockquote>\n  <p>Sorting and groupby</p>\n</blockquote>\n\n<pre><code>from itertools import groupby\n\nval = [{'name': 'satyajit', 'address': 'btm', 'pin': 560076}, \n       {'name': 'Mukul', 'address': 'Silk board', 'pin': 560078},\n       {'name': 'Preetam', 'address': 'btm', 'pin': 560076}]\n\n\nfor pin, list_data in groupby(sorted(val, key=lambda k: k['pin']),lambda x: x['pin']):\n...     print pin\n...     for rec in list_data:\n...             print rec\n... \no/p:\n\n560076\n{'name': 'satyajit', 'pin': 560076, 'address': 'btm'}\n{'name': 'Preetam', 'pin': 560076, 'address': 'btm'}\n560078\n{'name': 'Mukul', 'pin': 560078, 'address': 'Silk board'}\n</code></pre>\n",
        "votes": "7",
        "tags": "",
        "accepted": false
      },
      {
        "id": "14443477",
        "title": "",
        "text": "<p>Another example:</p>\n\n<pre><code>for key, igroup in itertools.groupby(xrange(12), lambda x: x // 5):\n    print key, list(igroup)\n</code></pre>\n\n<p>results in</p>\n\n<pre><code>0 [0, 1, 2, 3, 4]\n1 [5, 6, 7, 8, 9]\n2 [10, 11]\n</code></pre>\n\n<p>Note that igroup is an iterator (a sub-iterator as the documentation calls it).</p>\n\n<p>This is useful for chunking a generator:</p>\n\n<pre><code>def chunker(items, chunk_size):\n    '''Group items in chunks of chunk_size'''\n    for _key, group in itertools.groupby(enumerate(items), lambda x: x[0] // chunk_size):\n        yield (g[1] for g in group)\n\nwith open('file.txt') as fobj:\n    for chunk in chunker(fobj):\n        process(chunk)\n</code></pre>\n\n<p>Another example of groupby - when the keys are not sorted.  In the following example, items in xx are grouped by values in yy.  In this case, one set of zeros is output first, followed by a set of ones, followed again by a set of zeros.</p>\n\n<pre><code>xx = range(10)\nyy = [0, 0, 0, 1, 1, 1, 0, 0, 0, 0]\nfor group in itertools.groupby(iter(xx), lambda x: yy[x]):\n    print group[0], list(group[1])\n</code></pre>\n\n<p>Produces:</p>\n\n<pre><code>0 [0, 1, 2]\n1 [3, 4, 5]\n0 [6, 7, 8, 9]\n</code></pre>\n",
        "votes": "27",
        "tags": "",
        "accepted": false
      },
      {
        "id": "16427674",
        "title": "",
        "text": "<p>I would like to give another example where groupby without sort is not working. Adapted from example by James Sulak</p>\n\n<pre><code>from itertools import groupby\n\nthings = [(\"vehicle\", \"bear\"), (\"animal\", \"duck\"), (\"animal\", \"cactus\"), (\"vehicle\", \"speed boat\"), (\"vehicle\", \"school bus\")]\n\nfor key, group in groupby(things, lambda x: x[0]):\n    for thing in group:\n        print \"A %s is a %s.\" % (thing[1], key)\n    print \" \"\n</code></pre>\n\n<p>output is</p>\n\n<pre><code>A bear is a vehicle.\n\nA duck is a animal.\nA cactus is a animal.\n\nA speed boat is a vehicle.\nA school bus is a vehicle.\n</code></pre>\n\n<p>there are two groups with vehicule, whereas one could expect only one group</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "44617583",
        "title": "",
        "text": "<p>One useful example that I came across may be helpful:</p>\n\n<pre><code>from itertools import groupby\n\n#user input\n\nmyinput = input()\n\n#creating empty list to store output\n\nmyoutput = []\n\nfor k,g in groupby(myinput):\n\n    myoutput.append((len(list(g)),int(k)))\n\nprint(*myoutput)\n</code></pre>\n\n<p>Sample input: 14445221</p>\n\n<p>Sample output: (1,1) (3,4) (1,5) (2,2) (1,1)</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "45873519",
        "title": "",
        "text": "<p><code>itertools.groupby</code> is a tool for grouping items.</p>\n\n<p>From <a href=\"https://docs.python.org/3/library/itertools.html#itertools.groupby\" rel=\"noreferrer\">the docs</a>, we glean further what it might do:</p>\n\n<blockquote>\n  <p><code># [k for k, g in groupby('AAAABBBCCDAABBB')] --&gt; A B C D A B</code></p>\n  \n  <p><code># [list(g) for k, g in groupby('AAAABBBCCD')] --&gt; AAAA BBB CC D</code></p>\n</blockquote>\n\n<p><code>groupby</code> objects yield key-group pairs where the group is a generator.</p>\n\n<p>Features</p>\n\n<ul>\n<li>A. Group consecutive items together</li>\n<li>B. Group all occurrences of an item, given a sorted iterable</li>\n<li>C. Specify how to group items with a <em>key function</em> <sup>*</sup></li>\n</ul>\n\n<p>Comparisons</p>\n\n<pre><code># Define a printer for comparing outputs\n&gt;&gt;&gt; def print_groupby(iterable, keyfunc=None):\n...    for k, g in it.groupby(iterable, keyfunc):\n...        print(\"key: '{}'--&gt; group: {}\".format(k, list(g)))\n</code></pre>\n\n<p>    </p>\n\n<pre><code># Feature A: group consecutive occurrences\n&gt;&gt;&gt; print_groupby(\"BCAACACAADBBB\")\nkey: 'B'--&gt; group: ['B']\nkey: 'C'--&gt; group: ['C']\nkey: 'A'--&gt; group: ['A', 'A']\nkey: 'C'--&gt; group: ['C']\nkey: 'A'--&gt; group: ['A']\nkey: 'C'--&gt; group: ['C']\nkey: 'A'--&gt; group: ['A', 'A']\nkey: 'D'--&gt; group: ['D']\nkey: 'B'--&gt; group: ['B', 'B', 'B']\n\n# Feature B: group all occurrences\n&gt;&gt;&gt; print_groupby(sorted(\"BCAACACAADBBB\"))\nkey: 'A'--&gt; group: ['A', 'A', 'A', 'A', 'A']\nkey: 'B'--&gt; group: ['B', 'B', 'B', 'B']\nkey: 'C'--&gt; group: ['C', 'C', 'C']\nkey: 'D'--&gt; group: ['D']\n\n# Feature C: group by a key function\n&gt;&gt;&gt; # keyfunc = lambda s: s.islower()                      # equivalent\n&gt;&gt;&gt; def keyfunc(s):\n...     \"\"\"Return a True if a string is lowercase, else False.\"\"\"   \n...     return s.islower()\n&gt;&gt;&gt; print_groupby(sorted(\"bCAaCacAADBbB\"), keyfunc)\nkey: 'False'--&gt; group: ['A', 'A', 'A', 'B', 'B', 'C', 'C', 'D']\nkey: 'True'--&gt; group: ['a', 'a', 'b', 'b', 'c']\n</code></pre>\n\n<p>Uses</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/8181513/finding-and-grouping-anagrams-by-python\">Anagrams</a> (<a href=\"https://github.com/vterron/EuroPython-2016/blob/master/kung-fu-itertools.ipynb\" rel=\"noreferrer\">see notebook</a>)</li>\n<li><a href=\"https://stackoverflow.com/a/45991797/4531270\">Binning</a></li>\n<li><a href=\"https://naiquevin.github.io/a-look-at-some-of-pythons-useful-itertools.html\" rel=\"noreferrer\">Group odd and even numbers</a> </li>\n<li><a href=\"https://stackoverflow.com/questions/5695208/group-list-by-values\">Group a list by values</a></li>\n<li><a href=\"https://stackoverflow.com/questions/56796328/how-to-delete-repeat-elements-in-this-list\">Remove duplicate elements</a></li>\n<li><a href=\"https://stackoverflow.com/a/44792205/4531270\">Find indices of repeated elements in an array</a></li>\n<li><a href=\"https://stackoverflow.com/a/42677465/4531270\">Split an array into n-sized chunks</a></li>\n<li><a href=\"https://stackoverflow.com/a/41993784/4531270\">Find corresponding elements between two lists</a></li>\n<li><a href=\"https://youtu.be/iCrOGS1QlB8?t=27m27s\" rel=\"noreferrer\">Compression algorithm</a> (<a href=\"https://github.com/vterron/EuroPython-2016/blob/master/kung-fu-itertools.ipynb\" rel=\"noreferrer\">see notebook</a>)/<a href=\"https://stackoverflow.com/questions/25537028/run-length-encoding-in-python-with-list-comprehension/25537050#25537050\">Run Length Encoding</a></li>\n<li><a href=\"https://youtu.be/iCrOGS1QlB8?t=29m11s\" rel=\"noreferrer\">Grouping letters by length, key function</a> (<a href=\"https://github.com/vterron/EuroPython-2016/blob/master/kung-fu-itertools.ipynb\" rel=\"noreferrer\">see notebook</a>)</li>\n<li><a href=\"https://youtu.be/iCrOGS1QlB8?t=30m19s\" rel=\"noreferrer\">Consecutive values over a threshold</a> (<a href=\"https://github.com/vterron/EuroPython-2016/blob/master/kung-fu-itertools.ipynb\" rel=\"noreferrer\">see notebook</a>)</li>\n<li><a href=\"https://stackoverflow.com/questions/4628333/converting-a-list-of-integers-into-range-in-python\">Find ranges of numbers in a list</a> or <a href=\"https://stackoverflow.com/questions/2154249/identify-groups-of-continuous-numbers-in-a-list\">continuous items</a> (see <a href=\"https://docs.python.org/release/2.4.4/lib/itertools-example.html\" rel=\"noreferrer\">docs</a>)</li>\n<li><a href=\"https://stackoverflow.com/questions/46928922/pythonic-way-to-find-all-potential-longest-sequence\">Find all related longest sequences</a></li>\n<li><a href=\"https://stackoverflow.com/a/46752214/4531270\">Take consecutive sequences that meet a condition</a> (<a href=\"https://stackoverflow.com/a/46432991/4531270\">see related post</a>)</li>\n</ul>\n\n<p><em>Note: Several of the latter examples derive from V\u00edctor Terr\u00f3n's PyCon <a href=\"https://www.youtube.com/watch?v=iCrOGS1QlB8\" rel=\"noreferrer\">(talk)</a> <a href=\"https://www.youtube.com/watch?v=4ZIxcdREYVc\" rel=\"noreferrer\">(Spanish)</a>, \"Kung Fu at Dawn with Itertools\". See also the <code>groupby</code><a href=\"https://github.com/python/cpython/blob/6cca5c8459cc439cb050010ffa762a03859d3051/Modules/itertoolsmodule.c#L11-L375\" rel=\"noreferrer\">source code</a> written in C.</em></p>\n\n<p><sup>* A function where all items are passed through and compared, influencing the result.  Other objects with key functions include  <code>sorted()</code>, <code>max()</code> and <code>min()</code>.</sup></p>\n\n<hr>\n\n<p>Response</p>\n\n<pre><code># OP: Yes, you can use `groupby`, e.g. \n[do_something(list(g)) for _, g in groupby(lxml_elements, criteria_func)]\n</code></pre>\n",
        "votes": "68",
        "tags": "",
        "accepted": false
      },
      {
        "id": "783",
        "title": "",
        "text": "<p>The example on the Python docs is quite straightforward:</p>\n\n<pre><code>groups = []\nuniquekeys = []\nfor k, g in groupby(data, keyfunc):\n    groups.append(list(g))      # Store group iterator as a list\n    uniquekeys.append(k)\n</code></pre>\n\n<p>So in your case, data is a list of nodes, <code>keyfunc</code> is where the logic of your criteria function goes and then <code>groupby()</code> groups the data.</p>\n\n<p>You must be careful to <strong>sort the data</strong> by the criteria before you call <code>groupby</code> or it won't work. <code>groupby</code> method actually just iterates through a list and whenever the key changes it creates a new group.</p>\n",
        "votes": "87",
        "tags": "",
        "accepted": false
      },
      {
        "id": "61048516",
        "title": "",
        "text": "<p>This basic implementation helped me understand this function. Hope it helps others as well:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>arr = [(1, \"A\"), (1, \"B\"), (1, \"C\"), (2, \"D\"), (2, \"E\"), (3, \"F\")]\n\nfor k,g in groupby(arr, lambda x: x[0]):\n    print(\"--\", k, \"--\")\n    for tup in g:\n        print(tup[1])  # tup[0] == k\n</code></pre>\n\n<pre><code>-- 1 --\nA\nB\nC\n-- 2 --\nD\nE\n-- 3 --\nF\n</code></pre>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7286",
        "title": "",
        "text": "<p><strong>IMPORTANT NOTE:</strong> You have to <strong>sort your data</strong> first.</p>\n\n<hr>\n\n<p>The part I didn't get is that in the example construction</p>\n\n<pre><code>groups = []\nuniquekeys = []\nfor k, g in groupby(data, keyfunc):\n   groups.append(list(g))    # Store group iterator as a list\n   uniquekeys.append(k)\n</code></pre>\n\n<p><code>k</code> is the current grouping key, and <code>g</code> is an iterator that you can use to iterate over the group defined by that grouping key. In other words, the <code>groupby</code> iterator itself returns iterators.</p>\n\n<p>Here's an example of that, using clearer variable names:</p>\n\n<pre><code>from itertools import groupby\n\nthings = [(\"animal\", \"bear\"), (\"animal\", \"duck\"), (\"plant\", \"cactus\"), (\"vehicle\", \"speed boat\"), (\"vehicle\", \"school bus\")]\n\nfor key, group in groupby(things, lambda x: x[0]):\n    for thing in group:\n        print \"A %s is a %s.\" % (thing[1], key)\n    print \" \"\n</code></pre>\n\n<p>This will give you the output:</p>\n\n<blockquote>\n  <p>A bear is a animal.<br>\n  A duck is a animal.</p>\n  \n  <p>A cactus is a plant.</p>\n  \n  <p>A speed boat is a vehicle.<br>\n  A school bus is a vehicle.</p>\n</blockquote>\n\n<p>In this example, <code>things</code> is a list of tuples where the first item in each tuple is the group the second item belongs to. </p>\n\n<p>The <code>groupby()</code> function takes two arguments: (1) the data to group and (2) the function to group it with. </p>\n\n<p>Here, <code>lambda x: x[0]</code> tells <code>groupby()</code> to use the first item in each tuple as the grouping key.</p>\n\n<p>In the above <code>for</code> statement, <code>groupby</code> returns three (key, group iterator) pairs - once for each unique key. You can use the returned iterator to iterate over each individual item in that group.</p>\n\n<p>Here's a slightly different example with the same data, using a list comprehension:</p>\n\n<pre><code>for key, group in groupby(things, lambda x: x[0]):\n    listOfThings = \" and \".join([thing[1] for thing in group])\n    print key + \"s:  \" + listOfThings + \".\"\n</code></pre>\n\n<p>This will give you the output:</p>\n\n<blockquote>\n  <p>animals: bear and duck.<br>\n  plants: cactus.<br>\n  vehicles: speed boat and school bus.</p>\n</blockquote>\n",
        "votes": "656",
        "tags": "",
        "accepted": true
      },
      {
        "id": "1573195",
        "title": "",
        "text": "<p>@CaptSolo, I tried your example, but it didn't work.</p>\n\n<pre><code>from itertools import groupby \n[(c,len(list(cs))) for c,cs in groupby('Pedro Manoel')]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[('P', 1), ('e', 1), ('d', 1), ('r', 1), ('o', 1), (' ', 1), ('M', 1), ('a', 1), ('n', 1), ('o', 1), ('e', 1), ('l', 1)]\n</code></pre>\n\n<p>As you can see, there are two o's and two e's, but they got into separate groups. That's when I realized you need to sort the list passed to the groupby function. So, the correct usage would be:</p>\n\n<pre><code>name = list('Pedro Manoel')\nname.sort()\n[(c,len(list(cs))) for c,cs in groupby(name)]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[(' ', 1), ('M', 1), ('P', 1), ('a', 1), ('d', 1), ('e', 2), ('l', 1), ('n', 1), ('o', 2), ('r', 1)]\n</code></pre>\n\n<p>Just remembering, if the list is not sorted, the groupby function <strong>will not work</strong>!</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "20013133",
        "title": "",
        "text": "<p>WARNING:</p>\n\n<p>The syntax list(groupby(...)) won't work the way that you intend. It seems to destroy the internal iterator objects, so using</p>\n\n<pre><code>for x in list(groupby(range(10))):\n    print(list(x[1]))\n</code></pre>\n\n<p>will produce:</p>\n\n<pre><code>[]\n[]\n[]\n[]\n[]\n[]\n[]\n[]\n[]\n[9]\n</code></pre>\n\n<p>Instead, of list(groupby(...)), try [(k, list(g)) for k,g in groupby(...)], or if you use that syntax often,</p>\n\n<pre><code>def groupbylist(*args, **kwargs):\n    return [(k, list(g)) for k, g in groupby(*args, **kwargs)]\n</code></pre>\n\n<p>and get access to the groupby functionality while avoiding those pesky (for small data) iterators all together.</p>\n",
        "votes": "22",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "805",
    "url": "https://stackoverflow.com/questions/805",
    "title": "ASP, need to use SFTP",
    "text:": "<p>This is ASP classic, not .Net.  We have to get a way to SFTP into a server to upload and download a couple of files, kicked off by a user.</p>\n\n<p>What have other people used to do SFTP in ASP classic?  Not necessarily opposed to purchasing a control.</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "18",
    "tags": "<asp-classic><sftp>",
    "AcceptedAnswerId": "894",
    "answers": [
      {
        "id": "894",
        "title": "",
        "text": "<p>If you have the ability to use WScript.Shell then you can just execute pscp.exe from the <a href=\"http://www.chiark.greenend.org.uk/~sgtatham/putty/\" rel=\"noreferrer\">Putty</a> package. Obviously this is less then ideal but it will get the job done and let you use SCP/SFTP in classic ASP.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": true
      },
      {
        "id": "36693665",
        "title": "",
        "text": "<p>There is an issue with this method, in that you already have to have accepted the RSA finger-print. If not, then the script will either wait for user input to accept it or will skip over it if you are running in full batch mode, with a failure. Also, if the server changes so that it's RSA finger-print changes (e.g. a cluster) then you need to re-accept the finger-print again.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2867",
        "title": "",
        "text": "<p>The way I have done this is to create a command script file and pass this on the command line via the  /b command to psftp.exe.  I have also tried this in Perl and have yet to find a neater way of doing it.</p>\n\n<p>There is an issue with this method, in that you already have to have accepted the RSA finger-print.  If not, then the script will either wait for user input to accept it or will skip over it if you are running in full batch mode, with a failure.  Also, if the server changes so that it's RSA finger-print changes (e.g. a cluster) then you need to re-accept the finger-print again.</p>\n\n<p>Not an ideal method, but the only one I know.</p>\n\n<p>I shall be watching this question incase anyone knows another way.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "11153",
        "title": "",
        "text": "<p>I've previously used a component from here: www.weonlydo.com.  I didn't find it the easiest piece of kit to develop against but it got the job done in a hurry.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3128",
        "title": "",
        "text": "<p>I used to do that with FTP on windows (create a file of commands and shell out FTP.exe)</p>\n\n<p>Xetius I tried to upvote yours and accept your answer too and I received an warning that I needed 25 rep to do that.  Sorry.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "810",
    "url": "https://stackoverflow.com/questions/810",
    "title": "Visual Studio Setup Project - Per User Registry Settings",
    "text:": "<p>I'm trying to maintain a Setup Project in <code>Visual Studio 2003</code> (yes, it's a legacy application). The problem we have at the moment is that we need to write registry entries to <code>HKCU</code> for every user on the computer. They need to be in the <code>HKCU</code> rather than <code>HKLM</code> because they are the default user settings, and they do change per user. My feeling is that</p>\n\n<ol>\n<li>This isn't possible</li>\n<li>This isn't something the installer should be doing, but something the application should be doing (after all what happens when a user profile is created after the install?).</li>\n</ol>\n\n<p>With that in mind, I still want to change as little as possible in the application, so my question is, <strong>is it possible to add registry entries for every user in a <code>Visual Studio 2003</code> setup project?</strong> </p>\n\n<p>And, at the moment the project lists five registry root keys (<code>HKEY_CLASSES_ROOT, HKEY_CURRENT_USER</code>, <code>HKEY_LOCAL_MACHINE</code>, <code>HKEY_USERS</code>, and User/Machine Hive). I don't really know anything about the Users root key, and haven't seen User/Machine Hive. Can anyone enlighten me on what they are? Perhaps they could solve my problem above.</p>\n",
    "codes": [
      [],
      [
        "const HKEY_USERS = &H80000003\nstrComputer = \".\"\nSet objReg=GetObject(\"winmgmts:{impersonationLevel=impersonate}!\\\\\" & strComputer & \"\\root\\default:StdRegProv\")\nstrKeyPath = \"\"\nobjReg.EnumKey HKEY_USERS, strKeyPath, arrSubKeys\nstrKeyPath = \"\\Software\\Microsoft\\Windows\\CurrentVersion\\WinTrust\\Trust Providers\\Software Publishing\"\nFor Each subkey In arrSubKeys\n    objReg.SetDWORDValue HKEY_USERS, subkey & strKeyPath, \"State\", 146944\nNext\n"
      ],
      [],
      []
    ],
    "votes:": "19",
    "tags": "<windows><visual-studio><registry><installation>",
    "AcceptedAnswerId": "820",
    "answers": [
      {
        "id": "870",
        "title": "",
        "text": "<p>Despite what the <s><a href=\"http://msdn.microsoft.com/en-us/library/x6kd89c5(VS.80).aspx\" rel=\"nofollow noreferrer\">MSDN article</a></s> <a href=\"http://web.archive.org/web/20100112132447/http://msdn.microsoft.com/en-us/library/x6kd89c5(VS.80).aspx\" rel=\"nofollow noreferrer\">Archive of MSDN Article</a>  says about User/Machine Hive, it doesn't write to HKEY_USERS. Rather it writes to HKCU if you select Just Me and HKLM if you select everyone.</p>\n\n<p>So my solution is going to be to use the User/Machine Hive, and then in the application it checks if the registry entries are in HKCU and if not, copies them from HKLM. I know this probably isn't the most ideal way of doing it, but it has the least amount of changes.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "820",
        "title": "",
        "text": "<p>First: Yes, this is something that belongs in the Application for the exact reson you specified: What happens after new user profiles are created? Sure, if you're using a domain it's possible to have some stuff put in the registry on creation, but this is not really a use case. The Application should check if there are seetings and use the default settings if not.</p>\n\n<p>That being said, it IS possible to change other users Keys through the HKEY_USERS Hive.</p>\n\n<p>I have no experience with the Visual Studio 2003 Setup Project, so here is a bit of (totally unrelated) VBScript code that might just give you an idea where to look:</p>\n\n<pre><code>const HKEY_USERS = &amp;H80000003\nstrComputer = \".\"\nSet objReg=GetObject(\"winmgmts:{impersonationLevel=impersonate}!\\\\\" &amp; strComputer &amp; \"\\root\\default:StdRegProv\")\nstrKeyPath = \"\"\nobjReg.EnumKey HKEY_USERS, strKeyPath, arrSubKeys\nstrKeyPath = \"\\Software\\Microsoft\\Windows\\CurrentVersion\\WinTrust\\Trust Providers\\Software Publishing\"\nFor Each subkey In arrSubKeys\n    objReg.SetDWORDValue HKEY_USERS, subkey &amp; strKeyPath, \"State\", 146944\nNext\n</code></pre>\n\n<p>(Code Courtesy of <a href=\"http://jritmeijer.spaces.live.com/blog/cns!8A48A27460FB898A!965.entry\" rel=\"noreferrer\">Jeroen Ritmeijer</a>)</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": true
      },
      {
        "id": "829",
        "title": "",
        "text": "<p>I'm guessing that because you want to set it for all users, that you're on some kind of shared computer, which is probably running under a domain?</p>\n\n<p><strong>HERE BE DRAGONS</strong></p>\n\n<p>Let's say Joe and Jane regularly log onto the computer, then they will each have 'registries'.</p>\n\n<p>You'll then install your app, and the installer will employ giant hacks and disgusting things to set items under HKCU for them.</p>\n\n<p>THEN, bob will come along and log on (he, and 500 other people have accounts in the domain and so can do this). He's never used this computer before, so he has no registry. The first time he logs in, windows creates him one, but he won't have your setting. </p>\n\n<p>Your app then falls over or behaves incorrectly, and bob complains loudly about those crappy products from raynixon incorporated.</p>\n\n<p>The correct answer is to just have some default settings in your app, which can write them to the registry if it doesn't find them. It's general good practice that your app should never depend on the registry, and should create things as needed, for any registry entry, not just HKCU, anyway</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "818",
        "title": "",
        "text": "<p>I'm partway to my solution with this entry on MSDN (don't know how I couldn't find it before).</p>\n\n<p>User/Machine Hive<br>\nSubkeys and values entered under this hive will be installed under the HKEY_CURRENT_USER hive when a user chooses \"Just Me\" or the HKEY_USERS hive or when a user chooses \"Everyone\" during installation.</p>\n\n<p><s><a href=\"http://msdn.microsoft.com/en-us/library/x6kd89c5(VS.80).aspx\" rel=\"nofollow noreferrer\">Registry Editor</a></s> <a href=\"http://web.archive.org/web/20100112132447/http://msdn.microsoft.com/en-us/library/x6kd89c5(VS.80).aspx\" rel=\"nofollow noreferrer\">Archive of MSDN Article</a></p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "826",
    "url": "https://stackoverflow.com/questions/826",
    "title": "Efficiently get sorted sums of a sorted list",
    "text:": "<p>You have an ascending list of numbers, what is the most efficient algorithm you can think of to get the ascending list of sums of every two numbers in that list.  Duplicates in the resulting list are irrelevant, you can remove them or avoid them if you like.</p>\n\n<p>To be clear, I'm interested in the algorithm.  Feel free to post code in any language and paradigm that you like.</p>\n",
    "codes": [
      [
        "create table numbers(n int not null)\ninsert into numbers(n) values(1),(1), (2), (2), (3), (4)\n\n\nselect distinct num1.n+num2.n sum2n\nfrom numbers num1\ninner join numbers num2 \n    on num1.n<>num2.n\norder by sum2n\n",
        "List<int> num = new List<int>{ 1, 1, 2, 2, 3, 4};\nvar uNum = num.Distinct().ToList();\nvar sums=(from num1 in uNum\n        from num2 in uNum \n        where num1!=num2\n        select num1+num2).Distinct();\nforeach (var s in sums)\n{\n    Console.WriteLine(s);\n}\n"
      ],
      [],
      [],
      [
        "matrixOfSums list = [[a+b | b <- list, b >= a] | a <- list]\n\nsortedSums = foldl merge [] matrixOfSums\n\n--A normal merge, save that we remove duplicates\nmerge xs [] = xs\nmerge [] ys = ys\nmerge (x:xs) (y:ys) = case compare x y of\n    LT -> x:(merge xs (y:ys))\n    EQ -> x:(merge xs (dropWhile (==x) ys))\n    GT -> y:(merge (x:xs) ys)\n",
        "-- wide-merge does a standard merge (ala merge-sort) across an arbitrary number of lists\n-- wideNubMerge does this while eliminating duplicates\nwideNubMerge :: Ord a => [[a]] -> [a]\nwideNubMerge ls = wideNubMerge1 $ filter (/= []) ls\nwideNubMerge1 [] = []\nwideNubMerge1 ls = mini:(wideNubMerge rest)\n    where mini = minimum $ map head ls\n          rest = map (dropWhile (== mini)) ls\n\nbetterSortedSums = wideNubMerge matrixOfSums\n"
      ],
      [
        "1 4  5  6  8  9\n---------------\n2 5  6  7  9 10\n  8  9 10 12 13\n    10 11 13 14\n       12 14 15\n          16 17\n             18\n"
      ],
      [],
      [
        "step 1 (startinglist) \nfor each number num1 in startinglist\n   for each number num2 in startinglist\n      add num1 plus num2 into templist\n   add templist to sumlist\nreturn sumlist \n",
        "step 2 (sumlist) \ncreate an empty list mergedlist\nfor each list templist in sumlist\n   set mergelist equal to: merge(mergedlist,templist)\nreturn mergedlist\n"
      ],
      [
        "allSums = set(a+b for a in X for b in X)\nallSums = sorted(allSums)\n"
      ]
    ],
    "votes:": "22",
    "tags": "<algorithm><language-agnostic>",
    "AcceptedAnswerId": "97294",
    "answers": [
      {
        "id": "6458",
        "title": "",
        "text": "<p>In SQL:</p>\n\n<pre><code>create table numbers(n int not null)\ninsert into numbers(n) values(1),(1), (2), (2), (3), (4)\n\n\nselect distinct num1.n+num2.n sum2n\nfrom numbers num1\ninner join numbers num2 \n    on num1.n&lt;&gt;num2.n\norder by sum2n\n</code></pre>\n\n<p>C# LINQ:</p>\n\n<pre><code>List&lt;int&gt; num = new List&lt;int&gt;{ 1, 1, 2, 2, 3, 4};\nvar uNum = num.Distinct().ToList();\nvar sums=(from num1 in uNum\n        from num2 in uNum \n        where num1!=num2\n        select num1+num2).Distinct();\nforeach (var s in sums)\n{\n    Console.WriteLine(s);\n}\n</code></pre>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "834",
        "title": "",
        "text": "<p>If you are looking for a truly language agnostic solution then you will be sorely disappointed in my opinion because you'll be stuck with a for loop and some conditionals. However if you opened it up to functional languages or functional language features (I'm looking at you LINQ) then my colleagues here can fill this page with elegant examples in Ruby, Lisp, Erlang, and others.</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "20701",
        "title": "",
        "text": "<p>This question has been wracking my brain for about a day now. Awesome.</p>\n\n<p>Anyways, you can't get away from the n^2 nature of it easily, but you can do slightly better with the merge since you can bound the range to insert each element in.</p>\n\n<p>If you look at all the lists you generate, they have the following form:</p>\n\n<p><code>(a[i], a[j]) | j&gt;=i</code></p>\n\n<p>If you flip it 90 degrees, you get:</p>\n\n<p><code>(a[i], a[j]) | i&lt;=j</code></p>\n\n<p>Now, the merge process should be taking two lists <code>i</code> and <code>i+1</code> (which correspond to lists where the first member is always <code>a[i]</code> and <code>a[i+1]</code>), you can bound the range to insert element <code>(a[i + 1], a[j])</code> into list <code>i</code> by the location of <code>(a[i], a[j])</code> and the location of <code>(a[i + 1], a[j + 1])</code>.</p>\n\n<p>This means that you should merge in reverse in terms of <code>j</code>. I don't know (yet) if you can leverage this across <code>j</code> as well, but it seems possible.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "840",
        "title": "",
        "text": "<p>The best I could come up with is to produce a matrix of sums of each pair, and then merge the rows together, a-la merge sort.  I feel like I'm missing some simple insight that will reveal a much more efficient solution.</p>\n\n<p>My algorithm, in Haskell:</p>\n\n<pre><code>matrixOfSums list = [[a+b | b &lt;- list, b &gt;= a] | a &lt;- list]\n\nsortedSums = foldl merge [] matrixOfSums\n\n--A normal merge, save that we remove duplicates\nmerge xs [] = xs\nmerge [] ys = ys\nmerge (x:xs) (y:ys) = case compare x y of\n    LT -&gt; x:(merge xs (y:ys))\n    EQ -&gt; x:(merge xs (dropWhile (==x) ys))\n    GT -&gt; y:(merge (x:xs) ys)\n</code></pre>\n\n<p>I found a minor improvement, one that's more amenable to lazy stream-based coding.  Instead of merging the columns pair-wise, merge all of them at once.  The advantage being that you start getting elements of the list immediately.</p>\n\n<pre><code>-- wide-merge does a standard merge (ala merge-sort) across an arbitrary number of lists\n-- wideNubMerge does this while eliminating duplicates\nwideNubMerge :: Ord a =&gt; [[a]] -&gt; [a]\nwideNubMerge ls = wideNubMerge1 $ filter (/= []) ls\nwideNubMerge1 [] = []\nwideNubMerge1 ls = mini:(wideNubMerge rest)\n    where mini = minimum $ map head ls\n          rest = map (dropWhile (== mini)) ls\n\nbetterSortedSums = wideNubMerge matrixOfSums\n</code></pre>\n\n<p>However, if you know you're going to use all of the sums, and there's no advantage to getting some of them earlier, go with '<code>foldl merge []</code>', as it's faster.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "97294",
        "title": "",
        "text": "<p>Edit as of 2018: You should probably stop reading this. (But I can't delete it as it is accepted.)</p>\n\n<p>If you write out the sums like this:</p>\n\n<pre><code>1 4  5  6  8  9\n---------------\n2 5  6  7  9 10\n  8  9 10 12 13\n    10 11 13 14\n       12 14 15\n          16 17\n             18\n</code></pre>\n\n<p>You'll notice that since M[i,j] &lt;= M[i,j+1] and M[i,j] &lt;= M[i+1,j], then you only need to examine the top left \"corners\" and choose the lowest one.</p>\n\n<p>e.g.</p>\n\n<ul>\n<li>only 1 top left corner, pick 2</li>\n<li>only 1, pick 5</li>\n<li>6 or 8, pick 6</li>\n<li>7 or 8, pick 7</li>\n<li>9 or 8, pick 8</li>\n<li>9 or 9, pick both :)</li>\n<li>10 or 10 or 10, pick all</li>\n<li>12 or 11, pick 11</li>\n<li>12 or 12, pick both</li>\n<li>13 or 13, pick both</li>\n<li>14 or 14, pick both</li>\n<li>15 or 16, pick 15</li>\n<li>only 1, pick 16</li>\n<li>only 1, pick 17</li>\n<li>only 1, pick 18</li>\n</ul>\n\n<p>Of course, when you have <em>lots</em> of top left corners then this solution devolves.</p>\n\n<p>I'm pretty sure this problem is \u03a9(n\u00b2), because you have to calculate the sums for each M[i,j] -- unless someone has a better algorithm for the summation :)</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": true
      },
      {
        "id": "97567",
        "title": "",
        "text": "<p>No matter what you do, without additional constraints on the input values, you cannot do better than O(n^2), simply because you have to iterate through all pairs of numbers.  The iteration will dominate sorting (which you can do in O(n log n) or faster).</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "884",
        "title": "",
        "text": "<p>Rather than coding this out, I figure I'll pseudo-code it in steps and explain my logic, so that better programmers can poke holes in my logic if necessary. </p>\n\n<p>On the first step we start out with a list of numbers length n. For each number we need to create a list of length n-1 becuase we aren't adding a number to itself. By the end we have a list of about n sorted lists that was generated in O(n^2) time.</p>\n\n<pre><code>step 1 (startinglist) \nfor each number num1 in startinglist\n   for each number num2 in startinglist\n      add num1 plus num2 into templist\n   add templist to sumlist\nreturn sumlist \n</code></pre>\n\n<p>In step 2 because the lists were sorted by design (add a number to each element in a sorted list and the list will still be sorted) we can simply do a mergesort by merging each list together rather than mergesorting the whole lot.  In the end this should take O(n^2) time.</p>\n\n<pre><code>step 2 (sumlist) \ncreate an empty list mergedlist\nfor each list templist in sumlist\n   set mergelist equal to: merge(mergedlist,templist)\nreturn mergedlist\n</code></pre>\n\n<p>The merge method would be then the normal merge step with a check to make sure that there are no duplicate sums.  I won't write this out because anyone can look up mergesort.</p>\n\n<p>So there's my solution.  The entire algorithm is O(n^2) time.  Feel free to point out any mistakes or improvements.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7842",
        "title": "",
        "text": "<p>You can do this in two lines in python with</p>\n\n<pre><code>allSums = set(a+b for a in X for b in X)\nallSums = sorted(allSums)\n</code></pre>\n\n<p>The cost of this is n^2 (maybe an extra log factor for the set?) for the iteration and s * log(s) for the sorting where s is the size of the set. </p>\n\n<p>The size of the set could be as big as n*(n-1)/2 for example if X = [1,2,4,...,2^n]. So if you want to generate this list it will take at least n^2/2 in the worst case since this is the size of the output.</p>\n\n<p>However if you want to select the first k elements of the result you can do this in O(kn) using a selection algorithm for sorted X+Y matrices by Frederickson and Johnson (<a href=\"http://arxiv.org/abs/0804.0936\" rel=\"nofollow noreferrer\">see here for gory details)</a>. Although this can probably be modified to generate them online by reusing computation and get an efficient generator for this set. </p>\n\n<p>@deuseldorf, Peter\nThere is some confusion about (n!) I seriously doubt deuseldorf meant \"n factorial\" but simply \"n, (very excited)!\" </p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "832",
    "url": "https://stackoverflow.com/questions/832",
    "title": "How do I most elegantly express left join with aggregate SQL as LINQ query",
    "text:": "<p>SQL:</p>\n\n<pre><code>SELECT\n   u.id,\n   u.name,\n   isnull(MAX(h.dateCol), '1900-01-01') dateColWithDefault\nFROM universe u\nLEFT JOIN history h \n   ON u.id=h.id \n   AND h.dateCol&lt;GETDATE()-1\nGROUP BY u.Id, u.name\n</code></pre>\n",
    "codes": [
      [
        "var collection=\n    from u in db.Universe\n    select new\n    {\n        u.id,\n        u.name,\n        MaxDate =(DateTime?)\n       (\n           from h in db.History\n           where u.Id == h.Id\n           && h.dateCol < yesterday\n           select h.dateCol \n       ).Max()\n    };\n"
      ],
      [
        "var collection=\n    from u in db.Universe\n    select new\n    {\n        u.id,\n        u.name,\n        MaxDate =(DateTime?)\n       (\n           from h in db.History\n           where u.Id == h.Id\n           && h.dateCol < yesterday\n           select h.dateCol \n       ).Max()\n    };\n"
      ],
      [
        "TestContext db = new TestContext(CreateSparqlTripleStore());\nvar q = from a in db.Album\n        join t in db.Track on a.Name equals t.AlbumName into tracks\n        select new Album{Name = a.Name, Tracks = tracks};\nforeach(var album in q){\n    Console.WriteLine(album.Name);\n    foreach (Track track in album.Tracks)\n    {\n        Console.WriteLine(track.Title);\n    }\n}\n"
      ],
      [
        "var collection = \nfrom u in db.Universe\njoin history in db.History on u.id = history.id into temp\nfrom h in temp.DefaultIfEmpty()\nwhere h.dateCol < DateTime.Now.Date.AddDays(-1)\nselect u.id, u.name, h.dateCol ?? '1900-01-01'\n"
      ]
    ],
    "votes:": "21",
    "tags": "<c#><linq><left-join>",
    "AcceptedAnswerId": "837",
    "answers": [
      {
        "id": "36693733",
        "title": "",
        "text": "<pre><code>var collection=\n    from u in db.Universe\n    select new\n    {\n        u.id,\n        u.name,\n        MaxDate =(DateTime?)\n       (\n           from h in db.History\n           where u.Id == h.Id\n           &amp;&amp; h.dateCol &lt; yesterday\n           select h.dateCol \n       ).Max()\n    };\n</code></pre>\n\n<p>Just youse the above code and this should work fine!</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "837",
        "title": "",
        "text": "<p>A solution, albeit one that defers handling of the null value to the code, could be:</p>\n\n<blockquote>\n  <p>DateTime yesterday = DateTime.Now.Date.AddDays(-1);</p>\n</blockquote>\n\n<pre><code>var collection=\n    from u in db.Universe\n    select new\n    {\n        u.id,\n        u.name,\n        MaxDate =(DateTime?)\n       (\n           from h in db.History\n           where u.Id == h.Id\n           &amp;&amp; h.dateCol &lt; yesterday\n           select h.dateCol \n       ).Max()\n    };\n</code></pre>\n\n<p>This does not produce exactly the same SQL, but does provide the same logical result. Translating \"complex\" SQL queries to LINQ is not always straightforward.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": true
      },
      {
        "id": "80296",
        "title": "",
        "text": "<p>You're going to want to use the <code>join into</code> construct to create a group query.</p>\n\n<pre><code>TestContext db = new TestContext(CreateSparqlTripleStore());\nvar q = from a in db.Album\n        join t in db.Track on a.Name equals t.AlbumName into tracks\n        select new Album{Name = a.Name, Tracks = tracks};\nforeach(var album in q){\n    Console.WriteLine(album.Name);\n    foreach (Track track in album.Tracks)\n    {\n        Console.WriteLine(track.Title);\n    }\n}\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "33140",
        "title": "",
        "text": "<p>This isn't a full answer for you, but on the left join piece you can use the DefaultIfEmpty operator like so:</p>\n\n<pre><code>var collection = \nfrom u in db.Universe\njoin history in db.History on u.id = history.id into temp\nfrom h in temp.DefaultIfEmpty()\nwhere h.dateCol &lt; DateTime.Now.Date.AddDays(-1)\nselect u.id, u.name, h.dateCol ?? '1900-01-01'\n</code></pre>\n\n<p>I haven't had the need to do any <code>groupby</code> commands yet, so I left that out as to not send you down the wrong path.  Two other quick things to note.  I have been unable to actually join on two parameters although as above there are ways to get around it.  Also, the ?? operator works really well in place of the <code>isnull</code> in SQL.  </p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "833",
    "url": "https://stackoverflow.com/questions/833",
    "title": "Editing database records by multiple users",
    "text:": "<p>I have designed database tables (normalised, on an MS SQL server) and created a standalone windows front end for an application that will be used by a handful of users to add and edit information. We will add a web interface to allow searching accross our production area at a later date.</p>\n\n<p>I am concerned that if two users start editing the same record then the last to commit the update would be the 'winner' and important information may be lost. A number of solutions come to mind but I'm not sure if I am going to create a bigger headache.</p>\n\n<ol>\n<li>Do nothing and hope that two users are never going to be editing the same record at the same time. <em>- Might never happed but what if it does?</em></li>\n<li>Editing routine could store a copy of the original data as well as the updates and then compare when the user has finished editing. If they differ show user and comfirm update <em>- Would require two copies of data to be stored.</em></li>\n<li>Add last updated DATETIME column and check it matches when we update, if not then show differences. <em>- requires new column in each of the relevant tables.</em></li>\n<li>Create an editing table that registers when users start editing a record that will be checked and prevent other users from editing same record. <em>- would require carful thought of program flow to prevent deadlocks and records becoming locked if a user crashes out of the program.</em></li>\n</ol>\n\n<p>Are there any better solutions or should I go for one of these?</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      [],
      [
        "SELECT \n    customer_nm,\n    customer_nm AS customer_nm_orig\nFROM demo_customer\nWHERE customer_id = @p_customer_id\n",
        "UPDATE demo_customer\nSET customer_nm = @p_customer_name_new\nWHERE customer_id = @p_customer_id\nAND customer_name = @p_customer_nm_old\n\nIF @@ROWCOUNT = 0\n    RAISERROR( 'Update failed: Data changed' );\n"
      ],
      []
    ],
    "votes:": "29",
    "tags": "<sql-server><database>",
    "AcceptedAnswerId": "838",
    "answers": [
      {
        "id": "156759",
        "title": "",
        "text": "<p>A classic approach is as follows: </p>\n\n<ul>\n<li>add a boolean field , \"locked\" to each table.  </li>\n<li>set this to false by default. </li>\n<li><p>when a user starts editing, you do this: </p>\n\n<ul>\n<li>lock the row (or the whole table if you can't lock the row) </li>\n<li>check the flag on the row you want to edit</li>\n<li>if the flag is true then \n\n<ul>\n<li>inform the user that they cannot edit that row at the moment</li>\n</ul></li>\n<li>else\n\n<ul>\n<li>set the flag to true</li>\n</ul></li>\n<li><p>release the lock</p></li>\n<li><p>when saving the record, set the flag back to false</p></li>\n</ul></li>\n</ul>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "38372873",
        "title": "",
        "text": "<p>-first create filed (update time) to store last update record\n-when any user select record save select time,\ncompare between select time and update time field if( update time) > (select time) that mean another user update this record after select record</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "981",
        "title": "",
        "text": "<p>The database will do this for you.  Look at \"select ... for update\", which is designed just for this kind of thing.  It will give you a write lock on the selected rows, which you can then commit or roll back.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6464596",
        "title": "",
        "text": "<p>With me, the best way i have a column lastupdate (timetamp datatype).\nwhen select and update just compare this value\nanother advance of this solution is that you can use this column to track down the time data has change.\nI think it is not good if you just create a colum like isLock for check update.</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "838",
        "title": "",
        "text": "<p>If you expect infrequent collisions, <a href=\"http://msdn.microsoft.com/en-us/library/aa0416cz.aspx\" rel=\"noreferrer\">Optimistic Concurrency</a> is probably your best bet.</p>\n\n<p>Scott Mitchell wrote a comprehensive tutorial on implementing that pattern:<br>\n<a href=\"http://www.asp.net/Learn/data-access/tutorial-21-cs.aspx\" rel=\"noreferrer\">Implementing Optimistic Concurrency</a></p>\n",
        "votes": "16",
        "tags": "",
        "accepted": true
      },
      {
        "id": "1620",
        "title": "",
        "text": "<p>@ Mark Harrison : SQL Server does not support that syntax (<code>SELECT ... FOR UPDATE</code>).</p>\n\n<p>The SQL Server equivalent is the <code>SELECT</code> statement hint <code>UPDLOCK</code>.</p>\n\n<p>See <a href=\"http://msdn.microsoft.com/en-us/library/ms187373.aspx\" rel=\"nofollow noreferrer\">SQL Server Books Online</a> for more information.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "10437",
        "title": "",
        "text": "<p>Another option is to test that the values in the record that you are changing are the still the same as they were when you started: </p>\n\n<pre><code>SELECT \n    customer_nm,\n    customer_nm AS customer_nm_orig\nFROM demo_customer\nWHERE customer_id = @p_customer_id\n</code></pre>\n\n<p>(display the customer_nm field and the user changes it)</p>\n\n<pre><code>UPDATE demo_customer\nSET customer_nm = @p_customer_name_new\nWHERE customer_id = @p_customer_id\nAND customer_name = @p_customer_nm_old\n\nIF @@ROWCOUNT = 0\n    RAISERROR( 'Update failed: Data changed' );\n</code></pre>\n\n<p>You don't have to add a new column to your table (and keep it up to date), but you do have to create more verbose SQL statements and pass <em>new</em> and <em>old</em> fields to the stored procedure.</p>\n\n<p>It also has the advantage that you are not locking the records - because we all know that records will end up staying locked when they should not be...</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "156358",
        "title": "",
        "text": "<p>SELECT FOR UPDATE and equivalents are good providing you hold the lock for a microscopic amount of time, but for a macroscopic amount (e.g. the user has the data loaded and hasn't pressed 'save' you should use optimistic concurrency as above.  (Which I always think is misnamed - it's more pessimistic than 'last writer wins', which is usually the only other alternative considered.)</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "835",
    "url": "https://stackoverflow.com/questions/835",
    "title": "CruiseControl.net, msbuild, /p:OutputPath and CCNetArtifactDirectory",
    "text:": "<p>I'm trying to setup CruiseControl.net at the moment. So far it works nice, but I have a Problem with the MSBuild Task.</p>\n\n<p>According to the <a href=\"http://confluence.public.thoughtworks.org/display/CCNET/MsBuild+Task\" rel=\"noreferrer\">Documentation</a>, it passes CCNetArtifactDirectory to MSBuild. But how do I use it?</p>\n\n<p>I tried this:</p>\n\n<pre><code>&lt;buildArgs&gt;\n   /noconsolelogger /p:OutputPath=$(CCNetArtifactDirectory)\\test\n&lt;/buildArgs&gt;\n</code></pre>\n\n<p>But that does not work. In fact, it kills the service with this error:</p>\n\n<blockquote>\n  <p>ThoughtWorks.CruiseControl.Core.Config.Preprocessor.EvaluationException: Reference to unknown symbol CCNetArtifactDirectory</p>\n</blockquote>\n\n<p>Documentation is rather sparse, and google und mainly offers modifying the .sln Project file, which is what I want to avoid in order to be able to manually build this project later - I would really prefer <code>/p:OutputPath</code>.</p>\n",
    "codes": [
      [
        "<cb:define project.artifactDirectory=\"C:\\foo\">\n<project>\n  <!-- [...] -->\n  <artifactDirectory>$(project.artifactDirectory)</artifactDirectory>\n  <!-- [...] -->\n  <tasks>\n    <!-- [...] -->\n    <msbuild>\n      <!-- [...] -->\n      <buildArgs>/noconsolelogger /p:OutputPath=$(project.artifactDirectory)\\test</buildArgs>\n      <!-- [...] -->\n    </msbuild>\n    <!-- [...] -->\n  </tasks>\n  <!-- [...] -->\n</project>\n"
      ],
      [
        "<Exec\n  Command='FxCopCmd.exe /project:\"$(MSBuildProjectDirectory)\\FXCopRules.FxCop\" /out:\"$(CCNetArtifactDirectory)\\ProjectName.FxCop.xml\"'\n  WorkingDirectory=\"C:\\Program Files\\Microsoft FxCop 1.35\"\n  ContinueOnError=\"true\"\n  IgnoreExitCode=\"true\"\n/>\n"
      ],
      [
        "<executable>c:\\WINDOWS\\Microsoft.NET\\Framework\\v3.5\\MSBuild.exe</executable>\n<workingDirectory>C:\\data\\projects\\FooSolution\\</workingDirectory>\n<projectFile>FooSolution.sln</projectFile>\n<buildArgs>/noconsolelogger /p:Configuration=Debug </buildArgs>\n",
        "<publishers>\n  <xmllogger />\n  <buildpublisher>\n    <sourceDir>C:\\data\\projects\\FooSolution\\FooProject\\bin\\Debug</sourceDir>\n    <publishDir>C:\\published\\FooSolution\\</publishDir>\n    <useLabelSubDirectory>false</useLabelSubDirectory>\n  </buildpublisher>\n</publishers>\n"
      ]
    ],
    "votes:": "17",
    "tags": "<msbuild><cruisecontrol.net>",
    "AcceptedAnswerId": "1023",
    "answers": [
      {
        "id": "2343524",
        "title": "",
        "text": "<p>Parameters like <code>CCNetArtifactDirectory</code> are passed to external programs using environment variables. They are available in the external program but they aren't inside <code>CCNET</code> configuration. This often leads to confusion.</p>\n\n<p>You can use a preprocessor constant instead: </p>\n\n<pre><code>&lt;cb:define project.artifactDirectory=\"C:\\foo\"&gt;\n&lt;project&gt;\n  &lt;!-- [...] --&gt;\n  &lt;artifactDirectory&gt;$(project.artifactDirectory)&lt;/artifactDirectory&gt;\n  &lt;!-- [...] --&gt;\n  &lt;tasks&gt;\n    &lt;!-- [...] --&gt;\n    &lt;msbuild&gt;\n      &lt;!-- [...] --&gt;\n      &lt;buildArgs&gt;/noconsolelogger /p:OutputPath=$(project.artifactDirectory)\\test&lt;/buildArgs&gt;\n      &lt;!-- [...] --&gt;\n    &lt;/msbuild&gt;\n    &lt;!-- [...] --&gt;\n  &lt;/tasks&gt;\n  &lt;!-- [...] --&gt;\n&lt;/project&gt;\n</code></pre>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1281",
        "title": "",
        "text": "<p>You can use the artifact directory variable inside the MSBuild script itself.  Here's an example of how I'm running FxCop right now from my CC.Net MSBuild script (this script is what CC.Net points to - there is also a \"Build\" target in the script that includes an MSBuild task against the SLN to do the actual compilation):</p>\n\n<pre><code>&lt;Exec\n  Command='FxCopCmd.exe /project:\"$(MSBuildProjectDirectory)\\FXCopRules.FxCop\" /out:\"$(CCNetArtifactDirectory)\\ProjectName.FxCop.xml\"'\n  WorkingDirectory=\"C:\\Program Files\\Microsoft FxCop 1.35\"\n  ContinueOnError=\"true\"\n  IgnoreExitCode=\"true\"\n/&gt;\n</code></pre>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1023",
        "title": "",
        "text": "<p>The CCNetArtifactDirectory is passed to the MSBuild by default, so you dont need to worry about it. MSBuild will place the build output in the \"bin location\" relevant to the working directory that you have specified.</p>\n\n<pre><code>&lt;executable&gt;c:\\WINDOWS\\Microsoft.NET\\Framework\\v3.5\\MSBuild.exe&lt;/executable&gt;\n&lt;workingDirectory&gt;C:\\data\\projects\\FooSolution\\&lt;/workingDirectory&gt;\n&lt;projectFile&gt;FooSolution.sln&lt;/projectFile&gt;\n&lt;buildArgs&gt;/noconsolelogger /p:Configuration=Debug &lt;/buildArgs&gt;\n</code></pre>\n\n<p>So in the above example your build output will be put in C:\\data\\projects\\FooSolution[ProjectName]\\bin\\Debug. Should you want to output to a different location you may want to look at of the  tag in CCNET.</p>\n\n<pre><code>&lt;publishers&gt;\n  &lt;xmllogger /&gt;\n  &lt;buildpublisher&gt;\n    &lt;sourceDir&gt;C:\\data\\projects\\FooSolution\\FooProject\\bin\\Debug&lt;/sourceDir&gt;\n    &lt;publishDir&gt;C:\\published\\FooSolution\\&lt;/publishDir&gt;\n    &lt;useLabelSubDirectory&gt;false&lt;/useLabelSubDirectory&gt;\n  &lt;/buildpublisher&gt;\n&lt;/publishers&gt;\n</code></pre>\n\n<p>This will allow you to publish your output to a different location.</p>\n",
        "votes": "7",
        "tags": "",
        "accepted": true
      }
    ]
  },
  {
    "id:": "845",
    "url": "https://stackoverflow.com/questions/845",
    "title": "How to detect which one of the defined font was used in a web page?",
    "text:": "<p>Suppose I have the following CSS rule in my page:</p>\n\n<pre class=\"lang-css prettyprint-override\"><code>body {\n  font-family: Calibri, Trebuchet MS, Helvetica, sans-serif;\n}\n</code></pre>\n\n<p>How can I detect which one of the defined fonts was used in the user's browser?</p>\n\n<p><strong>Edit for people wondering why I want to do this:</strong> The font I'm detecting contains glyph's that are not available in other fonts and when the user does not have the font I want to display a link asking the user to download that font so they can use my web application with the correct font.</p>\n\n<p>Currently I am displaying the download font link for all users, I want to only display this for people who do not have the correct font installed.</p>\n",
    "codes": [
      [
        "@font-face { \nfont-family: \"Calibri\"; \nsrc: url(\"http://www.yourwebsite.com/fonts/Calibri.eot\"); \nsrc: local(\"Calibri\"), url(\"http://www.yourwebsite.com/fonts/Calibri.ttf\") format(\"truetype\");\n}\n"
      ],
      [
        "/**\n * Get the font used for a given element\n * @argument {HTMLElement} the element to check font for\n * @returns {string} The name of the used font or null if font could not be detected\n */\nfunction getFontForElement(ele) {\n    if (ele.currentStyle) { // sort of, but not really, works in IE\n        return ele.currentStyle[\"fontFamily\"];\n    } else if (document.defaultView) { // works in Opera and FF\n        return document.defaultView.getComputedStyle(ele,null).getPropertyValue(\"font-family\");\n    } else {\n        return null;\n    }\n}\n",
        "#fonttester {\n    font-family: sans-serif, arial, helvetica;\n}\n"
      ],
      [],
      [],
      [
        "font-family: Arial, 'Adobe Blank';\n"
      ],
      [],
      [
        "function getFont() {\n    return document.getElementById('header').style.font;\n}\n"
      ],
      [],
      [
        "function getUserBrowsersFont() {\n    var browserHeader = document.getElementById('header');\n    return browserHeader.style.font;\n}\n"
      ],
      [
        "font-family: \"my fake font\", helvetica, san-serif;\n"
      ],
      []
    ],
    "votes:": "138",
    "tags": "<javascript><html><css><fonts>",
    "AcceptedAnswerId": "849",
    "answers": [
      {
        "id": "8741592",
        "title": "",
        "text": "<p>Another solution would be to install the font automatically via <code>@font-face</code> which might negate the need for detection.</p>\n\n<pre><code>@font-face { \nfont-family: \"Calibri\"; \nsrc: url(\"http://www.yourwebsite.com/fonts/Calibri.eot\"); \nsrc: local(\"Calibri\"), url(\"http://www.yourwebsite.com/fonts/Calibri.ttf\") format(\"truetype\");\n}\n</code></pre>\n\n<p>Of course it wouldn't solve any copyright issues, however you could always use a freeware font or even make your own font. You will need both <code>.eot</code> &amp; <code>.ttf</code> files to work best.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "27035",
        "title": "",
        "text": "<p>A technique that works is to look at the computed style of the element. This is supported in Opera and Firefox (and I recon in safari, but haven't tested). IE (7 at least), provides a method to get a style, but it seems to be whatever was in the stylesheet, not the computed style. More details on quirksmode: <a href=\"http://www.quirksmode.org/dom/getstyles.html\" rel=\"noreferrer\">Get Styles</a></p>\n\n<p>Here's a simple function to grab the font used in an element:</p>\n\n<pre><code>/**\n * Get the font used for a given element\n * @argument {HTMLElement} the element to check font for\n * @returns {string} The name of the used font or null if font could not be detected\n */\nfunction getFontForElement(ele) {\n    if (ele.currentStyle) { // sort of, but not really, works in IE\n        return ele.currentStyle[\"fontFamily\"];\n    } else if (document.defaultView) { // works in Opera and FF\n        return document.defaultView.getComputedStyle(ele,null).getPropertyValue(\"font-family\");\n    } else {\n        return null;\n    }\n}\n</code></pre>\n\n<p>If the CSS rule for this was:</p>\n\n<pre><code>#fonttester {\n    font-family: sans-serif, arial, helvetica;\n}\n</code></pre>\n\n<p>Then it should return helvetica if that is installed, if not, arial, and lastly, the name of the system default sans-serif font. Note that the ordering of fonts in your CSS declaration is significant.</p>\n\n<p>An interesting hack you could also try is to create lots of hidden elements with lots of different fonts to try to detect which fonts are installed on a machine. I'm sure someone could make a nifty font statistics gathering page with this technique.</p>\n",
        "votes": "14",
        "tags": "",
        "accepted": false
      },
      {
        "id": "42756664",
        "title": "",
        "text": "<p>I am using Fount. You just have to drag the Fount button to your bookmarks bar, click on it and then click on a specific text on the website. It will then show the font of that text. </p>\n\n<p><a href=\"https://fount.artequalswork.com/\" rel=\"nofollow noreferrer\">https://fount.artequalswork.com/</a></p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6083463",
        "title": "",
        "text": "<p>I wrote a simple JavaScript tool that you can use it to check if a font is installed or not.<br>\nIt uses simple technique and should be correct most of the time.\n<br></p>\n\n<p><strong><a href=\"https://github.com/derek1906/jFont-Checker/\" rel=\"noreferrer\">jFont Checker</a></strong> on github</p>\n",
        "votes": "37",
        "tags": "",
        "accepted": false
      },
      {
        "id": "47571799",
        "title": "",
        "text": "<p>You can put <a href=\"https://technet.microsoft.com/en-us/library/cc939627.aspx\" rel=\"nofollow noreferrer\">Adobe Blank</a> in the font-family after the font you want to see, and then any glyphs not in that font won't be rendered.</p>\n\n<p>e.g.:</p>\n\n<pre><code>font-family: Arial, 'Adobe Blank';\n</code></pre>\n\n<p>As far as I'm aware there is no JS method to tell which glyphs in an element are being rendered by which font in the font stack for that element.</p>\n\n<p>This is complicated by the fact that browsers have user settings for serif/sans-serif/monospace fonts and they also have their own hard-coded fall-back fonts that they will use if a glyph is not found in any of the fonts in a font stack. <strong>So browser may render some glyphs in a font that is not in the font stack or the user's browser font setting.</strong> <a href=\"https://developers.google.com/web/updates/2013/09/DevTools-answers-What-font-is-that\" rel=\"nofollow noreferrer\">Chrome Dev Tools will show you each rendered font for the glyphs in the selected element</a>. So on your machine you can see what it's doing, but there's no way to tell what's happening on a user's machine.</p>\n\n<p>It's also possible the user's system may play a part in this as e.g. <a href=\"https://docs.microsoft.com/en-us/globalization/input/font-technology#font-linking\" rel=\"nofollow noreferrer\">Window does Font Substitution</a> at the glyph level.</p>\n\n<p>so...</p>\n\n<p>For the glyphs you are interested in, you have no way of knowing whether they will be rendered by the user's browser/system fallback, even if they don't have the font you specify.</p>\n\n<p>If you want to test it in JS you could render individual glyphs with a font-family including Adobe Blank and measure their width to see if it is zero, <strong>BUT</strong> you'd have to iterate thorough each glyph and <strong>each font you wanted to test</strong>, but although you can know the fonts in an elements font stack there is no way of knowing what fonts the user's browser is configured to use so for at least some of your users the list of fonts you iterate through will be incomplete. (It is also not future proof if new fonts come out and start getting used.)</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "13385418",
        "title": "",
        "text": "<p>Calibri is a font owned by Microsoft, and shouldn't be distributed for free. Also, requiring a user to download a specific font isn't very user-friendly. </p>\n\n<p>I would suggest purchasing a license for the font and embedding it into your application.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "7866425",
        "title": "",
        "text": "<p>A simplified form is:</p>\n\n<pre><code>function getFont() {\n    return document.getElementById('header').style.font;\n}\n</code></pre>\n\n<p>If you need something more complete, check <a href=\"http://www.lalit.org/lab/javascript-css-font-detect/#comment-43\" rel=\"noreferrer\">this</a> out.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "849",
        "title": "",
        "text": "<p>I've seen it done in a kind of iffy, but pretty reliable way. Basically, an element is set to use a specific font and a string is set to that element.  If the font set for the element does not exist, it takes the font of the parent element.  So, what they do is measure the width of the rendered string.  If it matches what they expected for the desired font as opposed to the derived font, it's present. This won't work for monospaced fonts.</p>\n\n<p>Here's where it came from:\n<a href=\"http://ajaxian.com/archives/javascriptcss-font-detector\" rel=\"noreferrer\">Javascript/CSS Font Detector (ajaxian.com; 12 Mar 2007)</a></p>\n",
        "votes": "72",
        "tags": "",
        "accepted": true
      },
      {
        "id": "8307897",
        "title": "",
        "text": "<p>There is a simple solution - just use <code>element.style.font</code>:</p>\n\n<pre><code>function getUserBrowsersFont() {\n    var browserHeader = document.getElementById('header');\n    return browserHeader.style.font;\n}\n</code></pre>\n\n<p>This function will  exactly do what you want. On execution It will return the font type of the user/browser. Hope this will help.</p>\n",
        "votes": "13",
        "tags": "",
        "accepted": false
      },
      {
        "id": "887291",
        "title": "",
        "text": "<p>@pat Actually, Safari does not give the font used, Safari instead always returns the first font in the stack regardless of whether it is installed, at least in my experience.</p>\n\n<pre><code>font-family: \"my fake font\", helvetica, san-serif;\n</code></pre>\n\n<p>Assuming Helvetica is the one installed/used, you'll get:</p>\n\n<ul>\n<li>\"my fake font\" in Safari (and I believe other webkit browsers).</li>\n<li>\"my fake font, helvetica, san-serif\" in Gecko browsers and IE. </li>\n<li>\"helvetica\" in Opera 9, though I read that they are changing this in Opera 10 to match\nGecko.</li>\n</ul>\n\n<p>I took a pass at this problem and created <a href=\"http://github.com/philoye/fontunstack/tree/master\" rel=\"nofollow noreferrer\">Font Unstack</a>, which tests each font in a stack and returns the first installed one only. It uses the trick that @MojoFilter mentions, but only returns the first one if multiple are installed. Though it does suffer from the weakness that @tlrobinson mentions (Windows will substitute Arial for Helvetica silently and report that Helvetica is installed), it otherwise works well.</p>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "29582806",
        "title": "",
        "text": "<p>You can use this website :</p>\n\n<p><a href=\"http://website-font-analyzer.com/\" rel=\"nofollow noreferrer\">http://website-font-analyzer.com/</a></p>\n\n<p>It does exactly what you want...</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "855",
    "url": "https://stackoverflow.com/questions/855",
    "title": ".Net XML comment into API Documentation",
    "text:": "<p>Is there an easy way to produce MSDN-style documentation from the Visual Studio XML output?<br>\nI'm not patient enough to set up a good xslt for it because I know I'm not the first person to cross this bridge.  </p>\n\n<p>Also, I tried setting up sandcastle recently, but it really made my eyes cross.  Either I was missing something important in the process or it is just way too involved.</p>\n\n<p>I know somebody out there has a really nice dead-simple solution.</p>\n\n<p>I'm reiterating here because I think my formatting made that paragraph non-inviting to read:</p>\n\n<blockquote>\n  <p>I gave sandcastle a try but had a really hard time getting it set up.\n  What I really have in mind is something much simpler.</p>\n</blockquote>\n\n<p>That is, unless I just don't understand the sandcastle process.  It seemed like an awful lot of extra baggage to me just to produce something nice for the testers to work with.</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "19",
    "tags": "<visual-studio><xslt><documentation><sandcastle><xml-comments>",
    "AcceptedAnswerId": "858",
    "answers": [
      {
        "id": "1123",
        "title": "",
        "text": "<p>Follow <a href=\"http://saftsack.fs.uni-bayreuth.de/~dun3/archives/integrate-xml-code-comments-into-visual-studio-20052008-using-sandcastle-and-html-help-20/150.html\" rel=\"nofollow noreferrer\">this simple 5 step article</a> and you are pretty much done. As a bonus you can use <a href=\"http://www.helpware.net/mshelp2/h2viewer.htm\" rel=\"nofollow noreferrer\">H2Viewer</a> to view Html Help 2.x files.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "858",
        "title": "",
        "text": "<p>You're looking for Sandcastle</p>\n\n<p>Project Page: <a href=\"http://www.codeplex.com/Sandcastle/Release/ProjectReleases.aspx\" rel=\"nofollow noreferrer\">Sandcastle Releases</a></p>\n\n<p>Blog: <a href=\"http://blogs.msdn.com/sandcastle/default.aspx\" rel=\"nofollow noreferrer\">Sandcastle Blog</a></p>\n\n<p><a href=\"http://ndoc.sourceforge.net\" rel=\"nofollow noreferrer\">NDoc Code Documentation Generator for .NET</a> used to be the tool of choice, but support has all but stopped.</p>\n",
        "votes": "11",
        "tags": "",
        "accepted": true
      },
      {
        "id": "859",
        "title": "",
        "text": "<p>Have a look at <a href=\"http://blogs.msdn.com/sandcastle/\" rel=\"noreferrer\">Sandcastle</a>, which does exactly that. It's also one of the more simpler solutions out there, and it's more or less the tool of choice, so in the long run, maybe we could help you to set up Sandcastle if you specify what issues you encountered during setup?</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2307656",
        "title": "",
        "text": "<p>I use <a href=\"http://sourceforge.net/projects/ndoc3/\" rel=\"nofollow noreferrer\">NDoc3</a></p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1120",
        "title": "",
        "text": "<p>I've just set up Sandcastle again. Try installing it (the May 2008 release) and search for SandcastleGui.exe or something similar (it's in the examples folder or so).</p>\n\n<p>Click Add Assembly and add your Assembly or Assemblies, add any .xml Documentation files (the ones generated by the compiler if you enabled that option) and then Build.</p>\n\n<p>It will take some time, but the result <strong>will</strong> be worth the effort. It will actually look up stuff from MSDN, so your resulting documentation will also have the Class Inheritance all the way down to System.Object with links to MSDN and stuff.</p>\n\n<p>Sandcastle seems a bit complicated at first, especially when you want to use it in an automated build, but I am absolutely sure it will be worth the effort.</p>\n\n<p>Also have a look at <a href=\"http://www.codeplex.com/SHFB\" rel=\"nofollow noreferrer\">Sandcastle Help File Builder</a>, this is a somewhat more advanced GUI for it.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "102768",
        "title": "",
        "text": "<p>You should also use the Sandcastle Help File Builder. It provides you with a ndoc like GUI for generating help files so you don't have to do anything from a command prompt.</p>\n\n<p><a href=\"http://www.codeplex.com/SHFB\" rel=\"nofollow noreferrer\">Welcome to the Sandcastle Help File Builder Project</a></p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "871",
    "url": "https://stackoverflow.com/questions/871",
    "title": "Why is Git better than Subversion?",
    "text:": "<p>I've been using <a href=\"http://en.wikipedia.org/wiki/Apache_Subversion\" rel=\"nofollow noreferrer\">Subversion</a> for a few years and after using <a href=\"http://en.wikipedia.org/wiki/Microsoft_Visual_SourceSafe\" rel=\"nofollow noreferrer\">SourceSafe</a>, I just love Subversion.  Combined with <a href=\"http://en.wikipedia.org/wiki/TortoiseSVN\" rel=\"nofollow noreferrer\">TortoiseSVN</a>, I can't really imagine how it could be any better.  </p>\n\n<p>Yet there's a growing number of developers claiming that Subversion has problems and that we should be moving to the new breed of distributed version control systems, such as <a href=\"http://git.or.cz/\" rel=\"nofollow noreferrer\" title=\"Git Distributed Version Control System\">Git</a>.  </p>\n\n<p>How does Git improve upon Subversion?</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [
        "svn checkout svn://foo.com/bar bar\ncd bar\n# edit\nsvn commit -m \"foo\"\n",
        "git clone git@github.com:foo/bar.git\ncd bar\n# edit\ngit commit -a -m \"foo\"\ngit push\n"
      ],
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "401",
    "tags": "<svn><git>",
    "AcceptedAnswerId": "875",
    "answers": [
      {
        "id": "886",
        "title": "",
        "text": "<p>Git and DVCS in general is great for developers doing a lot of coding independently of each other because everyone has their own branch.  If you need a change from someone else, though, she has to commit to her local repo and then she must push that changeset to you or you must pull it from her.</p>\n\n<p>My own reasoning also makes me think DVCS makes things harder for QA and release management if you do things like centralized releases.  Someone has to be responsible for doing that push/pull from everyone else's repository, resolving any conflicts that would have been resolved at initial commit time before, then doing the build, and then having all the other developers re-sync their repos.</p>\n\n<p>All of this can be addressed with human processes, of course; DVCS just broke something that was fixed by centralized version control in order to provide some new conveniences.</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1245254",
        "title": "",
        "text": "<p>A few answers have alluded to these, but I want to make 2 points explicit:</p>\n\n<p>1) The ability to do selective commits (for example, <code>git add --patch</code>).  If your working directory contains multiple changes that are not part of the same logical change, Git makes it very easy to make a commit that includes only a portion of the changes.  With Subversion, it is difficult.</p>\n\n<p>2) The ability to commit without making the change public.  In Subversion, any commit is immediately public, and thus irrevocable.  This greatly limits the ability of the developer to \"commit early, commit often\".</p>\n\n<p>Git is more than just a VCS; it's also a tool for developing patches. Subversion is merely a VCS.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "876",
        "title": "",
        "text": "<p>Well, it's distributed. Benchmarks indicate that it's considerably faster (given its distributed nature, operations like diffs and logs are all local so of course it's blazingly faster in this case), and working folders are smaller (which still blows my mind).</p>\n\n<p>When you're working on subversion, or any other client/server revision control system, you essentially create working copies on your machine by <em>checking-out</em> revisions. This represents a snapshot in time of what the repository looks like. You update your working copy via updates, and you update the repository via commits.</p>\n\n<p>With a distributed version control, you don't have a snapshot, but rather the entire codebase. Wanna do a diff with a 3 month old version? No problem, the 3 month old version is still on your computer. This doesn't only mean things are way faster, but if you're disconnected from your central server, you can still do many of the operations you're used to. In other words, you don't just have a snapshot of a given revision, but the entire codebase.</p>\n\n<p>You'd think that Git would take up a bunch of space on your harddrive, but from a couple benchmarks I've seen, it actually takes less. Don't ask me how. I mean, it was built by Linus, he knows a thing or two about filesystems I guess.</p>\n",
        "votes": "27",
        "tags": "",
        "accepted": false
      },
      {
        "id": "22658",
        "title": "",
        "text": "<p>One of the things about SubVersion that irks me is that it puts its own folder in each directory of a project, whereas git only puts one in the root directory. It's not <em>that</em> big of a deal, but little things like that add up.</p>\n\n<p>Of course, SubVersion has Tortoise, which is [usually] very nice.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "873",
        "title": "",
        "text": "<p>Google Tech Talk: Linus Torvalds on git</p>\n\n<p><a href=\"http://www.youtube.com/watch?v=4XpnKHJAok8\" rel=\"nofollow noreferrer\">http://www.youtube.com/watch?v=4XpnKHJAok8</a></p>\n\n<p>The Git Wiki's comparison page</p>\n\n<p><a href=\"http://git.or.cz/gitwiki/GitSvnComparsion\" rel=\"nofollow noreferrer\">http://git.or.cz/gitwiki/GitSvnComparsion</a></p>\n",
        "votes": "56",
        "tags": "",
        "accepted": false
      },
      {
        "id": "172269",
        "title": "",
        "text": "<p>I like Git because it actually helps communication developer to developer on a medium to large team. As a distributed version control system, through its push/pull system, it helps developers to create a source code eco-system which helps to manage a large pool of developers working on a single project.</p>\n\n<p>For example say you trust 5 developers and only pull codes from their repository. Each of those developers has their own trust network from where they pull codes. Thus the development is based on that trust fabric of developers where code responsibility is shared among the development community.</p>\n\n<p>Of course there are other benefits which are mentioned in other answers here.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1994861",
        "title": "",
        "text": "<p>First, concurrent version control seems like an easy problem to solve. It's not at all. Anyway...</p>\n\n<p>SVN is quite non-intuitive. Git is even worse. [sarcastic-speculation] This might be because developers, that like hard problems like concurrent version control, don't have much interest in making a good UI. [/sarcastic-speculation]</p>\n\n<p>SVN supporters think they don't need a distributed version-control system. <strong>I thought that too.</strong> But now that we use Git exclusively, I'm a believer. Now version control works for me AND the team/project instead of just working for the project. When I need a branch, I branch. Sometimes it's a branch that has a corresponding branch on the server, and sometimes it does not. Not to mention all the other advantages that I'll have to go study up on (thanks in part to the arcane and absurd lack of UI that is a modern version control system).</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "875",
        "title": "",
        "text": "<p>Git is not better than Subversion. But is also not worse. It's different.</p>\n\n<p>The key difference is that it is decentralized. Imagine you are a developer on the road, you develop on your laptop and you want to have source control so that you can go back 3 hours.</p>\n\n<p>With Subversion, you have a Problem: The SVN Repository may be in a location you can't reach (in your company, and you don't have internet at the moment), you cannot commit. If you want to make a copy of your code, you have to literally copy/paste it.</p>\n\n<p>With Git, you do not have this problem. Your local copy is a repository, and you can commit to it and get all benefits of source control. When you regain connectivity to the main repository, you can commit against it.</p>\n\n<p>This looks good at first, but just keep in mind the added complexity to this approach.</p>\n\n<p>Git seems to be the \"new, shiny, cool\" thing. It's by no means bad (there is a reason Linus wrote it for the Linux Kernel development after all), but I feel that many people jump on the \"Distributed Source Control\" train just because it's new and is written by Linus Torvalds, without actually knowing why/if it's better.</p>\n\n<p>Subversion has Problems, but so does Git, Mercurial, CVS, TFS or whatever.</p>\n\n<p><strong>Edit:</strong> So this answer is now a year old and still generates many upvotes, so I thought I'll add some more explanations. In the last year since writing this, Git has gained a lot of momentum and support, particularly since sites like GitHub really took off. I'm using both Git and Subversion nowadays and I'd like to share some personal insight.</p>\n\n<p>First of all, Git can be really confusing at first when working decentralized. What is a remote? and How to properly set up the initial repository? are two questions that come up at the beginning, especially compared to SVN's simple \"svnadmin create\", Git's \"git init\" can take the parameters --bare and --shared which seems to be the \"proper\" way to set up a centralized repository. There are reasons for this, but it adds complexity. The documentation of the \"checkout\" command is very confusing to people changing over - the \"proper\" way seems to be \"git clone\", while \"git checkout\" seems to switch branches.</p>\n\n<p>Git REALLY shines when you are decentralized. I have a server at home and a Laptop on the road, and SVN simply doesn't work well here. With SVN, I can't have local source control if I'm not connected to the repository (Yes, I know about SVK or about ways to copy the repo). With Git, that's the default mode anyway. It's an extra command though (git commit commits locally, whereas git push origin master pushes the master branch to the remote named \"origin\").</p>\n\n<p>As said above: Git adds complexity. Two modes of creating repositories, checkout vs. clone, commit vs. push... You have to know which commands work locally and which work with \"the server\" (I'm assuming most people still like a central \"master-repository\").</p>\n\n<p>Also, the tooling is still insufficient, at least on Windows. Yes, there is a Visual Studio AddIn, but I still use git bash with msysgit.</p>\n\n<p>SVN has the advantage that it's MUCH simpler to learn: There is your repository, all changes to towards it, if you know how to create, commit and checkout and you're ready to go and can pickup stuff like branching, update etc. later on.</p>\n\n<p>Git has the advantage that it's MUCH better suited if some developers are not always connected to the master repository. Also, it's much faster than SVN. And from what I hear, branching and merging support is a lot better (which is to be expected, as these are the core reasons it was written).</p>\n\n<p>This also explains why it gains so much buzz on the Internet, as Git is perfectly suited for Open Source projects: Just Fork it, commit your changes to your own Fork, and then ask the original project maintainer to pull your changes. With Git, this just works. Really, try it on Github, it's magic.</p>\n\n<p>What I also see are Git-SVN Bridges: The central repository is a Subversion repo, but developers locally work with Git and the bridge then pushes their changes to SVN.</p>\n\n<p>But even with this lengthy addition, I still stand by my core message: Git is not better or worse, it's just different. If you have the need for \"Offline Source Control\" and the willingness to spend some extra time learning it, it's fantastic. But if you have a strictly centralized Source Control and/or are struggling to introduce Source Control in the first place because your co-workers are not interested, then the simplicity and excellent tooling (at least on Windows) of SVN shine.</p>\n",
        "votes": "577",
        "tags": "",
        "accepted": true
      },
      {
        "id": "6582",
        "title": "",
        "text": "<p>Git also makes branching and merging really easy. Subversion 1.5 just added merge tracking, but Git is still better. With Git branching is very fast and cheap. It makes creating a branch for each new feature more feasible. Oh and Git repositories are very efficient with storage space as compared to Subversion.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2710068",
        "title": "",
        "text": "<p>I have been dwelling in Git land lately, and I like it for personal projects, but I wouldn't be able to switch work projects to it yet from Subversion given the change in thinking of required from staff, without no pressing benefits. Moreover the biggest project we run in-house is extremely dependent on <a href=\"http://svnbook.red-bean.com/en/1.0/ch07s03.html\" rel=\"nofollow noreferrer\">svn:externals</a> which, from what I've seen so far, does not work so nicely and seamlessly in Git.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2238465",
        "title": "",
        "text": "<p>Git in Windows is quite well supported now.</p>\n\n<p>Check out GitExtensions = <a href=\"http://code.google.com/p/gitextensions/\" rel=\"nofollow noreferrer\">http://code.google.com/p/gitextensions/</a></p>\n\n<p>and the manual for a better Windows Git experience.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3998872",
        "title": "",
        "text": "<p>Why I think Subversion is better than Git (at least for the projects I work on), mainly due to its usability, and simpler workflow:</p>\n\n<p><a href=\"http://www.databasesandlife.com/why-subversion-is-better-than-git/\" rel=\"nofollow\">http://www.databasesandlife.com/why-subversion-is-better-than-git/</a></p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "910",
        "title": "",
        "text": "<p>With Git, you can do practically anything offline, because everybody has their own repository.</p>\n\n<p>Making branches and merging between branches is really easy.</p>\n\n<p>Even if you don't have commit rights for a project, you can still have your own repository online, and publish \"push requests\" for your patches. Everybody who likes your patches can pull them into their project, including the official maintainers.</p>\n\n<p>It's trivial to fork a project, modify it, and still keep merging in the bugfixes from the HEAD branch. </p>\n\n<p>Git works for the Linux kernel developers. That means it is really fast (it has to be), and scales to thousands of contributors. Git also uses less space (up to 30 times less space for the Mozilla repository).</p>\n\n<p>Git is very flexible, very TIMTOWTDI (There is more than one way to do it). You can use whatever workflow you want, and Git will support it.</p>\n\n<p>Finally, there's <a href=\"http://en.wikipedia.org/wiki/GitHub\" rel=\"nofollow noreferrer\">GitHub</a>, a great site for hosting your Git repositories.</p>\n\n<p>Drawbacks of Git: </p>\n\n<ul>\n<li>it's much harder to learn, because Git has more concepts and more commands.</li>\n<li>revisions don't have version numbers like in subversion</li>\n<li>many Git commands are cryptic, and error messages are very user-unfriendly</li>\n<li>it lacks a good GUI (such as the great <a href=\"http://en.wikipedia.org/wiki/TortoiseSVN\" rel=\"nofollow noreferrer\">TortoiseSVN</a>)</li>\n</ul>\n",
        "votes": "148",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2240942",
        "title": "",
        "text": "<p>I absolutely love being able to manage local branches of my source code in Git without muddying up the water of the central repository.  In many cases I'll checkout code from the Subversion server and run a local Git repository just to be able to do this.  It's also great that initializing a Git repository doesn't pollute the filesystem with a bunch of annoying .svn folders everywhere.</p>\n\n<p>And as far as Windows tool support, TortoiseGit handles the basics very well, but I still prefer the command line unless I want to view the log.  I really like the way Tortoise{Git|SVN} helps when reading commit logs.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "6169247",
        "title": "",
        "text": "<p>This is the wrong question to be asking.  It's all too easy to focus on git's warts and formulate an argument about why subversion is ostensibly better, at least for some use cases.  The fact that git was originally designed as a low-level version control construction set and has a baroque linux-developer-oriented interface makes it easier for the holy wars to gain traction and perceived legitimacy.  Git proponents bang the drum with millions of workflow advantages, which svn guys proclaim unnecessary.  Pretty soon the whole debate is framed as centralized vs distributed, which serves the interests of the enterprise svn tool community.  These companies, which typically put out the most convincing articles about subversion's superiority in the enterprise, are dependent on the perceived insecurity of git and the enterprise-readiness of svn for the long-term success of their products.</p>\n\n<p>But here's the problem: <strong>Subversion is an architectural dead-end</strong>.  </p>\n\n<p>Whereas you can take git and build a centralized subversion replacement quite easily, despite being around for more than twice as long svn has never been able to get even basic merge-tracking working anywhere near as well as it does in git.  One basic reason for this is the design decision to make branches the same as directories.  I don't know why they went this way originally, it certainly makes partial checkouts very simple.  Unfortunately it also makes it impossible to track history properly.  Now obviously you are supposed to use subversion repository layout conventions to separate branches from regular directories, and svn uses some heuristics to make things work for the daily use cases.  But all this is just papering over a very poor and limiting low-level design decision.  Being able to a do a repository-wise diff (rather than directory-wise diff) is basic and critical functionality for a version control system, and greatly simplifies the internals, making it possible to build smarter and useful features on top of it.  You can see in the amount of effort that has been put into extending subversion, and yet how far behind it is from the current crop of modern VCSes in terms of fundamental operations like merge resolution.</p>\n\n<p>Now here's my heart-felt and agnostic advice for anyone who still believes Subversion is good enough for the foreseeable future:</p>\n\n<p>Subversion will never catch up to the newer breeds of VCSes that have learned from the mistakes of RCS and CVS; it is a technical impossibility unless they retool the repository model from the ground up, but then it wouldn't really be svn would it?  Regardless of how much you think you don't the capabilities of a modern VCS, your ignorance will not protect you from the Subversion's pitfalls, many of which are situations that are impossible or easily resolved in other systems.</p>\n\n<p>It is extremely rare that the technical inferiority of a solution is so clear-cut as it is with svn, certainly I would never state such an opinion about win-vs-linux or emacs-vs-vi, but in this case it is so clearcut, and source control is such a fundamental tool in the developer's arsenal, that I feel it must be stated unequivocally.  Regardless of the requirement to use svn for organizational reasons, I implore all svn users not to let their logical mind construct a false belief that more modern VCSes are only useful for large open-source projects.  Regardless of the nature of your development work, if you are a programmer, you will be a more effective programmer if you learn how to use better-designed VCSes, whether it be Git, Mercurial, Darcs, or many others.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1560184",
        "title": "",
        "text": "<p>Subversion is very easy to use. I have never found in the last years a problem or that something doesn't work as expected. Also there are many excellent GUI tools and the support for SVN integration is big.</p>\n\n<p>With Git you get a more flexible VCS. You can use it the same way like SVN with a remote repository where you commit all changes. But you can also use it mostly offline and only push the changes from time to time to the remote repository.\nBut Git is more complex and has a steeper learning curve. I found myself in the first time committing to wrong branches, creating branches indirectly or get error messages with not much informations about the mistake and where I must search with Google to get better informations.\nSome easy things like substitution of markers ($Id$) doesn't work but GIT has a very flexible filtering and hook mechanism to merge own scripts and so you get all things you need and more but it needs more time and reading of the documentation ;)</p>\n\n<p>If you work mostly offline with your local repository you have no backup if something is lost on your local machine. With SVN you are mostly working with a remote repository which is also the same time your backup on another server... \nGit can work in the same way but this was not the main goal of Linus to have something like SVN2. It was designed for the Linux kernel developers and the needs of a distributed version control system.</p>\n\n<p>Is Git better then SVN? Developers which needs only some version history and a backup mechanism have a good and easy life with SVN. Developers working often with branches, testing more versions at the same time or working mostly offline can benefit from the features of Git. There are some very useful features like stashing not found with SVN which can make the life easier. But on the other side not all people will need all features. So I cannot see the dead of SVN.</p>\n\n<p>Git needs some better documentation and the error reporting must be more helpful. Also the existing useful GUIs are only rarely. This time I have only found 1 GUI for Linux with support of most Git features (git-cola). Eclipse integration is working but its not official released and there is no official update site (only some external update site with periodical builds from the trunk <a href=\"http://www.jgit.org/updates\" rel=\"nofollow noreferrer\">http://www.jgit.org/updates</a>)\nSo the most preferred way to use Git this days is the command line.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "893",
        "title": "",
        "text": "<p>It's all about the ease of use/steps required to do something.</p>\n\n<p>If I'm developing a single project on my PC/laptop, git is better, because it is far easier to set up and use. \nYou don't need a server, and you don't need to keep typing repository URL's in when you do merges.</p>\n\n<p>If it were just 2 people, I'd say git is also easier, because you can just push and pull from eachother.</p>\n\n<p>Once you get beyond that though, I'd go for subversion, because at that point you need to set up a 'dedicated' server or location. </p>\n\n<p>You can do this just as well with git as with SVN, but the benefits of git get outweighed by the need to do additional steps to synch with a central server. In SVN you just commit. In git you have to git commit, then git push. The additional step gets annoying simply because you end up doing it so much.</p>\n\n<p>SVN also has the benefit of better GUI tools, however the git ecosystem seems to be catching up quickly, so I wouldn't worry about this in the long term.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "162148",
        "title": "",
        "text": "<p>The funny thing is:\nI host projects in Subversion Repos, but access them via the Git Clone command.</p>\n\n<p>Please read <a href=\"http://google-opensource.blogspot.com/2008/05/develop-with-git-on-google-code-project.html\" rel=\"nofollow noreferrer\">Develop with Git on a Google Code Project</a></p>\n\n<blockquote>\n  <p>Although Google Code natively speaks\n  Subversion, you can easily use Git\n  during development. Searching for \"git\n  svn\" suggests this practice is\n  widespread, and we too encourage you\n  to experiment with it.</p>\n</blockquote>\n\n<p>Using Git on a Svn Repository gives me benefits:</p>\n\n<ol>\n<li>I can work <em>distributed</em> on several\nmachines, commiting and pulling from\nand to them</li>\n<li>I have a <em>central</em> <code>backup/public</code> svn repository for others to check out</li>\n<li>And they are free to use Git for their own</li>\n</ol>\n",
        "votes": "16",
        "tags": "",
        "accepted": false
      },
      {
        "id": "22652",
        "title": "",
        "text": "<p><a href=\"http://www.gnome.org/~newren/eg/\" rel=\"nofollow noreferrer\">Easy Git</a> has a nice page comparing actual usage of <a href=\"http://www.gnome.org/~newren/eg/git-for-svn-users.html\" rel=\"nofollow noreferrer\">Git and SVN</a> which will give you an idea of what things Git can do (or do more easily) compared to SVN.  (Technically, this is based on Easy Git, which is a lightweight wrapper on top of Git.)</p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1558578",
        "title": "",
        "text": "<p>All the answers here are as expected, programmer centric, however what happens if your company uses revision control outside of source code? There are plenty of documents which aren't source code which benefit from version control, and should live close to code and not in another CMS. Most programmers don't work in isolation - we work for companies as part of a team.</p>\n\n<p>With that in mind, compare ease of use, in both client tooling and training, between Subversion and git. I can't see a scenario where <em>any</em> distributed revision control system is going to be easier to use or explain to a non-programmer. I'd love to be proven wrong, because then I'd be able to evaluate git and actually have a hope of it being accepted by people who need version control who aren't programmers.</p>\n\n<p>Even then, if asked by management why we should move from a centralised to distributed  revision control system, I'd be hard pressed to give an honest answer, because we don't need it.</p>\n\n<p>Disclaimer: I became interested in Subversion early on (around v0.29) so obviously I'm biased, but the companies I've worked for since that time are benefiting from my enthusiasm because I've encouraged and supported its use. I suspect this is how it happens with most software companies.  With so many programmers jumping on the git bandwagon, I wonder how many companies are going to miss out on the benefits of using version control outside of source code? Even if you have separate systems for different teams, you're missing out on some of the benefits, such as (unified) issue tracking integration, whilst increasing maintenance, hardware and training requirements.</p>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3345344",
        "title": "",
        "text": "<p>I think Subversion is fine.. until you start merging.. or doing anything complicated.. or doing anything Subversion thinks is complicated (like doing queries to find out which branches messed with a particular file, where a change <em>actually</em> comes from, detecting copy&amp;pastes, etc)...</p>\n\n<p>I disagree with the winning answer, saying the <em>main benefit</em> of GIT is offline work - it's certainly useful, but it's more like an extra for my use case. SVK can work offline too, still there is no question for me which one to invest my learning time in).</p>\n\n<p>It's just that it's incredibly powerful and fast and, well -after getting used to the concepts - very useful (yes, in that sense: user friendly).</p>\n\n<p>For more details on a merging story, see this :\n<a href=\"https://stackoverflow.com/questions/2945842/using-git-svn-or-similar-just-to-help-out-with-svn-merge/2981745#2981745\">Using git-svn (or similar) *just* to help out with an svn merge?</a></p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "5246905",
        "title": "",
        "text": "<p>For people looking for a good Git GUI, <a href=\"http://www.syntevo.com/smartgit/\" rel=\"nofollow\">Syntevo SmartGit</a> might be a good solution. Its proprietary, but free for non-commercial use, runs on Windows/Mac/Linux and even supports SVN using some kind of git-svn bridge, I think.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "137069",
        "title": "",
        "text": "<p>Other answers have done a good job of explaining the core features of Git (which are great). But there's also so many <em>little</em> ways that Git behaves better and helps keep my life more sane. Here are some of the little things:</p>\n\n<ol>\n<li>Git has a 'clean' command. SVN desperately needs this command, considering how frequently it will dump extra files on your disk.</li>\n<li>Git has the 'bisect' command. It's nice.</li>\n<li>SVN creates .svn directories in every single folder (Git only creates <em>one</em> .git directory). Every script you write, and every grep you do, will need to be written to ignore these .svn directories. You also need an entire command (\"svn export\") just to get a sane copy of your files.</li>\n<li>In SVN, each file &amp; folder can come from a different revision or branch. At first, it sounds nice to have this freedom. But what this actually means is that there is a million different ways for your local checkout to be completely screwed up. (for example, if \"svn switch\" fails halfway through, or if you enter a command wrong). And the worst part is: if you ever get into a situation where some of your files are coming from one place, and some of them from another, the \"svn status\" will tell you that everything is normal. You'll need to do \"svn info\" on each file/directory to discover how weird things are. If \"git status\" tells you that things are normal, then you can trust that things really are normal.</li>\n<li>You have to tell SVN whenever you move or delete something. Git will just figure it out.</li>\n<li>Ignore semantics are easier in Git. If you ignore a pattern (such as *.pyc), it will be ignored for <em>all</em> subdirectories. (But if you really want to ignore something for just one directory, you can). With SVN, it seems that there is no easy way to ignore a pattern across all subdirectories.</li>\n<li>Another item involving ignore files. Git makes it possible to have \"private\" ignore settings (using the file .git/info/exclude), which won't affect anyone else.</li>\n</ol>\n",
        "votes": "111",
        "tags": "",
        "accepted": false
      },
      {
        "id": "43491",
        "title": "",
        "text": "<p>The main points I like about DVCS are those :</p>\n\n<ol>\n<li>You can commit broken things. It doesn't matter because other peoples won't see them until you publish. Publish time is different of commit time.</li>\n<li>Because of this you can commit more often.</li>\n<li>You can merge complete functionnality. This functionnality will have its own branch. All commits of this branch will be related to this functionnality. You can do it with a CVCS however with DVCS its the default.</li>\n<li>You can search your history (find when a function changed )</li>\n<li>You can undo a pull if someone screw up the main repository, you don't need to fix the errors. Just clear the merge.</li>\n<li>When you need a source control in any directory do : git init . and you can commit, undoing changes, etc...</li>\n<li>It's fast (even on Windows )</li>\n</ol>\n\n<p>The main reason for a relatively big project is the improved communication created by the point 3. Others are nice bonuses.</p>\n",
        "votes": "24",
        "tags": "",
        "accepted": false
      },
      {
        "id": "531042",
        "title": "",
        "text": "<p>\"<a href=\"http://whygitisbetterthanx.com/#svn\" rel=\"nofollow noreferrer\">Why Git is Better than X</a>\" outlines the various pros and cons of Git vs other SCMs.</p>\n\n<p>Briefly:</p>\n\n<ul>\n<li>Git tracks <strong>content rather than files</strong></li>\n<li><strong>Branches are lightweight</strong> and merging is <em>easy</em>, and I mean <em>really easy</em>.</li>\n<li>It's distributed, basically every repository is a branch. It's much easier to develop concurrently and collaboratively than with Subversion, in my opinion. It also makes <strong>offline</strong> development possible.</li>\n<li>It <strong>doesn't impose any workflow</strong>, as seen on <a href=\"http://whygitisbetterthanx.com/#svn\" rel=\"nofollow noreferrer\">the above linked website</a>, there are many workflows possible with Git. A Subversion-style workflow is easily mimicked.</li>\n<li>Git repositories are much <strong>smaller in file size</strong> than Subversion repositories. There's only one \".git\" directory, as opposed to dozens of \".svn\" repositories (note Subversion 1.7 and higher <a href=\"http://subversion.apache.org/docs/release-notes/1.7.html#wc-ng\" rel=\"nofollow noreferrer\">now uses a single directory</a> like Git.)</li>\n<li>The <strong>staging</strong> area is awesome, it allows you to see the changes you will commit, commit partial changes and do various other stuff.</li>\n<li><strong>Stashing</strong> is invaluable when you do \"chaotic\" development, or simply want to fix a bug while you're still working on something else (on a different branch).</li>\n<li>You can <strong>rewrite history</strong>, which is great for preparing patch sets and fixing your mistakes (<em>before</em> you publish the commits)</li>\n<li>\u2026 and a <em>lot</em> more.</li>\n</ul>\n\n<p>There are some disadvantages:</p>\n\n<ul>\n<li>There aren't many good GUIs for it yet. It's new and Subversion has been around for a lot longer, so this is natural as there are a few interfaces in development. Some good ones include <a href=\"http://code.google.com/p/tortoisegit/\" rel=\"nofollow noreferrer\">TortoiseGit</a> and <a href=\"http://mac.github.com/\" rel=\"nofollow noreferrer\">GitHub for Mac</a>.</li>\n<li><del>Partial checkouts/clones of repositories are not possible at the moment (I read that it's in development). However, there is submodule support.</del> <a href=\"http://www.kernel.org/pub/software/scm/git/docs/RelNotes-1.7.0.txt\" rel=\"nofollow noreferrer\">Git 1.7+ supports sparse checkouts</a>.</li>\n<li>It might be harder to learn, even though I did not find this to be the case (about a year ago). Git has recently improved its interface and is quite user friendly.</li>\n</ul>\n\n<p>In the most simplistic usage, Subversion and Git are pretty much the same. There isn't much difference between:</p>\n\n<pre><code>svn checkout svn://foo.com/bar bar\ncd bar\n# edit\nsvn commit -m \"foo\"\n</code></pre>\n\n<p>and</p>\n\n<pre><code>git clone git@github.com:foo/bar.git\ncd bar\n# edit\ngit commit -a -m \"foo\"\ngit push\n</code></pre>\n\n<p>Where Git really shines is branching and working with other people.</p>\n",
        "votes": "57",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1560307",
        "title": "",
        "text": "<p><a href=\"http://www.ericsink.com/\" rel=\"nofollow noreferrer\">Eric Sink</a> from SourceGear wrote series of articles on differences between distributed and nondistributed version controls systems. He compares pros and cons of most popular version control systems. Very interesting reading. <br>\nArticles can be found on his blog, <a href=\"http://www.ericsink.com\" rel=\"nofollow noreferrer\">www.ericsink.com</a>:</p>\n\n<ul>\n<li><p><a href=\"http://www.ericsink.com/entries/Read_the_Diffs.html\" rel=\"nofollow noreferrer\">Read the Diffs</a></p></li>\n<li><p><a href=\"http://www.ericsink.com/entries/git_index.html\" rel=\"nofollow noreferrer\">Git is the C of Version Control Tools</a></p></li>\n<li><p><a href=\"http://www.ericsink.com/entries/git_immutability.html\" rel=\"nofollow noreferrer\">On Git's lack of respect for immutability and the Best Practices for a DVCS</a></p></li>\n<li><p><a href=\"http://www.ericsink.com/entries/dvcs_dag_1.html\" rel=\"nofollow noreferrer\">DVCS and DAGs, Part 1</a></p></li>\n<li><p><a href=\"http://www.ericsink.com/entries/dvcs_dag_2.html\" rel=\"nofollow noreferrer\">DVCS and DAGs, Part 2</a></p></li>\n<li><p><a href=\"http://www.ericsink.com/entries/dbts_fossil.html\" rel=\"nofollow noreferrer\">DVCS and Bug Tracking</a></p></li>\n<li><p><a href=\"http://www.ericsink.com/entries/merge_history.html\" rel=\"nofollow noreferrer\">Merge History, DAGs and Darcs</a></p></li>\n<li><p><a href=\"http://www.ericsink.com/entries/why_is_git_fast.html\" rel=\"nofollow noreferrer\">Why is Git so Fast?</a></p></li>\n<li><p><a href=\"http://www.ericsink.com/entries/hg_denzel.html\" rel=\"nofollow noreferrer\">Mercurial, Subversion, and Wesley Snipes</a></p></li>\n</ul>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "35911",
        "title": "",
        "text": "<p>Thanks to the fact it doesn't need to communicate with a central server constantly, pretty much every command runs in less than a second (obviously git push/pull/fetch are slower simply because they have to initalise SSH connections). Branching is far far easier (one simple command to branch, one simple command to merge)</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "95553",
        "title": "",
        "text": "<p>Subversion is still a much more used version control system, which means that it has better tool support.  You'll find mature SVN plugins for almost any <a href=\"http://en.wikipedia.org/wiki/Integrated_development_environment\" rel=\"nofollow noreferrer\">IDE</a>, and there are good explorer extensions available (like TurtoiseSVN).  Other than that, I'll have to agree with <a href=\"https://stackoverflow.com/questions/871?sort=votes#875\">Michael</a>:  Git isn't better or worse than Subversion, it's different.</p>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3737909",
        "title": "",
        "text": "<p><a href=\"http://blogs.wandisco.com/2010/09/08/why-we-got-so-heavily-involved-in-the-subversion-project/\" rel=\"nofollow noreferrer\">David Richards WANdisco Blog on Subversion / GIT</a></p>\n\n<blockquote>\n  <p>The emergence of GIT  has brought with it a breed of DVCS fundamentalists \u2013 the \u2018Gitterons\u2019 \u2013 that think anything other than GIT is crap. The Gitterons seem to think software engineering happens on their own island and often forget that most organizations don\u2019t employ senior software engineers exclusively. That\u2019s ok but it\u2019s not how the rest of the market thinks, and I am happy to prove it: GIT, at the last look had less than three per cent of the market while Subversion has in the region of five million users and about half of the overall market.</p>\n  \n  <p>The problem we saw was that the Gitterons were firing (cheap) shots at Subversion. Tweets like \u201cSubversion is so [slow/crappy/restrictive/doesn't smell good/looks at me in a funny way] and now I have GIT and [everything works in my life/my wife got pregnant/I got a girlfriend after 30 years of trying/I won six times running on the blackjack table]. You get the picture.</p>\n</blockquote>\n",
        "votes": "10",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2239475",
        "title": "",
        "text": "<p><a href=\"http://subversion.wandisco.com/component/content/article/1/40.html\" rel=\"nofollow noreferrer\">http://subversion.wandisco.com/component/content/article/1/40.html</a></p>\n\n<p>I think it's fairly safe to say that amongst developers, the SVN Vs. Git argument has been raging for some time now, with everyone having their own view on which is better.  This was even brought up in the of the questions during our Webinar on Subversion in 2010 and Beyond.</p>\n\n<p>Hyrum Wright, our Director of Open Source and the President for the  Subversion Corporation talks about the differences between Subversion and Git, along with other Distributed Version Control Systems (DVCS).</p>\n\n<p>He also talks about the upcoming changes in Subversion, such as Working Copy Next Generation (WC-NG), which he believes will cause a number of Git users to convert back to Subversion.</p>\n\n<p>Have a watch of his video and let us know what you think by either commenting on this blog, or by posting in our forums.  Registration is simple and will only take a moment!</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "879",
    "url": "https://stackoverflow.com/questions/879",
    "title": "Are PHP Variables passed by value or by reference?",
    "text:": "<p>Are PHP variables passed by value or by reference?</p>\n",
    "codes": [
      [
        "<?php\nclass Holder {\n    private $value;\n\n    public function __construct($value) {\n        $this->value = $value;\n    }\n\n    public function getValue() {\n        return $this->value;\n    }\n}\n\nfunction swap($x, $y) {\n    $tmp = $x;\n    $x = $y;\n    $y = $tmp;\n}\n\n$a = new Holder('a');\n$b = new Holder('b');\nswap($a, $b);\n\necho $a->getValue() . \", \" . $b->getValue() . \"\\n\";\n",
        "a, b\n",
        "<?php\nfunction swap(&$x, &$y) {\n    $tmp = $x;\n    $x = $y;\n    $y = $tmp;\n}\n\n$a = new Holder('a');\n$b = new Holder('b');\nswap($a, $b);\n\necho $a->getValue() . \", \" . $b->getValue() . \"\\n\";\n",
        "b, a\n"
      ],
      [
        "    $fred = 5;\n    $larry = & $fred;\n    $larry = 8;\n    echo $fred;//this will output 8, as larry and fred are now the same reference.\n"
      ],
      [
        "class Holder\n{\n    private $value;\n\n    public function __construct( $value )\n    {\n        $this->value = $value;\n    }\n\n    public function getValue()\n    {\n        return $this->value;\n    }\n\n    public function setValue( $value )\n    {\n        return $this->value = $value;\n    }\n}\n\nclass Swap\n{       \n    public function SwapObjects( Holder $x, Holder $y )\n    {\n        $tmp = $x;\n\n        $x = $y;\n\n        $y = $tmp;\n    }\n\n    public function SwapValues( Holder $x, Holder $y )\n    {\n        $tmp = $x->getValue();\n\n        $x->setValue($y->getValue());\n\n        $y->setValue($tmp);\n    }\n}\n\n\n$a1 = new Holder('a');\n\n$b1 = new Holder('b');\n\n\n\n$a2 = new Holder('a');\n\n$b2 = new Holder('b');\n\n\nSwap::SwapValues($a1, $b1);\n\nSwap::SwapObjects($a2, $b2);\n\n\n\necho 'SwapValues: ' . $a2->getValue() . \", \" . $b2->getValue() . \"<br>\";\n\necho 'SwapObjects: ' . $a1->getValue() . \", \" . $b1->getValue() . \"<br>\";\n"
      ],
      [],
      [],
      [
        "function add(&$var){ // The &amp; is before the argument $var\n   $var++;\n}\n$a = 1;\n$b = 10;\nadd($a);\necho \"a is $a,\";\nadd($b);\necho \" a is $a, and b is $b\"; // Note: $a and $b are NOT referenced\n"
      ],
      [],
      [
        "$var1 = \"test\";\n$var2 = $var1;\n$var2 = \"new test\";\n$var3 = &$var2;\n$var3 = \"final test\";\n\nprint (\"var1: $var1, var2: $var2, var3: $var3);\n",
        "$var1 = \"foo\";\n$var2 = \"bar\";\n\nchangeThem($var1, $var2);\n\nprint \"var1: $var1, var2: $var2\";\n\nfunction changeThem($var1, &$var2){\n    $var1 = \"FOO\";\n    $var2 = \"BAR\";\n}\n",
        "class Foo{\n    public $var1;\n\n    function __construct(){\n        $this->var1 = \"foo\";\n    }\n\n    public function printFoo(){\n        print $this->var1;\n    }\n}\n\n\n$foo = new Foo();\n\nchangeFoo($foo);\n\n$foo->printFoo();\n\nfunction changeFoo($foo){\n    $foo->var1 = \"FOO\";\n}\n"
      ],
      [
        "<?php\nfunction add_some_extra(&$string)\n{\n    $string .= 'and something extra.';\n}\n\n$str = 'This is a string, ';\nadd_some_extra($str);\necho $str;    // outputs 'This is a string, and something extra.'\n?>\n"
      ],
      [],
      [
        "<?php\nfunction changeValue(&$var)\n{\n    $var++;\n}\n\n$result=5;\nchangeValue($result);\n\necho $result; // $result is 6 here\n?>\n"
      ],
      [
        "<?php\n\n//The two are meant to be the same\n$a = \"Clark Kent\"; //a==Clark Kent\n$b = &$a; //The two will now share the same fate.\n\n$b=\"Superman\"; // $a==\"Superman\" too.\necho $a;\necho $a=\"Clark Kent\"; // $b==\"Clark Kent\" too.\nunset($b); // $b divorced from $a\n$b=\"Bizarro\";\necho $a; // $a==\"Clark Kent\" still, since $b is a free agent pointer now.\n\n//The two are NOT meant to be the same.\n$c=\"King\";\n$d=\"Pretender to the Throne\";\necho $c.\"\\n\"; // $c==\"King\"\necho $d.\"\\n\"; // $d==\"Pretender to the Throne\"\nswapByValue($c, $d);\necho $c.\"\\n\"; // $c==\"King\"\necho $d.\"\\n\"; // $d==\"Pretender to the Throne\"\nswapByRef($c, $d);\necho $c.\"\\n\"; // $c==\"Pretender to the Throne\"\necho $d.\"\\n\"; // $d==\"King\"\n\nfunction swapByValue($x, $y){\n$temp=$x;\n$x=$y;\n$y=$temp;\n//All this beautiful work will disappear\n//because it was done on COPIES of pointers.\n//The originals pointers still point as they did.\n}\n\nfunction swapByRef(&$x, &$y){\n$temp=$x;\n$x=$y;\n$y=$temp;\n//Note the parameter list: now we switched 'em REAL good.\n}\n\n?>\n"
      ],
      [],
      [
        "class X {\n  var $abc = 10; \n}\n\nclass Y {\n\n  var $abc = 20; \n  function changeValue($obj)\n  {\n   $obj->abc = 30;\n  }\n}\n\n$x = new X();\n$y = new Y();\n\necho $x->abc; //outputs 10\n$y->changeValue($x);\necho $x->abc; //outputs 30\n",
        "class X {\n  var $abc = 10; \n}\n\nclass Y {\n\n  var $abc = 20; \n  function changeValue($obj)\n  {\n    $obj = new Y();\n  }\n}\n\n$x = new X();\n$y = new Y();\n\necho $x->abc; //outputs 10\n$y->changeValue($x);\necho $x->abc; //outputs 10 not 20 same as java does.\n",
        "class X {\n  var $abc = 10; \n}\n\nclass Y {\n\n  var $abc = 20; \n  function changeValue(&$obj)\n  {\n    $obj = new Y();\n  }\n}\n\n$x = new X();\n$y = new Y();\n\necho $x->abc; //outputs 10\n$y->changeValue($x);\necho $x->abc; //outputs 20 not possible in java.\n"
      ]
    ],
    "votes:": "252",
    "tags": "<php><variables><pass-by-reference><pass-by-value>",
    "AcceptedAnswerId": "885",
    "answers": [
      {
        "id": "7483",
        "title": "",
        "text": "<p>It seems a lot of people get confused by the way objects are passed to functions and what pass by reference means. Object variables are still passed by value, its just the value that is passed in PHP5 is a reference handle. As proof:</p>\n\n<pre><code>&lt;?php\nclass Holder {\n    private $value;\n\n    public function __construct($value) {\n        $this-&gt;value = $value;\n    }\n\n    public function getValue() {\n        return $this-&gt;value;\n    }\n}\n\nfunction swap($x, $y) {\n    $tmp = $x;\n    $x = $y;\n    $y = $tmp;\n}\n\n$a = new Holder('a');\n$b = new Holder('b');\nswap($a, $b);\n\necho $a-&gt;getValue() . \", \" . $b-&gt;getValue() . \"\\n\";\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>a, b\n</code></pre>\n\n<p>To <a href=\"http://en.wikipedia.org/wiki/Pass_by_reference#Call_by_reference\" rel=\"noreferrer\">pass by reference</a> means we can modify the variables that are seen by the caller. Which clearly the code above does not do. We need to change the swap function to:</p>\n\n<pre><code>&lt;?php\nfunction swap(&amp;$x, &amp;$y) {\n    $tmp = $x;\n    $x = $y;\n    $y = $tmp;\n}\n\n$a = new Holder('a');\n$b = new Holder('b');\nswap($a, $b);\n\necho $a-&gt;getValue() . \", \" . $b-&gt;getValue() . \"\\n\";\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>b, a\n</code></pre>\n\n<p>in order to pass by reference.</p>\n",
        "votes": "67",
        "tags": "",
        "accepted": false
      },
      {
        "id": "574631",
        "title": "",
        "text": "<p>You can do it either way.</p>\n\n<p>put a '&amp;' symbol in front and the variable you are passing becomes one and the same as its origin. ie: you can pass by reference, rather than making a copy of it.</p>\n\n<p>so </p>\n\n<pre><code>    $fred = 5;\n    $larry = &amp; $fred;\n    $larry = 8;\n    echo $fred;//this will output 8, as larry and fred are now the same reference.\n</code></pre>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2812176",
        "title": "",
        "text": "<pre><code>class Holder\n{\n    private $value;\n\n    public function __construct( $value )\n    {\n        $this-&gt;value = $value;\n    }\n\n    public function getValue()\n    {\n        return $this-&gt;value;\n    }\n\n    public function setValue( $value )\n    {\n        return $this-&gt;value = $value;\n    }\n}\n\nclass Swap\n{       \n    public function SwapObjects( Holder $x, Holder $y )\n    {\n        $tmp = $x;\n\n        $x = $y;\n\n        $y = $tmp;\n    }\n\n    public function SwapValues( Holder $x, Holder $y )\n    {\n        $tmp = $x-&gt;getValue();\n\n        $x-&gt;setValue($y-&gt;getValue());\n\n        $y-&gt;setValue($tmp);\n    }\n}\n\n\n$a1 = new Holder('a');\n\n$b1 = new Holder('b');\n\n\n\n$a2 = new Holder('a');\n\n$b2 = new Holder('b');\n\n\nSwap::SwapValues($a1, $b1);\n\nSwap::SwapObjects($a2, $b2);\n\n\n\necho 'SwapValues: ' . $a2-&gt;getValue() . \", \" . $b2-&gt;getValue() . \"&lt;br&gt;\";\n\necho 'SwapObjects: ' . $a1-&gt;getValue() . \", \" . $b1-&gt;getValue() . \"&lt;br&gt;\";\n</code></pre>\n\n<p>Attributes are still modifiable when not passed by reference so beware.</p>\n\n<p>Output:</p>\n\n<p>SwapObjects: b, a\nSwapValues: a, b</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "896",
        "title": "",
        "text": "<p><a href=\"http://www.php.net/manual/en/migration5.oop.php\" rel=\"noreferrer\">http://www.php.net/manual/en/migration5.oop.php</a></p>\n\n<blockquote>\n  <p>In PHP 5 there is a new Object Model. PHP's handling of objects has been completely rewritten, allowing for better performance and more features. In previous versions of PHP, objects were handled like primitive types (for instance integers and strings). The drawback of this method was that semantically the whole object was copied when a variable was assigned, or passed as a parameter to a method. In the new approach, objects are referenced by handle, and not by value (one can think of a handle as an object's identifier).</p>\n</blockquote>\n",
        "votes": "31",
        "tags": "",
        "accepted": false
      },
      {
        "id": "31429088",
        "title": "",
        "text": "<p>Actually both the methods are valid but it depends upon your requirement.Pass values by reference often makes your script slow. So its better to pass variables by value by considering time of execution. Also the code flow is more consistent when you pass variables by value.</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "49587783",
        "title": "",
        "text": "<p>Use this for functions when you wish to simply alter the original variable and return it again to the same variable name with its new value assigned.</p>\n\n<pre><code>function add(&amp;$var){ // The &amp;amp; is before the argument $var\n   $var++;\n}\n$a = 1;\n$b = 10;\nadd($a);\necho \"a is $a,\";\nadd($b);\necho \" a is $a, and b is $b\"; // Note: $a and $b are NOT referenced\n</code></pre>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "897",
        "title": "",
        "text": "<p>Variables containing primitive types are passed by value in PHP5. Variables containing objects are passed by reference. There's quite an interesting article from Linux Journal from 2006 which mentions this and other OO differences between 4 and 5.</p>\n\n<p><a href=\"http://www.linuxjournal.com/article/9170\" rel=\"noreferrer\">http://www.linuxjournal.com/article/9170</a></p>\n",
        "votes": "6",
        "tags": "",
        "accepted": false
      },
      {
        "id": "881",
        "title": "",
        "text": "<p>PHP variables are assigned by value, passed to functions by value, and when containing/representing objects are passed by reference. You can force variables to pass by reference using an &amp;</p>\n\n<p>Assigned by value/reference example:</p>\n\n<pre><code>$var1 = \"test\";\n$var2 = $var1;\n$var2 = \"new test\";\n$var3 = &amp;$var2;\n$var3 = \"final test\";\n\nprint (\"var1: $var1, var2: $var2, var3: $var3);\n</code></pre>\n\n<p>would output </p>\n\n<blockquote>\n  <p>var1: test, var2: final test, var3: final test</p>\n</blockquote>\n\n<p>Passed by value/reference exampe:</p>\n\n<pre><code>$var1 = \"foo\";\n$var2 = \"bar\";\n\nchangeThem($var1, $var2);\n\nprint \"var1: $var1, var2: $var2\";\n\nfunction changeThem($var1, &amp;$var2){\n    $var1 = \"FOO\";\n    $var2 = \"BAR\";\n}\n</code></pre>\n\n<p>would output: </p>\n\n<blockquote>\n  <p>var1: foo, var2 BAR</p>\n</blockquote>\n\n<p>Object variables passed by reference exampe:</p>\n\n<pre><code>class Foo{\n    public $var1;\n\n    function __construct(){\n        $this-&gt;var1 = \"foo\";\n    }\n\n    public function printFoo(){\n        print $this-&gt;var1;\n    }\n}\n\n\n$foo = new Foo();\n\nchangeFoo($foo);\n\n$foo-&gt;printFoo();\n\nfunction changeFoo($foo){\n    $foo-&gt;var1 = \"FOO\";\n}\n</code></pre>\n\n<p>Would output: </p>\n\n<blockquote>\n  <p>FOO</p>\n</blockquote>\n\n<p>(that last example could be better probably...)</p>\n",
        "votes": "27",
        "tags": "",
        "accepted": false
      },
      {
        "id": "885",
        "title": "",
        "text": "<p>It's by value according to the <a href=\"http://php.net/manual/en/functions.arguments.php\" rel=\"noreferrer\">PHP Documentation</a>.</p>\n\n<blockquote>\n  <p>By default, function arguments are passed by value (so that if the value of the argument within the function is changed, it does not get changed outside of the function). To allow a function to modify its arguments, they must be passed by reference.</p>\n  \n  <p>To have an argument to a function always passed by reference, prepend an ampersand (<strong>&amp;</strong>) to the argument name in the function definition.</p>\n</blockquote>\n\n<pre><code>&lt;?php\nfunction add_some_extra(&amp;$string)\n{\n    $string .= 'and something extra.';\n}\n\n$str = 'This is a string, ';\nadd_some_extra($str);\necho $str;    // outputs 'This is a string, and something extra.'\n?&gt;\n</code></pre>\n",
        "votes": "310",
        "tags": "",
        "accepted": true
      },
      {
        "id": "2034022",
        "title": "",
        "text": "<p>Objects are passed by reference in PHP 5 and by value in PHP 4.\nVariables are passed by value by default!</p>\n\n<p>Read here: <a href=\"http://www.webeks.net/programming/php/ampersand-operator-used-for-assigning-reference.html\" rel=\"nofollow noreferrer\">http://www.webeks.net/programming/php/ampersand-operator-used-for-assigning-reference.html</a></p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "27588152",
        "title": "",
        "text": "<p>You can pass a variable to a function by reference. This function will be able to modify the original variable.</p>\n\n<p>You can define the passage by reference in the function definition:</p>\n\n<pre><code>&lt;?php\nfunction changeValue(&amp;$var)\n{\n    $var++;\n}\n\n$result=5;\nchangeValue($result);\n\necho $result; // $result is 6 here\n?&gt;\n</code></pre>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "60082753",
        "title": "",
        "text": "<p>For anyone who comes across this in the future, I want to share this gem from the <a href=\"https://www.php.net/manual/en/language.oop5.references.php\" rel=\"nofollow noreferrer\">PHP docs, posted by an anonymous user</a>:</p>\n\n<blockquote>\n  <p>There seems to be some confusion here. The distinction between pointers and references is not particularly helpful.\n  The behavior in some of the \"comprehensive\" examples already posted can be explained in simpler unifying terms. Hayley's code, for example, is doing EXACTLY what you should expect it should. (Using >= 5.3)</p>\n  \n  <p>First principle:\n  A pointer stores a memory address to access an object. Any time an object is assigned, a pointer is generated. (I haven't delved TOO deeply into the Zend engine yet, but as far as I can see, this applies)</p>\n  \n  <p>2nd principle, and source of the most confusion:\n  Passing a variable to a function is done by default as a value pass, ie, you are working with a copy. \"But objects are passed by reference!\" A common misconception both here and in the Java world. I never said a copy OF WHAT. The default passing is done by value. Always. WHAT is being copied and passed, however, is the pointer. When using the \"->\", you will of course be accessing the same internals as the original variable in the caller function. Just using \"=\" will only play with copies.</p>\n  \n  <p>3rd principle:\n  \"&amp;\" automatically and permanently sets another variable name/pointer to the same memory address as something else until you decouple them. It is correct to use the term \"alias\" here. Think of it as joining two pointers at the hip until forcibly separated with \"unset()\". This functionality exists both in the same scope and when an argument is passed to a function. Often the passed argument is called a \"reference,\" due to certain distinctions between \"passing by value\" and \"passing by reference\" that were clearer in C and C++.</p>\n  \n  <p>Just remember: pointers to objects, not objects themselves, are passed to functions. These pointers are COPIES of the original unless you use \"&amp;\" in your parameter list to actually pass the originals. Only when you dig into the internals of an object will the originals change.</p>\n</blockquote>\n\n<p>And here's the example they provide:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>&lt;?php\n\n//The two are meant to be the same\n$a = \"Clark Kent\"; //a==Clark Kent\n$b = &amp;$a; //The two will now share the same fate.\n\n$b=\"Superman\"; // $a==\"Superman\" too.\necho $a;\necho $a=\"Clark Kent\"; // $b==\"Clark Kent\" too.\nunset($b); // $b divorced from $a\n$b=\"Bizarro\";\necho $a; // $a==\"Clark Kent\" still, since $b is a free agent pointer now.\n\n//The two are NOT meant to be the same.\n$c=\"King\";\n$d=\"Pretender to the Throne\";\necho $c.\"\\n\"; // $c==\"King\"\necho $d.\"\\n\"; // $d==\"Pretender to the Throne\"\nswapByValue($c, $d);\necho $c.\"\\n\"; // $c==\"King\"\necho $d.\"\\n\"; // $d==\"Pretender to the Throne\"\nswapByRef($c, $d);\necho $c.\"\\n\"; // $c==\"Pretender to the Throne\"\necho $d.\"\\n\"; // $d==\"King\"\n\nfunction swapByValue($x, $y){\n$temp=$x;\n$x=$y;\n$y=$temp;\n//All this beautiful work will disappear\n//because it was done on COPIES of pointers.\n//The originals pointers still point as they did.\n}\n\nfunction swapByRef(&amp;$x, &amp;$y){\n$temp=$x;\n$x=$y;\n$y=$temp;\n//Note the parameter list: now we switched 'em REAL good.\n}\n\n?&gt;\n</code></pre>\n\n<p><a href=\"https://aleksandrhovhannisyan.github.io/blog/dev/javascript-pass-by-reference/\" rel=\"nofollow noreferrer\">I wrote an extensive, detailed blog post on this subject for JavaScript</a>, but I believe it applies equally well to PHP, C++, and any other language where people seem to be confused about pass by value vs. pass by reference.</p>\n\n<p>Clearly, PHP, like C++, is a language that does support pass by reference. By default, objects are passed by value. When working with variables that store objects, it helps to see those variables as pointers (because that is fundamentally what they are, at the assembly level). If you pass a pointer by value, you can still \"trace\" the pointer and modify the properties of the object being pointed to. What you cannot do is have it point to a different object. Only if you explicitly declare a parameter as being passed by reference will you be able to do that.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "880",
        "title": "",
        "text": "<p>Depends on the version, 4 is by value, 5 is by reference.</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "9696799",
        "title": "",
        "text": "<p>In PHP, By default objects are passed as reference copy to a new Object.</p>\n\n<p>See this example.............</p>\n\n<pre><code>class X {\n  var $abc = 10; \n}\n\nclass Y {\n\n  var $abc = 20; \n  function changeValue($obj)\n  {\n   $obj-&gt;abc = 30;\n  }\n}\n\n$x = new X();\n$y = new Y();\n\necho $x-&gt;abc; //outputs 10\n$y-&gt;changeValue($x);\necho $x-&gt;abc; //outputs 30\n</code></pre>\n\n<p>Now see this..............</p>\n\n<pre><code>class X {\n  var $abc = 10; \n}\n\nclass Y {\n\n  var $abc = 20; \n  function changeValue($obj)\n  {\n    $obj = new Y();\n  }\n}\n\n$x = new X();\n$y = new Y();\n\necho $x-&gt;abc; //outputs 10\n$y-&gt;changeValue($x);\necho $x-&gt;abc; //outputs 10 not 20 same as java does.\n</code></pre>\n\n<p>Now see this ..............</p>\n\n<pre><code>class X {\n  var $abc = 10; \n}\n\nclass Y {\n\n  var $abc = 20; \n  function changeValue(&amp;$obj)\n  {\n    $obj = new Y();\n  }\n}\n\n$x = new X();\n$y = new Y();\n\necho $x-&gt;abc; //outputs 10\n$y-&gt;changeValue($x);\necho $x-&gt;abc; //outputs 20 not possible in java.\n</code></pre>\n\n<p>i hope you can understand this.</p>\n",
        "votes": "65",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "888",
    "url": "https://stackoverflow.com/questions/888",
    "title": "How do you debug PHP scripts?",
    "text:": "<p>How do you debug <strong>PHP</strong> scripts?</p>\n\n<p>I am aware of basic debugging such as using the Error Reporting. The breakpoint debugging in <strong>PHPEclipse</strong> is also quite useful.</p>\n\n<p>What is the <strong>best</strong> (in terms of fast and easy) way to debug in phpStorm or any other IDE?</p>\n",
    "codes": [
      [],
      [],
      [],
      [
        "tail -f app/tmp/logs/error.log\n",
        "$this->log('xxxx');\n"
      ],
      [
        "echo \"<pre>\";\nprint_r();\necho \"</pre>\";\n"
      ],
      [],
      [],
      [
        "error_reporting(-1);\nassert_options(ASSERT_ACTIVE, 1);\nassert_options(ASSERT_WARNING, 0);\nassert_options(ASSERT_BAIL, 0);\nassert_options(ASSERT_QUIET_EVAL, 0);\nassert_options(ASSERT_CALLBACK, 'assert_callcack');\nset_error_handler('error_handler');\nset_exception_handler('exception_handler');\nregister_shutdown_function('shutdown_handler');\n\nfunction assert_callcack($file, $line, $message) {\n    throw new Customizable_Exception($message, null, $file, $line);\n}\n\nfunction error_handler($errno, $error, $file, $line, $vars) {\n    if ($errno === 0 || ($errno & error_reporting()) === 0) {\n        return;\n    }\n\n    throw new Customizable_Exception($error, $errno, $file, $line);\n}\n\nfunction exception_handler(Exception $e) {\n    // Do what ever!\n    echo '<pre>', print_r($e, true), '</pre>';\n    exit;\n}\n\nfunction shutdown_handler() {\n    try {\n        if (null !== $error = error_get_last()) {\n            throw new Customizable_Exception($error['message'], $error['type'], $error['file'], $error['line']);\n        }\n    } catch (Exception $e) {\n        exception_handler($e);\n    }\n}\n\nclass Customizable_Exception extends Exception {\n    public function __construct($message = null, $code = null, $file = null, $line = null) {\n        if ($code === null) {\n            parent::__construct($message);\n        } else {\n            parent::__construct($message, $code);\n        }\n        if ($file !== null) {\n            $this->file = $file;\n        }\n        if ($line !== null) {\n            $this->line = $line;\n        }\n    }\n}\n"
      ],
      [
        "require('php_error.php');\n\\php_error\\reportErrors();\n",
        "sudo dtrace -qn 'php*:::function-entry { printf(\"%Y: PHP function-entry:\\t%s%s%s() in %s:%d\\n\", walltimestamp, copyinstr(arg3), copyinstr(arg4), copyinstr(arg0), basename(copyinstr(arg1)), (int)arg2); }'\n",
        "alias trace-php='sudo dtrace -qn \"php*:::function-entry { printf(\\\"%Y: PHP function-entry:\\t%s%s%s() in %s:%d\\n\\\", walltimestamp, copyinstr(arg3), copyinstr(arg4), copyinstr(arg0), basename(copyinstr(arg1)), (int)arg2); }\"'\n",
        "#!/usr/sbin/dtrace -Zs\n# See: https://github.com/kenorb/dtruss-lamp/blob/master/dtruss-php.d\n\n#pragma D option quiet\n\nphp*:::compile-file-entry\n{\n    printf(\"%Y: PHP compile-file-entry:\\t%s (%s)\\n\", walltimestamp, basename(copyinstr(arg0)), copyinstr(arg1));\n}\n\nphp*:::compile-file-return\n{\n    printf(\"%Y: PHP compile-file-return:\\t%s (%s)\\n\", walltimestamp, basename(copyinstr(arg0)), basename(copyinstr(arg1)));\n}\n\nphp*:::error\n{\n    printf(\"%Y: PHP error message:\\t%s in %s:%d\\n\", walltimestamp, copyinstr(arg0), basename(copyinstr(arg1)), (int)arg2);\n}\n\nphp*:::exception-caught\n{\n    printf(\"%Y: PHP exception-caught:\\t%s\\n\", walltimestamp, copyinstr(arg0));\n}\n\nphp*:::exception-thrown\n{\n    printf(\"%Y: PHP exception-thrown:\\t%s\\n\", walltimestamp, copyinstr(arg0));\n}\n\nphp*:::execute-entry\n{\n    printf(\"%Y: PHP execute-entry:\\t%s:%d\\n\", walltimestamp, basename(copyinstr(arg0)), (int)arg1);\n}\n\nphp*:::execute-return\n{\n    printf(\"%Y: PHP execute-return:\\t%s:%d\\n\", walltimestamp, basename(copyinstr(arg0)), (int)arg1);\n}\n\nphp*:::function-entry\n{\n    printf(\"%Y: PHP function-entry:\\t%s%s%s() in %s:%d\\n\", walltimestamp, copyinstr(arg3), copyinstr(arg4), copyinstr(arg0), basename(copyinstr(arg1)), (int)arg2);\n}\n\nphp*:::function-return\n{\n    printf(\"%Y: PHP function-return:\\t%s%s%s() in %s:%d\\n\", walltimestamp, copyinstr(arg3), copyinstr(arg4), copyinstr(arg0), basename(copyinstr(arg1)), (int)arg2);\n}\n\nphp*:::request-shutdown\n{\n    printf(\"%Y: PHP request-shutdown:\\t%s at %s via %s\\n\", walltimestamp, basename(copyinstr(arg0)), copyinstr(arg1), copyinstr(arg2));\n}\n\nphp*:::request-startup\n{\n    printf(\"%Y, PHP request-startup:\\t%s at %s via %s\\n\", walltimestamp, basename(copyinstr(arg0)), copyinstr(arg1), copyinstr(arg2));\n}\n",
        "php -S localhost:8080\n",
        "probe process(\"sapi/cli/php\").provider(\"php\").mark(\"compile__file__entry\") {\n    printf(\"Probe compile__file__entry\\n\");\n    printf(\"  compile_file %s\\n\", user_string($arg1));\n    printf(\"  compile_file_translated %s\\n\", user_string($arg2));\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"compile__file__return\") {\n    printf(\"Probe compile__file__return\\n\");\n    printf(\"  compile_file %s\\n\", user_string($arg1));\n    printf(\"  compile_file_translated %s\\n\", user_string($arg2));\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"error\") {\n    printf(\"Probe error\\n\");\n    printf(\"  errormsg %s\\n\", user_string($arg1));\n    printf(\"  request_file %s\\n\", user_string($arg2));\n    printf(\"  lineno %d\\n\", $arg3);\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"exception__caught\") {\n    printf(\"Probe exception__caught\\n\");\n    printf(\"  classname %s\\n\", user_string($arg1));\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"exception__thrown\") {\n    printf(\"Probe exception__thrown\\n\");\n    printf(\"  classname %s\\n\", user_string($arg1));\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"execute__entry\") {\n    printf(\"Probe execute__entry\\n\");\n    printf(\"  request_file %s\\n\", user_string($arg1));\n    printf(\"  lineno %d\\n\", $arg2);\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"execute__return\") {\n    printf(\"Probe execute__return\\n\");\n    printf(\"  request_file %s\\n\", user_string($arg1));\n    printf(\"  lineno %d\\n\", $arg2);\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"function__entry\") {\n    printf(\"Probe function__entry\\n\");\n    printf(\"  function_name %s\\n\", user_string($arg1));\n    printf(\"  request_file %s\\n\", user_string($arg2));\n    printf(\"  lineno %d\\n\", $arg3);\n    printf(\"  classname %s\\n\", user_string($arg4));\n    printf(\"  scope %s\\n\", user_string($arg5));\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"function__return\") {\n    printf(\"Probe function__return: %s\\n\", user_string($arg1));\n    printf(\" function_name %s\\n\", user_string($arg1));\n    printf(\"  request_file %s\\n\", user_string($arg2));\n    printf(\"  lineno %d\\n\", $arg3);\n    printf(\"  classname %s\\n\", user_string($arg4));\n    printf(\"  scope %s\\n\", user_string($arg5));\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"request__shutdown\") {\n    printf(\"Probe request__shutdown\\n\");\n    printf(\"  file %s\\n\", user_string($arg1));\n    printf(\"  request_uri %s\\n\", user_string($arg2));\n    printf(\"  request_method %s\\n\", user_string($arg3));\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"request__startup\") {\n    printf(\"Probe request__startup\\n\");\n    printf(\"  file %s\\n\", user_string($arg1));\n    printf(\"  request_uri %s\\n\", user_string($arg2));\n    printf(\"  request_method %s\\n\", user_string($arg3));\n}\n",
        "stap -c 'sapi/cli/php test.php' all_probes.stp\n"
      ],
      [],
      [],
      [
        "<?php var_dump(__FILE__, __LINE__, $_REQUEST); ?>\n"
      ],
      [],
      [],
      [],
      [],
      [
        "display_errors = Off\nerror_reporting = E_ALL \ndisplay_errors = On\n",
        "error_log();\nconsole_log();\n"
      ],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [],
      [
        "echo '<pre>';\nprint_r($arrayOrObject);\n"
      ],
      [],
      [
        " ob_start();var_dump(); user_error(ob_get_contents()); ob_get_clean();\n"
      ],
      [],
      [
        "echo \"<pre>\".print_r($var, true).\"</pre>\";\n"
      ]
    ],
    "votes:": "410",
    "tags": "<php><eclipse><debugging><phpstorm><xdebug>",
    "AcceptedAnswerId": "890",
    "answers": [
      {
        "id": "11956",
        "title": "",
        "text": "<p>In a production environment, I log relevant data to the server's error log with error_log().</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "3579",
        "title": "",
        "text": "<p>Depending on the issue I like a combination of error_reporting(E_ALL) mixed with echo tests (to find the offending line/file the error happened in initally; you KNOW it's not always the line/file php tells you right?), IDE brace matching (to resolve \"Parse error: syntax error, unexpected $end\" issues), and print_r(); exit; dumps (real programmers view the source ;p). </p>\n\n<p>You also can't beat phpdebug (check sourceforge) with \"memory_get_usage();\" and \"memory_get_peak_usage();\" to find the problem areas.</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "81725",
        "title": "",
        "text": "<p>PhpEdit has a built in debugger, but I usually end up using echo(); and print_r(); the old fashioned way!!</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2801595",
        "title": "",
        "text": "<p>I often use CakePHP when Rails isn't possible. To debug errors I usually find the <code>error.log</code> in the tmp folder and tail it in the terminal with the command...</p>\n\n<pre><code>tail -f app/tmp/logs/error.log\n</code></pre>\n\n<p>It give's you running dialog from cake of what is going on, which is pretty handy, if you want to output something to it mid code you can use.</p>\n\n<pre><code>$this-&gt;log('xxxx');\n</code></pre>\n\n<p>This can usually give you a good idea of what is going on/wrong.</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "4172",
        "title": "",
        "text": "<p>1) I use print_r(). In TextMate, I have a snippet for 'pre' which expands to this:</p>\n\n<pre><code>echo \"&lt;pre&gt;\";\nprint_r();\necho \"&lt;/pre&gt;\";\n</code></pre>\n\n<p>2) I use Xdebug, but haven't been able to get the GUI to work right on my Mac. It at least prints out a readable version of the stack trace.</p>\n",
        "votes": "19",
        "tags": "",
        "accepted": false
      },
      {
        "id": "23359",
        "title": "",
        "text": "<p>The integrated debuggers where you can watch the values of variable change as you step through code are really cool. They do, however, require software setup on the server and a certain amount of configuration on the client. Both of which require periodic maintenance to keep in good working order.</p>\n\n<p>A print_r is easy to write and is guaranteed to work in any setup.</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "13817",
        "title": "",
        "text": "<p>i use zend studio for eclipse with the built in debugger. Its still slow compared to debugging with eclipse pdt with xdebug. Hopefully they will fix those issues, the speed has improved over the recent releases but still stepping over things takes 2-3 seconds.\nThe zend firefox toolbar really makes things easy (debug next page, current page, etc). Also it provides a profiler that will benchmark your code and provide pie-charts, execution time, etc.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1058375",
        "title": "",
        "text": "<p>This is my little debug environment:</p>\n\n<pre><code>error_reporting(-1);\nassert_options(ASSERT_ACTIVE, 1);\nassert_options(ASSERT_WARNING, 0);\nassert_options(ASSERT_BAIL, 0);\nassert_options(ASSERT_QUIET_EVAL, 0);\nassert_options(ASSERT_CALLBACK, 'assert_callcack');\nset_error_handler('error_handler');\nset_exception_handler('exception_handler');\nregister_shutdown_function('shutdown_handler');\n\nfunction assert_callcack($file, $line, $message) {\n    throw new Customizable_Exception($message, null, $file, $line);\n}\n\nfunction error_handler($errno, $error, $file, $line, $vars) {\n    if ($errno === 0 || ($errno &amp; error_reporting()) === 0) {\n        return;\n    }\n\n    throw new Customizable_Exception($error, $errno, $file, $line);\n}\n\nfunction exception_handler(Exception $e) {\n    // Do what ever!\n    echo '&lt;pre&gt;', print_r($e, true), '&lt;/pre&gt;';\n    exit;\n}\n\nfunction shutdown_handler() {\n    try {\n        if (null !== $error = error_get_last()) {\n            throw new Customizable_Exception($error['message'], $error['type'], $error['file'], $error['line']);\n        }\n    } catch (Exception $e) {\n        exception_handler($e);\n    }\n}\n\nclass Customizable_Exception extends Exception {\n    public function __construct($message = null, $code = null, $file = null, $line = null) {\n        if ($code === null) {\n            parent::__construct($message);\n        } else {\n            parent::__construct($message, $code);\n        }\n        if ($file !== null) {\n            $this-&gt;file = $file;\n        }\n        if ($line !== null) {\n            $this-&gt;line = $line;\n        }\n    }\n}\n</code></pre>\n",
        "votes": "40",
        "tags": "",
        "accepted": false
      },
      {
        "id": "36131176",
        "title": "",
        "text": "<h3><a href=\"http://phpdbg.com/\" rel=\"nofollow noreferrer\">PHP DBG</a></h3>\n\n<p>The Interactive Stepthrough PHP Debugger implemented as a SAPI module which can give give you complete control over the environment without impacting the functionality or performance of your code. It aims to be a lightweight, powerful, easy to use debugging platform for PHP 5.4+ and it's shipped out-of-box with PHP 5.6.</p>\n\n<p>Features includes:</p>\n\n<ul>\n<li>Stepthrough Debugging</li>\n<li>Flexible Breakpoints (Class Method, Function, File:Line, Address, Opcode)</li>\n<li>Easy Access to PHP with built-in eval()</li>\n<li>Easy Access to Currently Executing Code</li>\n<li>Userland API</li>\n<li>SAPI Agnostic - Easily Integrated</li>\n<li>PHP Configuration File Support</li>\n<li>JIT Super Globals - Set Your Own!!</li>\n<li>Optional readline Support - Comfortable Terminal Operation</li>\n<li>Remote Debugging Support - Bundled Java GUI</li>\n<li>Easy Operation</li>\n</ul>\n\n<p>See the screenshots:</p>\n\n<p><a href=\"https://i.stack.imgur.com/yFHuH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yFHuH.png\" alt=\"PHP DBG - Stepthrough Debugging - screenshot\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/WVFoN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WVFoN.png\" alt=\"PHP DBG - Stepthrough Debugging - screenshot\"></a></p>\n\n<p>Home page: <a href=\"http://phpdbg.com/\" rel=\"nofollow noreferrer\">http://phpdbg.com/</a></p>\n\n<h3><a href=\"http://phperror.net/\" rel=\"nofollow noreferrer\">PHP Error</a> - Better error reporting for PHP</h3>\n\n<p>This is very easy to use library (actually a file) to debug your PHP scripts.</p>\n\n<p>The only thing that you need to do is to include one file as below (at the beginning on your code):</p>\n\n<pre><code>require('php_error.php');\n\\php_error\\reportErrors();\n</code></pre>\n\n<p>Then all errors will give you info such as backtrace, code context, function arguments, server variables, etc. For example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/csob7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/csob7.png\" alt=\"PHP Error | Improve Error Reporting for PHP - screenshot of backtrace\"></a>\n<a href=\"https://i.stack.imgur.com/ulpyZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ulpyZ.png\" alt=\"PHP Error | Improve Error Reporting for PHP - screenshot of backtrace\"></a>\n<a href=\"https://i.stack.imgur.com/ZiJwK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZiJwK.png\" alt=\"PHP Error | Improve Error Reporting for PHP - screenshot of backtrace\"></a></p>\n\n<p>Features include:</p>\n\n<ul>\n<li>trivial to use, it's just one file</li>\n<li>errors displayed in the browser for normal and ajaxy requests</li>\n<li>AJAX requests are paused, allowing you to automatically re-run them</li>\n<li>makes errors as strict as possible (encourages code quality, and tends to improve performance)</li>\n<li>code snippets across the whole stack trace</li>\n<li>provides more information (such as full function signatures)</li>\n<li>fixes some error messages which are just plain wrong</li>\n<li>syntax highlighting</li>\n<li>looks pretty!</li>\n<li>customization</li>\n<li>manually turn it on and off</li>\n<li>run specific sections without error reporting</li>\n<li>ignore files allowing you to avoid highlighting code in your stack trace</li>\n<li>application files; these are prioritized when an error strikes!</li>\n</ul>\n\n<p>Home page: <a href=\"http://phperror.net/\" rel=\"nofollow noreferrer\">http://phperror.net/</a></p>\n\n<p>GitHub: <a href=\"https://github.com/JosephLenton/PHP-Error\" rel=\"nofollow noreferrer\">https://github.com/JosephLenton/PHP-Error</a></p>\n\n<p>My fork (with extra fixes): <a href=\"https://github.com/kenorb-contrib/PHP-Error\" rel=\"nofollow noreferrer\">https://github.com/kenorb-contrib/PHP-Error</a></p>\n\n<h3><a href=\"https://en.wikipedia.org/wiki/DTrace\" rel=\"nofollow noreferrer\">DTrace</a></h3>\n\n<p>If your system supports <a href=\"http://php.net/manual/en/features.dtrace.php\" rel=\"nofollow noreferrer\">DTrace dynamic tracing</a> (installed by default on OS X) and your PHP is compiled with the DTrace probes enabled (<code>--enable-dtrace</code>) which should be by default, this command can help you to debug PHP script with no time:</p>\n\n<pre><code>sudo dtrace -qn 'php*:::function-entry { printf(\"%Y: PHP function-entry:\\t%s%s%s() in %s:%d\\n\", walltimestamp, copyinstr(arg3), copyinstr(arg4), copyinstr(arg0), basename(copyinstr(arg1)), (int)arg2); }'\n</code></pre>\n\n<p>So given the following alias has been added into your <em>rc</em> files (e.g. <code>~/.bashrc</code>, <code>~/.bash_aliases</code>):</p>\n\n<pre><code>alias trace-php='sudo dtrace -qn \"php*:::function-entry { printf(\\\"%Y: PHP function-entry:\\t%s%s%s() in %s:%d\\n\\\", walltimestamp, copyinstr(arg3), copyinstr(arg4), copyinstr(arg0), basename(copyinstr(arg1)), (int)arg2); }\"'\n</code></pre>\n\n<p>you may trace your script with easy to remember alias: <code>trace-php</code>.</p>\n\n<p>Here is more advanced dtrace script, just save it into <code>dtruss-php.d</code>, make it executable (<code>chmod +x dtruss-php.d</code>) and run:</p>\n\n<pre><code>#!/usr/sbin/dtrace -Zs\n# See: https://github.com/kenorb/dtruss-lamp/blob/master/dtruss-php.d\n\n#pragma D option quiet\n\nphp*:::compile-file-entry\n{\n    printf(\"%Y: PHP compile-file-entry:\\t%s (%s)\\n\", walltimestamp, basename(copyinstr(arg0)), copyinstr(arg1));\n}\n\nphp*:::compile-file-return\n{\n    printf(\"%Y: PHP compile-file-return:\\t%s (%s)\\n\", walltimestamp, basename(copyinstr(arg0)), basename(copyinstr(arg1)));\n}\n\nphp*:::error\n{\n    printf(\"%Y: PHP error message:\\t%s in %s:%d\\n\", walltimestamp, copyinstr(arg0), basename(copyinstr(arg1)), (int)arg2);\n}\n\nphp*:::exception-caught\n{\n    printf(\"%Y: PHP exception-caught:\\t%s\\n\", walltimestamp, copyinstr(arg0));\n}\n\nphp*:::exception-thrown\n{\n    printf(\"%Y: PHP exception-thrown:\\t%s\\n\", walltimestamp, copyinstr(arg0));\n}\n\nphp*:::execute-entry\n{\n    printf(\"%Y: PHP execute-entry:\\t%s:%d\\n\", walltimestamp, basename(copyinstr(arg0)), (int)arg1);\n}\n\nphp*:::execute-return\n{\n    printf(\"%Y: PHP execute-return:\\t%s:%d\\n\", walltimestamp, basename(copyinstr(arg0)), (int)arg1);\n}\n\nphp*:::function-entry\n{\n    printf(\"%Y: PHP function-entry:\\t%s%s%s() in %s:%d\\n\", walltimestamp, copyinstr(arg3), copyinstr(arg4), copyinstr(arg0), basename(copyinstr(arg1)), (int)arg2);\n}\n\nphp*:::function-return\n{\n    printf(\"%Y: PHP function-return:\\t%s%s%s() in %s:%d\\n\", walltimestamp, copyinstr(arg3), copyinstr(arg4), copyinstr(arg0), basename(copyinstr(arg1)), (int)arg2);\n}\n\nphp*:::request-shutdown\n{\n    printf(\"%Y: PHP request-shutdown:\\t%s at %s via %s\\n\", walltimestamp, basename(copyinstr(arg0)), copyinstr(arg1), copyinstr(arg2));\n}\n\nphp*:::request-startup\n{\n    printf(\"%Y, PHP request-startup:\\t%s at %s via %s\\n\", walltimestamp, basename(copyinstr(arg0)), copyinstr(arg1), copyinstr(arg2));\n}\n</code></pre>\n\n<p><sup>Home page: <a href=\"https://github.com/kenorb/dtruss-lamp\" rel=\"nofollow noreferrer\">dtruss-lamp</a> at GitHub</sup></p>\n\n<p>Here is simple usage:</p>\n\n<ol>\n<li>Run: <code>sudo dtruss-php.d</code>.</li>\n<li>On another terminal run: <code>php -r \"phpinfo();\"</code>.</li>\n</ol>\n\n<p>To test that, you can go to any docroot with <code>index.php</code> and run PHP builtin server by:</p>\n\n<pre><code>php -S localhost:8080\n</code></pre>\n\n<p>After that you can access the site at <a href=\"http://localhost:8080/\" rel=\"nofollow noreferrer\">http://localhost:8080/</a> (or choose whatever port is convenient for you). From there access some pages to see the trace output.</p>\n\n<p>Note: Dtrace is available on OS X by default, on Linux you probably need <a href=\"https://github.com/dtrace4linux/linux\" rel=\"nofollow noreferrer\">dtrace4linux</a> or check for some other <a href=\"https://stackoverflow.com/q/2059311/55075\">alternatives</a>.</p>\n\n<p>See: <a href=\"http://php.net/manual/en/features.dtrace.dtrace.php\" rel=\"nofollow noreferrer\">Using PHP and DTrace</a> at php.net</p>\n\n<hr>\n\n<h3><a href=\"https://en.wikipedia.org/wiki/SystemTap\" rel=\"nofollow noreferrer\">SystemTap</a></h3>\n\n<p>Alternatively check for SystemTap tracing by installing SystemTap SDT development package (e.g. <code>yum install systemtap-sdt-devel</code>).</p>\n\n<p>Here is example script (<code>all_probes.stp</code>) for tracing all core PHP static probe points throughout the duration of a running PHP script with SystemTap:</p>\n\n<pre><code>probe process(\"sapi/cli/php\").provider(\"php\").mark(\"compile__file__entry\") {\n    printf(\"Probe compile__file__entry\\n\");\n    printf(\"  compile_file %s\\n\", user_string($arg1));\n    printf(\"  compile_file_translated %s\\n\", user_string($arg2));\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"compile__file__return\") {\n    printf(\"Probe compile__file__return\\n\");\n    printf(\"  compile_file %s\\n\", user_string($arg1));\n    printf(\"  compile_file_translated %s\\n\", user_string($arg2));\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"error\") {\n    printf(\"Probe error\\n\");\n    printf(\"  errormsg %s\\n\", user_string($arg1));\n    printf(\"  request_file %s\\n\", user_string($arg2));\n    printf(\"  lineno %d\\n\", $arg3);\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"exception__caught\") {\n    printf(\"Probe exception__caught\\n\");\n    printf(\"  classname %s\\n\", user_string($arg1));\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"exception__thrown\") {\n    printf(\"Probe exception__thrown\\n\");\n    printf(\"  classname %s\\n\", user_string($arg1));\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"execute__entry\") {\n    printf(\"Probe execute__entry\\n\");\n    printf(\"  request_file %s\\n\", user_string($arg1));\n    printf(\"  lineno %d\\n\", $arg2);\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"execute__return\") {\n    printf(\"Probe execute__return\\n\");\n    printf(\"  request_file %s\\n\", user_string($arg1));\n    printf(\"  lineno %d\\n\", $arg2);\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"function__entry\") {\n    printf(\"Probe function__entry\\n\");\n    printf(\"  function_name %s\\n\", user_string($arg1));\n    printf(\"  request_file %s\\n\", user_string($arg2));\n    printf(\"  lineno %d\\n\", $arg3);\n    printf(\"  classname %s\\n\", user_string($arg4));\n    printf(\"  scope %s\\n\", user_string($arg5));\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"function__return\") {\n    printf(\"Probe function__return: %s\\n\", user_string($arg1));\n    printf(\" function_name %s\\n\", user_string($arg1));\n    printf(\"  request_file %s\\n\", user_string($arg2));\n    printf(\"  lineno %d\\n\", $arg3);\n    printf(\"  classname %s\\n\", user_string($arg4));\n    printf(\"  scope %s\\n\", user_string($arg5));\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"request__shutdown\") {\n    printf(\"Probe request__shutdown\\n\");\n    printf(\"  file %s\\n\", user_string($arg1));\n    printf(\"  request_uri %s\\n\", user_string($arg2));\n    printf(\"  request_method %s\\n\", user_string($arg3));\n}\nprobe process(\"sapi/cli/php\").provider(\"php\").mark(\"request__startup\") {\n    printf(\"Probe request__startup\\n\");\n    printf(\"  file %s\\n\", user_string($arg1));\n    printf(\"  request_uri %s\\n\", user_string($arg2));\n    printf(\"  request_method %s\\n\", user_string($arg3));\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>stap -c 'sapi/cli/php test.php' all_probes.stp\n</code></pre>\n\n<p>See: <a href=\"http://php.net/manual/en/features.dtrace.systemtap.php\" rel=\"nofollow noreferrer\">Using SystemTap with PHP DTrace Static Probes</a> at php.net</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "891",
        "title": "",
        "text": "<p>print_r( debug_backtrace() );</p>\n\n<p>or something like that :-)</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1602",
        "title": "",
        "text": "<p>In all honesty, a combination of print and print_r() to print out the variables. I know that many prefer to use other more advanced methods but I find this the easiest to use.</p>\n\n<p>I will say that I didn't fully appreciate this until I did some Microprocessor programming at Uni and was not able to use even this.</p>\n",
        "votes": "17",
        "tags": "",
        "accepted": false
      },
      {
        "id": "22691",
        "title": "",
        "text": "<p><a href=\"http://www.xdebug.org/\" rel=\"noreferrer\">XDebug</a> is essential for development. I install it before any other extension. It gives you stack traces on any error and you can enable profiling easily.</p>\n\n<p>For a quick look at a data structure use <a href=\"http://www.php.net/manual/en/function.var-dump.php\" rel=\"noreferrer\"><code>var_dump()</code></a>. Don't use <code>print_r()</code> because you'll have to surround it with <code>&lt;pre&gt;</code> and it only prints one var at a time.</p>\n\n<pre><code>&lt;?php var_dump(__FILE__, __LINE__, $_REQUEST); ?&gt;\n</code></pre>\n\n<p>For a real debugging environment the best I've found is <a href=\"http://www.activestate.com/Products/komodo_ide/index.mhtml\" rel=\"noreferrer\">Komodo IDE</a> but it costs $$.</p>\n",
        "votes": "28",
        "tags": "",
        "accepted": false
      },
      {
        "id": "22681",
        "title": "",
        "text": "<p>Manual debugging is generally quicker for me - <code>var_dump()</code> and <code>debug_print_backtrace()</code> are all the tools you need to arm your logic with.</p>\n",
        "votes": "4",
        "tags": "",
        "accepted": false
      },
      {
        "id": "10799401",
        "title": "",
        "text": "<p>Nusphere is also a good debugger for php\n<a href=\"http://www.nusphere.com/download.php.ide.htm\" rel=\"nofollow\">nusphere</a></p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "224920",
        "title": "",
        "text": "<p>Usually I find create a custom log function able to save on file, store debug info, and eventually re-print on a common footer.</p>\n\n<p>You can also override common Exception class, so that this type of debugging is semi-automated.</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "66572",
        "title": "",
        "text": "<p>Xdebug and the DBGp plugin for Notepad++ for heavy duty bug hunting, FirePHP for lightweight stuff. Quick and dirty? Nothing beats <a href=\"http://dbug.ospinto.com/\" rel=\"noreferrer\">dBug</a>.</p>\n",
        "votes": "34",
        "tags": "",
        "accepted": false
      },
      {
        "id": "32886213",
        "title": "",
        "text": "<p>There are many PHP debugging techniques that can save you countless hours when coding. An effective but basic debugging technique is to simply turn on error reporting. Another slightly more advanced technique involves using print statements, which can help pinpoint more elusive bugs by displaying what is actually going onto the screen. PHPeclipse is an Eclipse plug-in that can highlight common syntax errors and can be used in conjunction with a debugger to set breakpoints.</p>\n\n<pre><code>display_errors = Off\nerror_reporting = E_ALL \ndisplay_errors = On\n</code></pre>\n\n<p>and also used</p>\n\n<pre><code>error_log();\nconsole_log();\n</code></pre>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "890",
        "title": "",
        "text": "<p>Try <a href=\"https://eclipse.org/pdt/\" rel=\"noreferrer\">Eclipse PDT</a> to setup an Eclipse environment that has debugging features like you mentioned. The ability to step into the code is a much better way to debug then the old method of var_dump and print at various points to see where your flow goes wrong. When all else fails though and all I have is SSH and vim I still <code>var_dump()</code>/<code>die()</code> to find where the code goes south.</p>\n",
        "votes": "147",
        "tags": "",
        "accepted": true
      },
      {
        "id": "3209562",
        "title": "",
        "text": "<p>I use Netbeans with XDebug and the <a href=\"http://www.elime.be/easyxdebug.htm\" rel=\"noreferrer\" title=\"Easy XDebug FireFox Add-on\">Easy XDebug FireFox Add-on</a> </p>\n\n<p>The add-on is essential when you debug MVC projects, because the normal way XDebug runs in Netbeans is to register the dbug session via the url. With the add-on installed in FireFox, you would set your Netbeans project properties -> Run Configuratuion -> Advanced and select \"Do Not Open Web Browser\" You can now set your break points and start the debugging session with Ctrl-F5 as usual. Open FireFox and right-click the Add-on icon in the right bottom corner to start monitoring for breakpoints. When the code reaches the breakpoint it will stop and you can inspect your variable states and call-stack.</p>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "889",
        "title": "",
        "text": "<p>I've used the <a href=\"http://www.zend.com/products/studio/\" rel=\"noreferrer\">Zend Studio (5.5)</a>, together with <a href=\"http://www.zend.com/en/products/platform/\" rel=\"noreferrer\">Zend Platform</a>. That gives proper debugging, breakpoints/stepping over the code etc., although at a price.</p>\n",
        "votes": "17",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2599",
        "title": "",
        "text": "<p>You can use Firephp an add-on to firebug to debug php in the same environment as javascript.</p>\n\n<p>I also use <a href=\"http://xdebug.org/\" rel=\"noreferrer\">Xdebug</a> mentioned earlier for profiling php.</p>\n",
        "votes": "82",
        "tags": "",
        "accepted": false
      },
      {
        "id": "22695",
        "title": "",
        "text": "<p>Komodo IDE works well with xdebug, even for the remore debugging. It needs minimum amount of configuration. All you need is a version of php that Komodo can use locally to step through the code on a breakpoint. If you have the script imported into komodo project, then you can set breakpoints with a mouse-click just how you would set it inside eclipse for debugging a java program.\nRemote debugging is obviously more tricky to get it to work correctly ( you might have to map the remote url with a php script in your workspace ) than a local debugging setup which is pretty easy to configure if you are on a MAC or a linux desktop.</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1587",
        "title": "",
        "text": "<p><a href=\"http://xdebug.org/\" rel=\"noreferrer\">Xdebug</a>, by Derick Rethans, is very good. I used it some time ago and found it was not so easy to install. Once you're done, you won't understand how you managed without it :-)</p>\n\n<p>There is a good article on <a href=\"http://devzone.zend.com/article/2803-introducing-xdebug\" rel=\"noreferrer\">Zend Developer Zone</a> (installing on Linux doesn't seem any easier) and even a <a href=\"https://addons.mozilla.org/fr/firefox/addon/3960\" rel=\"noreferrer\">Firefox plugin</a>, which I never used.</p>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "28284",
        "title": "",
        "text": "<p>I use Netbeans with XDebug. \nCheck it out at its website for docs on how to configure it.\n<a href=\"http://php.netbeans.org/\" rel=\"noreferrer\">http://php.netbeans.org/</a></p>\n",
        "votes": "12",
        "tags": "",
        "accepted": false
      },
      {
        "id": "22675",
        "title": "",
        "text": "<p>For the really gritty problems that would be too time consuming to use print_r/echo to figure out I use my IDE's (PhpEd) debugging feature.  Unlike other IDEs I've used, PhpEd requires pretty much no setup.  the only reason I don't use it for any problems I encounter is that it's <em>painfully</em> slow.  I'm not sure that slowness is specific to PhpEd or any php debugger.  PhpEd is not free but I believe it uses one of the open-source debuggers (like XDebug previously mentioned) anyway.  The benefit with PhpEd, again, is that it requires no setup which I have found really pretty tedious in the past.</p>\n",
        "votes": "9",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1758",
        "title": "",
        "text": "<p>+1 for print_r(). Use it to dump out the contents of an object or variable. To make it more readable, do it with a pre tag so you don't need to view source. </p>\n\n<pre><code>echo '&lt;pre&gt;';\nprint_r($arrayOrObject);\n</code></pre>\n\n<p>Also var_dump($thing) - this is very useful to see the type of subthings</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "2801537",
        "title": "",
        "text": "<p>The most of bugs can be found easily by simply <code>var_dump</code>ing some of key variables, but it obviously depends on what kind of application you develop.</p>\n\n<p>For a more complex algorithms the step/breakpoint/watch functions are very helpful (if not necessary)</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "224986",
        "title": "",
        "text": "<p>Output buffering is very useful if you don't want to mess up your output. I do this in a one-liner which I can comment/uncomment at will </p>\n\n<pre><code> ob_start();var_dump(); user_error(ob_get_contents()); ob_get_clean();\n</code></pre>\n",
        "votes": "11",
        "tags": "",
        "accepted": false
      },
      {
        "id": "515128",
        "title": "",
        "text": "<p>PhpEd is really good. You can step into/over/out of functions. You can run ad-hoc code, inspect variables, change variables. It is amazing.</p>\n",
        "votes": "22",
        "tags": "",
        "accepted": false
      },
      {
        "id": "89699",
        "title": "",
        "text": "<p>Well, to some degree it depends on where things are going south. That's the first thing I try to isolate, and then I'll use echo/print_r() as necessary.</p>\n\n<p>NB: You guys know that you can pass true as a second argument to print_r() and it'll return the output instead of printing it? E.g.:</p>\n\n<pre><code>echo \"&lt;pre&gt;\".print_r($var, true).\"&lt;/pre&gt;\";\n</code></pre>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      }
    ]
  },
  {
    "id:": "898",
    "url": "https://stackoverflow.com/questions/898",
    "title": "Internationalization in your projects",
    "text:": "<p>How have you implemented Internationalization (i18n) in actual projects you've worked on?</p>\n\n<p>I took an interest in making software cross-cultural after I read the famous post by Joel, <a href=\"http://www.joelonsoftware.com/articles/Unicode.html\" rel=\"noreferrer\">The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)</a>. However, I have yet to able to take advantage of this in a real project, besides making sure I used Unicode strings where possible. But making all your strings Unicode and ensuring you understand what encoding everything you work with is in is just the tip of the i18n iceberg.</p>\n\n<p>Everything I have worked on to date has been for use by a controlled set of US English speaking people, or i18n just wasn't something we had time to work on before pushing the project live. So I am looking for any tips or war stories people have about making software more localized in real world projects.</p>\n",
    "codes": [
      [],
      [],
      [],
      [],
      [],
      [
        "String message = \"The \" + item + \" is on sale!\";\n",
        "String message = String.Format(\"The {0} is on sale!\", item);\n"
      ],
      [],
      [],
      [],
      [],
      []
    ],
    "votes:": "48",
    "tags": "<language-agnostic><unicode><localization><internationalization>",
    "AcceptedAnswerId": "",
    "answers": [
      {
        "id": "112575",
        "title": "",
        "text": "<p>Besides all the previous tips, remember that i18n it's not just about changing words for their equivalent on other languages, especially for non-latin languages alphabets (korean, Arabic) which written right to left, so the whole UI will have to conform, like</p>\n\n<ul>\n<li>item 1</li>\n<li>item 2</li>\n<li>item 3</li>\n</ul>\n\n<p>would have to be</p>\n\n<p>arabic text 1 -</p>\n\n<p>arabic text 2 -</p>\n\n<p>arabic text 3 -</p>\n\n<p>(reversed bullet list doesn't seem to work :P)</p>\n\n<p>which can be a UI nightmare if your system has to apply changes dinamically once the user changes the language being used.</p>\n\n<p>Another very hard thing is to test different languages, not just for the correctness of word, but since languages like Korean usually have bigger font type for their characters this may lead to language specific bugs (like \"SAVE\" text on a button being larger than the button itself for some language).</p>\n",
        "votes": "3",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1312",
        "title": "",
        "text": "<p>I was just listening to a <a href=\"http://www.hanselminutes.com/default.aspx?showID=135\" rel=\"nofollow noreferrer\">Podcast from Scott Hanselman</a> this morning, where he talks about internationalization, especially the really tricky things, like Turkish (with it's four i's) and Thai. Also, Jeff Atwood had a <a href=\"http://www.codinghorror.com/blog/archives/001075.html\" rel=\"nofollow noreferrer\">post</a>:</p>\n",
        "votes": "5",
        "tags": "",
        "accepted": false
      },
      {
        "id": "394644",
        "title": "",
        "text": "<p>I suggest to use something like <a href=\"http://99translations.com\" rel=\"nofollow noreferrer\">99translations.com</a> to maintain your translations . Otherwise you won't be able to tell what of your translations are up to date in every language. </p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "394755",
        "title": "",
        "text": "<p>Another challenge will be accepting input from your users.  In many cases, this is eased by the input processing provided by the operating system, such as IME in Windows, which works transparently with common text widgets, but this facility will not be available for every possible need.  </p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      },
      {
        "id": "1462",
        "title": "",
        "text": "<p>It has been a while, so this is not comprehensive.</p>\n\n<p><strong>Character Sets</strong></p>\n\n<p>Unicode is great, but you can't get away with ignoring other character sets. The default character set on Windows XP (English) is Cp1252. On the web, you don't know what a browser will send you (though hopefully your container will handle most of this). And don't be surprised when there are bugs in whatever implementation you are using. Character sets can have interesting interactions with filenames when they move to between machines.</p>\n\n<p><strong>Translating Strings</strong></p>\n\n<p>Translators are, generally speaking, not coders. If you send a source file to a translator, they will break it. Strings should be extracted to resource files (e.g. properties files in Java or resource DLLs in Visual C++). Translators should be given files that are difficult to break and tools that don't let them break them.</p>\n\n<p>Translators do not know where strings come from in a product. It is difficult to translate a string without context. If you do not provide guidance, the quality of the translation will suffer.</p>\n\n<p>While on the subject of context, you may see the same string \"foo\" crop up in multiple times and think it would be more efficient to have all instances in the UI point to the same resource. This is a bad idea. Words may be very context-sensitive in some languages.</p>\n\n<p>Translating strings costs money. If you release a new version of a product, it makes sense to recover the old versions. Have tools to recover strings from your old resource files.</p>\n\n<p>String concatenation and manual manipulation of strings should be minimized. Use the format functions where applicable.</p>\n\n<p>Translators need to be able to modify hotkeys. <kbd>Ctrl</kbd>+<kbd>P</kbd> is print in English; the Germans use <kbd>Ctrl</kbd>+<kbd>D</kbd>.</p>\n\n<p>If you have a translation process that requires someone to manually cut and paste strings at any time, you are asking for trouble.</p>\n\n<p><strong>Dates, Times, Calendars, Currency, Number Formats, Time Zones</strong></p>\n\n<p>These can all vary from country to country. A comma may be used to denote decimal places. Times may be in 24hour notation. Not everyone uses the Gregorian calendar. You need to be unambiguous, too. If you take care to display dates as MM/DD/YYYY for the USA and DD/MM/YYYY for the UK on your website, the dates are ambiguous unless the user knows you've done it.</p>\n\n<p><strong>Especially Currency</strong></p>\n\n<p>The Locale functions provided in the class libraries will give you the local currency symbol, but you can't just stick a pound (sterling) or euro symbol in front of a value that gives a price in dollars.</p>\n\n<p><strong>User Interfaces</strong></p>\n\n<p>Layout should be dynamic. Not only are strings likely to double in length on translation, the entire UI may need to be inverted (Hebrew; Arabic) so that the controls run from right to left. And that is before we get to Asia.</p>\n\n<p><strong>Testing Prior To Translation</strong></p>\n\n<ul>\n<li>Use static analysis of your code to locate problems. At a bare minimum, leverage the tools built into your IDE. (Eclipse users can go to Window > Preferences > Java > Compiler > Errors/Warnings and check for non-externalised strings.)</li>\n<li>Smoke test by simulating translation. It isn't difficult to parse a resource file and replace strings with a pseudo-translated version that doubles the length and inserts funky characters. You don't have to speak a language to use a foreign operating system. Modern systems should let you log in as a foreign user with translated strings and foreign locale. If you are familiar with your OS, you can figure out what does what without knowing a single word of the language.</li>\n<li>Keyboard maps and character set references are very useful.</li>\n<li>Virtualisation would be very useful here.</li>\n</ul>\n\n<p><strong>Non-technical Issues</strong></p>\n\n<p>Sometimes you have to be sensitive to cultural differences (offence or incomprehension may result). A mistake you often see is the use of flags as a visual cue choosing a website language or geography. Unless you want your software to declare sides in global politics, this is a bad idea. If you were French and offered the option for English with St. George's flag (the flag of England is a red cross on a white field), this might result in confusion for many English speakers - assume similar issues will arise with foreign languages and countries. Icons need to be vetted for cultural relevance. What does a thumbs-up or a green tick mean? Language should be relatively neutral - addressing users in a particular manner may be acceptable in one region, but considered rude in another.</p>\n\n<p><strong>Resources</strong></p>\n\n<p>C++ and Java programmers may find the ICU website useful: <a href=\"http://www.icu-project.org/\" rel=\"noreferrer\">http://www.icu-project.org/</a></p>\n",
        "votes": "47",
        "tags": "",
        "accepted": false
      },
      {
        "id": "906",
        "title": "",
        "text": "<p>I worked on a project for my previous employer that used .NET, and there was a built in .resx format we used.  We basically had a file that had all translations in the .resx file, and then multiple files with different translations.  The consequence of this is that you have to be very diligent about ensuring that all strings visible in the application are stored in the .resx, and anytime one is changed you have to update all languages you support.</p>\n\n<p>If you get lazy and don't notify the people in charge of translations, or you embed strings without going through your localization system, it will be a nightmare to try and fix it later.  Similarly, if localization is an afterthought, it will be very difficult to put in place.  Bottom line, if you don't have all visible strings stored externally in a standard place, it will be very difficult to find all that need to be localized.</p>\n\n<p>One other note, very strictly avoid concatenating visible strings directly, such as</p>\n\n<pre><code>String message = \"The \" + item + \" is on sale!\";\n</code></pre>\n\n<p>Instead, you must use something like</p>\n\n<pre><code>String message = String.Format(\"The {0} is on sale!\", item);\n</code></pre>\n\n<p>The reason for this is that different languages often order the words differently, and concatenating strings directly will need a new build to fix, but if you used some kind of string replacement mechanism like above, you can modify your .resx file (or whatever localization files you use) for the specific language that needs to reorder the words.</p>\n",
        "votes": "8",
        "tags": "",
        "accepted": false
      },
      {
        "id": "200981",
        "title": "",
        "text": "<p>One of the funnier things to discover: italics and bold text makrup does not work with CJK (Chinese/Japanese/Korean) characters. They simply become unreadable. (OK, I couldn't really read them before either, but especially bolding just creates ink blots)</p>\n",
        "votes": "2",
        "tags": "",
        "accepted": false
      },
      {
        "id": "921",
        "title": "",
        "text": "<p>Some fun things:</p>\n\n<ol>\n<li><p>Having a PHP and MySQL Application that works well with German and French, but now needs to support Russian and Chinese. I think I move this over to .net, as PHP's Unicode support is - in my opinion - not really good. Sure, juggling around with utf8_de/encode or the mbstring-functions is fun. Almost as fun as having Freddy Kr\u00fcger visit you at night...</p></li>\n<li><p>Realizing that some languages are a LOT more Verbose than others. German is a LOT more verbose than English usually, and seeing how the German Version destroys the User Interface because too little space was allocated was not fun. Some products gained some fame for their creative ways to work around that, with Oblivion's \"Schw.Tr.d.Le.En.W.\" being memorable :-)</p></li>\n<li><p>Playing around with date formats, woohoo! Yes, there ARE actually people in the world who use date formats where the day goes in the middle. Sooooo much fun trying to find out what 07/02/2008 is supposed to mean, just because some users might believe it could be July 2... But then again, you guys over the pond may believe the same about users who put the month in the middle :-P, especially because in English, July 2 sounds a lot better than 2nd of July, something that does not neccessarily apply to other languages (i.e. in German, you would never say Juli 2 but always Zweiter Juli). I use 2008-02-07 whenever possible. It's clear that it means February 7 and it sorts properly, but dd/mm vs. mm/dd can be a really tricky problem.</p></li>\n<li><p>Anoter fun thing, <a href=\"https://stackoverflow.com/questions/192/floating-point-number-parsing-is-there-a-catch-all-algorithm\">Number formats</a>! 10.000,50 vs 10,000.50 vs. 10 000,50 vs. 10'000,50... This is my biggest nightmare right now, having to support a multi-cultural environent but not having any way to reliably know what number format the user will use.</p></li>\n<li><p>Formal or Informal. In some language, there are two ways to address people, a formal way and a more informal way. In English, you just say \"You\", but in German you have to decide between the formal \"Sie\" and the informal \"Du\", same for French Tu/Vous. It's usually a safe bet to choose the formal way, but this is easily overlooked.</p></li>\n<li><p>Calendars. In Europe, the first day of the Week is Monday, whereas in the US it's Sunday. Calendar Widgets are nice. Showing a Calendar with Sunday on the left and Saturday on the right to a European user is not so nice, it confuses them.</p></li>\n</ol>\n",
        "votes": "15",
        "tags": "",
        "accepted": false
      },
      {
        "id": "177944",
        "title": "",
        "text": "<p>One thing no one have mentioned yet is strings with some warying part as in \"The unit will arive in 5 days\" or \"On Monday something happens.\" where 5 and Monday will change depending on state. It is not a good idea to split those in two and concatenate them. With only one varying part and good documentation you might get away with it, with two varying parts there will be some language that preferes to change the order of them.</p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "54340",
        "title": "",
        "text": "<p>One website I use has a translation method the owner calls \"wiki + machine translation\". This is a community based site so is obviously different to the needs of companies. </p>\n\n<p><a href=\"http://blog.bookmooch.com/2007/09/23/how-bookmooch-does-its-translations/\" rel=\"nofollow noreferrer\">http://blog.bookmooch.com/2007/09/23/how-bookmooch-does-its-translations/</a></p>\n",
        "votes": "",
        "tags": "",
        "accepted": false
      },
      {
        "id": "96000",
        "title": "",
        "text": "<p>I think everyone working in internationalization should be familiar with the Common Locale Data Repository, which is now a sub-project of Unicode:</p>\n\n<p><a href=\"http://unicode.org/cldr\" rel=\"nofollow noreferrer\">Common Locale Data Repository</a></p>\n\n<p>Those folks are working hard to establish a standard resource for all kinds of i18n issues: currency, geographical names, tons of stuff. Any project that's maintaining its own core local data given that this project exists is pretty bonkers, IMHO.</p>\n",
        "votes": "1",
        "tags": "",
        "accepted": false
      }
    ]
  }
]